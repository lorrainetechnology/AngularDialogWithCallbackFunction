{"ast":null,"code":"/**-----------------------------------------------------------------------------------------\n* Copyright © 2021 Progress Software Corporation. All rights reserved.\n* Licensed under commercial license. See LICENSE.md in the project root for more information\n*-------------------------------------------------------------------------------------------*/\nimport { __decorate, __metadata, __param } from 'tslib';\nimport { Injectable, EventEmitter, Input, Output, HostBinding, HostListener, Directive, Optional, ElementRef, Renderer2, NgZone, isDevMode, ContentChildren, QueryList, Component, NgModule, TemplateRef, ViewContainerRef, InjectionToken, Inject, ContentChild, ViewChild, ChangeDetectorRef, forwardRef } from '@angular/core';\nimport { BehaviorSubject, Subject, fromEvent, merge, Subscription } from 'rxjs';\nimport { Keys, isChanged, isDocumentAvailable, hasObservers, guid, EventsModule } from '@progress/kendo-angular-common';\nimport { LocalizationService, L10N_PREFIX, ComponentMessages } from '@progress/kendo-angular-l10n';\nimport { filter, take } from 'rxjs/operators';\nimport { validatePackage } from '@progress/kendo-licensing';\nimport { CommonModule } from '@angular/common';\nimport { PopupService, PopupModule } from '@progress/kendo-angular-popup';\nimport { sequence, query, style, stagger, animate, AnimationBuilder } from '@angular/animations';\n/**\n * @hidden\n */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@progress/kendo-angular-l10n';\nimport * as ɵngcc2 from '@angular/common';\nimport * as ɵngcc3 from '@progress/kendo-angular-popup';\nimport * as ɵngcc4 from '@angular/animations';\nimport * as ɵngcc5 from '@progress/kendo-angular-common';\nconst _c0 = [[[\"\", \"kendoButton\", \"\"]]];\nconst _c1 = [\"[kendoButton]\"];\n\nfunction ListComponent_li_1_1_ng_template_0_Template(rf, ctx) {}\n\nconst _c2 = function (a0, a1) {\n  return {\n    templateRef: a0,\n    $implicit: a1\n  };\n};\n\nfunction ListComponent_li_1_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ListComponent_li_1_1_ng_template_0_Template, 0, 0, \"ng-template\", 5);\n  }\n\n  if (rf & 2) {\n    const dataItem_r1 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"templateContext\", ɵngcc0.ɵɵpureFunction2(1, _c2, ctx_r3.itemTemplate == null ? null : ctx_r3.itemTemplate.templateRef, dataItem_r1));\n  }\n}\n\nfunction ListComponent_li_1_ng_template_2_span_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"span\", 8);\n  }\n\n  if (rf & 2) {\n    const dataItem_r1 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const ctx_r7 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r7.getIconClasses(dataItem_r1));\n  }\n}\n\nfunction ListComponent_li_1_ng_template_2_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"img\", 9);\n  }\n\n  if (rf & 2) {\n    const dataItem_r1 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵproperty(\"src\", dataItem_r1.imageUrl, ɵngcc0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction ListComponent_li_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ListComponent_li_1_ng_template_2_span_0_Template, 1, 1, \"span\", 6);\n    ɵngcc0.ɵɵtemplate(1, ListComponent_li_1_ng_template_2_img_1_Template, 1, 1, \"img\", 7);\n    ɵngcc0.ɵɵtext(2);\n  }\n\n  if (rf & 2) {\n    const dataItem_r1 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", dataItem_r1.icon || dataItem_r1.iconClass);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", dataItem_r1.imageUrl);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r4.getText(dataItem_r1), \" \");\n  }\n}\n\nconst _c3 = function (a1) {\n  return {\n    \"k-item\": true,\n    \"k-state-disabled\": a1\n  };\n};\n\nfunction ListComponent_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"li\", 2);\n    ɵngcc0.ɵɵlistener(\"click\", function ListComponent_li_1_Template_li_click_0_listener() {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r13);\n      const index_r2 = restoredCtx.index;\n      const ctx_r12 = ɵngcc0.ɵɵnextContext();\n      return ctx_r12.onClick(index_r2);\n    })(\"blur\", function ListComponent_li_1_Template_li_blur_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r13);\n      const ctx_r14 = ɵngcc0.ɵɵnextContext();\n      return ctx_r14.onBlur();\n    });\n    ɵngcc0.ɵɵtemplate(1, ListComponent_li_1_1_Template, 1, 4, undefined, 3);\n    ɵngcc0.ɵɵtemplate(2, ListComponent_li_1_ng_template_2_Template, 3, 3, \"ng-template\", 4);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const dataItem_r1 = ctx.$implicit;\n    const index_r2 = ctx.index;\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"index\", index_r2)(\"ngClass\", ɵngcc0.ɵɵpureFunction1(5, _c3, dataItem_r1.disabled));\n    ɵngcc0.ɵɵattribute(\"aria-disabled\", dataItem_r1.disabled ? true : false);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.itemTemplate == null ? null : ctx_r0.itemTemplate.templateRef);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !(ctx_r0.itemTemplate == null ? null : ctx_r0.itemTemplate.templateRef));\n  }\n}\n\nconst _c4 = [\"button\"];\nconst _c5 = [\"arrowButton\"];\nconst _c6 = [\"popupTemplate\"];\nconst _c7 = [\"container\"];\n\nfunction SplitButtonComponent_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"kendo-button-list\", 8);\n    ɵngcc0.ɵɵlistener(\"onItemClick\", function SplitButtonComponent_ng_template_8_Template_kendo_button_list_onItemClick_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r6);\n      const ctx_r5 = ɵngcc0.ɵɵnextContext();\n      return ctx_r5.onItemClick($event);\n    })(\"keydown\", function SplitButtonComponent_ng_template_8_Template_kendo_button_list_keydown_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r6);\n      const ctx_r7 = ɵngcc0.ɵɵnextContext();\n      return ctx_r7.keyDownHandler($event);\n    })(\"keypress\", function SplitButtonComponent_ng_template_8_Template_kendo_button_list_keypress_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r6);\n      const ctx_r8 = ɵngcc0.ɵɵnextContext();\n      return ctx_r8.keyPressHandler($event);\n    })(\"keyup\", function SplitButtonComponent_ng_template_8_Template_kendo_button_list_keyup_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r6);\n      const ctx_r9 = ɵngcc0.ɵɵnextContext();\n      return ctx_r9.keyUpHandler($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"id\", ctx_r3.listId)(\"data\", ctx_r3.data)(\"textField\", ctx_r3.textField)(\"itemTemplate\", ctx_r3.itemTemplate);\n    ɵngcc0.ɵɵattribute(\"dir\", ctx_r3.dir);\n  }\n}\n\nconst _c10 = [\"*\"];\nconst _c11 = [\"buttonList\"];\n\nfunction DropDownButtonComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"kendo-button-list\", 4, 5);\n    ɵngcc0.ɵɵlistener(\"onItemClick\", function DropDownButtonComponent_ng_template_3_Template_kendo_button_list_onItemClick_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r6);\n      const ctx_r5 = ɵngcc0.ɵɵnextContext();\n      return ctx_r5.onItemClick($event);\n    })(\"keydown\", function DropDownButtonComponent_ng_template_3_Template_kendo_button_list_keydown_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r6);\n      const ctx_r7 = ɵngcc0.ɵɵnextContext();\n      return ctx_r7.keyDownHandler($event);\n    })(\"keypress\", function DropDownButtonComponent_ng_template_3_Template_kendo_button_list_keypress_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r6);\n      const ctx_r8 = ɵngcc0.ɵɵnextContext();\n      return ctx_r8.keyPressHandler($event);\n    })(\"keyup\", function DropDownButtonComponent_ng_template_3_Template_kendo_button_list_keyup_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r6);\n      const ctx_r9 = ɵngcc0.ɵɵnextContext();\n      return ctx_r9.keyUpHandler($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"id\", ctx_r2.listId)(\"data\", ctx_r2.data)(\"textField\", ctx_r2.textField)(\"itemTemplate\", ctx_r2.itemTemplate);\n    ɵngcc0.ɵɵattribute(\"dir\", ctx_r2.dir);\n  }\n}\n\nfunction ChipComponent_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"span\", 7);\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r0.selectedIconClasses);\n  }\n}\n\nfunction ChipComponent_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"span\", 8);\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r1.iconClasses);\n  }\n}\n\nfunction ChipComponent_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 9);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r2.label, \" \");\n  }\n}\n\nfunction ChipComponent_ng_content_5_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵprojection(0, 0, [\"*ngIf\", \"!label\"]);\n  }\n}\n\nfunction ChipComponent_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"span\", 10);\n    ɵngcc0.ɵɵlistener(\"click\", function ChipComponent_span_6_Template_span_click_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r6);\n      const ctx_r5 = ɵngcc0.ɵɵnextContext();\n      return ctx_r5.onRemoveClick($event);\n    });\n    ɵngcc0.ɵɵelement(1, \"span\", 11);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r4.removeIconClasses);\n  }\n}\n\nfunction FloatingActionButtonComponent_2_ng_template_0_Template(rf, ctx) {}\n\nfunction FloatingActionButtonComponent_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, FloatingActionButtonComponent_2_ng_template_0_Template, 0, 0, \"ng-template\", 4);\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r1.fabTemplate == null ? null : ctx_r1.fabTemplate.templateRef);\n  }\n}\n\nfunction FloatingActionButtonComponent_ng_container_3_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"span\", 7);\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r6.iconClasses);\n  }\n}\n\nfunction FloatingActionButtonComponent_ng_container_3_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 8);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r7.text);\n  }\n}\n\nfunction FloatingActionButtonComponent_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, FloatingActionButtonComponent_ng_container_3_span_1_Template, 1, 1, \"span\", 5);\n    ɵngcc0.ɵɵtemplate(2, FloatingActionButtonComponent_ng_container_3_span_2_Template, 2, 1, \"span\", 6);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.icon || ctx_r2.iconClass);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.text);\n  }\n}\n\nfunction FloatingActionButtonComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"ul\", 9);\n    ɵngcc0.ɵɵlistener(\"click\", function FloatingActionButtonComponent_ng_template_4_Template_ul_click_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r9);\n      const ctx_r8 = ɵngcc0.ɵɵnextContext();\n      return ctx_r8.onItemClick($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r4.dialClass)(\"dialItems\", ctx_r4.dialItems)(\"dialItemTemplate\", ctx_r4.dialItemTemplate == null ? null : ctx_r4.dialItemTemplate.templateRef)(\"align\", ctx_r4.align);\n    ɵngcc0.ɵɵattribute(\"aria-labelledby\", ctx_r4.id);\n  }\n}\n\nconst _c12 = function (a0, a1) {\n  return {\n    keydown: a0,\n    click: a1\n  };\n};\n\nconst _c13 = [\"kendoDialList\", \"\"];\n\nfunction DialListComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelement(1, \"li\", 1);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    const idx_r2 = ctx.index;\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"item\", ctx_r0.dialItems[idx_r2])(\"index\", idx_r2)(\"dialItemTemplate\", ctx_r0.dialItemTemplate)(\"isFocused\", ctx_r0.isFocused(idx_r2))(\"ngClass\", item_r1.cssClass)(\"ngStyle\", item_r1.cssStyle)(\"align\", ctx_r0.align);\n  }\n}\n\nconst _c14 = [\"kendoDialItem\", \"\"];\n\nfunction DialItemComponent_0_ng_template_0_Template(rf, ctx) {}\n\nconst _c15 = function (a0, a1, a2) {\n  return {\n    $implicit: a0,\n    index: a1,\n    isFocused: a2\n  };\n};\n\nfunction DialItemComponent_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, DialItemComponent_0_ng_template_0_Template, 0, 0, \"ng-template\", 1);\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r0.dialItemTemplate)(\"ngTemplateOutletContext\", ɵngcc0.ɵɵpureFunction3(2, _c15, ctx_r0.item, ctx_r0.index, ctx_r0.isFocused));\n  }\n}\n\nfunction DialItemComponent_ng_container_1_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 4);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r3.item.label);\n  }\n}\n\nfunction DialItemComponent_ng_container_1_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"span\", 5);\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r4.iconClasses);\n  }\n}\n\nfunction DialItemComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, DialItemComponent_ng_container_1_span_1_Template, 2, 1, \"span\", 2);\n    ɵngcc0.ɵɵtemplate(2, DialItemComponent_ng_container_1_span_2_Template, 1, 1, \"span\", 3);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.item.label);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.item.icon || ctx_r1.item.iconClass);\n  }\n}\n\nlet KendoButtonService = /*#__PURE__*/(() => {\n  let KendoButtonService = class KendoButtonService {\n    /**\n     * @hidden\n     */\n    constructor() {\n      this.buttonLookChange = new BehaviorSubject('default');\n      this.buttonClicked = new Subject();\n      this.buttonClicked$ = this.buttonClicked.asObservable();\n    }\n\n    click(button) {\n      this.buttonClicked.next(button);\n    }\n\n    setButtonLook(look) {\n      this.buttonLookChange.next(look);\n    }\n\n  };\n\n  KendoButtonService.ɵfac = function KendoButtonService_Factory(t) {\n    return new (t || KendoButtonService)();\n  };\n\n  KendoButtonService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: KendoButtonService,\n    factory: function (t) {\n      return KendoButtonService.ɵfac(t);\n    }\n  });\n  /**\n   * @hidden\n   */\n\n  return KendoButtonService;\n})();\nconst packageMetadata = {\n  name: '@progress/kendo-angular-buttons',\n  productName: 'Kendo UI for Angular',\n  productCodes: ['KENDOUIANGULAR', 'KENDOUICOMPLETE'],\n  publishDate: 1635937762,\n  version: '',\n  licensingDocsUrl: 'https://www.telerik.com/kendo-angular-ui/my-license/?utm_medium=product&utm_source=kendoangular&utm_campaign=kendo-ui-angular-purchase-license-keys-warning'\n};\nconst SPAN_TAG_NAME = 'SPAN';\n/**\n * Represents the Kendo UI Button component for Angular.\n */\n\nlet ButtonDirective = /*#__PURE__*/(() => {\n  let ButtonDirective = class ButtonDirective {\n    constructor(element, renderer, service, localization, ngZone) {\n      this.service = service;\n      this.ngZone = ngZone;\n      /**\n       * Provides visual styling that indicates if the Button is active.\n       * By default, `toggleable` is set to `false`.\n       */\n\n      this.toggleable = false;\n      /**\n       * Adds visual weight to the Button and makes it primary.\n       */\n\n      this.primary = false;\n      /**\n       * Changes the visual appearance by using alternative styling options\n       * ([more information and examples]({% slug appearance_button %})).\n       *\n       * The available values are:\n       * * [`ButtonLook`]({% slug api_buttons_buttonlook %}) = `flat` | `outline`\n       * * `clear`\n       */\n\n      this.look = 'default';\n      /**\n       * @hidden\n       */\n\n      this.role = 'button';\n      /**\n       * Fires each time the selected state of a toggleable button is changed.\n       *\n       * The event argument is the new selected state (boolean).\n       */\n\n      this.selectedChange = new EventEmitter();\n      /**\n       * Fires each time the user clicks the button.\n       */\n\n      this.click = new EventEmitter();\n      this.isDisabled = false;\n      this.isIcon = false;\n      this.isIconClass = false;\n      this._focused = false;\n      this.domEvents = [];\n      validatePackage(packageMetadata);\n      this.direction = localization.rtl ? 'rtl' : 'ltr';\n      this.localizationChangeSubscription = localization.changes.subscribe(({\n        rtl\n      }) => this.direction = rtl ? 'rtl' : 'ltr');\n      this.element = element.nativeElement;\n      this.renderer = renderer;\n    }\n    /**\n     * Backwards-compatible alias\n     *\n     * @hidden\n     */\n\n\n    get togglable() {\n      return this.toggleable;\n    }\n    /**\n     * @hidden\n     */\n\n\n    set togglable(value) {\n      this.toggleable = value;\n    }\n    /**\n     * Sets the selected state of the Button.\n     */\n\n\n    get selected() {\n      return this._selected || false;\n    }\n\n    set selected(value) {\n      this._selected = value;\n    }\n    /**\n     * @hidden\n     */\n\n\n    set tabIndex(index) {\n      this.element.tabIndex = index;\n    }\n\n    get tabIndex() {\n      return this.element.tabIndex;\n    }\n    /**\n     * Defines the name for an existing icon in a Kendo UI theme.\n     * The icon is rendered inside the Button by a `span.k-icon` element.\n     */\n\n\n    set icon(icon) {\n      if (icon) {\n        this.iconSetter(icon, () => {\n          this.isIcon = true;\n          const classes = 'k-icon k-i-' + icon;\n          this.addIcon(classes);\n        });\n      } else {\n        this.isIcon = false;\n        this.updateIconNode();\n      }\n    }\n    /**\n     * Defines a CSS class&mdash;or multiple classes separated by spaces&mdash;\n     * which are applied to a `span` element inside the Button. Allows the usage of custom icons.\n     */\n\n\n    set iconClass(iconClassName) {\n      if (iconClassName) {\n        this.iconSetter(iconClassName, () => {\n          this.isIconClass = true;\n          this.addIcon(iconClassName);\n        });\n      } else {\n        this.isIconClass = false;\n        this.updateIconNode();\n      }\n    }\n    /**\n     * Defines a URL which is used for an `img` element inside the Button.\n     * The URL can be relative or absolute. If relative, it is evaluated with relation to the web page URL.\n     */\n\n\n    set imageUrl(imageUrl) {\n      if (imageUrl) {\n        this.iconSetter(imageUrl, this.addImgIcon.bind(this));\n      } else {\n        this.removeImageNode();\n      }\n    }\n    /**\n     * If set to `true`, it disables the Button.\n     */\n\n\n    set disabled(disabled) {\n      this.isDisabled = disabled;\n      this.renderer.setProperty(this.element, 'disabled', disabled);\n    }\n\n    get disabled() {\n      return this.isDisabled;\n    }\n\n    set isFocused(isFocused) {\n      this.toggleClass('k-state-focused', isFocused);\n      this._focused = isFocused;\n    }\n\n    get isFocused() {\n      return this._focused;\n    }\n\n    get classButton() {\n      return true;\n    }\n\n    get classPrimary() {\n      return this.primary;\n    }\n\n    get isToggleable() {\n      return this.toggleable;\n    }\n\n    get isFlat() {\n      return this.look === 'flat';\n    }\n\n    get isBare() {\n      return this.look === 'bare';\n    }\n\n    get isOutline() {\n      return this.look === 'outline';\n    }\n\n    get isClear() {\n      return this.look === 'clear';\n    }\n\n    get roleSetter() {\n      return this.role;\n    }\n\n    get classDisabled() {\n      return this.isDisabled;\n    }\n\n    get classActive() {\n      return this.selected;\n    }\n\n    get getDirection() {\n      return this.direction;\n    }\n    /**\n     * @hidden\n     */\n\n\n    onFocus() {\n      this.isFocused = true;\n    }\n    /**\n     * @hidden\n     */\n\n\n    onBlur() {\n      this.isFocused = false;\n    }\n\n    ngOnInit() {\n      const isSpan = this.element.tagName === SPAN_TAG_NAME;\n\n      if (this.service) {\n        this.buttonLookChangeSubscription = this.service.buttonLookChange.pipe(filter(look => look !== 'default')).subscribe(look => this.look = look);\n      }\n\n      if (!this.element.hasAttribute('role') && this.togglable) {\n        this.toggleAriaPressed(this.toggleable);\n      }\n\n      if (this.role) {\n        this.setAttribute('role', this.role);\n      }\n\n      this.ngZone.runOutsideAngular(() => {\n        this.domEvents.push(this.renderer.listen(this.element, 'click', this._onButtonClick.bind(this)));\n        this.domEvents.push(this.renderer.listen(this.element, 'keydown', event => {\n          if (isSpan && (event.keyCode === Keys.Space || event.keyCode === Keys.Enter)) {\n            this.click.emit(event);\n\n            this._onButtonClick();\n          }\n        }));\n      });\n    }\n\n    ngOnChanges(change) {\n      if (isChanged('togglable', change) || isChanged('toggleable', change)) {\n        this.toggleAriaPressed(this.toggleable);\n      }\n    }\n\n    ngAfterViewChecked() {\n      this.setIconTextClasses();\n    }\n\n    ngOnDestroy() {\n      this.imageNode = null;\n      this.iconNode = null;\n      this.renderer = null;\n      this.localizationChangeSubscription.unsubscribe();\n\n      if (this.service && this.buttonLookChangeSubscription) {\n        this.buttonLookChangeSubscription.unsubscribe();\n      }\n\n      clearTimeout(this.deferTimeout);\n      this.domEvents.forEach(unbindHandler => unbindHandler());\n    }\n    /**\n     * Focuses the Button component.\n     */\n\n\n    focus() {\n      if (isDocumentAvailable()) {\n        this.element.focus();\n        this.isFocused = true;\n      }\n    }\n    /**\n     * Blurs the Button component.\n     */\n\n\n    blur() {\n      if (isDocumentAvailable()) {\n        this.element.blur();\n        this.isFocused = false;\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    setAttribute(attribute, value) {\n      this.renderer.setAttribute(this.element, attribute, value);\n    }\n    /**\n     * @hidden\n     */\n\n\n    removeAttribute(attribute) {\n      this.renderer.removeAttribute(this.element, attribute);\n    }\n    /**\n     * @hidden\n     *\n     * Internal setter that triggers selectedChange\n     */\n\n\n    setSelected(value) {\n      const changed = this.selected !== value;\n      this.selected = value;\n      this.setAttribute('aria-pressed', this.selected.toString());\n      this.toggleClass('k-state-selected', this.selected);\n\n      if (changed && hasObservers(this.selectedChange)) {\n        this.ngZone.run(() => {\n          this.selectedChange.emit(value);\n        });\n      }\n    }\n\n    toggleAriaPressed(shouldSet) {\n      if (!isDocumentAvailable()) {\n        return;\n      }\n\n      if (shouldSet) {\n        this.setAttribute('aria-pressed', this.selected.toString());\n      } else {\n        this.removeAttribute('aria-pressed');\n      }\n    }\n\n    hasText() {\n      if (isDocumentAvailable()) {\n        return String(this.element.textContent).trim().length > 0;\n      } else {\n        return false;\n      }\n    }\n\n    addImgIcon(imageUrl) {\n      let renderer = this.renderer;\n\n      if (this.imageNode) {\n        renderer.setProperty(this.imageNode, 'src', imageUrl);\n      } else if (isDocumentAvailable()) {\n        this.imageNode = renderer.createElement('img');\n        renderer.setProperty(this.imageNode, 'src', imageUrl);\n        renderer.setProperty(this.imageNode, 'className', 'k-image');\n        renderer.setAttribute(this.imageNode, 'role', 'presentation');\n        this.prependChild(this.imageNode);\n      }\n    }\n\n    addIcon(classNames) {\n      let renderer = this.renderer;\n\n      if (this.iconNode) {\n        renderer.setProperty(this.iconNode, 'className', classNames);\n      } else if (isDocumentAvailable()) {\n        this.iconNode = renderer.createElement('span');\n        renderer.setProperty(this.iconNode, 'className', classNames);\n        renderer.setAttribute(this.iconNode, 'role', 'presentation');\n        this.prependChild(this.iconNode);\n      }\n    }\n\n    prependChild(node) {\n      this.defer(() => {\n        if (this.renderer && node !== this.element.firstChild) {\n          this.renderer.insertBefore(this.element, node, this.element.firstChild);\n        }\n      });\n    }\n\n    defer(callback) {\n      this.ngZone.runOutsideAngular(() => {\n        this.deferTimeout = setTimeout(callback, 0);\n      });\n    }\n\n    iconSetter(icon, insertIcon) {\n      if (icon) {\n        insertIcon(icon);\n      }\n\n      this.setIconTextClasses();\n    }\n\n    removeImageNode() {\n      if (this.imageNode && this.renderer.parentNode(this.imageNode)) {\n        this.renderer.removeChild(this.element, this.imageNode);\n        this.imageNode = null;\n      }\n    }\n\n    removeIconNode() {\n      if (this.iconNode && this.renderer.parentNode(this.iconNode)) {\n        this.renderer.removeChild(this.element, this.iconNode);\n        this.iconNode = null;\n      }\n    }\n\n    updateIconNode() {\n      if (!this.isIcon && !this.isIconClass) {\n        this.removeIconNode();\n      }\n    }\n\n    setIconTextClasses() {\n      const hasIcon = this.isIcon || this.isIconClass || this.imageNode;\n      const hasText = this.hasText();\n      this.toggleClass('k-button-icon', hasIcon && !hasText);\n      this.toggleClass('k-button-icontext', hasIcon && hasText);\n    }\n\n    toggleClass(className, add) {\n      if (add) {\n        this.renderer.addClass(this.element, className);\n      } else {\n        this.renderer.removeClass(this.element, className);\n      }\n    }\n\n    _onButtonClick() {\n      if (!this.disabled && this.service) {\n        this.ngZone.run(() => {\n          this.service.click(this);\n        });\n      }\n\n      if (this.togglable && !this.service) {\n        this.setSelected(!this.selected);\n      }\n    }\n\n  };\n\n  ButtonDirective.ɵfac = function ButtonDirective_Factory(t) {\n    return new (t || ButtonDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(KendoButtonService, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone));\n  };\n\n  ButtonDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: ButtonDirective,\n    selectors: [[\"button\", \"kendoButton\", \"\"], [\"span\", \"kendoButton\", \"\"]],\n    hostVars: 21,\n    hostBindings: function ButtonDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"focus\", function ButtonDirective_focus_HostBindingHandler() {\n          return ctx.onFocus();\n        })(\"blur\", function ButtonDirective_blur_HostBindingHandler() {\n          return ctx.onBlur();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"role\", ctx.roleSetter)(\"aria-disabled\", ctx.classDisabled)(\"dir\", ctx.getDirection);\n        ɵngcc0.ɵɵclassProp(\"k-button\", ctx.classButton)(\"k-primary\", ctx.classPrimary)(\"k-toggle-button\", ctx.isToggleable)(\"k-flat\", ctx.isFlat)(\"k-bare\", ctx.isBare)(\"k-outline\", ctx.isOutline)(\"k-button-clear\", ctx.isClear)(\"k-state-disabled\", ctx.classDisabled)(\"k-state-selected\", ctx.classActive);\n      }\n    },\n    inputs: {\n      toggleable: \"toggleable\",\n      primary: \"primary\",\n      look: \"look\",\n      role: \"role\",\n      togglable: \"togglable\",\n      selected: \"selected\",\n      tabIndex: \"tabIndex\",\n      icon: \"icon\",\n      iconClass: \"iconClass\",\n      imageUrl: \"imageUrl\",\n      disabled: \"disabled\"\n    },\n    outputs: {\n      selectedChange: \"selectedChange\",\n      click: \"click\"\n    },\n    exportAs: [\"kendoButton\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([LocalizationService, {\n      provide: L10N_PREFIX,\n      useValue: 'kendo.button'\n    }]), ɵngcc0.ɵɵNgOnChangesFeature]\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], ButtonDirective.prototype, \"toggleable\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [Boolean])], ButtonDirective.prototype, \"togglable\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], ButtonDirective.prototype, \"primary\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ButtonDirective.prototype, \"look\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [Boolean])], ButtonDirective.prototype, \"selected\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], ButtonDirective.prototype, \"tabIndex\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [String])], ButtonDirective.prototype, \"icon\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [String])], ButtonDirective.prototype, \"iconClass\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [String])], ButtonDirective.prototype, \"imageUrl\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [Boolean])], ButtonDirective.prototype, \"disabled\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ButtonDirective.prototype, \"role\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], ButtonDirective.prototype, \"selectedChange\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], ButtonDirective.prototype, \"click\", void 0);\n\n  __decorate([HostBinding('class.k-button'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ButtonDirective.prototype, \"classButton\", null);\n\n  __decorate([HostBinding('class.k-primary'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ButtonDirective.prototype, \"classPrimary\", null);\n\n  __decorate([HostBinding('class.k-toggle-button'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ButtonDirective.prototype, \"isToggleable\", null);\n\n  __decorate([HostBinding('class.k-flat'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ButtonDirective.prototype, \"isFlat\", null);\n\n  __decorate([HostBinding('class.k-bare'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ButtonDirective.prototype, \"isBare\", null);\n\n  __decorate([HostBinding('class.k-outline'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ButtonDirective.prototype, \"isOutline\", null);\n\n  __decorate([HostBinding('class.k-button-clear'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ButtonDirective.prototype, \"isClear\", null);\n\n  __decorate([HostBinding('attr.role'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], ButtonDirective.prototype, \"roleSetter\", null);\n\n  __decorate([HostBinding('attr.aria-disabled'), HostBinding('class.k-state-disabled'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ButtonDirective.prototype, \"classDisabled\", null);\n\n  __decorate([HostBinding('class.k-state-selected'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ButtonDirective.prototype, \"classActive\", null);\n\n  __decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], ButtonDirective.prototype, \"getDirection\", null);\n\n  __decorate([HostListener('focus'), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", []), __metadata(\"design:returntype\", void 0)], ButtonDirective.prototype, \"onFocus\", null);\n\n  __decorate([HostListener('blur'), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", []), __metadata(\"design:returntype\", void 0)], ButtonDirective.prototype, \"onBlur\", null);\n\n  ButtonDirective = __decorate([__param(2, Optional()), __metadata(\"design:paramtypes\", [ElementRef, Renderer2, KendoButtonService, LocalizationService, NgZone])], ButtonDirective);\n  /* tslint:disable:no-null-keyword */\n\n  /* tslint:disable:no-bitwise */\n\n  return ButtonDirective;\n})();\nconst resolvedPromise = Promise.resolve(null);\n/**\n * @hidden\n */\n\nconst isPresent = value => value !== null && value !== undefined;\n/**\n * @hidden\n */\n\n\nconst tick = f => resolvedPromise.then(f);\n/**\n * @hidden\n */\n\n\nfunction isDocumentNode(container) {\n  return container.nodeType === 9;\n}\n/**\n * @hidden\n */\n\n\nfunction closest(element, selector) {\n  if (element.closest) {\n    return element.closest(selector);\n  }\n\n  const matches = Element.prototype.matches ? (el, sel) => el.matches(sel) : (el, sel) => el.msMatchesSelector(sel);\n  let node = element;\n\n  while (node && !isDocumentNode(node)) {\n    if (matches(node, selector)) {\n      return node;\n    }\n\n    node = node.parentNode;\n  }\n}\n/**\n * @hidden\n */\n\n\nconst replaceMessagePlaceholder = (message, name, value) => message.replace(new RegExp(`\\{\\\\s*${name}\\\\s*\\}`, 'g'), value);\n/**\n * @hidden\n */\n\n\nclass PreventableEvent {\n  constructor() {\n    this.prevented = false;\n  }\n  /**\n   * Prevents the default action for a specified event.\n   * In this way, the source component suppresses the built-in behavior that follows the event.\n   */\n\n\n  preventDefault() {\n    this.prevented = true;\n  }\n  /**\n   * If the event is prevented by any of its subscribers, returns `true`.\n   *\n   * @returns `true` if the default action was prevented. Otherwise, returns `false`.\n   */\n\n\n  isDefaultPrevented() {\n    return this.prevented;\n  }\n\n}\n/**\n * @hidden\n */\n\n\nconst tabindex = 'tabindex';\n/**\n * Represents the Kendo UI ButtonGroup component for Angular.\n */\n\nlet ButtonGroupComponent = /*#__PURE__*/(() => {\n  let ButtonGroupComponent = class ButtonGroupComponent {\n    constructor(service, localization, element) {\n      this.service = service;\n      this.element = element;\n      /**\n       * By default, the selection mode of the ButtonGroup is set to `multiple`.\n       */\n\n      this.selection = 'multiple';\n      /**\n       * Changes the visual appearance by using alternative styling options\n       * ([more information and examples]({% slug styling_buttongroup %})).\n       * The `look` property of the ButtonGroup takes precedence over the `look` property\n       * of the individual buttons that are part of the group.\n       *\n       * The available values are:\n       * * `flat`\n       * * `outline`\n       */\n\n      this.look = 'default';\n      /**\n       * Fires every time keyboard navigation occurs.\n       */\n\n      this.navigate = new EventEmitter();\n      this._tabIndex = 0;\n      this.currentTabIndex = 0;\n      this.localizationChangeSubscription = localization.changes.subscribe(({\n        rtl\n      }) => this.direction = rtl ? 'rtl' : 'ltr');\n    }\n    /**\n     * Specifies the [`tabIndex`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the component.\n     */\n\n\n    set tabIndex(value) {\n      this._tabIndex = value;\n      this.currentTabIndex = value;\n    }\n\n    get tabIndex() {\n      return this._tabIndex;\n    }\n\n    get wrapperClass() {\n      return true;\n    }\n\n    get disabledClass() {\n      return this.disabled;\n    }\n\n    get stretchedClass() {\n      return !!this.width;\n    }\n\n    get isFlat() {\n      return this.look === 'flat';\n    }\n\n    get isBare() {\n      return this.look === 'bare';\n    }\n\n    get isOutline() {\n      return this.look === 'outline';\n    }\n\n    get getRole() {\n      return this.isSelectionSingle() ? 'radiogroup' : 'group';\n    }\n\n    get dir() {\n      return this.direction;\n    }\n\n    get ariaDisabled() {\n      return this.disabled;\n    }\n\n    get wrapperWidth() {\n      return this.width;\n    }\n\n    get wrapperTabIndex() {\n      return this.disabled ? undefined : this.currentTabIndex;\n    }\n    /**\n     * @hidden\n     */\n\n\n    keydown(event) {\n      if (!this.disabled) {\n        this.navigateFocus(event);\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    onFocus() {\n      this.currentTabIndex = -1;\n      const focusedIndex = this.buttons.toArray().findIndex(current => current.element.tabIndex !== -1);\n      const index = focusedIndex === -1 ? 0 : focusedIndex;\n      this.focus(this.buttons.filter((_current, i) => {\n        return i === index;\n      }));\n    }\n    /**\n     * @hidden\n     */\n\n\n    focusout(event) {\n      if (event.relatedTarget && event.relatedTarget.parentNode !== this.element.nativeElement) {\n        this.defocus(this.buttons.toArray());\n        this.currentTabIndex = this.tabIndex;\n      }\n    }\n\n    ngOnInit() {\n      this.service.setButtonLook(this.look);\n      this.subscription = this.service.buttonClicked$.subscribe(button => {\n        let newSelectionValue;\n\n        if (this.isSelectionSingle()) {\n          newSelectionValue = true;\n          this.deactivate(this.buttons.filter(current => current !== button));\n        } else {\n          this.defocus(this.buttons.toArray());\n          newSelectionValue = !button.selected;\n        }\n\n        if (button.togglable) {\n          button.setSelected(newSelectionValue);\n        }\n\n        button.setAttribute(tabindex, \"0\");\n      });\n    }\n\n    ngOnChanges(change) {\n      if (isChanged('disabled', change)) {\n        this.buttons.forEach(button => {\n          if (isPresent(this.disabled)) {\n            button.disabled = this.disabled;\n          }\n        });\n      }\n    }\n\n    ngAfterContentInit() {\n      this.buttons.forEach(button => {\n        if (button.selected) {\n          button.setAttribute(tabindex, \"0\");\n        } else {\n          button.setAttribute(tabindex, \"-1\");\n        }\n      });\n    }\n\n    ngAfterViewChecked() {\n      if (this.buttons.length) {\n        this.buttons.first.renderer.addClass(this.buttons.first.element, 'k-group-start');\n        this.buttons.last.renderer.addClass(this.buttons.last.element, 'k-group-end');\n      }\n    }\n\n    ngOnDestroy() {\n      this.subscription.unsubscribe();\n      this.localizationChangeSubscription.unsubscribe();\n    }\n\n    ngAfterContentChecked() {\n      this.verifySettings();\n    }\n\n    navigateFocus(event) {\n      let focusedIndex = this.buttons.toArray().findIndex(current => current.element.tabIndex !== -1);\n      const firstIndex = 0;\n      const lastIndex = this.buttons.length - 1;\n      const eventArgs = new PreventableEvent();\n\n      if (event.keyCode === Keys.ArrowRight && focusedIndex < lastIndex) {\n        this.navigate.emit(eventArgs);\n\n        if (!eventArgs.isDefaultPrevented()) {\n          this.defocus(this.buttons.toArray());\n          this.focus(this.buttons.filter((_current, index) => {\n            return index === focusedIndex + 1;\n          }));\n        }\n      }\n\n      if (event.keyCode === Keys.ArrowLeft && focusedIndex > firstIndex) {\n        this.navigate.emit(eventArgs);\n\n        if (!eventArgs.isDefaultPrevented()) {\n          this.defocus(this.buttons.toArray());\n          this.focus(this.buttons.filter((_current, index) => {\n            return index === focusedIndex - 1;\n          }));\n        }\n      }\n    }\n\n    deactivate(buttons) {\n      buttons.forEach(button => {\n        button.setSelected(false);\n        button.setAttribute(tabindex, \"-1\");\n      });\n    }\n\n    activate(buttons) {\n      buttons.forEach(button => {\n        button.setSelected(true);\n        button.setAttribute(tabindex, \"0\");\n        button.focus();\n      });\n    }\n\n    defocus(buttons) {\n      buttons.forEach(button => {\n        button.setAttribute(tabindex, \"-1\");\n      });\n    }\n\n    focus(buttons) {\n      buttons.forEach(button => {\n        button.setAttribute(tabindex, \"0\");\n        button.focus();\n      });\n    }\n\n    verifySettings() {\n      if (isDevMode()) {\n        if (this.isSelectionSingle() && this.buttons.filter(button => button.selected).length > 1) {\n          throw new Error('Having multiple selected buttons with single selection mode is not supported');\n        }\n      }\n    }\n\n    isSelectionSingle() {\n      return this.selection === 'single';\n    }\n\n  };\n\n  ButtonGroupComponent.ɵfac = function ButtonGroupComponent_Factory(t) {\n    return new (t || ButtonGroupComponent)(ɵngcc0.ɵɵdirectiveInject(KendoButtonService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef));\n  };\n\n  ButtonGroupComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: ButtonGroupComponent,\n    selectors: [[\"kendo-buttongroup\"]],\n    contentQueries: function ButtonGroupComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, ButtonDirective, 4);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.buttons = _t);\n      }\n    },\n    hostVars: 18,\n    hostBindings: function ButtonGroupComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"keydown\", function ButtonGroupComponent_keydown_HostBindingHandler($event) {\n          return ctx.keydown($event);\n        })(\"focus\", function ButtonGroupComponent_focus_HostBindingHandler() {\n          return ctx.onFocus();\n        })(\"focusout\", function ButtonGroupComponent_focusout_HostBindingHandler($event) {\n          return ctx.focusout($event);\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"role\", ctx.getRole)(\"dir\", ctx.dir)(\"aria-disabled\", ctx.ariaDisabled)(\"tabindex\", ctx.wrapperTabIndex);\n        ɵngcc0.ɵɵstyleProp(\"width\", ctx.wrapperWidth);\n        ɵngcc0.ɵɵclassProp(\"k-button-group\", ctx.wrapperClass)(\"k-state-disabled\", ctx.disabledClass)(\"k-button-group-stretched\", ctx.stretchedClass)(\"k-button-group-flat\", ctx.isFlat)(\"k-button-group-bare\", ctx.isBare)(\"k-button-group-outline\", ctx.isOutline);\n      }\n    },\n    inputs: {\n      selection: \"selection\",\n      look: \"look\",\n      tabIndex: \"tabIndex\",\n      disabled: \"disabled\",\n      width: \"width\"\n    },\n    outputs: {\n      navigate: \"navigate\"\n    },\n    exportAs: [\"kendoButtonGroup\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([KendoButtonService, LocalizationService, {\n      provide: L10N_PREFIX,\n      useValue: 'kendo.buttongroup'\n    }]), ɵngcc0.ɵɵNgOnChangesFeature],\n    ngContentSelectors: _c1,\n    decls: 1,\n    vars: 0,\n    template: function ButtonGroupComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c0);\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2\n  });\n\n  __decorate([Input('disabled'), __metadata(\"design:type\", Boolean)], ButtonGroupComponent.prototype, \"disabled\", void 0);\n\n  __decorate([Input('selection'), __metadata(\"design:type\", String)], ButtonGroupComponent.prototype, \"selection\", void 0);\n\n  __decorate([Input('width'), __metadata(\"design:type\", String)], ButtonGroupComponent.prototype, \"width\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ButtonGroupComponent.prototype, \"look\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], ButtonGroupComponent.prototype, \"tabIndex\", null);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], ButtonGroupComponent.prototype, \"navigate\", void 0);\n\n  __decorate([ContentChildren(ButtonDirective), __metadata(\"design:type\", QueryList)], ButtonGroupComponent.prototype, \"buttons\", void 0);\n\n  __decorate([HostBinding('class.k-button-group'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ButtonGroupComponent.prototype, \"wrapperClass\", null);\n\n  __decorate([HostBinding('class.k-state-disabled'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ButtonGroupComponent.prototype, \"disabledClass\", null);\n\n  __decorate([HostBinding('class.k-button-group-stretched'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ButtonGroupComponent.prototype, \"stretchedClass\", null);\n\n  __decorate([HostBinding('class.k-button-group-flat'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ButtonGroupComponent.prototype, \"isFlat\", null);\n\n  __decorate([HostBinding('class.k-button-group-bare'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ButtonGroupComponent.prototype, \"isBare\", null);\n\n  __decorate([HostBinding('class.k-button-group-outline'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ButtonGroupComponent.prototype, \"isOutline\", null);\n\n  __decorate([HostBinding('attr.role'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], ButtonGroupComponent.prototype, \"getRole\", null);\n\n  __decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], ButtonGroupComponent.prototype, \"dir\", null);\n\n  __decorate([HostBinding('attr.aria-disabled'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ButtonGroupComponent.prototype, \"ariaDisabled\", null);\n\n  __decorate([HostBinding('style.width'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], ButtonGroupComponent.prototype, \"wrapperWidth\", null);\n\n  __decorate([HostBinding('attr.tabindex'), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [])], ButtonGroupComponent.prototype, \"wrapperTabIndex\", null);\n\n  __decorate([HostListener('keydown', ['$event']), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], ButtonGroupComponent.prototype, \"keydown\", null);\n\n  __decorate([HostListener('focus'), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", []), __metadata(\"design:returntype\", void 0)], ButtonGroupComponent.prototype, \"onFocus\", null);\n\n  __decorate([HostListener('focusout', ['$event']), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], ButtonGroupComponent.prototype, \"focusout\", null);\n\n  ButtonGroupComponent = __decorate([__metadata(\"design:paramtypes\", [KendoButtonService, LocalizationService, ElementRef])], ButtonGroupComponent);\n  /**\n   * Represents the [NgModule]({{ site.data.urls.angular['ngmodules'] }})\n   * definition for the Button directive.\n   *\n   * @example\n   *\n   * ```ts-no-run\n   * // Import the Button module\n   * import { ButtonModule } from '@progress/kendo-angular-buttons';\n   *\n   * // The browser platform with a compiler\n   * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n   *\n   * import { NgModule } from '@angular/core';\n   *\n   * // Import the app component\n   * import { AppComponent } from './app.component';\n   *\n   * // Define the app module\n   * _@NgModule({\n   *     declarations: [AppComponent], // declare app component\n   *     imports:      [BrowserModule, ButtonModule], // import Button module\n   *     bootstrap:    [AppComponent]\n   * })\n   * export class AppModule {}\n   *\n   * // Compile and launch the module\n   * platformBrowserDynamic().bootstrapModule(AppModule);\n   *\n   * ```\n   */\n\n  return ButtonGroupComponent;\n})();\nlet ButtonModule = /*#__PURE__*/(() => {\n  let ButtonModule = class ButtonModule {};\n\n  ButtonModule.ɵfac = function ButtonModule_Factory(t) {\n    return new (t || ButtonModule)();\n  };\n\n  ButtonModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: ButtonModule\n  });\n  ButtonModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({});\n  /**\n   * @hidden\n   *\n   * The exported package module.\n   *\n   * The package exports:\n   * - `ButtonGroupComponent`&mdash;The ButtonGroupComponent component class.\n   */\n\n  return ButtonModule;\n})();\nlet ButtonGroupModule = /*#__PURE__*/(() => {\n  let ButtonGroupModule = class ButtonGroupModule {};\n\n  ButtonGroupModule.ɵfac = function ButtonGroupModule_Factory(t) {\n    return new (t || ButtonGroupModule)();\n  };\n\n  ButtonGroupModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: ButtonGroupModule\n  });\n  ButtonGroupModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, ButtonModule]]\n  });\n  /**\n   * Used for rendering the list item content.\n   *\n   * To define the item template, nest a `<ng-template>` tag with the `kendo<ComponentName>ItemTemplate` directive inside the component tag.\n   *\n   * For the DropDownButton, use the `kendoDropDownButtonItemTemplate` directive.\n   * For the SplitButton, use the `kendoSplitButtonItemTemplate` directive.\n   *\n   * The template context is set to the current component. To get a reference to the current data item, use the `let-dataItem` directive.\n   *\n   * @example\n   * ```ts\n   * _@Component({\n   * selector: 'my-app',\n   * template: `\n   *  <kendo-splitbutton [data]=\"listItems\">\n   *    <ng-template kendoSplitButtonItemTemplate let-dataItem>\n   *      <span>{{dataItem}} option</span>\n   *    </ng-template>\n   *  </kendo-splitbutton>\n   *  <kendo-dropdownbutton [data]=\"listItems\">\n   *    <ng-template kendoDropDownButtonItemTemplate let-dataItem>\n   *      <span>{{dataItem}} option</span>\n   *    </ng-template>\n   *  </kendo-dropdownbutton>\n   * `\n   * })\n   * class AppComponent {\n   *   public listItems: Array<any> = [{\n   *      text: 'item1',\n   *      icon: 'refresh',\n   *      disabled: false,\n   *      click: (dataItem: any) => {\n   *          //action\n   *      }\n   *  }, {\n   *      text: 'item2',\n   *      icon: 'refresh',\n   *      disabled: false,\n   *      click: (dataItem: any) => {\n   *          //action\n   *      }\n   *  }]\n   * }\n   * ```\n   *\n   * For more examples, refer to the article on the [DropDownList templates]({% slug overview_ddl %}#templates).\n   */\n\n  return ButtonGroupModule;\n})();\nlet ButtonItemTemplateDirective = /*#__PURE__*/(() => {\n  let ButtonItemTemplateDirective = class ButtonItemTemplateDirective {\n    constructor(templateRef) {\n      this.templateRef = templateRef;\n    }\n\n  };\n\n  ButtonItemTemplateDirective.ɵfac = function ButtonItemTemplateDirective_Factory(t) {\n    return new (t || ButtonItemTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef));\n  };\n\n  ButtonItemTemplateDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: ButtonItemTemplateDirective,\n    selectors: [[\"\", \"kendoDropDownButtonItemTemplate\", \"\"], [\"\", \"kendoSplitButtonItemTemplate\", \"\"]]\n  });\n  ButtonItemTemplateDirective = __decorate([__metadata(\"design:paramtypes\", [TemplateRef])], ButtonItemTemplateDirective);\n  /**\n   * @hidden\n   */\n\n  return ButtonItemTemplateDirective;\n})();\nlet ListComponent = /*#__PURE__*/(() => {\n  let ListComponent = class ListComponent {\n    constructor() {\n      this.onItemClick = new EventEmitter();\n      this.onItemBlur = new EventEmitter();\n      validatePackage(packageMetadata);\n    }\n\n    getText(dataItem) {\n      if (dataItem) {\n        return this.textField ? dataItem[this.textField] : dataItem.text || dataItem;\n      }\n\n      return undefined;\n    }\n\n    getIconClasses(dataItem) {\n      const icon = dataItem.icon ? 'k-icon k-i-' + dataItem.icon : undefined;\n      const classes = {};\n      classes[icon || dataItem.iconClass] = true;\n      return classes;\n    }\n\n    onClick(index) {\n      this.onItemClick.emit(index);\n    }\n\n    onBlur() {\n      this.onItemBlur.emit();\n    }\n\n  };\n\n  ListComponent.ɵfac = function ListComponent_Factory(t) {\n    return new (t || ListComponent)();\n  };\n\n  ListComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: ListComponent,\n    selectors: [[\"kendo-button-list\"]],\n    inputs: {\n      data: \"data\",\n      textField: \"textField\",\n      itemTemplate: \"itemTemplate\"\n    },\n    outputs: {\n      onItemClick: \"onItemClick\",\n      onItemBlur: \"onItemBlur\"\n    },\n    decls: 2,\n    vars: 1,\n    consts: [[\"unselectable\", \"on\", \"role\", \"menu\", 1, \"k-list\", \"k-reset\"], [\"role\", \"menuitem\", \"unselectable\", \"on\", \"tabindex\", \"-1\", \"kendoButtonFocusable\", \"\", 3, \"index\", \"ngClass\", \"click\", \"blur\", 4, \"ngFor\", \"ngForOf\"], [\"role\", \"menuitem\", \"unselectable\", \"on\", \"tabindex\", \"-1\", \"kendoButtonFocusable\", \"\", 3, \"index\", \"ngClass\", \"click\", \"blur\"], [4, \"ngIf\"], [3, \"ngIf\"], [3, \"templateContext\"], [3, \"ngClass\", 4, \"ngIf\"], [\"class\", \"k-image\", \"alt\", \"\", 3, \"src\", 4, \"ngIf\"], [3, \"ngClass\"], [\"alt\", \"\", 1, \"k-image\", 3, \"src\"]],\n    template: function ListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"ul\", 0);\n        ɵngcc0.ɵɵtemplate(1, ListComponent_li_1_Template, 3, 7, \"li\", 1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.data);\n      }\n    },\n    directives: function () {\n      return [ɵngcc2.NgForOf, FocusableDirective, ɵngcc2.NgClass, ɵngcc2.NgIf, TemplateContextDirective];\n    },\n    encapsulation: 2\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", Array)], ListComponent.prototype, \"data\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ListComponent.prototype, \"textField\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", ButtonItemTemplateDirective)], ListComponent.prototype, \"itemTemplate\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], ListComponent.prototype, \"onItemClick\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], ListComponent.prototype, \"onItemBlur\", void 0);\n\n  ListComponent = __decorate([__metadata(\"design:paramtypes\", [])], ListComponent);\n  /**\n   * @hidden\n   */\n\n  return ListComponent;\n})();\nlet FocusService = /*#__PURE__*/(() => {\n  let FocusService = class FocusService {\n    /**\n     * @hidden\n     */\n    constructor() {\n      this.onFocus = new EventEmitter();\n    }\n\n    isFocused(index) {\n      return index === this.focused;\n    }\n\n    focus(index) {\n      if (this.isFocused(index)) {\n        return;\n      }\n\n      this.focused = index;\n      this.onFocus.emit(index);\n    }\n\n    resetFocus() {\n      this.focused = -1;\n    }\n\n    get focused() {\n      return this.focusedIndex;\n    }\n\n    set focused(index) {\n      this.focusedIndex = index;\n      this.onFocus.emit(index);\n    }\n\n  };\n\n  FocusService.ɵfac = function FocusService_Factory(t) {\n    return new (t || FocusService)();\n  };\n\n  FocusService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: FocusService,\n    factory: function (t) {\n      return FocusService.ɵfac(t);\n    }\n  });\n  /**\n   * @hidden\n   */\n\n  return FocusService;\n})();\nlet FocusableDirective = /*#__PURE__*/(() => {\n  let FocusableDirective = class FocusableDirective {\n    constructor(focusService, elementRef, renderer) {\n      this.focusService = focusService;\n      this.renderer = renderer;\n      this.element = elementRef.nativeElement;\n      this.subscribeEvents();\n    }\n\n    ngOnInit() {\n      if (this.index === this.focusService.focused) {\n        this.renderer.addClass(this.element, 'k-state-focused');\n      } else {\n        this.renderer.removeClass(this.element, 'k-state-focused');\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    ngOnDestroy() {\n      this.unsubscribeEvents();\n    }\n\n    subscribeEvents() {\n      if (!isDocumentAvailable()) {\n        return;\n      }\n\n      this.focusSubscription = this.focusService.onFocus.subscribe(index => {\n        if (this.index === index) {\n          this.renderer.addClass(this.element, 'k-state-focused');\n          this.element.focus();\n        } else {\n          this.renderer.removeClass(this.element, 'k-state-focused');\n        }\n      });\n    }\n\n    unsubscribeEvents() {\n      if (!isDocumentAvailable()) {\n        return;\n      }\n\n      if (this.focusSubscription) {\n        this.focusSubscription.unsubscribe();\n      }\n    }\n\n  };\n\n  FocusableDirective.ɵfac = function FocusableDirective_Factory(t) {\n    return new (t || FocusableDirective)(ɵngcc0.ɵɵdirectiveInject(FocusService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2));\n  };\n\n  FocusableDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: FocusableDirective,\n    selectors: [[\"\", \"kendoButtonFocusable\", \"\"]],\n    inputs: {\n      index: \"index\"\n    }\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], FocusableDirective.prototype, \"index\", void 0);\n\n  FocusableDirective = __decorate([__metadata(\"design:paramtypes\", [FocusService, ElementRef, Renderer2])], FocusableDirective);\n  /**\n   * @hidden\n   */\n\n  return FocusableDirective;\n})();\nlet TemplateContextDirective = /*#__PURE__*/(() => {\n  let TemplateContextDirective = class TemplateContextDirective {\n    constructor(viewContainerRef) {\n      this.viewContainerRef = viewContainerRef;\n    }\n\n    set templateContext(context) {\n      if (this.insertedViewRef) {\n        this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.insertedViewRef));\n        this.insertedViewRef = undefined;\n      }\n\n      if (context.templateRef) {\n        this.insertedViewRef = this.viewContainerRef.createEmbeddedView(context.templateRef, context);\n      }\n    }\n\n  };\n\n  TemplateContextDirective.ɵfac = function TemplateContextDirective_Factory(t) {\n    return new (t || TemplateContextDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef));\n  };\n\n  TemplateContextDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: TemplateContextDirective,\n    selectors: [[\"\", \"templateContext\", \"\"]],\n    inputs: {\n      templateContext: \"templateContext\"\n    }\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], TemplateContextDirective.prototype, \"templateContext\", null);\n\n  TemplateContextDirective = __decorate([__metadata(\"design:paramtypes\", [ViewContainerRef])], TemplateContextDirective);\n  return TemplateContextDirective;\n})();\nconst EXPORTED_DIRECTIVES = [ListComponent, FocusableDirective, ButtonItemTemplateDirective, TemplateContextDirective];\n/**\n * @hidden\n */\n\nlet ListModule = /*#__PURE__*/(() => {\n  let ListModule = class ListModule {};\n\n  ListModule.ɵfac = function ListModule_Factory(t) {\n    return new (t || ListModule)();\n  };\n\n  ListModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: ListModule\n  });\n  ListModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule]]\n  });\n  /**\n   * @hidden\n   */\n\n  return ListModule;\n})();\nvar KeyEvents = /*#__PURE__*/(() => {\n  (function (KeyEvents) {\n    KeyEvents[KeyEvents[\"keydown\"] = 0] = \"keydown\";\n    KeyEvents[KeyEvents[\"keypress\"] = 1] = \"keypress\";\n    KeyEvents[KeyEvents[\"keyup\"] = 2] = \"keyup\";\n  })(KeyEvents || (KeyEvents = {}));\n\n  return KeyEvents;\n})();\n\n/**\n * @hidden\n */\nvar NavigationAction = /*#__PURE__*/(() => {\n  (function (NavigationAction) {\n    NavigationAction[NavigationAction[\"Undefined\"] = 0] = \"Undefined\";\n    NavigationAction[NavigationAction[\"Open\"] = 1] = \"Open\";\n    NavigationAction[NavigationAction[\"Close\"] = 2] = \"Close\";\n    NavigationAction[NavigationAction[\"Enter\"] = 3] = \"Enter\";\n    NavigationAction[NavigationAction[\"EnterPress\"] = 4] = \"EnterPress\";\n    NavigationAction[NavigationAction[\"EnterUp\"] = 5] = \"EnterUp\";\n    NavigationAction[NavigationAction[\"Tab\"] = 6] = \"Tab\";\n    NavigationAction[NavigationAction[\"Esc\"] = 7] = \"Esc\";\n    NavigationAction[NavigationAction[\"Navigate\"] = 8] = \"Navigate\";\n  })(NavigationAction || (NavigationAction = {}));\n\n  return NavigationAction;\n})();\n\n/* tslint:disable:deprecation */\n\n/**\n * @hidden\n */\nlet ListButton = /*#__PURE__*/(() => {\n  class ListButton {\n    constructor(focusService, navigationService, wrapperRef, _zone, localization, cdr) {\n      this.focusService = focusService;\n      this.navigationService = navigationService;\n      this.wrapperRef = wrapperRef;\n      this._zone = _zone;\n      this.cdr = cdr;\n      this._open = false;\n      this._disabled = false;\n      this._active = false;\n      this._popupSettings = {\n        animate: true,\n        popupClass: ''\n      };\n      this.listId = guid();\n      this._isFocused = false;\n      this.focusService = focusService;\n      this.navigationService = navigationService;\n      this.wrapper = wrapperRef.nativeElement;\n      this.localizationChangeSubscription = localization.changes.subscribe(({\n        rtl\n      }) => this.direction = rtl ? 'rtl' : 'ltr');\n      this.subscribeEvents();\n    }\n\n    get popupClasses() {\n      const popupClasses = ['k-list-container', 'k-reset', 'k-group'];\n\n      if (this._popupSettings.popupClass) {\n        popupClasses.push(this._popupSettings.popupClass);\n      }\n\n      return popupClasses.join(' ');\n    }\n\n    get openState() {\n      return this._open;\n    }\n\n    set openState(open) {\n      this._open = open;\n    }\n    /**\n     * @hidden\n     */\n\n\n    togglePopupVisibility() {\n      if (this._disabled) {\n        return;\n      }\n\n      this.openState = !this.openState;\n\n      if (!this.openState) {\n        this.focusService.focus(-1);\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    onItemClick(index) {\n      this.emitItemClickHandler(index);\n      setTimeout(() => this.focusWrapper(), 1);\n    }\n\n    ngOnDestroy() {\n      this.openState = false;\n      this.unsubscribeEvents();\n      clearTimeout(this.focusFirstTimeout);\n      clearTimeout(this.blurTimeout);\n\n      if (this.localizationChangeSubscription) {\n        this.localizationChangeSubscription.unsubscribe();\n      }\n    }\n\n    subscribeEvents() {\n      if (!isDocumentAvailable()) {\n        return;\n      }\n\n      this.subscribeListItemFocusEvent();\n      this.subscribeComponentBlurredEvent();\n      this.subscribeNavigationEvents();\n    }\n\n    subscribeListItemFocusEvent() {\n      this.focusSubscription = this.focusService.onFocus.subscribe(() => {\n        this._isFocused = true;\n      });\n    }\n\n    subscribeComponentBlurredEvent() {\n      this._zone.runOutsideAngular(() => {\n        this.tabSubscription = this.navigationService.tab.pipe(filter(() => this._isFocused)).subscribe(this.handleTab.bind(this));\n        this.componentBlurredSubscription = fromEvent(document, 'click').pipe(filter(event => !this.wrapperContains(event.target)), filter(() => this._isFocused)).subscribe(() => this._zone.run(() => this.blurWrapper()));\n      });\n    }\n\n    subscribeNavigationEvents() {\n      this.navigationSubscription = this.navigationService.navigate.subscribe(this.focusService.focus.bind(this.focusService));\n      this.enterUpSubscription = this.navigationService.enterup.subscribe(() => {\n        this.enterHandler();\n        this.focusWrapper();\n      });\n      this.openSubscription = this.navigationService.open.subscribe(() => {\n        if (!this._open) {\n          this.togglePopupVisibility();\n          this.focusFirstItem();\n        } else {\n          this.focusWrapper();\n        }\n      });\n      this.closeSubscription = merge(this.navigationService.close, this.navigationService.esc).subscribe(() => this.focusWrapper());\n    }\n\n    enterHandler() {} // tslint:disable-line\n\n\n    unsubscribeEvents() {\n      if (!isDocumentAvailable()) {\n        return;\n      }\n\n      this.unsubscribe(this.componentBlurredSubscription);\n      this.unsubscribe(this.focusSubscription);\n      this.unsubscribe(this.navigationSubscription);\n      this.unsubscribe(this.enterPressSubscription);\n      this.unsubscribe(this.enterUpSubscription);\n      this.unsubscribe(this.openSubscription);\n      this.unsubscribe(this.closeSubscription);\n      this.unsubscribe(this.tabSubscription);\n    }\n\n    unsubscribe(subscription) {\n      if (subscription) {\n        subscription.unsubscribe();\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    keyDownHandler(event) {\n      this.keyHandler(event);\n    }\n    /**\n     * @hidden\n     */\n\n\n    keyPressHandler(event) {\n      this.keyHandler(event, KeyEvents.keypress);\n    }\n    /**\n     * @hidden\n     */\n\n\n    keyUpHandler(event) {\n      this.keyHandler(event, KeyEvents.keyup);\n    }\n    /**\n     * @hidden\n     */\n\n\n    keyHandler(event, keyEvent) {\n      if (this._disabled) {\n        return;\n      }\n\n      let focused = this.focusService.focused || 0;\n      const eventData = event;\n      const action = this.navigationService.process({\n        altKey: eventData.altKey,\n        current: focused,\n        keyCode: eventData.keyCode,\n        keyEvent: keyEvent,\n        max: this._data ? this._data.length - 1 : 0,\n        min: 0\n      });\n\n      if (action !== NavigationAction.Undefined && action !== NavigationAction.Tab && (action !== NavigationAction.Enter || action === NavigationAction.Enter && this._open)) {\n        if (event.keyCode === Keys.Space && action === NavigationAction.EnterUp) {\n          this._open = false;\n        } else {\n          eventData.preventDefault();\n        }\n      }\n    }\n\n    emitItemClickHandler(index) {\n      const dataItem = this._data[index];\n\n      if (this._itemClick) {\n        this._itemClick.emit(dataItem);\n      }\n\n      if (dataItem && dataItem.click && !dataItem.disabled) {\n        dataItem.click(dataItem);\n      }\n    }\n\n    focusFirstItem() {\n      if (this._data && isPresent(this._data[0])) {\n        this.focusFirstTimeout = setTimeout(() => this.focusService.focus(0), 1);\n      }\n    }\n\n    focusWrapper() {\n      if (this._open) {\n        this.togglePopupVisibility();\n        this.focusButton();\n      }\n    }\n\n    wrapperContains(element) {\n      return this.wrapper === element || this.wrapper.contains(element);\n    }\n\n    blurWrapper(emit = true) {\n      if (this._open) {\n        this.togglePopupVisibility();\n      }\n\n      this._isFocused = false;\n\n      if (emit) {\n        this._blur.emit();\n\n        this.cdr.markForCheck();\n      }\n    }\n\n    focusButton() {\n      if (this.button) {\n        this.button.nativeElement.focus();\n      }\n    }\n\n    handleTab() {\n      this.focusButton();\n      this.blurWrapper(false);\n    }\n\n  }\n\n  ListButton.ɵfac = function ListButton_Factory(t) {\n    ɵngcc0.ɵɵinvalidFactory();\n  };\n\n  ListButton.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: ListButton\n  });\n  /**\n   * @hidden\n   */\n\n  return ListButton;\n})();\nconst NAVIGATION_CONFIG = new InjectionToken('navigation.config');\n/**\n * @hidden\n */\n\nlet NavigationService = /*#__PURE__*/(() => {\n  let NavigationService = class NavigationService {\n    constructor(config) {\n      this.navigate = new EventEmitter();\n      this.open = new EventEmitter();\n      this.close = new EventEmitter();\n      this.enter = new EventEmitter();\n      this.enterpress = new EventEmitter();\n      this.enterup = new EventEmitter();\n      this.tab = new EventEmitter();\n      this.esc = new EventEmitter();\n      this.useLeftRightArrows = config.useLeftRightArrows;\n    }\n\n    process(args) {\n      const keyCode = args.keyCode;\n      const keyEvent = args.keyEvent;\n      let index;\n      let action = NavigationAction.Undefined;\n\n      if (keyEvent === KeyEvents.keypress) {\n        if (this.isEnter(keyCode)) {\n          action = NavigationAction.EnterPress;\n        }\n      } else if (keyEvent === KeyEvents.keyup) {\n        if (this.isEnter(keyCode)) {\n          action = NavigationAction.EnterUp;\n        }\n      } else {\n        if (args.altKey && keyCode === Keys.ArrowDown) {\n          action = NavigationAction.Open;\n        } else if (args.altKey && keyCode === Keys.ArrowUp) {\n          action = NavigationAction.Close;\n        } else if (this.isEnter(keyCode)) {\n          action = NavigationAction.Enter;\n        } else if (keyCode === Keys.Escape) {\n          action = NavigationAction.Esc;\n        } else if (keyCode === Keys.Tab) {\n          action = NavigationAction.Tab;\n        } else if (keyCode === Keys.ArrowUp || this.useLeftRightArrows && keyCode === Keys.ArrowLeft) {\n          const step = args.flipNavigation ? 1 : -1;\n          const start = args.flipNavigation ? args.min : args.max;\n          const end = args.flipNavigation ? args.max : args.min;\n          index = this.next({\n            current: args.current,\n            start: start,\n            end: end,\n            step: step\n          });\n          action = NavigationAction.Navigate;\n        } else if (keyCode === Keys.ArrowDown || this.useLeftRightArrows && keyCode === Keys.ArrowRight) {\n          const step = args.flipNavigation ? -1 : 1;\n          const start = args.flipNavigation ? args.max : args.min;\n          const end = args.flipNavigation ? args.min : args.max;\n          index = this.next({\n            current: args.current,\n            start: start,\n            end: end,\n            step: step\n          });\n          action = NavigationAction.Navigate;\n        } else if (keyCode === Keys.Home) {\n          index = args.min;\n          action = NavigationAction.Navigate;\n        } else if (keyCode === Keys.End) {\n          index = args.max;\n          action = NavigationAction.Navigate;\n        }\n      }\n\n      if (action !== NavigationAction.Undefined) {\n        this[NavigationAction[action].toLowerCase()].emit(index);\n      }\n\n      return action;\n    }\n\n    isEnter(keyCode) {\n      return keyCode === Keys.Enter || keyCode === Keys.Space;\n    }\n\n    next(args) {\n      if (!isPresent(args.current)) {\n        return args.start;\n      } else {\n        return args.current !== args.end ? args.current + args.step : args.end;\n      }\n    }\n\n  };\n\n  NavigationService.ɵfac = function NavigationService_Factory(t) {\n    return new (t || NavigationService)(ɵngcc0.ɵɵinject(NAVIGATION_CONFIG));\n  };\n\n  NavigationService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NavigationService,\n    factory: function (t) {\n      return NavigationService.ɵfac(t);\n    }\n  });\n  NavigationService = __decorate([__param(0, Inject(NAVIGATION_CONFIG)), __metadata(\"design:paramtypes\", [Object])], NavigationService);\n  return NavigationService;\n})();\nconst NAVIGATION_SETTINGS = {\n  useLeftRightArrows: true\n};\nconst ɵ0 = NAVIGATION_SETTINGS;\nconst NAVIGATION_SETTINGS_PROVIDER = {\n  provide: NAVIGATION_CONFIG,\n  useValue: ɵ0\n};\n/**\n * Represents the Kendo UI SplitButton component for Angular.\n *\n * @example\n * ```ts\n * _@Component({\n * selector: 'my-app',\n * template: `\n *  <kendo-splitbutton [data]=\"data\" icon=\"paste\"\n *      (itemClick)=\"onSplitButtonItemClick($event)\"\n *      (buttonClick)=\"onSplitButtonClick()\">Paste</kendo-splitbutton>\n * `\n * })\n *\n * class AppComponent {\n *   public data: Array<any> = [{\n *       text: 'Keep Text Only',\n *       icon: 'paste-plain-text',\n *       click: () => { console.log('Keep Text Only click handler'); }\n *   }, {\n *       text: 'Paste as HTML',\n *       icon: 'paste-as-html'\n *   }, {\n *       text: 'Paste Markdown',\n *       icon: 'paste-markdown'\n *   }, {\n *       text: 'Set Default Paste'\n *   }];\n *\n *   public onSplitButtonClick(dataItem: any): void {\n *       console.log('Paste');\n *   }\n *\n *   public onSplitButtonItemClick(dataItem: any): void {\n *       if (dataItem) {\n *           console.log(dataItem.text);\n *       }\n *   }\n * }\n * ```\n */\n\nlet SplitButtonComponent = /*#__PURE__*/(() => {\n  let SplitButtonComponent = class SplitButtonComponent extends ListButton {\n    constructor(focusService, navigationService, wrapperRef, zone, popupService, elRef, localization, cdr) {\n      super(focusService, navigationService, wrapperRef, zone, localization, cdr);\n      this.popupService = popupService;\n      this.elRef = elRef;\n      this.localization = localization;\n      /**\n       * Sets the text of the SplitButton.\n       */\n\n      this.text = '';\n      /**\n       * Defines an icon to be rendered next to the button text\n       * ([see example]({% slug databinding_splitbutton %}#toc-arrays-of-complex-data)).\n       */\n\n      this.icon = '';\n      /**\n       * Defines an icon with a custom CSS class to be rendered next to the button text\n       * ([see example]({% slug databinding_splitbutton %}#toc-arrays-of-complex-data)).\n       */\n\n      this.iconClass = '';\n      /**\n       * Defines the type attribute of the main button\n       */\n\n      this.type = 'button';\n      /**\n       * Defines the location of an image to be displayed next to the button text\n       * ([see example]({% slug databinding_splitbutton %}#toc-arrays-of-complex-data)).\n       */\n\n      this.imageUrl = '';\n      /**\n       * Changes the visual appearance by using alternative styling options.\n       *\n       * The available values are:\n       * * `flat`\n       * * `outline`\n       */\n\n      this.look = 'default';\n      /**\n       * Specifies the [`tabIndex`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the component.\n       */\n\n      this.tabIndex = 0;\n      /**\n       * Specifies the name of the [font icon]({% slug icons %}#toc-list-of-font-icons) that will\n       * be rendered for the button which opens the popup.\n       */\n\n      this.arrowButtonIcon = 'arrow-s';\n      /**\n       * Fires each time the user clicks the main button.\n       *\n       * @example\n       * ```ts\n       * _@Component({\n       *    selector: 'my-app',\n       *    template: `\n       *        <kendo-splitbutton (buttonClick)=\"onSplitButtonClick()\" [data]=\"data\">\n       *            Reply\n       *        </kendo-splitbutton>\n       *    `\n       * })\n       * class AppComponent {\n       *    public data: Array<any> = ['Reply All', 'Forward', 'Reply & Delete'];\n       *\n       *    public onSplitButtonClick(): void {\n       *      console.log('SplitButton click');\n       *    }\n       * }\n       * ```\n       *\n       */\n\n      this.buttonClick = new EventEmitter();\n      /**\n       * Fires each time the user clicks on the drop-down list. The event data contains the data item bound to the clicked list item.\n       *\n       * @example\n       * ```ts\n       * _@Component({\n       *     selector: 'my-app',\n       *    template: `\n       *        <kendo-splitbutton (itemClick)=\"onSplitButtonItemClick($event)\" [data]=\"data\">\n       *          Reply\n       *      </kendo-splitbutton>\n       *    `\n       * })\n       * class AppComponent {\n       *    public data: Array<any> = ['Reply All', 'Forward', 'Reply & Delete'];\n       *\n       *   public onSplitButtonItemClick(dataItem?: string): void {\n       *        if (dataItem) {\n       *            console.log(dataItem);\n       *       }\n       *    }\n       * }\n       * ```\n       *\n       */\n\n      this.itemClick = new EventEmitter();\n      /**\n       * Fires each time the SplitButton gets focused.\n       */\n\n      this.onFocus = new EventEmitter(); //tslint:disable-line:no-output-rename\n\n      /**\n       * Fires each time the SplitButton gets blurred.\n       */\n\n      this.onBlur = new EventEmitter(); //tslint:disable-line:no-output-rename\n\n      /**\n       * Fires each time the popup is about to open.\n       * This event is preventable. If you cancel the event, the popup will remain closed.\n       */\n\n      this.open = new EventEmitter();\n      /**\n       * Fires each time the popup is about to close.\n       * This event is preventable. If you cancel the event, the popup will remain open.\n       */\n\n      this.close = new EventEmitter();\n      this.listId = guid();\n      /**\n       * @hidden\n       */\n\n      this.activeArrow = false;\n      this.buttonText = '';\n      this.lockFocus = false;\n      this._itemClick = this.itemClick;\n      this._blur = this.onBlur;\n    }\n    /**\n     * When set to `true`, disables a SplitButton item\n     * ([see example]({% slug databinding_splitbutton %}#toc-arrays-of-complex-data)).\n     */\n\n\n    set disabled(value) {\n      if (this.isOpen) {\n        this.toggle(false);\n      }\n\n      this._disabled = value;\n    }\n\n    get disabled() {\n      return this._disabled;\n    }\n    /**\n     * Configures the popup of the SplitButton.\n     *\n     * The available options are:\n     * - `animate: Boolean`&mdash;Controls the popup animation. By default, the open and close animations are enabled.\n     * - `popupClass: String`&mdash;Specifies a list of CSS classes that are used to style the popup.\n     * - `appendTo: \"root\" | \"component\" | ViewContainerRef`&mdash;Specifies the component to which the popup will be appended.\n     * - `align: \"left\" | \"center\" | \"right\"`&mdash;Specifies the alignment of the popup.\n     */\n\n\n    set popupSettings(settings) {\n      this._popupSettings = Object.assign({\n        animate: true,\n        popupClass: ''\n      }, settings);\n    }\n\n    get popupSettings() {\n      return this._popupSettings;\n    }\n    /**\n     * Sets the data of the SplitButton.\n     *\n     * > The data has to be provided in an array-like list.\n     */\n\n\n    set data(data) {\n      this._data = data || [];\n    }\n\n    get data() {\n      if (!this._data) {\n        this.data = [];\n      }\n\n      return this._data;\n    }\n    /**\n     * @hidden\n     */\n\n\n    set openState(open) {\n      if (this.disabled) {\n        return;\n      }\n\n      const eventArgs = new PreventableEvent();\n\n      if (open) {\n        this.open.emit(eventArgs);\n      } else {\n        this.close.emit(eventArgs);\n      }\n\n      if (eventArgs.isDefaultPrevented()) {\n        return;\n      }\n\n      this._toggle(open);\n    }\n    /**\n     * @hidden\n     */\n\n\n    get openState() {\n      return this._open;\n    }\n    /**\n     * @hidden\n     */\n\n\n    get active() {\n      return this._active;\n    }\n    /**\n     * @hidden\n     */\n\n\n    get componentTabIndex() {\n      return this.disabled ? -1 : this.tabIndex;\n    }\n\n    set isFocused(value) {\n      this._isFocused = value;\n    }\n\n    get isFocused() {\n      return this._isFocused && !this._disabled;\n    }\n\n    get isFlat() {\n      return this.look === 'flat';\n    }\n\n    get isOutline() {\n      return this.look === 'outline';\n    }\n\n    get widgetClasses() {\n      return true;\n    }\n\n    get dir() {\n      return this.direction;\n    }\n    /**\n     * @hidden\n     */\n\n\n    get ariaLabel() {\n      const localizationMsg = this.localization.get('splitButtonLabel') || '';\n      return replaceMessagePlaceholder(localizationMsg, 'buttonText', this.buttonText);\n    }\n    /**\n     * @hidden\n     */\n\n\n    onButtonFocus() {\n      if (!this.isFocused) {\n        this._isFocused = true;\n        this.onFocus.emit();\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    onArrowButtonClick() {\n      this.lockFocus = true;\n      this.togglePopupVisibility();\n    }\n    /**\n     * @hidden\n     */\n\n\n    toggleButtonActiveState(enable) {\n      this._active = enable;\n    }\n    /**\n     * @hidden\n     */\n\n\n    toggleArrowButtonActiveState(enable) {\n      this.activeArrow = enable;\n    }\n    /**\n     * @hidden\n     */\n\n\n    onButtonClick() {\n      this.lockFocus = true;\n      this.buttonClick.emit();\n    }\n    /**\n     * @hidden\n     */\n\n\n    onButtonBlur() {\n      if (!this.isOpen && !this.lockFocus) {\n        this.blurWrapper();\n      }\n\n      this.lockFocus = false;\n    }\n    /**\n     * @hidden\n     */\n\n\n    keydown(event) {\n      this.keyDownHandler(event);\n\n      if (event.keyCode === Keys.Space) {\n        this._active = true;\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    keypress(event) {\n      this.keyPressHandler(event);\n    }\n    /**\n     * @hidden\n     */\n\n\n    keyup(event) {\n      this._active = false;\n\n      if (event.keyCode !== Keys.Space) {\n        this.keyUpHandler(event);\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    ngAfterViewInit() {\n      this.updateButtonText();\n    }\n    /**\n     * @hidden\n     */\n\n\n    ngOnChanges(changes) {\n      if (changes.hasOwnProperty('text')) {\n        this.updateButtonText();\n      }\n\n      if (isChanged(\"popupSettings\", changes) && isPresent(this.popupRef)) {\n        const popup = this.popupRef.popup.instance;\n        const newSettings = changes.popupSettings.currentValue;\n        popup.popupClass = newSettings.popupClass;\n        popup.animate = newSettings.animate;\n        popup.popupAlign = this.popupAlign;\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    togglePopupVisibility() {\n      super.togglePopupVisibility();\n\n      if (isDocumentAvailable() && this.lockFocus) {\n        this.button.nativeElement.focus();\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    wrapperContains(element) {\n      return this.wrapper === element || this.wrapper.contains(element) || this.popupRef && this.popupRef.popupElement.contains(element);\n    }\n    /**\n     * @hidden\n     */\n\n\n    get anchorAlign() {\n      let align = {\n        horizontal: this.popupSettings.align || 'left',\n        vertical: 'bottom'\n      };\n\n      if (this.direction === 'rtl' && !isPresent(this.popupSettings.align)) {\n        align.horizontal = 'right';\n      }\n\n      return align;\n    }\n    /**\n     * @hidden\n     */\n\n\n    get popupAlign() {\n      let align = {\n        horizontal: this.popupSettings.align || 'left',\n        vertical: 'top'\n      };\n\n      if (this.direction === 'rtl' && !isPresent(this.popupSettings.align)) {\n        align.horizontal = 'right';\n      }\n\n      return align;\n    }\n    /**\n     * Focuses the SplitButton component.\n     */\n\n\n    focus() {\n      if (isDocumentAvailable()) {\n        this.button.nativeElement.focus();\n      }\n    }\n    /**\n     * Blurs the SplitButton component.\n     */\n\n\n    blur() {\n      if (isDocumentAvailable()) {\n        this.button.nativeElement.blur();\n        this.blurWrapper();\n      }\n    }\n\n    ngOnDestroy() {\n      super.ngOnDestroy();\n      this.destroyPopup();\n    }\n    /**\n     * Toggles the visibility of the popup.\n     * If the `toggle` method is used to open or close the popup, the `open` and `close` events will not be fired.\n     *\n     * @param open - The state of the popup.\n     */\n\n\n    toggle(open) {\n      if (this.disabled) {\n        return;\n      }\n\n      tick(() => this._toggle(open === undefined ? !this._open : open));\n    }\n    /**\n     * Returns the current open state of the popup.\n     */\n\n\n    get isOpen() {\n      return this.openState;\n    }\n\n    enterHandler() {\n      if (this.disabled) {\n        return;\n      }\n\n      if (this.openState) {\n        let focused = this.focusService.focused;\n\n        if (isPresent(focused) && focused !== -1) {\n          this.emitItemClickHandler(focused);\n        }\n      } else {\n        this.buttonClick.emit();\n      }\n    }\n\n    updateButtonText() {\n      if (isDocumentAvailable()) {\n        let innerText = this.wrapper.innerText.split('\\n').join('').trim(); //setTimout is needed because of `Expression has changed after it was checked.` error;\n\n        setTimeout(() => this.buttonText = innerText, 0);\n      }\n    }\n\n    get appendTo() {\n      const {\n        appendTo\n      } = this.popupSettings;\n\n      if (!appendTo || appendTo === 'root') {\n        return undefined;\n      }\n\n      return appendTo === 'component' ? this.containerRef : appendTo;\n    }\n\n    _toggle(open) {\n      this._open = open;\n      this.destroyPopup();\n\n      if (this._open) {\n        this.createPopup();\n      }\n    }\n\n    createPopup() {\n      this.popupRef = this.popupService.open({\n        anchor: this.elRef,\n        anchorAlign: this.anchorAlign,\n        animate: this.popupSettings.animate,\n        appendTo: this.appendTo,\n        content: this.popupTemplate,\n        popupAlign: this.popupAlign,\n        popupClass: this.popupClasses\n      });\n      this.popupRef.popupAnchorViewportLeave.subscribe(() => this.openState = false);\n      this.popupRef.popupOpen.subscribe(this.focusFirstItem.bind(this));\n    }\n\n    destroyPopup() {\n      if (this.popupRef) {\n        this.popupRef.close();\n        this.popupRef = null;\n      }\n    }\n\n  };\n\n  SplitButtonComponent.ɵfac = function SplitButtonComponent_Factory(t) {\n    return new (t || SplitButtonComponent)(ɵngcc0.ɵɵdirectiveInject(FocusService), ɵngcc0.ɵɵdirectiveInject(NavigationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.PopupService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef));\n  };\n\n  SplitButtonComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: SplitButtonComponent,\n    selectors: [[\"kendo-splitbutton\"]],\n    contentQueries: function SplitButtonComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, ButtonItemTemplateDirective, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.itemTemplate = _t.first);\n      }\n    },\n    viewQuery: function SplitButtonComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c4, 7);\n        ɵngcc0.ɵɵviewQuery(_c5, 7, ElementRef);\n        ɵngcc0.ɵɵviewQuery(_c6, 7);\n        ɵngcc0.ɵɵviewQuery(_c7, 7, ViewContainerRef);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.button = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.arrowButton = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.popupTemplate = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.containerRef = _t.first);\n      }\n    },\n    hostVars: 11,\n    hostBindings: function SplitButtonComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"keydown\", function SplitButtonComponent_keydown_HostBindingHandler($event) {\n          return ctx.keydown($event);\n        })(\"keypress\", function SplitButtonComponent_keypress_HostBindingHandler($event) {\n          return ctx.keypress($event);\n        })(\"keyup\", function SplitButtonComponent_keyup_HostBindingHandler($event) {\n          return ctx.keyup($event);\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"dir\", ctx.dir);\n        ɵngcc0.ɵɵclassProp(\"k-state-focused\", ctx.isFocused)(\"k-flat\", ctx.isFlat)(\"k-outline\", ctx.isOutline)(\"k-split-button\", ctx.widgetClasses)(\"k-button-group\", ctx.widgetClasses);\n      }\n    },\n    inputs: {\n      text: \"text\",\n      icon: \"icon\",\n      iconClass: \"iconClass\",\n      type: \"type\",\n      imageUrl: \"imageUrl\",\n      look: \"look\",\n      tabIndex: \"tabIndex\",\n      arrowButtonIcon: \"arrowButtonIcon\",\n      disabled: \"disabled\",\n      popupSettings: \"popupSettings\",\n      data: \"data\",\n      textField: \"textField\",\n      buttonClass: \"buttonClass\",\n      arrowButtonClass: \"arrowButtonClass\"\n    },\n    outputs: {\n      buttonClick: \"buttonClick\",\n      itemClick: \"itemClick\",\n      onFocus: \"focus\",\n      onBlur: \"blur\",\n      open: \"open\",\n      close: \"close\"\n    },\n    exportAs: [\"kendoSplitButton\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([FocusService, NavigationService, NAVIGATION_SETTINGS_PROVIDER, LocalizationService, {\n      provide: L10N_PREFIX,\n      useValue: 'kendo.splitbutton'\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature, ɵngcc0.ɵɵNgOnChangesFeature],\n    ngContentSelectors: _c10,\n    decls: 12,\n    vars: 24,\n    consts: function () {\n      let i18n_8;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\n         * @desc The text for the SplitButton aria-label\n         * @meaning kendo.splitbutton.splitButtonLabel\n         */\n        const MSG_EXTERNAL_109169670915733361$$DIST_FESM2015_INDEX_JS_9 = goog.getMsg(\"{$interpolation}\", {\n          \"interpolation\": \"\\uFFFD0\\uFFFD\"\n        });\n        i18n_8 = MSG_EXTERNAL_109169670915733361$$DIST_FESM2015_INDEX_JS_9;\n      } else {\n        i18n_8 = $localize`:kendo.splitbutton.splitButtonLabel|The text for the SplitButton aria-label␟ee2d4273142c9694614c71170691ca688717ef31␟109169670915733361:${\"\\uFFFD0\\uFFFD\"}:INTERPOLATION:`;\n      }\n\n      return [[\"kendoSplitButtonLocalizedMessages\", \"\", 6, \"splitButtonLabel\"], [\"splitButtonLabel\", i18n_8], [\"kendoButton\", \"\", 3, \"type\", \"look\", \"tabindex\", \"disabled\", \"icon\", \"iconClass\", \"imageUrl\", \"ngClass\", \"focus\", \"click\", \"blur\", \"mousedown\", \"mouseup\"], [\"button\", \"\"], [\"kendoButton\", \"\", \"type\", \"button\", 3, \"disabled\", \"icon\", \"look\", \"tabindex\", \"ngClass\", \"click\", \"mousedown\", \"mouseup\"], [\"arrowButton\", \"\"], [\"popupTemplate\", \"\"], [\"container\", \"\"], [3, \"id\", \"data\", \"textField\", \"itemTemplate\", \"onItemClick\", \"keydown\", \"keypress\", \"keyup\"]];\n    },\n    template: function SplitButtonComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementContainerStart(0, 0);\n        ɵngcc0.ɵɵi18nAttributes(1, 1);\n        ɵngcc0.ɵɵelementContainerEnd();\n        ɵngcc0.ɵɵelementStart(2, \"button\", 2, 3);\n        ɵngcc0.ɵɵlistener(\"focus\", function SplitButtonComponent_Template_button_focus_2_listener() {\n          return ctx.onButtonFocus();\n        })(\"click\", function SplitButtonComponent_Template_button_click_2_listener() {\n          return ctx.onButtonClick();\n        })(\"blur\", function SplitButtonComponent_Template_button_blur_2_listener() {\n          return ctx.onButtonBlur();\n        })(\"mousedown\", function SplitButtonComponent_Template_button_mousedown_2_listener() {\n          return ctx.toggleButtonActiveState(true);\n        })(\"mouseup\", function SplitButtonComponent_Template_button_mouseup_2_listener() {\n          return ctx.toggleButtonActiveState(false);\n        });\n        ɵngcc0.ɵɵtext(4);\n        ɵngcc0.ɵɵprojection(5);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"button\", 4, 5);\n        ɵngcc0.ɵɵlistener(\"click\", function SplitButtonComponent_Template_button_click_6_listener() {\n          return ctx.onArrowButtonClick();\n        })(\"mousedown\", function SplitButtonComponent_Template_button_mousedown_6_listener() {\n          return ctx.toggleArrowButtonActiveState(true);\n        })(\"mouseup\", function SplitButtonComponent_Template_button_mouseup_6_listener() {\n          return ctx.toggleArrowButtonActiveState(false);\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(8, SplitButtonComponent_ng_template_8_Template, 1, 5, \"ng-template\", null, 6, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵelementContainer(10, null, 7);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵi18nExp(\"{buttonText} splitbutton\");\n        ɵngcc0.ɵɵi18nApply(1);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵclassProp(\"k-state-active\", ctx.active);\n        ɵngcc0.ɵɵproperty(\"type\", ctx.type)(\"look\", ctx.look)(\"tabindex\", ctx.componentTabIndex)(\"disabled\", ctx.disabled)(\"icon\", ctx.icon)(\"iconClass\", ctx.iconClass)(\"imageUrl\", ctx.imageUrl)(\"ngClass\", ctx.buttonClass);\n        ɵngcc0.ɵɵattribute(\"aria-disabled\", ctx.disabled)(\"aria-expanded\", ctx.openState)(\"aria-haspopup\", true)(\"aria-owns\", ctx.listId)(\"aria-label\", ctx.ariaLabel);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ctx.text, \"\");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵclassProp(\"k-state-active\", ctx.activeArrow);\n        ɵngcc0.ɵɵproperty(\"disabled\", ctx.disabled)(\"icon\", ctx.arrowButtonIcon)(\"look\", ctx.look)(\"tabindex\", -1)(\"ngClass\", ctx.arrowButtonClass);\n      }\n    },\n    directives: function () {\n      return [LocalizedSplitButtonMessagesDirective, ButtonDirective, ɵngcc2.NgClass, ListComponent];\n    },\n    encapsulation: 2\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SplitButtonComponent.prototype, \"text\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SplitButtonComponent.prototype, \"icon\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SplitButtonComponent.prototype, \"iconClass\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SplitButtonComponent.prototype, \"type\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SplitButtonComponent.prototype, \"imageUrl\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SplitButtonComponent.prototype, \"look\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [Boolean])], SplitButtonComponent.prototype, \"disabled\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], SplitButtonComponent.prototype, \"popupSettings\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], SplitButtonComponent.prototype, \"tabIndex\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SplitButtonComponent.prototype, \"textField\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], SplitButtonComponent.prototype, \"data\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], SplitButtonComponent.prototype, \"buttonClass\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], SplitButtonComponent.prototype, \"arrowButtonClass\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], SplitButtonComponent.prototype, \"arrowButtonIcon\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], SplitButtonComponent.prototype, \"buttonClick\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], SplitButtonComponent.prototype, \"itemClick\", void 0);\n\n  __decorate([Output('focus'), __metadata(\"design:type\", EventEmitter)], SplitButtonComponent.prototype, \"onFocus\", void 0);\n\n  __decorate([Output('blur'), __metadata(\"design:type\", EventEmitter)], SplitButtonComponent.prototype, \"onBlur\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], SplitButtonComponent.prototype, \"open\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], SplitButtonComponent.prototype, \"close\", void 0);\n\n  __decorate([ContentChild(ButtonItemTemplateDirective, {\n    static: false\n  }), __metadata(\"design:type\", ButtonItemTemplateDirective)], SplitButtonComponent.prototype, \"itemTemplate\", void 0);\n\n  __decorate([ViewChild('button', {\n    static: true\n  }), __metadata(\"design:type\", ElementRef)], SplitButtonComponent.prototype, \"button\", void 0);\n\n  __decorate([ViewChild('arrowButton', {\n    static: true,\n    read: ElementRef\n  }), __metadata(\"design:type\", ElementRef)], SplitButtonComponent.prototype, \"arrowButton\", void 0);\n\n  __decorate([ViewChild('popupTemplate', {\n    static: true\n  }), __metadata(\"design:type\", TemplateRef)], SplitButtonComponent.prototype, \"popupTemplate\", void 0);\n\n  __decorate([ViewChild('container', {\n    read: ViewContainerRef,\n    static: true\n  }), __metadata(\"design:type\", ViewContainerRef)], SplitButtonComponent.prototype, \"containerRef\", void 0);\n\n  __decorate([HostBinding('class.k-state-focused'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [Boolean])], SplitButtonComponent.prototype, \"isFocused\", null);\n\n  __decorate([HostBinding('class.k-flat'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], SplitButtonComponent.prototype, \"isFlat\", null);\n\n  __decorate([HostBinding('class.k-outline'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], SplitButtonComponent.prototype, \"isOutline\", null);\n\n  __decorate([HostBinding('class.k-split-button'), HostBinding('class.k-button-group'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], SplitButtonComponent.prototype, \"widgetClasses\", null);\n\n  __decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], SplitButtonComponent.prototype, \"dir\", null);\n\n  __decorate([HostListener('keydown', ['$event']), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], SplitButtonComponent.prototype, \"keydown\", null);\n\n  __decorate([HostListener('keypress', ['$event']), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], SplitButtonComponent.prototype, \"keypress\", null);\n\n  __decorate([HostListener('keyup', ['$event']), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], SplitButtonComponent.prototype, \"keyup\", null);\n\n  SplitButtonComponent = __decorate([__metadata(\"design:paramtypes\", [FocusService, NavigationService, ElementRef, NgZone, PopupService, ElementRef, LocalizationService, ChangeDetectorRef])], SplitButtonComponent);\n  /**\n   * @hidden\n   */\n\n  return SplitButtonComponent;\n})();\nlet Messages = /*#__PURE__*/(() => {\n  class Messages extends ComponentMessages {}\n\n  Messages.ɵfac = /*@__PURE__*/function () {\n    let ɵMessages_BaseFactory;\n    return function Messages_Factory(t) {\n      return (ɵMessages_BaseFactory || (ɵMessages_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(Messages)))(t || Messages);\n    };\n  }();\n\n  Messages.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: Messages,\n    inputs: {\n      splitButtonLabel: \"splitButtonLabel\"\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", String)], Messages.prototype, \"splitButtonLabel\", void 0);\n\n  return Messages;\n})();\nvar LocalizedSplitButtonMessagesDirective_1;\n/**\n * @hidden\n */\n\nlet LocalizedSplitButtonMessagesDirective = LocalizedSplitButtonMessagesDirective_1 = class LocalizedSplitButtonMessagesDirective extends Messages {\n  constructor(service) {\n    super();\n    this.service = service;\n  }\n\n};\n\nLocalizedSplitButtonMessagesDirective.ɵfac = function LocalizedSplitButtonMessagesDirective_Factory(t) {\n  return new (t || LocalizedSplitButtonMessagesDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n};\n\nLocalizedSplitButtonMessagesDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: LocalizedSplitButtonMessagesDirective,\n  selectors: [[\"\", \"kendoSplitButtonLocalizedMessages\", \"\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: Messages,\n    useExisting: forwardRef(() => LocalizedSplitButtonMessagesDirective_1)\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n});\nLocalizedSplitButtonMessagesDirective = LocalizedSplitButtonMessagesDirective_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService])], LocalizedSplitButtonMessagesDirective);\nvar SplitButtonCustomMessagesComponent_1;\n/**\n * Custom component messages override default component messages\n * ([see example]({% slug rtl_buttons %}).\n */\n\nlet SplitButtonCustomMessagesComponent = SplitButtonCustomMessagesComponent_1 = class SplitButtonCustomMessagesComponent extends Messages {\n  constructor(service) {\n    super();\n    this.service = service;\n  }\n\n  get override() {\n    return true;\n  }\n\n};\n\nSplitButtonCustomMessagesComponent.ɵfac = function SplitButtonCustomMessagesComponent_Factory(t) {\n  return new (t || SplitButtonCustomMessagesComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n};\n\nSplitButtonCustomMessagesComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: SplitButtonCustomMessagesComponent,\n  selectors: [[\"kendo-splitbutton-messages\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: Messages,\n    useExisting: forwardRef(() => SplitButtonCustomMessagesComponent_1)\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n  decls: 0,\n  vars: 0,\n  template: function SplitButtonCustomMessagesComponent_Template(rf, ctx) {},\n  encapsulation: 2\n});\nSplitButtonCustomMessagesComponent = SplitButtonCustomMessagesComponent_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService])], SplitButtonCustomMessagesComponent);\n/**\n * @hidden\n *\n * The exported package module.\n *\n * The package exports:\n * - `SplitButtonComponent`&mdash;The SplitButtonComponent component class.\n */\n\nlet SplitButtonModule = /*#__PURE__*/(() => {\n  let SplitButtonModule = class SplitButtonModule {};\n\n  SplitButtonModule.ɵfac = function SplitButtonModule_Factory(t) {\n    return new (t || SplitButtonModule)();\n  };\n\n  SplitButtonModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: SplitButtonModule\n  });\n  SplitButtonModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, PopupModule, ButtonModule, ListModule], ListModule]\n  });\n  return SplitButtonModule;\n})();\nconst NAVIGATION_SETTINGS$1 = {\n  useLeftRightArrows: true\n};\nconst ɵ0$1 = NAVIGATION_SETTINGS$1;\nconst NAVIGATION_SETTINGS_PROVIDER$1 = {\n  provide: NAVIGATION_CONFIG,\n  useValue: ɵ0$1\n};\n/**\n * Represents the Kendo UI DropDownButton component for Angular.\n *\n * @example\n * ```ts\n * _@Component({\n * selector: 'my-app',\n * template: `\n *  <kendo-dropdownbutton [data]=\"data\">\n *    User Settings\n *  </kendo-dropdownbutton>\n * `\n * })\n * class AppComponent {\n *   public data: Array<any> = [{\n *       text: 'My Profile'\n *   }, {\n *       text: 'Friend Requests'\n *   }, {\n *       text: 'Account Settings'\n *   }, {\n *       text: 'Support'\n *   }, {\n *       text: 'Log Out'\n *   }];\n * }\n * ```\n */\n\nlet DropDownButtonComponent = /*#__PURE__*/(() => {\n  let DropDownButtonComponent = class DropDownButtonComponent extends ListButton {\n    constructor(focusService, navigationService, wrapperRef, zone, popupService, elRef, localization, cdr) {\n      super(focusService, navigationService, wrapperRef, zone, localization, cdr);\n      this.popupService = popupService;\n      this.elRef = elRef;\n      /**\n       * Defines the name of an existing icon in a Kendo UI theme.\n       */\n\n      this.icon = '';\n      /**\n       * Defines the list of CSS classes which are used for styling the Button with custom icons.\n       */\n\n      this.iconClass = '';\n      /**\n       * Defines a URL for styling the button with a custom image.\n       */\n\n      this.imageUrl = '';\n      /**\n       * Adds visual weight to the default button and makes it primary.\n       */\n\n      this.primary = false;\n      /**\n       * Changes the visual appearance by using alternative styling options.\n       *\n       * The available values are:\n       * * `flat`\n       * * `outline`\n       */\n\n      this.look = 'default';\n      /**\n       * Specifies the [`tabIndex`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the component.\n       */\n\n      this.tabIndex = 0;\n      /**\n       * Fires each time the user clicks on a drop-down list item. The event data contains the data item bound to the clicked list item.\n       */\n\n      this.itemClick = new EventEmitter();\n      /**\n       * Fires each time the popup is about to open.\n       * This event is preventable. If you cancel the event, the popup will remain closed.\n       */\n\n      this.open = new EventEmitter();\n      /**\n       * Fires each time the popup is about to close.\n       * This event is preventable. If you cancel the event, the popup will remain open.\n       */\n\n      this.close = new EventEmitter();\n      /**\n       * Fires each time the DropDownButton gets focused.\n       */\n\n      this.onFocus = new EventEmitter(); //tslint:disable-line:no-output-rename\n\n      /**\n       * Fires each time the DropDownButton gets blurred.\n       */\n\n      this.onBlur = new EventEmitter(); //tslint:disable-line:no-output-rename\n\n      this.listId = guid();\n      this._itemClick = this.itemClick;\n      this._blur = this.onBlur;\n    }\n    /**\n     * Configures the popup of the DropDownButton.\n     *\n     * The available options are:\n     * - `animate: Boolean`&mdash;Controls the popup animation. By default, the open and close animations are enabled.\n     * - `popupClass: String`&mdash;Specifies a list of CSS classes that are used to style the popup.\n     * - `appendTo: \"root\" | \"component\" | ViewContainerRef`&mdash;Specifies the component to which the popup will be appended.\n     * - `align: \"left\" | \"center\" | \"right\"`&mdash;Specifies the alignment of the popup.\n     */\n\n\n    set popupSettings(settings) {\n      this._popupSettings = Object.assign({\n        animate: true,\n        popupClass: ''\n      }, settings);\n    }\n\n    get popupSettings() {\n      return this._popupSettings;\n    }\n    /**\n     * Sets the disabled state of the DropDownButton.\n     */\n\n\n    set disabled(value) {\n      if (value && this.openState) {\n        this.openState = false;\n      }\n\n      this._disabled = value;\n    }\n\n    get disabled() {\n      return this._disabled;\n    }\n    /**\n     * Sets or gets the data of the DropDownButton.\n     *\n     * > The data has to be provided in an array-like list.\n     */\n\n\n    set data(data) {\n      this._data = data || [];\n    }\n\n    get data() {\n      return this._data;\n    }\n    /**\n     * @hidden\n     */\n\n\n    set openState(open) {\n      if (this.disabled) {\n        return;\n      }\n\n      const eventArgs = new PreventableEvent();\n\n      if (open) {\n        this.open.emit(eventArgs);\n      } else {\n        this.close.emit(eventArgs);\n      }\n\n      if (eventArgs.isDefaultPrevented()) {\n        return;\n      }\n\n      this._toggle(open);\n    }\n    /**\n     * @hidden\n     */\n\n\n    get openState() {\n      return this._open;\n    }\n    /**\n     * @hidden\n     */\n\n\n    get componentTabIndex() {\n      return this.disabled ? -1 : this.tabIndex;\n    }\n\n    get appendTo() {\n      const {\n        appendTo\n      } = this.popupSettings;\n\n      if (!appendTo || appendTo === 'root') {\n        return undefined;\n      }\n\n      return appendTo === 'component' ? this.container : appendTo;\n    }\n\n    get focused() {\n      return this._isFocused && !this._disabled;\n    }\n\n    get isFlat() {\n      return this.look === 'flat';\n    }\n\n    get isOutline() {\n      return this.look === 'outline';\n    }\n\n    get widgetClasses() {\n      return true;\n    }\n\n    get dir() {\n      return this.direction;\n    }\n    /**\n     * @hidden\n     */\n\n\n    get active() {\n      return this._active;\n    }\n    /**\n     * @hidden\n     */\n\n\n    keydown(event) {\n      this.keyDownHandler(event);\n\n      if (event.keyCode === Keys.Space) {\n        this._active = true;\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    keypress(event) {\n      this.keyPressHandler(event);\n    }\n    /**\n     * @hidden\n     */\n\n\n    keyup(event) {\n      this.keyUpHandler(event);\n      this._active = false;\n    }\n    /**\n     * @hidden\n     */\n\n\n    mousedown(event) {\n      if (this._disabled) {\n        event.preventDefault();\n      }\n\n      this._active = true;\n    }\n    /**\n     * @hidden\n     */\n\n\n    mouseup(event) {\n      if (this._disabled) {\n        event.preventDefault();\n      }\n\n      this._active = false;\n    }\n    /**\n     * @hidden\n     */\n\n\n    openPopup() {\n      this.togglePopupVisibility();\n    }\n    /**\n     * @hidden\n     */\n\n\n    onButtonBlur() {\n      if (!this.isOpen) {\n        this.blurWrapper();\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    get anchorAlign() {\n      let align = {\n        horizontal: this.popupSettings.align || 'left',\n        vertical: 'bottom'\n      };\n\n      if (this.direction === 'rtl' && !isPresent(this.popupSettings.align)) {\n        align.horizontal = 'right';\n      }\n\n      return align;\n    }\n    /**\n     * @hidden\n     */\n\n\n    get popupAlign() {\n      let align = {\n        horizontal: this.popupSettings.align || 'left',\n        vertical: 'top'\n      };\n\n      if (this.direction === 'rtl' && !isPresent(this.popupSettings.align)) {\n        align.horizontal = 'right';\n      }\n\n      return align;\n    }\n    /**\n     * Focuses the DropDownButton component.\n     */\n\n\n    focus() {\n      if (isDocumentAvailable()) {\n        this.button.nativeElement.focus();\n      }\n    }\n    /**\n     * Blurs the DropDownButton component.\n     */\n\n\n    blur() {\n      if (isDocumentAvailable()) {\n        this.button.nativeElement.blur();\n        this.blurWrapper();\n      }\n    }\n\n    ngOnChanges(changes) {\n      if (isChanged(\"popupSettings\", changes) && isPresent(this.popupRef)) {\n        const popup = this.popupRef.popup.instance;\n        const newSettings = changes.popupSettings.currentValue;\n        popup.popupClass = newSettings.popupClass;\n        popup.animate = newSettings.animate;\n        popup.popupAlign = this.popupAlign;\n      }\n    }\n\n    ngOnDestroy() {\n      super.ngOnDestroy();\n      this.destroyPopup();\n    }\n    /**\n     * Toggles the visibility of the popup.\n     * If the `toggle` method is used to open or close the popup, the `open` and `close` events will not be fired.\n     *\n     * @param open - The state of the popup.\n     */\n\n\n    toggle(open) {\n      if (this.disabled) {\n        return;\n      }\n\n      tick(() => this._toggle(open === undefined ? !this._open : open));\n    }\n    /**\n     * Returns the current open state of the popup.\n     */\n\n\n    get isOpen() {\n      return this.openState;\n    }\n    /**\n     * @hidden\n     */\n\n\n    handleFocus() {\n      if (!this._disabled && !this._isFocused) {\n        this._isFocused = true;\n        this.onFocus.emit();\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    wrapperContains(element) {\n      return this.wrapper === element || this.wrapper.contains(element) || this.popupRef && this.popupRef.popupElement.contains(element);\n    }\n\n    subscribeNavigationEvents() {\n      this.navigationSubscription = this.navigationService.navigate.subscribe(this.onArrowKeyNavigate.bind(this));\n      this.enterUpSubscription = this.navigationService.enterup.subscribe(this.onNavigationEnterUp.bind(this));\n      this.openSubscription = this.navigationService.open.subscribe(this.onNavigationOpen.bind(this));\n      this.closeSubscription = merge(this.navigationService.close, this.navigationService.esc).subscribe(this.onNavigationClose.bind(this));\n    }\n\n    onNavigationEnterUp() {\n      if (!this._disabled && !this.openState) {\n        this._active = false;\n      }\n\n      if (this.openState) {\n        let focused = this.focusService.focused;\n\n        if (isPresent(focused) && focused !== -1) {\n          this.emitItemClickHandler(focused);\n        }\n      }\n\n      this.togglePopupVisibility();\n\n      if (!this.openState && isDocumentAvailable()) {\n        this.button.nativeElement.focus();\n      }\n    }\n\n    onNavigationOpen() {\n      if (!this._disabled && !this.openState) {\n        this.togglePopupVisibility();\n      }\n    }\n\n    onNavigationClose() {\n      if (this.openState) {\n        this.togglePopupVisibility();\n\n        if (isDocumentAvailable()) {\n          this.button.nativeElement.focus();\n        }\n      }\n    }\n\n    onArrowKeyNavigate(index) {\n      this.focusService.focus(index);\n    }\n\n    _toggle(open) {\n      if (this._open === open) {\n        return;\n      }\n\n      this._open = open;\n      this.destroyPopup();\n\n      if (this._open) {\n        this.createPopup();\n      }\n    }\n\n    createPopup() {\n      this.popupRef = this.popupService.open({\n        anchor: this.elRef,\n        anchorAlign: this.anchorAlign,\n        animate: this.popupSettings.animate,\n        appendTo: this.appendTo,\n        content: this.popupTemplate,\n        popupAlign: this.popupAlign,\n        popupClass: this.popupClasses\n      });\n      this.popupRef.popupAnchorViewportLeave.subscribe(() => this.openState = false);\n      this.popupRef.popupOpen.subscribe(this.focusFirstItem.bind(this));\n    }\n\n    destroyPopup() {\n      if (this.popupRef) {\n        this.popupRef.close();\n        this.popupRef = null;\n      }\n    }\n\n  };\n\n  DropDownButtonComponent.ɵfac = function DropDownButtonComponent_Factory(t) {\n    return new (t || DropDownButtonComponent)(ɵngcc0.ɵɵdirectiveInject(FocusService), ɵngcc0.ɵɵdirectiveInject(NavigationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.PopupService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef));\n  };\n\n  DropDownButtonComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: DropDownButtonComponent,\n    selectors: [[\"kendo-dropdownbutton\"]],\n    contentQueries: function DropDownButtonComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, ButtonItemTemplateDirective, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.itemTemplate = _t.first);\n      }\n    },\n    viewQuery: function DropDownButtonComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c4, 7);\n        ɵngcc0.ɵɵviewQuery(_c11, 5);\n        ɵngcc0.ɵɵviewQuery(_c6, 7);\n        ɵngcc0.ɵɵviewQuery(_c7, 7, ViewContainerRef);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.button = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.buttonList = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.popupTemplate = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.container = _t.first);\n      }\n    },\n    hostVars: 9,\n    hostBindings: function DropDownButtonComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"keydown\", function DropDownButtonComponent_keydown_HostBindingHandler($event) {\n          return ctx.keydown($event);\n        })(\"keypress\", function DropDownButtonComponent_keypress_HostBindingHandler($event) {\n          return ctx.keypress($event);\n        })(\"keyup\", function DropDownButtonComponent_keyup_HostBindingHandler($event) {\n          return ctx.keyup($event);\n        })(\"mousedown\", function DropDownButtonComponent_mousedown_HostBindingHandler($event) {\n          return ctx.mousedown($event);\n        })(\"mouseup\", function DropDownButtonComponent_mouseup_HostBindingHandler($event) {\n          return ctx.mouseup($event);\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"dir\", ctx.dir);\n        ɵngcc0.ɵɵclassProp(\"k-state-focused\", ctx.focused)(\"k-flat\", ctx.isFlat)(\"k-outline\", ctx.isOutline)(\"k-dropdown-button\", ctx.widgetClasses);\n      }\n    },\n    inputs: {\n      icon: \"icon\",\n      iconClass: \"iconClass\",\n      imageUrl: \"imageUrl\",\n      primary: \"primary\",\n      look: \"look\",\n      tabIndex: \"tabIndex\",\n      popupSettings: \"popupSettings\",\n      disabled: \"disabled\",\n      data: \"data\",\n      textField: \"textField\",\n      buttonClass: \"buttonClass\"\n    },\n    outputs: {\n      itemClick: \"itemClick\",\n      open: \"open\",\n      close: \"close\",\n      onFocus: \"focus\",\n      onBlur: \"blur\"\n    },\n    exportAs: [\"kendoDropDownButton\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([FocusService, NavigationService, NAVIGATION_SETTINGS_PROVIDER$1, LocalizationService, {\n      provide: L10N_PREFIX,\n      useValue: 'kendo.dropdownbutton'\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature, ɵngcc0.ɵɵNgOnChangesFeature],\n    ngContentSelectors: _c10,\n    decls: 7,\n    vars: 14,\n    consts: [[\"kendoButton\", \"\", \"role\", \"menu\", \"type\", \"button\", 3, \"tabindex\", \"disabled\", \"icon\", \"iconClass\", \"imageUrl\", \"ngClass\", \"look\", \"primary\", \"click\", \"focus\", \"blur\"], [\"button\", \"\"], [\"popupTemplate\", \"\"], [\"container\", \"\"], [3, \"id\", \"data\", \"textField\", \"itemTemplate\", \"onItemClick\", \"keydown\", \"keypress\", \"keyup\"], [\"buttonList\", \"\"]],\n    template: function DropDownButtonComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"button\", 0, 1);\n        ɵngcc0.ɵɵlistener(\"click\", function DropDownButtonComponent_Template_button_click_0_listener() {\n          return ctx.openPopup();\n        })(\"focus\", function DropDownButtonComponent_Template_button_focus_0_listener() {\n          return ctx.handleFocus();\n        })(\"blur\", function DropDownButtonComponent_Template_button_blur_0_listener() {\n          return ctx.onButtonBlur();\n        });\n        ɵngcc0.ɵɵprojection(2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(3, DropDownButtonComponent_ng_template_3_Template, 2, 5, \"ng-template\", null, 2, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵelementContainer(5, null, 3);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"k-state-active\", ctx.active);\n        ɵngcc0.ɵɵproperty(\"tabindex\", ctx.componentTabIndex)(\"disabled\", ctx.disabled)(\"icon\", ctx.icon)(\"iconClass\", ctx.iconClass)(\"imageUrl\", ctx.imageUrl)(\"ngClass\", ctx.buttonClass)(\"look\", ctx.look)(\"primary\", ctx.primary);\n        ɵngcc0.ɵɵattribute(\"aria-disabled\", ctx.disabled)(\"aria-expanded\", ctx.openState)(\"aria-haspopup\", true)(\"aria-owns\", ctx.listId);\n      }\n    },\n    directives: [ButtonDirective, ɵngcc2.NgClass, ListComponent],\n    encapsulation: 2\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", String)], DropDownButtonComponent.prototype, \"icon\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], DropDownButtonComponent.prototype, \"iconClass\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], DropDownButtonComponent.prototype, \"imageUrl\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], DropDownButtonComponent.prototype, \"popupSettings\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], DropDownButtonComponent.prototype, \"textField\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [Boolean])], DropDownButtonComponent.prototype, \"disabled\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], DropDownButtonComponent.prototype, \"data\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], DropDownButtonComponent.prototype, \"primary\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], DropDownButtonComponent.prototype, \"look\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], DropDownButtonComponent.prototype, \"buttonClass\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], DropDownButtonComponent.prototype, \"tabIndex\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], DropDownButtonComponent.prototype, \"itemClick\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], DropDownButtonComponent.prototype, \"open\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], DropDownButtonComponent.prototype, \"close\", void 0);\n\n  __decorate([Output('focus'), __metadata(\"design:type\", EventEmitter)], DropDownButtonComponent.prototype, \"onFocus\", void 0);\n\n  __decorate([Output('blur'), __metadata(\"design:type\", EventEmitter)], DropDownButtonComponent.prototype, \"onBlur\", void 0);\n\n  __decorate([HostBinding('class.k-state-focused'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], DropDownButtonComponent.prototype, \"focused\", null);\n\n  __decorate([HostBinding('class.k-flat'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], DropDownButtonComponent.prototype, \"isFlat\", null);\n\n  __decorate([HostBinding('class.k-outline'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], DropDownButtonComponent.prototype, \"isOutline\", null);\n\n  __decorate([HostBinding('class.k-dropdown-button'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], DropDownButtonComponent.prototype, \"widgetClasses\", null);\n\n  __decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], DropDownButtonComponent.prototype, \"dir\", null);\n\n  __decorate([ContentChild(ButtonItemTemplateDirective, {\n    static: false\n  }), __metadata(\"design:type\", ButtonItemTemplateDirective)], DropDownButtonComponent.prototype, \"itemTemplate\", void 0);\n\n  __decorate([ViewChild('button', {\n    static: true\n  }), __metadata(\"design:type\", ElementRef)], DropDownButtonComponent.prototype, \"button\", void 0);\n\n  __decorate([ViewChild('buttonList', {\n    static: false\n  }), __metadata(\"design:type\", ListComponent)], DropDownButtonComponent.prototype, \"buttonList\", void 0);\n\n  __decorate([ViewChild('popupTemplate', {\n    static: true\n  }), __metadata(\"design:type\", TemplateRef)], DropDownButtonComponent.prototype, \"popupTemplate\", void 0);\n\n  __decorate([ViewChild('container', {\n    read: ViewContainerRef,\n    static: true\n  }), __metadata(\"design:type\", ViewContainerRef)], DropDownButtonComponent.prototype, \"container\", void 0);\n\n  __decorate([HostListener('keydown', ['$event']), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], DropDownButtonComponent.prototype, \"keydown\", null);\n\n  __decorate([HostListener('keypress', ['$event']), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], DropDownButtonComponent.prototype, \"keypress\", null);\n\n  __decorate([HostListener('keyup', ['$event']), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], DropDownButtonComponent.prototype, \"keyup\", null);\n\n  __decorate([HostListener('mousedown', ['$event']), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], DropDownButtonComponent.prototype, \"mousedown\", null);\n\n  __decorate([HostListener('mouseup', ['$event']), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], DropDownButtonComponent.prototype, \"mouseup\", null);\n\n  DropDownButtonComponent = __decorate([__metadata(\"design:paramtypes\", [FocusService, NavigationService, ElementRef, NgZone, PopupService, ElementRef, LocalizationService, ChangeDetectorRef])], DropDownButtonComponent);\n  /**\n   * @hidden\n   *\n   * The exported package module.\n   *\n   * The package exports:\n   * - `DropDownButtonComponent`&mdash;The DropDownButtonComponent component class.\n   */\n\n  return DropDownButtonComponent;\n})();\nlet DropDownButtonModule = /*#__PURE__*/(() => {\n  let DropDownButtonModule = class DropDownButtonModule {};\n\n  DropDownButtonModule.ɵfac = function DropDownButtonModule_Factory(t) {\n    return new (t || DropDownButtonModule)();\n  };\n\n  DropDownButtonModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: DropDownButtonModule\n  });\n  DropDownButtonModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, PopupModule, ListModule, ButtonModule], ListModule]\n  });\n  /**\n   * Displays a Chip that represents an input, attribute or an action.\n   */\n\n  return DropDownButtonModule;\n})();\nlet ChipComponent = /*#__PURE__*/(() => {\n  let ChipComponent = class ChipComponent {\n    constructor(element, renderer, ngZone, localizationService) {\n      this.element = element;\n      this.renderer = renderer;\n      this.ngZone = ngZone;\n      this.localizationService = localizationService;\n      /**\n       * Changes the visual appearance by using alternative styling options.\n       *\n       * The available values are:\n       * * `solid`\n       * * `outline`\n       * * `filled` (The `filled` option will be deprecated. To apply identical styling, use `solid` instead).\n       * * `outlined` (The `outlined` option will be deprecated. To apply identical styling, use `outline` instead).\n       */\n\n      this.look = 'solid';\n      /**\n       * Specifies the selected state of the Chip.\n       */\n\n      this.selected = false;\n      /**\n       * Specifies if the Chip will be removable or not.\n       * If the property is set to `true`, the Chip renders a remove icon.\n       */\n\n      this.removable = false;\n      /**\n       * Specifies the Chip type.\n       *\n       * The possible values are:\n       * - `none` (default)\n       * - `success`\n       * - `error`\n       * - `warning`\n       * - `info`\n       */\n\n      this.type = 'none';\n      /**\n       * If set to `true`, the Chip will be disabled.\n       */\n\n      this.disabled = false;\n      /**\n       * Fires each time the user clicks the remove icon of the Chip.\n       */\n\n      this.remove = new EventEmitter();\n      /**\n       * Fires each time the user clicks the content of the Chip.\n       */\n\n      this.contentClick = new EventEmitter();\n      this.tabIndex = 0;\n      this.hostClass = true;\n      this.focused = false;\n      validatePackage(packageMetadata);\n      this.direction = localizationService.rtl ? 'rtl' : 'ltr';\n    }\n\n    get ariaChecked() {\n      return this.selected;\n    }\n\n    get outlineClass() {\n      return this.look === 'outline' || this.look === 'outlined';\n    }\n\n    get solidClass() {\n      return this.look === 'solid' || this.look === 'filled';\n    }\n\n    get hasIconClass() {\n      return this.icon || this.iconClass ? true : false;\n    }\n\n    get disabledClass() {\n      return this.disabled;\n    }\n\n    get selectedClass() {\n      return this.selected;\n    }\n\n    get focusedClass() {\n      return this.focused;\n    }\n\n    ngOnInit() {\n      this.dynamicRTLSubscription = this.localizationService.changes.subscribe(({\n        rtl\n      }) => this.direction = rtl ? 'rtl' : 'ltr');\n    }\n\n    ngOnDestroy() {\n      if (this.dynamicRTLSubscription) {\n        this.dynamicRTLSubscription.unsubscribe();\n      }\n\n      if (this.detachDomEvents) {\n        this.detachDomEvents();\n      }\n    }\n\n    ngAfterViewInit() {\n      const chip = this.element.nativeElement;\n      const typeClass = this.typeClass();\n\n      if (this.type !== 'none') {\n        this.renderer.addClass(chip, typeClass);\n      }\n\n      this.attachElementEventHandlers(chip);\n    }\n    /**\n     * @hidden\n     */\n\n\n    get iconClasses() {\n      const classes = [];\n\n      if (this.iconClass) {\n        classes.push(`${this.iconClass}`);\n      }\n\n      if (this.icon) {\n        classes.push(`k-icon k-i-${this.icon}`);\n      }\n\n      return classes;\n    }\n    /**\n     * @hidden\n     */\n\n\n    get selectedIconClasses() {\n      if (this.selectedIcon) {\n        return `${this.selectedIcon}`;\n      }\n\n      return `k-icon k-i-check`;\n    }\n    /**\n     * @hidden\n     */\n\n\n    get removeIconClasses() {\n      if (this.removeIcon) {\n        return `${this.removeIcon}`;\n      }\n\n      return `k-icon k-i-close-circle`;\n    }\n    /**\n     * @hidden\n     */\n\n\n    typeClass() {\n      return {\n        'none': '',\n        'success': 'k-chip-success',\n        'warning': 'k-chip-warning',\n        'error': 'k-chip-error',\n        'info': 'k-chip-info'\n      }[this.type];\n    }\n    /**\n     * Focuses the Chip component.\n     */\n\n\n    focus() {\n      if (isDocumentAvailable()) {\n        this.element.nativeElement.focus();\n      }\n    }\n    /**\n     * Blurs the Chip component.\n     */\n\n\n    blur() {\n      if (isDocumentAvailable()) {\n        this.element.nativeElement.blur();\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    onRemoveClick(e) {\n      if (this.removable) {\n        this.remove.emit({\n          sender: this,\n          originalEvent: e\n        });\n      }\n    }\n\n    attachElementEventHandlers(chip) {\n      this.ngZone.runOutsideAngular(() => {\n        const focusListener = this.renderer.listen(chip, 'focus', () => {\n          this.renderer.addClass(chip, 'k-focus');\n        });\n        const blurListener = this.renderer.listen(chip, 'blur', () => {\n          this.renderer.removeClass(chip, 'k-focus');\n        });\n        const contentClickListener = this.renderer.listen(chip, 'click', e => {\n          const isRemoveClicked = closest(e.target, '.k-remove-icon');\n\n          if (!isRemoveClicked) {\n            this.ngZone.run(() => {\n              this.contentClick.emit({\n                sender: this,\n                originalEvent: e\n              });\n            });\n          }\n        });\n\n        this.detachDomEvents = () => {\n          focusListener();\n          blurListener();\n          contentClickListener();\n        };\n      });\n    }\n\n  };\n\n  ChipComponent.ɵfac = function ChipComponent_Factory(t) {\n    return new (t || ChipComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n  };\n\n  ChipComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: ChipComponent,\n    selectors: [[\"kendo-chip\"]],\n    hostVars: 18,\n    hostBindings: function ChipComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"tabindex\", ctx.tabIndex)(\"dir\", ctx.direction)(\"aria-checked\", ctx.ariaChecked)(\"aria-disabled\", ctx.disabledClass);\n        ɵngcc0.ɵɵclassProp(\"k-chip\", ctx.hostClass)(\"k-chip-outline\", ctx.outlineClass)(\"k-chip-solid\", ctx.solidClass)(\"k-chip-has-icon\", ctx.hasIconClass)(\"k-disabled\", ctx.disabledClass)(\"k-selected\", ctx.selectedClass)(\"k-focus\", ctx.focusedClass);\n      }\n    },\n    inputs: {\n      look: \"look\",\n      selected: \"selected\",\n      removable: \"removable\",\n      type: \"type\",\n      disabled: \"disabled\",\n      label: \"label\",\n      icon: \"icon\",\n      iconClass: \"iconClass\",\n      selectedIcon: \"selectedIcon\",\n      removeIcon: \"removeIcon\"\n    },\n    outputs: {\n      remove: \"remove\",\n      contentClick: \"contentClick\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([LocalizationService, {\n      provide: L10N_PREFIX,\n      useValue: 'kendo.chip'\n    }])],\n    ngContentSelectors: _c10,\n    decls: 7,\n    vars: 5,\n    consts: [[1, \"k-selected-icon-wrapper\"], [\"class\", \"k-selected-icon\", 3, \"ngClass\", 4, \"ngIf\"], [\"class\", \"k-chip-icon\", 3, \"ngClass\", 4, \"ngIf\"], [1, \"k-chip-content\"], [\"class\", \"k-chip-label\", 4, \"ngIf\"], [4, \"ngIf\"], [\"class\", \"k-remove-icon\", 3, \"click\", 4, \"ngIf\"], [1, \"k-selected-icon\", 3, \"ngClass\"], [1, \"k-chip-icon\", 3, \"ngClass\"], [1, \"k-chip-label\"], [1, \"k-remove-icon\", 3, \"click\"], [3, \"ngClass\"]],\n    template: function ChipComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"span\", 0);\n        ɵngcc0.ɵɵtemplate(1, ChipComponent_span_1_Template, 1, 1, \"span\", 1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(2, ChipComponent_span_2_Template, 1, 1, \"span\", 2);\n        ɵngcc0.ɵɵelementStart(3, \"span\", 3);\n        ɵngcc0.ɵɵtemplate(4, ChipComponent_span_4_Template, 2, 1, \"span\", 4);\n        ɵngcc0.ɵɵtemplate(5, ChipComponent_ng_content_5_Template, 1, 0, \"ng-content\", 5);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(6, ChipComponent_span_6_Template, 2, 1, \"span\", 6);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.selected);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.icon || ctx.iconClass);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.label);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.label);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.removable);\n      }\n    },\n    directives: [ɵngcc2.NgIf, ɵngcc2.NgClass],\n    encapsulation: 2\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ChipComponent.prototype, \"look\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ChipComponent.prototype, \"label\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ChipComponent.prototype, \"icon\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ChipComponent.prototype, \"iconClass\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], ChipComponent.prototype, \"selected\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ChipComponent.prototype, \"selectedIcon\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], ChipComponent.prototype, \"removable\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ChipComponent.prototype, \"removeIcon\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ChipComponent.prototype, \"type\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], ChipComponent.prototype, \"disabled\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], ChipComponent.prototype, \"remove\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], ChipComponent.prototype, \"contentClick\", void 0);\n\n  __decorate([HostBinding('attr.tabindex'), __metadata(\"design:type\", Number)], ChipComponent.prototype, \"tabIndex\", void 0);\n\n  __decorate([HostBinding('attr.aria-checked'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ChipComponent.prototype, \"ariaChecked\", null);\n\n  __decorate([HostBinding('class.k-chip'), __metadata(\"design:type\", Boolean)], ChipComponent.prototype, \"hostClass\", void 0);\n\n  __decorate([HostBinding('class.k-chip-outline'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ChipComponent.prototype, \"outlineClass\", null);\n\n  __decorate([HostBinding('class.k-chip-solid'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ChipComponent.prototype, \"solidClass\", null);\n\n  __decorate([HostBinding('class.k-chip-has-icon'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ChipComponent.prototype, \"hasIconClass\", null);\n\n  __decorate([HostBinding('attr.aria-disabled'), HostBinding('class.k-disabled'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ChipComponent.prototype, \"disabledClass\", null);\n\n  __decorate([HostBinding('class.k-selected'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ChipComponent.prototype, \"selectedClass\", null);\n\n  __decorate([HostBinding('class.k-focus'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ChipComponent.prototype, \"focusedClass\", null);\n\n  __decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String)], ChipComponent.prototype, \"direction\", void 0);\n\n  ChipComponent = __decorate([__metadata(\"design:paramtypes\", [ElementRef, Renderer2, NgZone, LocalizationService])], ChipComponent);\n  return ChipComponent;\n})();\nlet ChipListComponent = /*#__PURE__*/(() => {\n  let ChipListComponent = class ChipListComponent {\n    constructor(localizationService, renderer) {\n      this.localizationService = localizationService;\n      this.renderer = renderer;\n      this.hostClass = true;\n      /**\n       * Sets the selection mode of the ChipList.\n       *\n       * The available values are:\n       * * `none` (default)\n       * * `single`\n       * * `multiple`\n       */\n\n      this.selection = 'none';\n      /**\n       * Fires each time when the ChipList selection is changed.\n       */\n\n      this.selectedChange = new EventEmitter();\n      /**\n       * Fires each time the user clicks on the remove icon of the Chip.\n       */\n\n      this.remove = new EventEmitter();\n      this.role = 'listbox';\n      this.direction = localizationService.rtl ? 'rtl' : 'ltr';\n    }\n\n    get single() {\n      return this.selection === 'single';\n    }\n\n    get multiple() {\n      return this.selection === 'multiple';\n    }\n    /**\n     * @hidden\n     */\n\n\n    onClick($event) {\n      const target = $event.target;\n      const isRemoveClicked = closest(target, '.k-remove-icon');\n      const clickedChip = closest(target, '.k-chip');\n      const chip = this.chips.find(chip => clickedChip === chip.element.nativeElement);\n\n      if (isRemoveClicked && clickedChip) {\n        const removeEventArgs = {\n          sender: this,\n          originalEvent: $event,\n          removedChip: chip\n        };\n        this.remove.emit(removeEventArgs);\n      }\n\n      if (this.selection !== 'none' && clickedChip && !isRemoveClicked) {\n        this.setSelection(chip);\n      }\n    }\n\n    ngOnInit() {\n      this.dynamicRTLSubscription = this.localizationService.changes.subscribe(({\n        rtl\n      }) => this.direction = rtl ? 'rtl' : 'ltr');\n    }\n\n    ngAfterContentInit() {\n      this.chips.forEach(chip => {\n        this.renderer.setAttribute(chip.element.nativeElement, 'role', 'option');\n      });\n    }\n\n    ngOnDestroy() {\n      if (this.dynamicRTLSubscription) {\n        this.dynamicRTLSubscription.unsubscribe();\n      }\n    }\n\n    selectedChips() {\n      return this.chips.reduce((acc, cur, idx) => {\n        return cur.selected ? acc.concat(idx) : acc;\n      }, []);\n    }\n    /**\n     * Updates the selection on click of a Chip. Emits events.\n     */\n\n\n    setSelection(chip) {\n      if (this.selection === 'single') {\n        this.clearSelection(chip);\n      }\n\n      chip.selected = !chip.selected;\n      this.selectedChange.emit(this.selectedChips());\n    }\n\n    clearSelection(chip) {\n      this.chips.forEach(c => {\n        if (chip !== c) {\n          c.selected = false;\n        }\n      });\n    }\n\n  };\n\n  ChipListComponent.ɵfac = function ChipListComponent_Factory(t) {\n    return new (t || ChipListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2));\n  };\n\n  ChipListComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: ChipListComponent,\n    selectors: [[\"kendo-chip-list\"], [\"kendo-chiplist\"]],\n    contentQueries: function ChipListComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, ChipComponent, 4);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.chips = _t);\n      }\n    },\n    hostVars: 8,\n    hostBindings: function ChipListComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function ChipListComponent_click_HostBindingHandler($event) {\n          return ctx.onClick($event);\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"role\", ctx.role)(\"dir\", ctx.direction);\n        ɵngcc0.ɵɵclassProp(\"k-chip-list\", ctx.hostClass)(\"k-selection-single\", ctx.single)(\"k-selection-multiple\", ctx.multiple);\n      }\n    },\n    inputs: {\n      selection: \"selection\"\n    },\n    outputs: {\n      selectedChange: \"selectedChange\",\n      remove: \"remove\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([LocalizationService, {\n      provide: L10N_PREFIX,\n      useValue: 'kendo.chip-list'\n    }])],\n    ngContentSelectors: _c10,\n    decls: 1,\n    vars: 0,\n    template: function ChipListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2\n  });\n\n  __decorate([HostBinding('class.k-chip-list'), __metadata(\"design:type\", Boolean)], ChipListComponent.prototype, \"hostClass\", void 0);\n\n  __decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String)], ChipListComponent.prototype, \"direction\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ChipListComponent.prototype, \"selection\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], ChipListComponent.prototype, \"selectedChange\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], ChipListComponent.prototype, \"remove\", void 0);\n\n  __decorate([ContentChildren(ChipComponent), __metadata(\"design:type\", QueryList)], ChipListComponent.prototype, \"chips\", void 0);\n\n  __decorate([HostBinding('class.k-selection-single'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ChipListComponent.prototype, \"single\", null);\n\n  __decorate([HostBinding('class.k-selection-multiple'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ChipListComponent.prototype, \"multiple\", null);\n\n  __decorate([HostBinding('attr.role'), __metadata(\"design:type\", String)], ChipListComponent.prototype, \"role\", void 0);\n\n  __decorate([HostListener('click', ['$event']), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], ChipListComponent.prototype, \"onClick\", null);\n\n  ChipListComponent = __decorate([__metadata(\"design:paramtypes\", [LocalizationService, Renderer2])], ChipListComponent);\n  return ChipListComponent;\n})();\nconst exportedModules = [ChipComponent, ChipListComponent];\nconst declarations = [...exportedModules];\n/**\n * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})\n * definition for the Chip and ChipList components.\n *\n * @example\n *\n * ```ts-no-run\n * // Import the Chip module\n * import { ChipModule } from '@progress/kendo-angular-buttons';\n *\n * // The browser platform with a compiler\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n *\n * import { NgModule } from '@angular/core';\n *\n * // Import the app component\n * import { AppComponent } from './app.component';\n *\n * // Define the app module\n * _@NgModule({\n *     declarations: [AppComponent], // declare app component\n *     imports:      [BrowserModule, ChipModule], // import Chip module\n *     bootstrap:    [AppComponent]\n * })\n * export class AppModule {}\n *\n * ```\n */\n\nlet ChipModule = /*#__PURE__*/(() => {\n  let ChipModule = class ChipModule {};\n\n  ChipModule.ɵfac = function ChipModule_Factory(t) {\n    return new (t || ChipModule)();\n  };\n\n  ChipModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: ChipModule\n  });\n  ChipModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule]]\n  });\n  /**\n   * @hidden\n   */\n\n  return ChipModule;\n})();\n\nfunction getAnchorAlign(fabAlign, rtl) {\n  let align = {\n    horizontal: rtl ? 'right' : 'left',\n    vertical: 'bottom'\n  };\n\n  if (fabAlign.horizontal === 'end') {\n    align.horizontal = rtl ? 'left' : 'right';\n  }\n\n  if (fabAlign.vertical === 'bottom') {\n    align.vertical = 'top';\n  }\n\n  if (fabAlign.vertical === 'bottom' && fabAlign.horizontal === 'end') {\n    align.horizontal = rtl ? 'left' : 'right';\n    align.vertical = 'top';\n  }\n\n  return align;\n}\n/**\n * @hidden\n */\n\n\nfunction getPopupAlign(fabAlign, rtl) {\n  let align = {\n    horizontal: rtl ? 'right' : 'left',\n    vertical: 'top'\n  };\n\n  if (fabAlign.horizontal === 'end') {\n    align.horizontal = rtl ? 'left' : 'right';\n  }\n\n  if (fabAlign.vertical === 'bottom') {\n    align.vertical = 'bottom';\n  }\n\n  if (fabAlign.vertical === 'bottom' && fabAlign.horizontal === 'end') {\n    align.horizontal = rtl ? 'left' : 'right';\n    align.vertical = 'bottom';\n  }\n\n  return align;\n}\n/**\n * @hidden\n */\n\n\nfunction openAnimation(animationSettings) {\n  const isBottom = animationSettings.align.vertical === 'bottom';\n  const duration = animationSettings.duration;\n  const gap = animationSettings.gap;\n  return sequence([query(`.k-fab-item`, [style({\n    opacity: 0,\n    transform: `translateY(${isBottom ? '8px' : '-8px'})`\n  }), stagger(gap, [animate(`${duration}ms ease-in`, style({\n    opacity: '*',\n    transform: 'translateY(0)'\n  }))])], {\n    optional: true\n  })]);\n}\n/**\n * @hidden\n */\n\n\nfunction closeAnimation(animationSettings) {\n  const isBottom = animationSettings.align.vertical === 'bottom';\n  const duration = animationSettings.duration;\n  const gap = animationSettings.gap;\n  return sequence([query(`.k-fab-item`, [style({\n    opacity: '*',\n    transform: 'translateY(0)'\n  }), stagger(-gap, [animate(`${duration}ms ease-in`, style({\n    opacity: 0,\n    transform: `translateY(${isBottom ? '8px' : '-8px'})`\n  }))])], {\n    optional: true\n  })]);\n}\n/**\n * Represents a template that defines the content of the whole dial item.\n * To define the template, nest an `<ng-template>` tag\n * with the `kendoDialItemTemplate` directive inside the `<kendo-floatingactionbutton>` tag\n * ([see example]({% slug templates_floatingactionbutton %}#toc-dial-item-template)).\n */\n\n\nlet DialItemTemplateDirective = /*#__PURE__*/(() => {\n  let DialItemTemplateDirective = class DialItemTemplateDirective {\n    constructor(templateRef) {\n      this.templateRef = templateRef;\n    }\n\n  };\n\n  DialItemTemplateDirective.ɵfac = function DialItemTemplateDirective_Factory(t) {\n    return new (t || DialItemTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef, 8));\n  };\n\n  DialItemTemplateDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: DialItemTemplateDirective,\n    selectors: [[\"\", \"kendoDialItemTemplate\", \"\"]]\n  });\n  DialItemTemplateDirective = __decorate([__param(0, Optional()), __metadata(\"design:paramtypes\", [TemplateRef])], DialItemTemplateDirective);\n  /**\n   * Represents a template that defines the content of the FloatingActionButton.\n   * To define the template, nest an `<ng-template>` tag\n   * with the `kendoFloatingActionButtonTemplate` directive inside the `<kendo-floatingactionbutton>` tag\n   * ([see example]({% slug templates_floatingactionbutton %}#toc-floatingactionbutton-template)).\n   */\n\n  return DialItemTemplateDirective;\n})();\nlet FloatingActionButtonTemplateDirective = /*#__PURE__*/(() => {\n  let FloatingActionButtonTemplateDirective = class FloatingActionButtonTemplateDirective {\n    constructor(templateRef) {\n      this.templateRef = templateRef;\n    }\n\n  };\n\n  FloatingActionButtonTemplateDirective.ɵfac = function FloatingActionButtonTemplateDirective_Factory(t) {\n    return new (t || FloatingActionButtonTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef, 8));\n  };\n\n  FloatingActionButtonTemplateDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: FloatingActionButtonTemplateDirective,\n    selectors: [[\"\", \"kendoFloatingActionButtonTemplate\", \"\"]]\n  });\n  FloatingActionButtonTemplateDirective = __decorate([__param(0, Optional()), __metadata(\"design:paramtypes\", [TemplateRef])], FloatingActionButtonTemplateDirective);\n  return FloatingActionButtonTemplateDirective;\n})();\nconst NAVIGATION_SETTINGS$2 = {\n  useLeftRightArrows: false\n};\nconst ɵ0$2 = NAVIGATION_SETTINGS$2;\nconst NAVIGATION_SETTINGS_PROVIDER$2 = {\n  provide: NAVIGATION_CONFIG,\n  useValue: ɵ0$2\n};\nconst SIZE_CLASSES = {\n  small: 'k-fab-sm',\n  medium: 'k-fab-md',\n  large: 'k-fab-lg'\n};\nconst SHAPE_CLASSES = {\n  pill: 'k-fab-pill',\n  circle: 'k-fab-circle',\n  rectangle: 'k-fab-rectangle',\n  square: 'k-fab-square',\n  rounded: 'k-fab-rounded'\n};\nconst DEFAULT_DURATION = 180;\nconst DEFAULT_ITEM_GAP = 90;\nconst DEFAULT_OFFSET = '16px';\n/**\n *\n * Represents the [Kendo UI FloatingActionButton component for Angular]({% slug overview_floatingactionbutton %}).\n * Used to specify the primary or the most common action in an application.\n *\n */\n\nlet FloatingActionButtonComponent = /*#__PURE__*/(() => {\n  let FloatingActionButtonComponent = class FloatingActionButtonComponent {\n    constructor(renderer, element, focusService, navigationService, ngZone, popupService, builder, localizationService) {\n      this.renderer = renderer;\n      this.element = element;\n      this.focusService = focusService;\n      this.navigationService = navigationService;\n      this.ngZone = ngZone;\n      this.popupService = popupService;\n      this.builder = builder;\n      this.localizationService = localizationService;\n      /**\n       * Specifies the positionMode of the FloatingActionButton\n       * ([see example]({% slug positioning_floatingactionbutton %}#toc-positionMode)).\n       *\n       * * The possible values are:\n       * * `absolute`&mdash;Positions the FloatingActionButton absolutely to its first positioned parent element.\n       * * `fixed` (Default)&mdash;Positions the FloatingActionButton relative to the viewport. It always stays in the same place even if the page is scrolled.\n       */\n\n      this.positionMode = 'fixed';\n      /**\n       * Specifies the animation settings of the FloatingActionButton dial items.\n       * ([see example]({% slug dialitems_floatingactionbutton %}#toc-animation)).\n       *\n       * The possible values are:\n       * * Boolean\n       *    * (Default) `true`&mdash;Applies the default [`DialItemAnimation`]({% slug api_buttons_dialitemanimation %}) settings.\n       *    * `false`\n       * * `DialItemAnimation`\n       *    * `duration`&mdash;Specifies the animation duration in milliseconds for each dial item. Defaults to `180ms`.\n       *    * `gap`&mdash;Specifies the animation duration gap in milliseconds after each dial item is animated. Defaults to `90ms`.\n       */\n\n      this.dialItemAnimation = true;\n      /**\n       * Specifies the [`tabIndex`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex) of the FloatingActionButton.\n       */\n\n      this.tabIndex = 0;\n      /**\n       * Specifies the collection of the dial items that will be rendered in the FloatingActionButton popup.\n       */\n\n      this.dialItems = [];\n      /**\n       * Fires each time the FloatingActionButton gets blurred.\n       */\n\n      this.onBlur = new EventEmitter();\n      /**\n       * Fires each time the FloatingActionButton gets focused.\n       */\n\n      this.onFocus = new EventEmitter();\n      /**\n       * Fires each time a dial item is clicked.\n       */\n\n      this.dialItemClick = new EventEmitter();\n      /**\n       * Fires each time the popup is about to open.\n       * This event is preventable. If you cancel the event, the popup will remain closed\n       * ([more information and example]({% slug overview_floatingactionbutton %}#toc-events)).\n       */\n\n      this.open = new EventEmitter();\n      /**\n       * Fires each time the popup is about to close.\n       * This event is preventable. If you cancel the event, the popup will remain open\n       * ([more information and example]({% slug overview_floatingactionbutton %}#toc-events)).\n       */\n\n      this.close = new EventEmitter();\n      /**\n       * @hidden\n       */\n\n      this.id = `k-${guid()}`;\n      this._themeColor = 'primary';\n      this._size = 'medium';\n      this._shape = 'pill';\n      this._disabled = false;\n      this._align = {\n        horizontal: 'end',\n        vertical: 'bottom'\n      };\n      this._offset = {\n        x: DEFAULT_OFFSET,\n        y: DEFAULT_OFFSET\n      };\n      this.subscriptions = new Subscription();\n      this.rtl = false;\n      this.animationEnd = new EventEmitter();\n      validatePackage(packageMetadata);\n      this.subscribeNavigationEvents();\n      this.subscriptions.add(this.localizationService.changes.subscribe(({\n        rtl\n      }) => {\n        this.rtl = rtl;\n        this.direction = this.rtl ? 'rtl' : 'ltr';\n      }));\n    }\n\n    get fixedClass() {\n      return this.positionMode === 'fixed';\n    }\n\n    get absoluteClass() {\n      return this.positionMode === 'absolute';\n    }\n    /**\n     * Specifies the theme color of the FloatingActionButton\n     * ([see example]({% slug appearance_floatingactionbutton %}#toc-themeColor)).\n     * The theme color will be applied as background color of the component.\n     *\n     * The possible values are:\n     * * `primary` (Default)&mdash;Applies coloring based on the `primary` theme color.\n     * * `secondary`&mdash;Applies coloring based on the `secondary` theme color.\n     * * `tertiary`&mdash; Applies coloring based on the `tertiary` theme color.\n     * * `inherit`&mdash; Applies inherited coloring value.\n     * * `info`&mdash;Applies coloring based on the `info` theme color.\n     * * `success`&mdash; Applies coloring based on the `success` theme color.\n     * * `warning`&mdash; Applies coloring based on the `warning` theme color.\n     * * `error`&mdash; Applies coloring based on the `error` theme color.\n     * * `dark`&mdash; Applies coloring based on the `dark` theme color.\n     * * `light`&mdash; Applies coloring based on the `light` theme color.\n     * * `inverse`&mdash; Applies coloring based on the `inverse` theme color.\n     *\n     */\n\n\n    set themeColor(themeColor) {\n      this.handleClasses(themeColor, 'themeColor');\n      this._themeColor = themeColor;\n    }\n\n    get themeColor() {\n      return this._themeColor;\n    }\n    /**\n     * Specifies the size of the FloatingActionButton\n     * ([see example]({% slug appearance_floatingactionbutton %}#toc-size)).\n     *\n     * The possible values are:\n     * * `small`\n     * * `medium` (Default)\n     * * `large`\n     *\n     */\n\n\n    set size(size) {\n      this.handleClasses(size, 'size');\n      this._size = size;\n    }\n\n    get size() {\n      return this._size;\n    }\n    /**\n     * Specifies the shape of the FloatingActionButton\n     * ([see example]({% slug appearance_floatingactionbutton %}#toc-shape)).\n     *\n     * The possible values are:\n     * * `pill` (Default)&mdash;Applies border radius equal to half of the height of the FloatingActionButton.\n     * * `circle`&mdash;Applies circle shape on the FloatingActionButton.\n     * * `rectangle`&mdash;Applies rectangular shape on the FloatingActionButton.\n     * * `rounded`&mdash;Applies rounded shape on the FloatingActionButton.\n     * * `square`&mdash;Applies square shape on the FloatingActionButton.\n     *\n     */\n\n\n    set shape(shape) {\n      this.handleClasses(shape, 'shape');\n      this._shape = shape;\n    }\n\n    get shape() {\n      return this._shape;\n    }\n    /**\n     * Specifies whether the FloatingActionButton is disabled.\n     */\n\n\n    set disabled(disabled) {\n      this._disabled = disabled;\n    }\n\n    get disabled() {\n      return this._disabled;\n    }\n    /**\n     * Specifies the horizontal and vertical alignment of the FloatingActionButton\n     * ([see example]({% slug positioning_floatingactionbutton %}#toc-align)).\n     *\n     * The possible values are:\n     * * `{ horizontal: 'start'|'center'|'end', vertical: 'top'|'middle'|'bottom' }`\n     *\n     * The default value is:\n     * * `{ horizontal: 'end', vertical: 'bottom' }`\n     *\n     */\n\n\n    set align(align) {\n      this._align = Object.assign(this._align, align);\n    }\n\n    get align() {\n      return this._align;\n    }\n    /**\n     * Specifies the horizontal and vertical offset position of the FloatingActionButton\n     * ([see example]({% slug positioning_floatingactionbutton %}#toc-offset)).\n     *\n     * * The default value is:\n     * * `{ x: '16px', y: '16px' }`\n     */\n\n\n    set offset(offset) {\n      this._offset = Object.assign(this._offset, offset);\n      this.offsetStyles();\n    }\n\n    get offset() {\n      return this._offset;\n    }\n    /**\n     * @hidden\n     */\n\n\n    get componentTabIndex() {\n      return this.disabled ? -1 : this.tabIndex;\n    }\n\n    ngAfterViewInit() {\n      this.applyClasses();\n      this.offsetStyles();\n    }\n\n    ngOnDestroy() {\n      this.subscriptions.unsubscribe();\n    }\n    /**\n     * Indicates whether the FloatingActionButton is currently open.\n     */\n\n\n    get isOpen() {\n      return isPresent(this.popupRef);\n    }\n    /**\n     * Focuses the FloatingActionButton.\n     */\n\n\n    focus() {\n      if (isDocumentAvailable()) {\n        this.button.nativeElement.focus();\n      }\n    }\n    /**\n     * Blurs the FloatingActionButton.\n     */\n\n\n    blur() {\n      if (isDocumentAvailable()) {\n        this.button.nativeElement.blur();\n      }\n    }\n    /**\n     * Toggles the visibility of the FloatingActionButton dial items popup.\n     *\n     * If you use the `toggleDial` method to open or close the dial items,\n     * the `open` and `close` events do not fire ([more information and examples]({% slug openstate_floatingactionbutton %}#toc-events)).\n     *\n     * @param open - The state of dial items popup.\n     */\n\n\n    toggleDial(open) {\n      if (this.disabled || !this.hasDialItems) {\n        return;\n      }\n\n      const shouldOpen = isPresent(open) ? open : !this.isOpen;\n\n      if (this.disabled || shouldOpen === this.isOpen) {\n        return;\n      }\n\n      shouldOpen ? setTimeout(() => this.openDial()) : this.closeDial();\n    }\n    /**\n     * @hidden\n     */\n\n\n    get role() {\n      return this.dialItems && this.dialItems.length ? 'menubutton' : 'button';\n    }\n    /**\n     * @hidden\n     */\n\n\n    get ariaExpanded() {\n      return isPresent(this.isOpen);\n    }\n    /**\n     * @hidden\n     */\n\n\n    get ariaHasPopup() {\n      return isPresent(this.isOpen);\n    }\n    /**\n     * @hidden\n     */\n\n\n    get iconClasses() {\n      const classes = [];\n\n      if (this.iconClass) {\n        classes.push(`${this.iconClass}`);\n      }\n\n      if (this.icon) {\n        classes.push(`k-fab-icon k-icon k-i-${this.icon}`);\n      }\n\n      return classes;\n    }\n    /**\n     * @hidden\n     */\n\n\n    clickHandler() {\n      if (this.disabled || !this.hasDialItems) {\n        return;\n      }\n\n      this.ngZone.run(() => {\n        const shouldOpen = !this.isOpen;\n        this.toggleDialWithEvents(shouldOpen);\n      });\n    }\n    /**\n     * @hidden\n     */\n\n\n    keyDownHandler(event) {\n      this.keyHandler(event);\n    }\n    /**\n     * @hidden\n     */\n\n\n    keyHandler(event, keyEvent) {\n      if (this.disabled) {\n        return;\n      }\n\n      const focused = this.focusService.focused || 0;\n      const keyCode = event.keyCode;\n      const action = this.navigationService.process({\n        altKey: event.altKey,\n        current: focused,\n        keyCode,\n        keyEvent: keyEvent,\n        max: this.dialItems ? this.dialItems.length - 1 : 0,\n        min: 0,\n        flipNavigation: this.align.vertical === 'bottom'\n      });\n\n      if (action !== NavigationAction.Undefined && action !== NavigationAction.Tab) {\n        event.preventDefault();\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    onItemClick(event) {\n      const item = closest(event.target, '.k-fab-item');\n\n      if (!item) {\n        return;\n      }\n\n      const index = item.getAttribute('data-fab-item-index');\n      this.emitItemClick(index);\n    }\n    /**\n     * @hidden\n     */\n\n\n    focusHandler() {\n      if (!this.disabled) {\n        this.onFocus.emit();\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    blurHandler() {\n      this.onBlur.emit();\n      this.toggleDialWithEvents(false);\n    }\n\n    handleClasses(inputValue, input) {\n      if (isPresent(this.button) && this[input] !== inputValue) {\n        const button = this.button.nativeElement;\n        const classesToRemove = {\n          themeColor: `k-fab-${this.themeColor}`,\n          size: SIZE_CLASSES[this.size],\n          shape: SHAPE_CLASSES[this.shape]\n        };\n        const classesToAdd = {\n          themeColor: `k-fab-${inputValue}`,\n          size: SIZE_CLASSES[inputValue],\n          shape: SHAPE_CLASSES[inputValue]\n        };\n        this.renderer.removeClass(button, classesToRemove[input]);\n        this.renderer.addClass(button, classesToAdd[input]);\n      }\n    }\n\n    onEnterPressed() {\n      const index = this.focusService.focused;\n      this.emitItemClick(index);\n    }\n\n    emitItemClick(index) {\n      const item = this.dialItems[index];\n\n      if (item && !item.disabled) {\n        const clickEventArgs = {\n          item: item,\n          index: index\n        };\n        this.dialItemClick.emit(clickEventArgs);\n        this.toggleDialWithEvents(false);\n      }\n    }\n\n    subscribeNavigationEvents() {\n      this.subscriptions.add(this.navigationService.navigate.subscribe(this.onArrowKeyNavigate.bind(this)));\n      this.subscriptions.add(this.navigationService.enter.subscribe(this.onNavigationEnterPress.bind(this)));\n      this.subscriptions.add(merge(this.navigationService.close, this.navigationService.esc).subscribe(this.onNavigationClose.bind(this)));\n    }\n\n    onArrowKeyNavigate(index) {\n      this.focusService.focus(index);\n    }\n\n    onNavigationEnterPress() {\n      this.ngZone.run(() => {\n        if (this.isOpen) {\n          let focusedIndex = this.focusService.focused;\n          const focusedItem = this.dialItems[focusedIndex];\n\n          if (focusedItem && focusedItem.disabled) {\n            return;\n          }\n\n          if (isPresent(focusedIndex) && focusedIndex !== -1) {\n            this.onEnterPressed();\n            return;\n          }\n        }\n\n        if (!this.isOpen && isDocumentAvailable()) {\n          this.toggleDialWithEvents(true);\n          this.button.nativeElement.focus();\n        }\n      });\n    }\n\n    onNavigationClose() {\n      if (this.isOpen) {\n        this.ngZone.run(() => {\n          this.toggleDialWithEvents(false);\n\n          if (isDocumentAvailable()) {\n            this.button.nativeElement.focus();\n          }\n        });\n      }\n    }\n\n    alignClass() {\n      return `k-pos-${this.align.vertical}-${this.align.horizontal}`;\n    }\n\n    applyClasses() {\n      const hostElement = this.element.nativeElement;\n      const button = this.button.nativeElement;\n      this.renderer.addClass(button, SHAPE_CLASSES[this.shape]);\n      this.renderer.addClass(button, `k-fab-${this.themeColor}`);\n      this.renderer.addClass(button, SIZE_CLASSES[this.size]);\n      this.renderer.addClass(hostElement, this.alignClass());\n    }\n\n    toggleDialWithEvents(open) {\n      if (open === this.isOpen) {\n        return;\n      }\n\n      const event = new PreventableEvent();\n      open ? this.open.emit(event) : this.close.emit(event);\n\n      if (event.isDefaultPrevented()) {\n        return;\n      }\n\n      open ? this.openDial() : this.closeDial();\n    }\n\n    openPopup() {\n      if (this.isOpen) {\n        return;\n      }\n\n      const isIconFab = this.icon && !this.text;\n      const rtl = this.rtl;\n      const align = this.align;\n      this.popupRef = this.popupService.open({\n        anchor: this.element.nativeElement,\n        animate: false,\n        content: this.popupTemplate,\n        anchorAlign: getAnchorAlign(align, rtl),\n        popupAlign: getPopupAlign(align, rtl),\n        popupClass: 'k-fab-popup k-popup-transparent'\n      });\n      const popupElement = this.popupRef.popupElement;\n      this.renderer.setStyle(popupElement, 'box-shadow', 'none');\n\n      if (isIconFab) {\n        this.subscriptions.add(this.popupRef.popupOpen.subscribe(() => this.positionPopup()));\n      }\n\n      this.ngZone.runOutsideAngular(() => {\n        this.popupMouseDownListener = this.renderer.listen(popupElement, 'mousedown', event => {\n          event.preventDefault();\n        });\n      });\n      this.popupRef.popupAnchorViewportLeave.subscribe(() => this.toggleDialWithEvents(false));\n    }\n\n    closePopup() {\n      if (this.isOpen) {\n        if (this.popupMouseDownListener) {\n          this.popupMouseDownListener();\n        }\n\n        this.popupRef.close();\n        this.popupRef = null;\n      }\n    }\n\n    openDial() {\n      this.openPopup();\n      this.focusService.focus(0);\n\n      if (this.dialItemAnimation && this.isValidAnimation()) {\n        this.playAnimation(true);\n      }\n    }\n\n    closeDial() {\n      if (this.dialItemAnimation && this.isValidAnimation()) {\n        this.playAnimation(false);\n        this.animationEnd.pipe(take(1)).subscribe(() => this.closePopup());\n      } else {\n        this.closePopup();\n      }\n    }\n\n    isValidAnimation() {\n      const animation = this.dialItemAnimation;\n\n      if (typeof animation !== 'boolean') {\n        return animation.duration !== 0;\n      }\n\n      return true;\n    }\n\n    positionPopup() {\n      if (this.dialItemTemplate) {\n        return;\n      }\n\n      const fab = this.element.nativeElement;\n      const fabWidth = fab.getBoundingClientRect().width;\n      const popupEl = this.popupRef.popupElement;\n      const icon = popupEl.querySelector('.k-fab-item-icon');\n\n      if (!icon) {\n        return;\n      }\n\n      const iconWidth = icon.getBoundingClientRect().width;\n      const left = fabWidth / 2 - iconWidth / 2;\n      const popupLeft = popupEl.getBoundingClientRect().left;\n      const isEndAlign = this.align.horizontal === 'end';\n      const leftValue = isEndAlign ? popupLeft - left : left + popupLeft;\n      const rtlLeftValue = isEndAlign ? left + popupLeft : popupLeft - left;\n      popupEl.style.left = this.rtl ? `${rtlLeftValue}px` : `${leftValue}px`;\n    }\n\n    offsetStyles() {\n      const hostElement = this.element.nativeElement;\n      this.renderer.setStyle(hostElement, this.horizontalPosition, this.horizontalOffset);\n      this.renderer.setStyle(hostElement, this.verticalPosition, this.verticalOffset);\n    }\n\n    get hasDialItems() {\n      return isPresent(this.dialItems) && this.dialItems.length !== 0;\n    }\n    /**\n     * Gets the CSS prop name of the selected vertical position (`top`/`bottom`);\n     */\n\n\n    get verticalPosition() {\n      return {\n        top: 'top',\n        middle: 'top',\n        bottom: 'bottom'\n      }[this.align.vertical];\n    }\n    /**\n     * Gets the offset according to the selected vertical position.\n     */\n\n\n    get verticalOffset() {\n      if (this.align.vertical === 'middle') {\n        return this.offset.y === DEFAULT_OFFSET ? '50%' : `calc(50% + ${this.offset.y})`;\n      }\n\n      return this.offset.y;\n    }\n    /**\n     * Gets the CSS prop name of the selected horizontal position (`left`/`right`);\n     */\n\n\n    get horizontalPosition() {\n      const {\n        horizontal\n      } = this.align;\n      return {\n        end: this.rtl ? 'left' : 'right',\n        center: 'left',\n        start: this.rtl ? 'right' : 'left'\n      }[horizontal];\n    }\n    /**\n     * Gets the offset according to the selected horizontal position.\n     */\n\n\n    get horizontalOffset() {\n      if (this.align.horizontal === 'center') {\n        return this.offset.x === DEFAULT_OFFSET ? '50%' : `calc(50% + ${this.offset.x})`;\n      }\n\n      return this.offset.x;\n    }\n\n    playerFor(element, animation) {\n      const factory = this.builder.build(animation);\n      return factory.create(element);\n    }\n\n    playAnimation(open) {\n      const durationSettings = this.durationSettings();\n      const animationSettings = {\n        duration: durationSettings.duration,\n        gap: durationSettings.gap,\n        align: this.align\n      };\n      const animation = open ? openAnimation(animationSettings) : closeAnimation(animationSettings);\n      let player = this.playerFor(this.popupRef.popupElement, animation);\n      player.play();\n      player.onDone(() => {\n        if (player) {\n          this.animationEnd.emit();\n          player.destroy();\n          player = null;\n        }\n      });\n    }\n\n    durationSettings() {\n      return {\n        duration: this.animationDuration(),\n        gap: this.animationGap()\n      };\n    }\n\n    animationGap() {\n      const animation = this.dialItemAnimation;\n\n      if (typeof animation !== 'boolean' && isPresent(animation.gap)) {\n        return animation.gap;\n      }\n\n      return DEFAULT_ITEM_GAP;\n    }\n\n    animationDuration() {\n      const animation = this.dialItemAnimation;\n\n      if (typeof animation !== 'boolean' && isPresent(animation.duration)) {\n        return animation.duration;\n      }\n\n      return DEFAULT_DURATION;\n    }\n\n  };\n\n  FloatingActionButtonComponent.ɵfac = function FloatingActionButtonComponent_Factory(t) {\n    return new (t || FloatingActionButtonComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(FocusService), ɵngcc0.ɵɵdirectiveInject(NavigationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.PopupService), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.AnimationBuilder), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n  };\n\n  FloatingActionButtonComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: FloatingActionButtonComponent,\n    selectors: [[\"kendo-floatingactionbutton\"]],\n    contentQueries: function FloatingActionButtonComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, DialItemTemplateDirective, 7);\n        ɵngcc0.ɵɵcontentQuery(dirIndex, FloatingActionButtonTemplateDirective, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.dialItemTemplate = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.fabTemplate = _t.first);\n      }\n    },\n    viewQuery: function FloatingActionButtonComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c4, 7);\n        ɵngcc0.ɵɵviewQuery(_c6, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.button = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.popupTemplate = _t.first);\n      }\n    },\n    hostVars: 5,\n    hostBindings: function FloatingActionButtonComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"dir\", ctx.direction);\n        ɵngcc0.ɵɵclassProp(\"k-pos-fixed\", ctx.fixedClass)(\"k-pos-absolute\", ctx.absoluteClass);\n      }\n    },\n    inputs: {\n      positionMode: \"positionMode\",\n      dialItemAnimation: \"dialItemAnimation\",\n      tabIndex: \"tabIndex\",\n      dialItems: \"dialItems\",\n      themeColor: \"themeColor\",\n      size: \"size\",\n      shape: \"shape\",\n      disabled: \"disabled\",\n      align: \"align\",\n      offset: \"offset\",\n      icon: \"icon\",\n      iconClass: \"iconClass\",\n      buttonClass: \"buttonClass\",\n      dialClass: \"dialClass\",\n      text: \"text\"\n    },\n    outputs: {\n      onBlur: \"blur\",\n      onFocus: \"focus\",\n      dialItemClick: \"dialItemClick\",\n      open: \"open\",\n      close: \"close\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([FocusService, NavigationService, NAVIGATION_SETTINGS_PROVIDER$2, LocalizationService, {\n      provide: L10N_PREFIX,\n      useValue: 'kendo.floatingactionbutton'\n    }])],\n    decls: 6,\n    vars: 19,\n    consts: [[\"type\", \"button\", 3, \"tabIndex\", \"ngClass\", \"disabled\", \"kendoEventsOutsideAngular\", \"scope\", \"focus\", \"blur\"], [\"button\", \"\"], [4, \"ngIf\"], [\"popupTemplate\", \"\"], [3, \"ngTemplateOutlet\"], [3, \"ngClass\", 4, \"ngIf\"], [\"class\", \"k-fab-text\", 4, \"ngIf\"], [3, \"ngClass\"], [1, \"k-fab-text\"], [\"kendoDialList\", \"\", 3, \"ngClass\", \"dialItems\", \"dialItemTemplate\", \"align\", \"click\"]],\n    template: function FloatingActionButtonComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"button\", 0, 1);\n        ɵngcc0.ɵɵlistener(\"focus\", function FloatingActionButtonComponent_Template_button_focus_0_listener() {\n          return ctx.focusHandler();\n        })(\"blur\", function FloatingActionButtonComponent_Template_button_blur_0_listener() {\n          return ctx.blurHandler();\n        });\n        ɵngcc0.ɵɵtemplate(2, FloatingActionButtonComponent_2_Template, 1, 1, undefined, 2);\n        ɵngcc0.ɵɵtemplate(3, FloatingActionButtonComponent_ng_container_3_Template, 3, 2, \"ng-container\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(4, FloatingActionButtonComponent_ng_template_4_Template, 1, 5, \"ng-template\", null, 3, ɵngcc0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"k-fab\", true)(\"k-state-disabled\", ctx.disabled);\n        ɵngcc0.ɵɵproperty(\"tabIndex\", ctx.componentTabIndex)(\"ngClass\", ctx.buttonClass)(\"disabled\", ctx.disabled)(\"kendoEventsOutsideAngular\", ɵngcc0.ɵɵpureFunction2(16, _c12, ctx.keyDownHandler, ctx.clickHandler))(\"scope\", ctx);\n        ɵngcc0.ɵɵattribute(\"id\", ctx.id)(\"role\", ctx.role)(\"aria-disabled\", ctx.disabled)(\"aria-expanded\", ctx.ariaExpanded)(\"aria-haspopup\", ctx.ariaHasPopup);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.fabTemplate);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.fabTemplate);\n      }\n    },\n    directives: function () {\n      return [ɵngcc2.NgClass, ɵngcc5.EventsOutsideAngularDirective, ɵngcc2.NgIf, ɵngcc2.NgTemplateOutlet, DialListComponent];\n    },\n    encapsulation: 2\n  });\n\n  __decorate([HostBinding('class.k-pos-fixed'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], FloatingActionButtonComponent.prototype, \"fixedClass\", null);\n\n  __decorate([HostBinding('class.k-pos-absolute'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], FloatingActionButtonComponent.prototype, \"absoluteClass\", null);\n\n  __decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String)], FloatingActionButtonComponent.prototype, \"direction\", void 0);\n\n  __decorate([ViewChild('button', {\n    static: true\n  }), __metadata(\"design:type\", ElementRef)], FloatingActionButtonComponent.prototype, \"button\", void 0);\n\n  __decorate([ViewChild('popupTemplate', {\n    static: true\n  }), __metadata(\"design:type\", TemplateRef)], FloatingActionButtonComponent.prototype, \"popupTemplate\", void 0);\n\n  __decorate([ContentChild(DialItemTemplateDirective, {\n    static: true\n  }), __metadata(\"design:type\", DialItemTemplateDirective)], FloatingActionButtonComponent.prototype, \"dialItemTemplate\", void 0);\n\n  __decorate([ContentChild(FloatingActionButtonTemplateDirective, {\n    static: true\n  }), __metadata(\"design:type\", FloatingActionButtonTemplateDirective)], FloatingActionButtonComponent.prototype, \"fabTemplate\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [String])], FloatingActionButtonComponent.prototype, \"themeColor\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [String])], FloatingActionButtonComponent.prototype, \"size\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [String])], FloatingActionButtonComponent.prototype, \"shape\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [Boolean])], FloatingActionButtonComponent.prototype, \"disabled\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], FloatingActionButtonComponent.prototype, \"align\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], FloatingActionButtonComponent.prototype, \"offset\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], FloatingActionButtonComponent.prototype, \"positionMode\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], FloatingActionButtonComponent.prototype, \"icon\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], FloatingActionButtonComponent.prototype, \"iconClass\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], FloatingActionButtonComponent.prototype, \"buttonClass\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], FloatingActionButtonComponent.prototype, \"dialClass\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], FloatingActionButtonComponent.prototype, \"text\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], FloatingActionButtonComponent.prototype, \"dialItemAnimation\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Number)], FloatingActionButtonComponent.prototype, \"tabIndex\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Array)], FloatingActionButtonComponent.prototype, \"dialItems\", void 0);\n\n  __decorate([Output('blur'), __metadata(\"design:type\", EventEmitter)], FloatingActionButtonComponent.prototype, \"onBlur\", void 0);\n\n  __decorate([Output('focus'), __metadata(\"design:type\", EventEmitter)], FloatingActionButtonComponent.prototype, \"onFocus\", void 0);\n\n  __decorate([Output('dialItemClick'), __metadata(\"design:type\", EventEmitter)], FloatingActionButtonComponent.prototype, \"dialItemClick\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], FloatingActionButtonComponent.prototype, \"open\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], FloatingActionButtonComponent.prototype, \"close\", void 0);\n\n  FloatingActionButtonComponent = __decorate([__metadata(\"design:paramtypes\", [Renderer2, ElementRef, FocusService, NavigationService, NgZone, PopupService, AnimationBuilder, LocalizationService])], FloatingActionButtonComponent);\n  /**\n   * @hidden\n   */\n\n  return FloatingActionButtonComponent;\n})();\nlet DialListComponent = /*#__PURE__*/(() => {\n  let DialListComponent = class DialListComponent {\n    constructor(focusService, cdr) {\n      this.focusService = focusService;\n      this.cdr = cdr;\n      this.hostClass = true;\n      this.subscriptions = new Subscription();\n      this.subscriptions.add(this.focusService.onFocus.subscribe(() => this.cdr.detectChanges()));\n    }\n\n    get bottomClass() {\n      return this.align.vertical === 'top' || this.align.vertical === 'middle';\n    }\n\n    get topClass() {\n      return this.align.vertical === 'bottom';\n    }\n\n    isFocused(index) {\n      return this.focusService.isFocused(index);\n    }\n\n    ngOnDestroy() {\n      this.subscriptions.unsubscribe();\n    }\n\n  };\n\n  DialListComponent.ɵfac = function DialListComponent_Factory(t) {\n    return new (t || DialListComponent)(ɵngcc0.ɵɵdirectiveInject(FocusService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef));\n  };\n\n  DialListComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: DialListComponent,\n    selectors: [[\"\", \"kendoDialList\", \"\"]],\n    hostVars: 6,\n    hostBindings: function DialListComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"k-fab-items\", ctx.hostClass)(\"k-fab-items-bottom\", ctx.bottomClass)(\"k-fab-items-top\", ctx.topClass);\n      }\n    },\n    inputs: {\n      dialItems: \"dialItems\",\n      dialItemTemplate: \"dialItemTemplate\",\n      align: \"align\"\n    },\n    attrs: _c13,\n    decls: 1,\n    vars: 1,\n    consts: [[4, \"ngFor\", \"ngForOf\"], [\"kendoButtonFocusable\", \"\", \"kendoDialItem\", \"\", 3, \"item\", \"index\", \"dialItemTemplate\", \"isFocused\", \"ngClass\", \"ngStyle\", \"align\"]],\n    template: function DialListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, DialListComponent_ng_container_0_Template, 2, 7, \"ng-container\", 0);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.dialItems);\n      }\n    },\n    directives: function () {\n      return [ɵngcc2.NgForOf, FocusableDirective, DialItemComponent, ɵngcc2.NgClass, ɵngcc2.NgStyle];\n    },\n    encapsulation: 2\n  });\n\n  __decorate([HostBinding('class.k-fab-items'), __metadata(\"design:type\", Boolean)], DialListComponent.prototype, \"hostClass\", void 0);\n\n  __decorate([HostBinding('class.k-fab-items-bottom'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], DialListComponent.prototype, \"bottomClass\", null);\n\n  __decorate([HostBinding('class.k-fab-items-top'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], DialListComponent.prototype, \"topClass\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Array)], DialListComponent.prototype, \"dialItems\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", TemplateRef)], DialListComponent.prototype, \"dialItemTemplate\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], DialListComponent.prototype, \"align\", void 0);\n\n  DialListComponent = __decorate([__metadata(\"design:paramtypes\", [FocusService, ChangeDetectorRef])], DialListComponent);\n  /**\n   * @hidden\n   */\n\n  return DialListComponent;\n})();\nlet DialItemComponent = /*#__PURE__*/(() => {\n  let DialItemComponent = class DialItemComponent {\n    constructor(element, renderer, localisationService) {\n      this.element = element;\n      this.renderer = renderer;\n      this.localisationService = localisationService;\n      this.hostClass = true;\n      this.role = 'menuitem';\n    }\n\n    get disabledClass() {\n      return this.item.disabled;\n    }\n\n    get title() {\n      const label = this.item.label;\n      return label ? label : this.itemTitle;\n    }\n\n    get indexAttr() {\n      return this.index;\n    }\n\n    get iconClasses() {\n      const classes = [];\n\n      if (this.item.iconClass) {\n        classes.push(`${this.item.iconClass}`);\n      }\n\n      if (this.item.icon) {\n        classes.push(`k-fab-item-icon k-icon k-i-${this.item.icon}`);\n      }\n\n      return classes;\n    }\n\n    get itemTitle() {\n      const icon = this.item.icon;\n      const itemTitle = this.item.itemTitle;\n      return icon && itemTitle ? itemTitle : icon;\n    }\n\n    ngAfterViewInit() {\n      const element = this.element.nativeElement;\n      const rtl = this.localisationService.rtl;\n      const hAlign = this.align.horizontal;\n      this.renderer.addClass(element, this.getTextDirectionClass(rtl, hAlign));\n    }\n\n    getTextDirectionClass(rtl, hAlign) {\n      const dir = rtl ? 'rtl' : 'ltr';\n      const align = hAlign === 'end' ? 'end' : 'start';\n      const directions = {\n        rtl: {\n          end: 'k-text-left',\n          start: 'k-text-right'\n        },\n        ltr: {\n          start: 'k-text-left',\n          end: 'k-text-right'\n        }\n      };\n      return directions[dir][align];\n    }\n\n  };\n\n  DialItemComponent.ɵfac = function DialItemComponent_Factory(t) {\n    return new (t || DialItemComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LocalizationService));\n  };\n\n  DialItemComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: DialItemComponent,\n    selectors: [[\"\", \"kendoDialItem\", \"\"]],\n    hostVars: 9,\n    hostBindings: function DialItemComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"role\", ctx.role)(\"aria-disabled\", ctx.disabledClass)(\"title\", ctx.title)(\"aria-label\", ctx.title)(\"data-fab-item-index\", ctx.indexAttr);\n        ɵngcc0.ɵɵclassProp(\"k-fab-item\", ctx.hostClass)(\"k-state-disabled\", ctx.disabledClass);\n      }\n    },\n    inputs: {\n      cssClass: \"cssClass\",\n      cssStyle: \"cssStyle\",\n      isFocused: \"isFocused\",\n      index: \"index\",\n      item: \"item\",\n      dialItemTemplate: \"dialItemTemplate\",\n      align: \"align\"\n    },\n    attrs: _c14,\n    decls: 2,\n    vars: 2,\n    consts: [[4, \"ngIf\"], [3, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"class\", \"k-fab-item-text\", 4, \"ngIf\"], [3, \"ngClass\", 4, \"ngIf\"], [1, \"k-fab-item-text\"], [3, \"ngClass\"]],\n    template: function DialItemComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, DialItemComponent_0_Template, 1, 6, undefined, 0);\n        ɵngcc0.ɵɵtemplate(1, DialItemComponent_ng_container_1_Template, 3, 2, \"ng-container\", 0);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.dialItemTemplate);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.dialItemTemplate);\n      }\n    },\n    directives: [ɵngcc2.NgIf, ɵngcc2.NgTemplateOutlet, ɵngcc2.NgClass],\n    encapsulation: 2\n  });\n\n  __decorate([HostBinding('class.k-fab-item'), __metadata(\"design:type\", Boolean)], DialItemComponent.prototype, \"hostClass\", void 0);\n\n  __decorate([HostBinding('attr.role'), __metadata(\"design:type\", String)], DialItemComponent.prototype, \"role\", void 0);\n\n  __decorate([HostBinding('attr.aria-disabled'), HostBinding('class.k-state-disabled'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], DialItemComponent.prototype, \"disabledClass\", null);\n\n  __decorate([HostBinding('attr.title'), HostBinding('attr.aria-label'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], DialItemComponent.prototype, \"title\", null);\n\n  __decorate([HostBinding('attr.data-fab-item-index'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], DialItemComponent.prototype, \"indexAttr\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], DialItemComponent.prototype, \"cssClass\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], DialItemComponent.prototype, \"cssStyle\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], DialItemComponent.prototype, \"isFocused\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], DialItemComponent.prototype, \"index\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], DialItemComponent.prototype, \"item\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", TemplateRef)], DialItemComponent.prototype, \"dialItemTemplate\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], DialItemComponent.prototype, \"align\", void 0);\n\n  DialItemComponent = __decorate([__metadata(\"design:paramtypes\", [ElementRef, Renderer2, LocalizationService])], DialItemComponent);\n  return DialItemComponent;\n})();\nconst exportedModules$1 = [FloatingActionButtonComponent, DialItemTemplateDirective, FloatingActionButtonTemplateDirective];\nconst declarations$1 = [...exportedModules$1, DialListComponent, DialItemComponent];\n/**\n * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})\n * definition for the FloatingActionButton component.\n *\n * @example\n *\n * ```ts-no-run\n * // Import the FloatingActionButton module\n * import { FloatingActionButtonModule } from '@progress/kendo-angular-buttons';\n *\n * // The browser platform with a compiler\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n *\n * import { NgModule } from '@angular/core';\n *\n * // Import the app component\n * import { AppComponent } from './app.component';\n *\n * // Define the app module\n * _@NgModule({\n *     declarations: [AppComponent], // declare app component\n *     imports:      [BrowserModule, FloatingActionButtonModule], // import FloatingActionButton module\n *     bootstrap:    [AppComponent]\n * })\n * export class AppModule {}\n *\n * ```\n */\n\nlet FloatingActionButtonModule = /*#__PURE__*/(() => {\n  let FloatingActionButtonModule = class FloatingActionButtonModule {};\n\n  FloatingActionButtonModule.ɵfac = function FloatingActionButtonModule_Factory(t) {\n    return new (t || FloatingActionButtonModule)();\n  };\n\n  FloatingActionButtonModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: FloatingActionButtonModule\n  });\n  FloatingActionButtonModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, PopupModule, ListModule, EventsModule]]\n  });\n  /**\n   * Represents the [NgModule]({{ site.data.urls.angular['ngmodules'] }})\n   * definition for the Buttons components.\n   *\n   * @example\n   *\n   * ```ts-no-run\n   * // Import the Buttons module\n   * import { ButtonsModule } from '@progress/kendo-angular-buttons';\n   *\n   * // The browser platform with a compiler\n   * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n   *\n   * import { NgModule } from '@angular/core';\n   *\n   * // Import the app component\n   * import { AppComponent } from './app.component';\n   *\n   * // Define the app module\n   * _@NgModule({\n   *     declarations: [AppComponent], // declare app component\n   *     imports:      [BrowserModule, ButtonsModule], // import Buttons module\n   *     bootstrap:    [AppComponent]\n   * })\n   * export class AppModule {}\n   *\n   * // Compile and launch the module\n   * platformBrowserDynamic().bootstrapModule(AppModule);\n   *\n   * ```\n   */\n\n  return FloatingActionButtonModule;\n})();\nlet ButtonsModule = /*#__PURE__*/(() => {\n  let ButtonsModule = class ButtonsModule {};\n\n  ButtonsModule.ɵfac = function ButtonsModule_Factory(t) {\n    return new (t || ButtonsModule)();\n  };\n\n  ButtonsModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: ButtonsModule\n  });\n  ButtonsModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [ButtonGroupModule, ButtonModule, SplitButtonModule, DropDownButtonModule, ChipModule, FloatingActionButtonModule]\n  });\n  return ButtonsModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(ButtonModule, {\n    declarations: [ButtonDirective],\n    exports: [ButtonDirective]\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(ButtonGroupModule, {\n    declarations: function () {\n      return [ButtonGroupComponent];\n    },\n    imports: function () {\n      return [CommonModule, ButtonModule];\n    },\n    exports: function () {\n      return [ButtonGroupComponent];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(ListModule, {\n    declarations: function () {\n      return [ListComponent, FocusableDirective, ButtonItemTemplateDirective, TemplateContextDirective];\n    },\n    imports: function () {\n      return [CommonModule];\n    },\n    exports: function () {\n      return [ListComponent, FocusableDirective, ButtonItemTemplateDirective, TemplateContextDirective];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(SplitButtonModule, {\n    declarations: function () {\n      return [SplitButtonComponent, LocalizedSplitButtonMessagesDirective, SplitButtonCustomMessagesComponent];\n    },\n    imports: function () {\n      return [CommonModule, PopupModule, ButtonModule, ListModule];\n    },\n    exports: function () {\n      return [SplitButtonComponent, ListModule, LocalizedSplitButtonMessagesDirective, SplitButtonCustomMessagesComponent];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(DropDownButtonModule, {\n    declarations: function () {\n      return [DropDownButtonComponent];\n    },\n    imports: function () {\n      return [CommonModule, PopupModule, ListModule, ButtonModule];\n    },\n    exports: function () {\n      return [DropDownButtonComponent, ListModule];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(ChipModule, {\n    declarations: function () {\n      return [ChipComponent, ChipListComponent];\n    },\n    imports: function () {\n      return [CommonModule];\n    },\n    exports: function () {\n      return [ChipComponent, ChipListComponent];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(FloatingActionButtonModule, {\n    declarations: function () {\n      return [FloatingActionButtonComponent, DialItemTemplateDirective, FloatingActionButtonTemplateDirective, DialListComponent, DialItemComponent];\n    },\n    imports: function () {\n      return [CommonModule, PopupModule, ListModule, EventsModule];\n    },\n    exports: function () {\n      return [FloatingActionButtonComponent, DialItemTemplateDirective, FloatingActionButtonTemplateDirective];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(ButtonsModule, {\n    exports: [ButtonGroupModule, ButtonModule, SplitButtonModule, DropDownButtonModule, ChipModule, FloatingActionButtonModule]\n  });\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { KendoButtonService, DialItemComponent, DialListComponent, FocusService, FocusableDirective, ButtonItemTemplateDirective, ListButton, ListComponent, ListModule, TemplateContextDirective, NAVIGATION_CONFIG, NavigationService, LocalizedSplitButtonMessagesDirective, Messages, ButtonDirective, ButtonDirective as Button, ButtonGroupComponent, ButtonGroupComponent as ButtonGroup, ButtonGroupModule, ButtonModule, ButtonsModule, SplitButtonComponent, SplitButtonComponent as SplitButton, SplitButtonModule, SplitButtonCustomMessagesComponent, DropDownButtonComponent, DropDownButtonComponent as DropDownButton, DropDownButtonModule, ChipComponent, ChipListComponent, ChipModule, FloatingActionButtonModule, FloatingActionButtonComponent, FloatingActionButtonTemplateDirective, DialItemTemplateDirective }; //# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Z0tBR3VCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs0Q0FBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBWUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzZCQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBZ0JHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs4REFNaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OzRHQU9zQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O3FOQUFFO0FBQ0YsMENBSUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs4SkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFvQ0c7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzhJQUdpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzBLQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FJRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztxTUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FJRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7dUZBT2U7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OytFQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs2SkFBRTtBQUNGLGdDQUVHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MEpBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0EyRUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs0S0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztrREFBRTtBQUNGLDhGQVVHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7b0tBQUU7QUFDRix3RkFXRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O2lKQU9zQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MkZBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQXVERztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7b0pBT3lCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7d0VBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkF3Q0c7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs2QkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FjRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O3VGQU9lO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzZKQUFFO0FBQ0Ysd0NBSUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztpTUFBRTtBQUNGLG9EQUlHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztrTEFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0E0REc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OzBKQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQW9CRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O2lHQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQWdCRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs4SUFPK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2tQQUtrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyIvKiotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKiBDb3B5cmlnaHQgwqkgMjAyMSBQcm9ncmVzcyBTb2Z0d2FyZSBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiogTGljZW5zZWQgdW5kZXIgY29tbWVyY2lhbCBsaWNlbnNlLiBTZWUgTElDRU5TRS5tZCBpbiB0aGUgcHJvamVjdCByb290IGZvciBtb3JlIGluZm9ybWF0aW9uXG4qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5pbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhLCBfX3BhcmFtIH0gZnJvbSAndHNsaWInO1xuaW1wb3J0IHsgSW5qZWN0YWJsZSwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT3V0cHV0LCBIb3N0QmluZGluZywgSG9zdExpc3RlbmVyLCBEaXJlY3RpdmUsIE9wdGlvbmFsLCBFbGVtZW50UmVmLCBSZW5kZXJlcjIsIE5nWm9uZSwgaXNEZXZNb2RlLCBDb250ZW50Q2hpbGRyZW4sIFF1ZXJ5TGlzdCwgQ29tcG9uZW50LCBOZ01vZHVsZSwgVGVtcGxhdGVSZWYsIFZpZXdDb250YWluZXJSZWYsIEluamVjdGlvblRva2VuLCBJbmplY3QsIENvbnRlbnRDaGlsZCwgVmlld0NoaWxkLCBDaGFuZ2VEZXRlY3RvclJlZiwgZm9yd2FyZFJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBTdWJqZWN0LCBmcm9tRXZlbnQsIG1lcmdlLCBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEtleXMsIGlzQ2hhbmdlZCwgaXNEb2N1bWVudEF2YWlsYWJsZSwgaGFzT2JzZXJ2ZXJzLCBndWlkLCBFdmVudHNNb2R1bGUgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1jb21tb24nO1xuaW1wb3J0IHsgTG9jYWxpemF0aW9uU2VydmljZSwgTDEwTl9QUkVGSVgsIENvbXBvbmVudE1lc3NhZ2VzIH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWFuZ3VsYXItbDEwbic7XG5pbXBvcnQgeyBmaWx0ZXIsIHRha2UgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyB2YWxpZGF0ZVBhY2thZ2UgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tbGljZW5zaW5nJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBQb3B1cFNlcnZpY2UsIFBvcHVwTW9kdWxlIH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWFuZ3VsYXItcG9wdXAnO1xuaW1wb3J0IHsgc2VxdWVuY2UsIHF1ZXJ5LCBzdHlsZSwgc3RhZ2dlciwgYW5pbWF0ZSwgQW5pbWF0aW9uQnVpbGRlciB9IGZyb20gJ0Bhbmd1bGFyL2FuaW1hdGlvbnMnO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IEtlbmRvQnV0dG9uU2VydmljZSA9IGNsYXNzIEtlbmRvQnV0dG9uU2VydmljZSB7XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJ1dHRvbkxvb2tDaGFuZ2UgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KCdkZWZhdWx0Jyk7XG4gICAgICAgIHRoaXMuYnV0dG9uQ2xpY2tlZCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuYnV0dG9uQ2xpY2tlZCQgPSB0aGlzLmJ1dHRvbkNsaWNrZWQuYXNPYnNlcnZhYmxlKCk7XG4gICAgfVxuICAgIGNsaWNrKGJ1dHRvbikge1xuICAgICAgICB0aGlzLmJ1dHRvbkNsaWNrZWQubmV4dChidXR0b24pO1xuICAgIH1cbiAgICBzZXRCdXR0b25Mb29rKGxvb2spIHtcbiAgICAgICAgdGhpcy5idXR0b25Mb29rQ2hhbmdlLm5leHQobG9vayk7XG4gICAgfVxufTtcbktlbmRvQnV0dG9uU2VydmljZSA9IF9fZGVjb3JhdGUoW1xuICAgIEluamVjdGFibGUoKVxuXSwgS2VuZG9CdXR0b25TZXJ2aWNlKTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IHBhY2thZ2VNZXRhZGF0YSA9IHtcbiAgICBuYW1lOiAnQHByb2dyZXNzL2tlbmRvLWFuZ3VsYXItYnV0dG9ucycsXG4gICAgcHJvZHVjdE5hbWU6ICdLZW5kbyBVSSBmb3IgQW5ndWxhcicsXG4gICAgcHJvZHVjdENvZGVzOiBbJ0tFTkRPVUlBTkdVTEFSJywgJ0tFTkRPVUlDT01QTEVURSddLFxuICAgIHB1Ymxpc2hEYXRlOiAxNjM1OTM3NzYyLFxuICAgIHZlcnNpb246ICcnLFxuICAgIGxpY2Vuc2luZ0RvY3NVcmw6ICdodHRwczovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL215LWxpY2Vuc2UvP3V0bV9tZWRpdW09cHJvZHVjdCZ1dG1fc291cmNlPWtlbmRvYW5ndWxhciZ1dG1fY2FtcGFpZ249a2VuZG8tdWktYW5ndWxhci1wdXJjaGFzZS1saWNlbnNlLWtleXMtd2FybmluZydcbn07XG5cbmNvbnN0IFNQQU5fVEFHX05BTUUgPSAnU1BBTic7XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIEtlbmRvIFVJIEJ1dHRvbiBjb21wb25lbnQgZm9yIEFuZ3VsYXIuXG4gKi9cbmxldCBCdXR0b25EaXJlY3RpdmUgPSBjbGFzcyBCdXR0b25EaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIHJlbmRlcmVyLCBzZXJ2aWNlLCBsb2NhbGl6YXRpb24sIG5nWm9uZSkge1xuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xuICAgICAgICB0aGlzLm5nWm9uZSA9IG5nWm9uZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb3ZpZGVzIHZpc3VhbCBzdHlsaW5nIHRoYXQgaW5kaWNhdGVzIGlmIHRoZSBCdXR0b24gaXMgYWN0aXZlLlxuICAgICAgICAgKiBCeSBkZWZhdWx0LCBgdG9nZ2xlYWJsZWAgaXMgc2V0IHRvIGBmYWxzZWAuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRvZ2dsZWFibGUgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZHMgdmlzdWFsIHdlaWdodCB0byB0aGUgQnV0dG9uIGFuZCBtYWtlcyBpdCBwcmltYXJ5LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wcmltYXJ5ID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGFuZ2VzIHRoZSB2aXN1YWwgYXBwZWFyYW5jZSBieSB1c2luZyBhbHRlcm5hdGl2ZSBzdHlsaW5nIG9wdGlvbnNcbiAgICAgICAgICogKFttb3JlIGluZm9ybWF0aW9uIGFuZCBleGFtcGxlc10oeyUgc2x1ZyBhcHBlYXJhbmNlX2J1dHRvbiAlfSkpLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgYXZhaWxhYmxlIHZhbHVlcyBhcmU6XG4gICAgICAgICAqICogW2BCdXR0b25Mb29rYF0oeyUgc2x1ZyBhcGlfYnV0dG9uc19idXR0b25sb29rICV9KSA9IGBmbGF0YCB8IGBvdXRsaW5lYFxuICAgICAgICAgKiAqIGBjbGVhcmBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubG9vayA9ICdkZWZhdWx0JztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucm9sZSA9ICdidXR0b24nO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSBzZWxlY3RlZCBzdGF0ZSBvZiBhIHRvZ2dsZWFibGUgYnV0dG9uIGlzIGNoYW5nZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBldmVudCBhcmd1bWVudCBpcyB0aGUgbmV3IHNlbGVjdGVkIHN0YXRlIChib29sZWFuKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHVzZXIgY2xpY2tzIHRoZSBidXR0b24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsaWNrID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmlzRGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc0ljb24gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc0ljb25DbGFzcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9mb2N1c2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZG9tRXZlbnRzID0gW107XG4gICAgICAgIHZhbGlkYXRlUGFja2FnZShwYWNrYWdlTWV0YWRhdGEpO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGxvY2FsaXphdGlvbi5ydGwgPyAncnRsJyA6ICdsdHInO1xuICAgICAgICB0aGlzLmxvY2FsaXphdGlvbkNoYW5nZVN1YnNjcmlwdGlvbiA9IGxvY2FsaXphdGlvbi5jaGFuZ2VzXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCh7IHJ0bCB9KSA9PiB0aGlzLmRpcmVjdGlvbiA9IHJ0bCA/ICdydGwnIDogJ2x0cicpO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmFja3dhcmRzLWNvbXBhdGlibGUgYWxpYXNcbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgdG9nZ2xhYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b2dnbGVhYmxlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgc2V0IHRvZ2dsYWJsZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnRvZ2dsZWFibGUgPSB2YWx1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgc2VsZWN0ZWQgc3RhdGUgb2YgdGhlIEJ1dHRvbi5cbiAgICAgKi9cbiAgICBnZXQgc2VsZWN0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZCB8fCBmYWxzZTtcbiAgICB9XG4gICAgc2V0IHNlbGVjdGVkKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3NlbGVjdGVkID0gdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZXQgdGFiSW5kZXgoaW5kZXgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnRhYkluZGV4ID0gaW5kZXg7XG4gICAgfVxuICAgIGdldCB0YWJJbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC50YWJJbmRleDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVmaW5lcyB0aGUgbmFtZSBmb3IgYW4gZXhpc3RpbmcgaWNvbiBpbiBhIEtlbmRvIFVJIHRoZW1lLlxuICAgICAqIFRoZSBpY29uIGlzIHJlbmRlcmVkIGluc2lkZSB0aGUgQnV0dG9uIGJ5IGEgYHNwYW4uay1pY29uYCBlbGVtZW50LlxuICAgICAqL1xuICAgIHNldCBpY29uKGljb24pIHtcbiAgICAgICAgaWYgKGljb24pIHtcbiAgICAgICAgICAgIHRoaXMuaWNvblNldHRlcihpY29uLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0ljb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsYXNzZXMgPSAnay1pY29uIGstaS0nICsgaWNvbjtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEljb24oY2xhc3Nlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaXNJY29uID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUljb25Ob2RlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVmaW5lcyBhIENTUyBjbGFzcyZtZGFzaDtvciBtdWx0aXBsZSBjbGFzc2VzIHNlcGFyYXRlZCBieSBzcGFjZXMmbWRhc2g7XG4gICAgICogd2hpY2ggYXJlIGFwcGxpZWQgdG8gYSBgc3BhbmAgZWxlbWVudCBpbnNpZGUgdGhlIEJ1dHRvbi4gQWxsb3dzIHRoZSB1c2FnZSBvZiBjdXN0b20gaWNvbnMuXG4gICAgICovXG4gICAgc2V0IGljb25DbGFzcyhpY29uQ2xhc3NOYW1lKSB7XG4gICAgICAgIGlmIChpY29uQ2xhc3NOYW1lKSB7XG4gICAgICAgICAgICB0aGlzLmljb25TZXR0ZXIoaWNvbkNsYXNzTmFtZSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNJY29uQ2xhc3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkSWNvbihpY29uQ2xhc3NOYW1lKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pc0ljb25DbGFzcyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVJY29uTm9kZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmluZXMgYSBVUkwgd2hpY2ggaXMgdXNlZCBmb3IgYW4gYGltZ2AgZWxlbWVudCBpbnNpZGUgdGhlIEJ1dHRvbi5cbiAgICAgKiBUaGUgVVJMIGNhbiBiZSByZWxhdGl2ZSBvciBhYnNvbHV0ZS4gSWYgcmVsYXRpdmUsIGl0IGlzIGV2YWx1YXRlZCB3aXRoIHJlbGF0aW9uIHRvIHRoZSB3ZWIgcGFnZSBVUkwuXG4gICAgICovXG4gICAgc2V0IGltYWdlVXJsKGltYWdlVXJsKSB7XG4gICAgICAgIGlmIChpbWFnZVVybCkge1xuICAgICAgICAgICAgdGhpcy5pY29uU2V0dGVyKGltYWdlVXJsLCB0aGlzLmFkZEltZ0ljb24uYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUltYWdlTm9kZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHNldCB0byBgdHJ1ZWAsIGl0IGRpc2FibGVzIHRoZSBCdXR0b24uXG4gICAgICovXG4gICAgc2V0IGRpc2FibGVkKGRpc2FibGVkKSB7XG4gICAgICAgIHRoaXMuaXNEaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFByb3BlcnR5KHRoaXMuZWxlbWVudCwgJ2Rpc2FibGVkJywgZGlzYWJsZWQpO1xuICAgIH1cbiAgICBnZXQgZGlzYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzRGlzYWJsZWQ7XG4gICAgfVxuICAgIHNldCBpc0ZvY3VzZWQoaXNGb2N1c2VkKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlQ2xhc3MoJ2stc3RhdGUtZm9jdXNlZCcsIGlzRm9jdXNlZCk7XG4gICAgICAgIHRoaXMuX2ZvY3VzZWQgPSBpc0ZvY3VzZWQ7XG4gICAgfVxuICAgIGdldCBpc0ZvY3VzZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb2N1c2VkO1xuICAgIH1cbiAgICBnZXQgY2xhc3NCdXR0b24oKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXQgY2xhc3NQcmltYXJ5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmltYXJ5O1xuICAgIH1cbiAgICBnZXQgaXNUb2dnbGVhYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b2dnbGVhYmxlO1xuICAgIH1cbiAgICBnZXQgaXNGbGF0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb29rID09PSAnZmxhdCc7XG4gICAgfVxuICAgIGdldCBpc0JhcmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvb2sgPT09ICdiYXJlJztcbiAgICB9XG4gICAgZ2V0IGlzT3V0bGluZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9vayA9PT0gJ291dGxpbmUnO1xuICAgIH1cbiAgICBnZXQgaXNDbGVhcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9vayA9PT0gJ2NsZWFyJztcbiAgICB9XG4gICAgZ2V0IHJvbGVTZXR0ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvbGU7XG4gICAgfVxuICAgIGdldCBjbGFzc0Rpc2FibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0Rpc2FibGVkO1xuICAgIH1cbiAgICBnZXQgY2xhc3NBY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkO1xuICAgIH1cbiAgICBnZXQgZ2V0RGlyZWN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBvbkZvY3VzKCkge1xuICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBvbkJsdXIoKSB7XG4gICAgICAgIHRoaXMuaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBjb25zdCBpc1NwYW4gPSB0aGlzLmVsZW1lbnQudGFnTmFtZSA9PT0gU1BBTl9UQUdfTkFNRTtcbiAgICAgICAgaWYgKHRoaXMuc2VydmljZSkge1xuICAgICAgICAgICAgdGhpcy5idXR0b25Mb29rQ2hhbmdlU3Vic2NyaXB0aW9uID0gdGhpcy5zZXJ2aWNlLmJ1dHRvbkxvb2tDaGFuZ2VcbiAgICAgICAgICAgICAgICAucGlwZShmaWx0ZXIoKGxvb2spID0+IGxvb2sgIT09ICdkZWZhdWx0JykpXG4gICAgICAgICAgICAgICAgLnN1YnNjcmliZSgobG9vaykgPT4gdGhpcy5sb29rID0gbG9vayk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmVsZW1lbnQuaGFzQXR0cmlidXRlKCdyb2xlJykgJiYgdGhpcy50b2dnbGFibGUpIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQXJpYVByZXNzZWQodGhpcy50b2dnbGVhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5yb2xlKSB7XG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgncm9sZScsIHRoaXMucm9sZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kb21FdmVudHMucHVzaCh0aGlzLnJlbmRlcmVyLmxpc3Rlbih0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMuX29uQnV0dG9uQ2xpY2suYmluZCh0aGlzKSkpO1xuICAgICAgICAgICAgdGhpcy5kb21FdmVudHMucHVzaCh0aGlzLnJlbmRlcmVyLmxpc3Rlbih0aGlzLmVsZW1lbnQsICdrZXlkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlzU3BhbiAmJiAoZXZlbnQua2V5Q29kZSA9PT0gS2V5cy5TcGFjZSB8fCBldmVudC5rZXlDb2RlID09PSBLZXlzLkVudGVyKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaWNrLmVtaXQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkJ1dHRvbkNsaWNrKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlKSB7XG4gICAgICAgIGlmIChpc0NoYW5nZWQoJ3RvZ2dsYWJsZScsIGNoYW5nZSkgfHwgaXNDaGFuZ2VkKCd0b2dnbGVhYmxlJywgY2hhbmdlKSkge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVBcmlhUHJlc3NlZCh0aGlzLnRvZ2dsZWFibGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpIHtcbiAgICAgICAgdGhpcy5zZXRJY29uVGV4dENsYXNzZXMoKTtcbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuaW1hZ2VOb2RlID0gbnVsbDtcbiAgICAgICAgdGhpcy5pY29uTm9kZSA9IG51bGw7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmxvY2FsaXphdGlvbkNoYW5nZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICBpZiAodGhpcy5zZXJ2aWNlICYmIHRoaXMuYnV0dG9uTG9va0NoYW5nZVN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5idXR0b25Mb29rQ2hhbmdlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGVmZXJUaW1lb3V0KTtcbiAgICAgICAgdGhpcy5kb21FdmVudHMuZm9yRWFjaCh1bmJpbmRIYW5kbGVyID0+IHVuYmluZEhhbmRsZXIoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvY3VzZXMgdGhlIEJ1dHRvbiBjb21wb25lbnQuXG4gICAgICovXG4gICAgZm9jdXMoKSB7XG4gICAgICAgIGlmIChpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJsdXJzIHRoZSBCdXR0b24gY29tcG9uZW50LlxuICAgICAqL1xuICAgIGJsdXIoKSB7XG4gICAgICAgIGlmIChpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5ibHVyKCk7XG4gICAgICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZXRBdHRyaWJ1dGUoYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIGF0dHJpYnV0ZSwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZSkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIGF0dHJpYnV0ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKlxuICAgICAqIEludGVybmFsIHNldHRlciB0aGF0IHRyaWdnZXJzIHNlbGVjdGVkQ2hhbmdlXG4gICAgICovXG4gICAgc2V0U2VsZWN0ZWQodmFsdWUpIHtcbiAgICAgICAgY29uc3QgY2hhbmdlZCA9IHRoaXMuc2VsZWN0ZWQgIT09IHZhbHVlO1xuICAgICAgICB0aGlzLnNlbGVjdGVkID0gdmFsdWU7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLXByZXNzZWQnLCB0aGlzLnNlbGVjdGVkLnRvU3RyaW5nKCkpO1xuICAgICAgICB0aGlzLnRvZ2dsZUNsYXNzKCdrLXN0YXRlLXNlbGVjdGVkJywgdGhpcy5zZWxlY3RlZCk7XG4gICAgICAgIGlmIChjaGFuZ2VkICYmIGhhc09ic2VydmVycyh0aGlzLnNlbGVjdGVkQ2hhbmdlKSkge1xuICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2hhbmdlLmVtaXQodmFsdWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9nZ2xlQXJpYVByZXNzZWQoc2hvdWxkU2V0KSB7XG4gICAgICAgIGlmICghaXNEb2N1bWVudEF2YWlsYWJsZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNob3VsZFNldCkge1xuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2FyaWEtcHJlc3NlZCcsIHRoaXMuc2VsZWN0ZWQudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1wcmVzc2VkJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFzVGV4dCgpIHtcbiAgICAgICAgaWYgKGlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIFN0cmluZyh0aGlzLmVsZW1lbnQudGV4dENvbnRlbnQpLnRyaW0oKS5sZW5ndGggPiAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZEltZ0ljb24oaW1hZ2VVcmwpIHtcbiAgICAgICAgbGV0IHJlbmRlcmVyID0gdGhpcy5yZW5kZXJlcjtcbiAgICAgICAgaWYgKHRoaXMuaW1hZ2VOb2RlKSB7XG4gICAgICAgICAgICByZW5kZXJlci5zZXRQcm9wZXJ0eSh0aGlzLmltYWdlTm9kZSwgJ3NyYycsIGltYWdlVXJsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VOb2RlID0gcmVuZGVyZXIuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgICByZW5kZXJlci5zZXRQcm9wZXJ0eSh0aGlzLmltYWdlTm9kZSwgJ3NyYycsIGltYWdlVXJsKTtcbiAgICAgICAgICAgIHJlbmRlcmVyLnNldFByb3BlcnR5KHRoaXMuaW1hZ2VOb2RlLCAnY2xhc3NOYW1lJywgJ2staW1hZ2UnKTtcbiAgICAgICAgICAgIHJlbmRlcmVyLnNldEF0dHJpYnV0ZSh0aGlzLmltYWdlTm9kZSwgJ3JvbGUnLCAncHJlc2VudGF0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLnByZXBlbmRDaGlsZCh0aGlzLmltYWdlTm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkSWNvbihjbGFzc05hbWVzKSB7XG4gICAgICAgIGxldCByZW5kZXJlciA9IHRoaXMucmVuZGVyZXI7XG4gICAgICAgIGlmICh0aGlzLmljb25Ob2RlKSB7XG4gICAgICAgICAgICByZW5kZXJlci5zZXRQcm9wZXJ0eSh0aGlzLmljb25Ob2RlLCAnY2xhc3NOYW1lJywgY2xhc3NOYW1lcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNEb2N1bWVudEF2YWlsYWJsZSgpKSB7XG4gICAgICAgICAgICB0aGlzLmljb25Ob2RlID0gcmVuZGVyZXIuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgcmVuZGVyZXIuc2V0UHJvcGVydHkodGhpcy5pY29uTm9kZSwgJ2NsYXNzTmFtZScsIGNsYXNzTmFtZXMpO1xuICAgICAgICAgICAgcmVuZGVyZXIuc2V0QXR0cmlidXRlKHRoaXMuaWNvbk5vZGUsICdyb2xlJywgJ3ByZXNlbnRhdGlvbicpO1xuICAgICAgICAgICAgdGhpcy5wcmVwZW5kQ2hpbGQodGhpcy5pY29uTm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJlcGVuZENoaWxkKG5vZGUpIHtcbiAgICAgICAgdGhpcy5kZWZlcigoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZW5kZXJlciAmJiBub2RlICE9PSB0aGlzLmVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuaW5zZXJ0QmVmb3JlKHRoaXMuZWxlbWVudCwgbm9kZSwgdGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGVmZXIoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kZWZlclRpbWVvdXQgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCAwKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGljb25TZXR0ZXIoaWNvbiwgaW5zZXJ0SWNvbikge1xuICAgICAgICBpZiAoaWNvbikge1xuICAgICAgICAgICAgaW5zZXJ0SWNvbihpY29uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldEljb25UZXh0Q2xhc3NlcygpO1xuICAgIH1cbiAgICByZW1vdmVJbWFnZU5vZGUoKSB7XG4gICAgICAgIGlmICh0aGlzLmltYWdlTm9kZSAmJiB0aGlzLnJlbmRlcmVyLnBhcmVudE5vZGUodGhpcy5pbWFnZU5vZGUpKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCwgdGhpcy5pbWFnZU5vZGUpO1xuICAgICAgICAgICAgdGhpcy5pbWFnZU5vZGUgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZUljb25Ob2RlKCkge1xuICAgICAgICBpZiAodGhpcy5pY29uTm9kZSAmJiB0aGlzLnJlbmRlcmVyLnBhcmVudE5vZGUodGhpcy5pY29uTm9kZSkpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50LCB0aGlzLmljb25Ob2RlKTtcbiAgICAgICAgICAgIHRoaXMuaWNvbk5vZGUgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZUljb25Ob2RlKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNJY29uICYmICF0aGlzLmlzSWNvbkNsYXNzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUljb25Ob2RlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0SWNvblRleHRDbGFzc2VzKCkge1xuICAgICAgICBjb25zdCBoYXNJY29uID0gdGhpcy5pc0ljb24gfHwgdGhpcy5pc0ljb25DbGFzcyB8fCB0aGlzLmltYWdlTm9kZTtcbiAgICAgICAgY29uc3QgaGFzVGV4dCA9IHRoaXMuaGFzVGV4dCgpO1xuICAgICAgICB0aGlzLnRvZ2dsZUNsYXNzKCdrLWJ1dHRvbi1pY29uJywgaGFzSWNvbiAmJiAhaGFzVGV4dCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQ2xhc3MoJ2stYnV0dG9uLWljb250ZXh0JywgaGFzSWNvbiAmJiBoYXNUZXh0KTtcbiAgICB9XG4gICAgdG9nZ2xlQ2xhc3MoY2xhc3NOYW1lLCBhZGQpIHtcbiAgICAgICAgaWYgKGFkZCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsZW1lbnQsIGNsYXNzTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWxlbWVudCwgY2xhc3NOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfb25CdXR0b25DbGljaygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkICYmIHRoaXMuc2VydmljZSkge1xuICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlcnZpY2UuY2xpY2sodGhpcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50b2dnbGFibGUgJiYgIXRoaXMuc2VydmljZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZCghdGhpcy5zZWxlY3RlZCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIEJ1dHRvbkRpcmVjdGl2ZS5wcm90b3R5cGUsIFwidG9nZ2xlYWJsZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbl0sIEJ1dHRvbkRpcmVjdGl2ZS5wcm90b3R5cGUsIFwidG9nZ2xhYmxlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIEJ1dHRvbkRpcmVjdGl2ZS5wcm90b3R5cGUsIFwicHJpbWFyeVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgQnV0dG9uRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJsb29rXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuXSwgQnV0dG9uRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJzZWxlY3RlZFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlciksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOdW1iZXJdKVxuXSwgQnV0dG9uRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJ0YWJJbmRleFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtTdHJpbmddKVxuXSwgQnV0dG9uRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJpY29uXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1N0cmluZ10pXG5dLCBCdXR0b25EaXJlY3RpdmUucHJvdG90eXBlLCBcImljb25DbGFzc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtTdHJpbmddKVxuXSwgQnV0dG9uRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJpbWFnZVVybFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG5dLCBCdXR0b25EaXJlY3RpdmUucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgQnV0dG9uRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJyb2xlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgQnV0dG9uRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJzZWxlY3RlZENoYW5nZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIEJ1dHRvbkRpcmVjdGl2ZS5wcm90b3R5cGUsIFwiY2xpY2tcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWJ1dHRvbicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBCdXR0b25EaXJlY3RpdmUucHJvdG90eXBlLCBcImNsYXNzQnV0dG9uXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstcHJpbWFyeScpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBCdXR0b25EaXJlY3RpdmUucHJvdG90eXBlLCBcImNsYXNzUHJpbWFyeVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXRvZ2dsZS1idXR0b24nKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgQnV0dG9uRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJpc1RvZ2dsZWFibGVcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1mbGF0JyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIEJ1dHRvbkRpcmVjdGl2ZS5wcm90b3R5cGUsIFwiaXNGbGF0XCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstYmFyZScpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBCdXR0b25EaXJlY3RpdmUucHJvdG90eXBlLCBcImlzQmFyZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLW91dGxpbmUnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgQnV0dG9uRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJpc091dGxpbmVcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1idXR0b24tY2xlYXInKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgQnV0dG9uRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJpc0NsZWFyXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIucm9sZScpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIEJ1dHRvbkRpcmVjdGl2ZS5wcm90b3R5cGUsIFwicm9sZVNldHRlclwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLmFyaWEtZGlzYWJsZWQnKSxcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1zdGF0ZS1kaXNhYmxlZCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBCdXR0b25EaXJlY3RpdmUucHJvdG90eXBlLCBcImNsYXNzRGlzYWJsZWRcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1zdGF0ZS1zZWxlY3RlZCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBCdXR0b25EaXJlY3RpdmUucHJvdG90eXBlLCBcImNsYXNzQWN0aXZlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIuZGlyJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgQnV0dG9uRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJnZXREaXJlY3Rpb25cIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0TGlzdGVuZXIoJ2ZvY3VzJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cmV0dXJudHlwZVwiLCB2b2lkIDApXG5dLCBCdXR0b25EaXJlY3RpdmUucHJvdG90eXBlLCBcIm9uRm9jdXNcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0TGlzdGVuZXIoJ2JsdXInKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbl0sIEJ1dHRvbkRpcmVjdGl2ZS5wcm90b3R5cGUsIFwib25CbHVyXCIsIG51bGwpO1xuQnV0dG9uRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgZXhwb3J0QXM6ICdrZW5kb0J1dHRvbicsXG4gICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBMMTBOX1BSRUZJWCxcbiAgICAgICAgICAgICAgICB1c2VWYWx1ZTogJ2tlbmRvLmJ1dHRvbidcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgc2VsZWN0b3I6ICdidXR0b25ba2VuZG9CdXR0b25dLCBzcGFuW2tlbmRvQnV0dG9uXScgLy8gdHNsaW50OmRpc2FibGUtbGluZVxuICAgIH0pLFxuICAgIF9fcGFyYW0oMiwgT3B0aW9uYWwoKSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtFbGVtZW50UmVmLFxuICAgICAgICBSZW5kZXJlcjIsXG4gICAgICAgIEtlbmRvQnV0dG9uU2VydmljZSxcbiAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgTmdab25lXSlcbl0sIEJ1dHRvbkRpcmVjdGl2ZSk7XG5cbi8qIHRzbGludDpkaXNhYmxlOm5vLW51bGwta2V5d29yZCAqL1xuLyogdHNsaW50OmRpc2FibGU6bm8tYml0d2lzZSAqL1xuY29uc3QgcmVzb2x2ZWRQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGlzUHJlc2VudCA9ICh2YWx1ZSkgPT4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZDtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCB0aWNrID0gKGYpID0+IChyZXNvbHZlZFByb21pc2UudGhlbihmKSk7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gaXNEb2N1bWVudE5vZGUoY29udGFpbmVyKSB7XG4gICAgcmV0dXJuIGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gOTtcbn1cbi8qKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBjbG9zZXN0KGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gICAgaWYgKGVsZW1lbnQuY2xvc2VzdCkge1xuICAgICAgICByZXR1cm4gZWxlbWVudC5jbG9zZXN0KHNlbGVjdG9yKTtcbiAgICB9XG4gICAgY29uc3QgbWF0Y2hlcyA9IEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMgP1xuICAgICAgICAoZWwsIHNlbCkgPT4gZWwubWF0Y2hlcyhzZWwpXG4gICAgICAgIDogKGVsLCBzZWwpID0+IGVsLm1zTWF0Y2hlc1NlbGVjdG9yKHNlbCk7XG4gICAgbGV0IG5vZGUgPSBlbGVtZW50O1xuICAgIHdoaWxlIChub2RlICYmICFpc0RvY3VtZW50Tm9kZShub2RlKSkge1xuICAgICAgICBpZiAobWF0Y2hlcyhub2RlLCBzZWxlY3RvcikpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG4gICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgfVxufVxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IHJlcGxhY2VNZXNzYWdlUGxhY2Vob2xkZXIgPSAobWVzc2FnZSwgbmFtZSwgdmFsdWUpID0+IG1lc3NhZ2UucmVwbGFjZShuZXcgUmVnRXhwKGBcXHtcXFxccyoke25hbWV9XFxcXHMqXFx9YCwgJ2cnKSwgdmFsdWUpO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgUHJldmVudGFibGVFdmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJldmVudGVkID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByZXZlbnRzIHRoZSBkZWZhdWx0IGFjdGlvbiBmb3IgYSBzcGVjaWZpZWQgZXZlbnQuXG4gICAgICogSW4gdGhpcyB3YXksIHRoZSBzb3VyY2UgY29tcG9uZW50IHN1cHByZXNzZXMgdGhlIGJ1aWx0LWluIGJlaGF2aW9yIHRoYXQgZm9sbG93cyB0aGUgZXZlbnQuXG4gICAgICovXG4gICAgcHJldmVudERlZmF1bHQoKSB7XG4gICAgICAgIHRoaXMucHJldmVudGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSWYgdGhlIGV2ZW50IGlzIHByZXZlbnRlZCBieSBhbnkgb2YgaXRzIHN1YnNjcmliZXJzLCByZXR1cm5zIGB0cnVlYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgZGVmYXVsdCBhY3Rpb24gd2FzIHByZXZlbnRlZC4gT3RoZXJ3aXNlLCByZXR1cm5zIGBmYWxzZWAuXG4gICAgICovXG4gICAgaXNEZWZhdWx0UHJldmVudGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmV2ZW50ZWQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgdGFiaW5kZXggPSAndGFiaW5kZXgnO1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBLZW5kbyBVSSBCdXR0b25Hcm91cCBjb21wb25lbnQgZm9yIEFuZ3VsYXIuXG4gKi9cbmxldCBCdXR0b25Hcm91cENvbXBvbmVudCA9IGNsYXNzIEJ1dHRvbkdyb3VwQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlLCBsb2NhbGl6YXRpb24sIGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJ5IGRlZmF1bHQsIHRoZSBzZWxlY3Rpb24gbW9kZSBvZiB0aGUgQnV0dG9uR3JvdXAgaXMgc2V0IHRvIGBtdWx0aXBsZWAuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNlbGVjdGlvbiA9ICdtdWx0aXBsZSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGFuZ2VzIHRoZSB2aXN1YWwgYXBwZWFyYW5jZSBieSB1c2luZyBhbHRlcm5hdGl2ZSBzdHlsaW5nIG9wdGlvbnNcbiAgICAgICAgICogKFttb3JlIGluZm9ybWF0aW9uIGFuZCBleGFtcGxlc10oeyUgc2x1ZyBzdHlsaW5nX2J1dHRvbmdyb3VwICV9KSkuXG4gICAgICAgICAqIFRoZSBgbG9va2AgcHJvcGVydHkgb2YgdGhlIEJ1dHRvbkdyb3VwIHRha2VzIHByZWNlZGVuY2Ugb3ZlciB0aGUgYGxvb2tgIHByb3BlcnR5XG4gICAgICAgICAqIG9mIHRoZSBpbmRpdmlkdWFsIGJ1dHRvbnMgdGhhdCBhcmUgcGFydCBvZiB0aGUgZ3JvdXAuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBhdmFpbGFibGUgdmFsdWVzIGFyZTpcbiAgICAgICAgICogKiBgZmxhdGBcbiAgICAgICAgICogKiBgb3V0bGluZWBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubG9vayA9ICdkZWZhdWx0JztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGV2ZXJ5IHRpbWUga2V5Ym9hcmQgbmF2aWdhdGlvbiBvY2N1cnMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5hdmlnYXRlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLl90YWJJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuY3VycmVudFRhYkluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5sb2NhbGl6YXRpb25DaGFuZ2VTdWJzY3JpcHRpb24gPSBsb2NhbGl6YXRpb24uY2hhbmdlcy5zdWJzY3JpYmUoKHsgcnRsIH0pID0+IHRoaXMuZGlyZWN0aW9uID0gcnRsID8gJ3J0bCcgOiAnbHRyJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgW2B0YWJJbmRleGBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvR2xvYmFsX2F0dHJpYnV0ZXMvdGFiaW5kZXgpIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICovXG4gICAgc2V0IHRhYkluZGV4KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3RhYkluZGV4ID0gdmFsdWU7XG4gICAgICAgIHRoaXMuY3VycmVudFRhYkluZGV4ID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCB0YWJJbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RhYkluZGV4O1xuICAgIH1cbiAgICBnZXQgd3JhcHBlckNsYXNzKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0IGRpc2FibGVkQ2xhc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkO1xuICAgIH1cbiAgICBnZXQgc3RyZXRjaGVkQ2xhc3MoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMud2lkdGg7XG4gICAgfVxuICAgIGdldCBpc0ZsYXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvb2sgPT09ICdmbGF0JztcbiAgICB9XG4gICAgZ2V0IGlzQmFyZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9vayA9PT0gJ2JhcmUnO1xuICAgIH1cbiAgICBnZXQgaXNPdXRsaW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb29rID09PSAnb3V0bGluZSc7XG4gICAgfVxuICAgIGdldCBnZXRSb2xlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc1NlbGVjdGlvblNpbmdsZSgpID8gJ3JhZGlvZ3JvdXAnIDogJ2dyb3VwJztcbiAgICB9XG4gICAgZ2V0IGRpcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uO1xuICAgIH1cbiAgICBnZXQgYXJpYURpc2FibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlZDtcbiAgICB9XG4gICAgZ2V0IHdyYXBwZXJXaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7XG4gICAgfVxuICAgIGdldCB3cmFwcGVyVGFiSW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkID8gdW5kZWZpbmVkIDogdGhpcy5jdXJyZW50VGFiSW5kZXg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBrZXlkb3duKGV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZUZvY3VzKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgb25Gb2N1cygpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50VGFiSW5kZXggPSAtMTtcbiAgICAgICAgY29uc3QgZm9jdXNlZEluZGV4ID0gdGhpcy5idXR0b25zLnRvQXJyYXkoKS5maW5kSW5kZXgoY3VycmVudCA9PiBjdXJyZW50LmVsZW1lbnQudGFiSW5kZXggIT09IC0xKTtcbiAgICAgICAgY29uc3QgaW5kZXggPSBmb2N1c2VkSW5kZXggPT09IC0xID8gMCA6IGZvY3VzZWRJbmRleDtcbiAgICAgICAgdGhpcy5mb2N1cyh0aGlzLmJ1dHRvbnMuZmlsdGVyKChfY3VycmVudCwgaSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGkgPT09IGluZGV4O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBmb2N1c291dChldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQucmVsYXRlZFRhcmdldCAmJiBldmVudC5yZWxhdGVkVGFyZ2V0LnBhcmVudE5vZGUgIT09IHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmRlZm9jdXModGhpcy5idXR0b25zLnRvQXJyYXkoKSk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRUYWJJbmRleCA9IHRoaXMudGFiSW5kZXg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuc2VydmljZS5zZXRCdXR0b25Mb29rKHRoaXMubG9vayk7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gdGhpcy5zZXJ2aWNlLmJ1dHRvbkNsaWNrZWQkLnN1YnNjcmliZSgoYnV0dG9uKSA9PiB7XG4gICAgICAgICAgICBsZXQgbmV3U2VsZWN0aW9uVmFsdWU7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1NlbGVjdGlvblNpbmdsZSgpKSB7XG4gICAgICAgICAgICAgICAgbmV3U2VsZWN0aW9uVmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVhY3RpdmF0ZSh0aGlzLmJ1dHRvbnMuZmlsdGVyKGN1cnJlbnQgPT4gY3VycmVudCAhPT0gYnV0dG9uKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlZm9jdXModGhpcy5idXR0b25zLnRvQXJyYXkoKSk7XG4gICAgICAgICAgICAgICAgbmV3U2VsZWN0aW9uVmFsdWUgPSAhYnV0dG9uLnNlbGVjdGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJ1dHRvbi50b2dnbGFibGUpIHtcbiAgICAgICAgICAgICAgICBidXR0b24uc2V0U2VsZWN0ZWQobmV3U2VsZWN0aW9uVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSh0YWJpbmRleCwgXCIwXCIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlKSB7XG4gICAgICAgIGlmIChpc0NoYW5nZWQoJ2Rpc2FibGVkJywgY2hhbmdlKSkge1xuICAgICAgICAgICAgdGhpcy5idXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpc1ByZXNlbnQodGhpcy5kaXNhYmxlZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmRpc2FibGVkID0gdGhpcy5kaXNhYmxlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XG4gICAgICAgIHRoaXMuYnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgICAgICAgIGlmIChidXR0b24uc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKHRhYmluZGV4LCBcIjBcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKHRhYmluZGV4LCBcIi0xXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmdBZnRlclZpZXdDaGVja2VkKCkge1xuICAgICAgICBpZiAodGhpcy5idXR0b25zLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5idXR0b25zLmZpcnN0LnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuYnV0dG9ucy5maXJzdC5lbGVtZW50LCAnay1ncm91cC1zdGFydCcpO1xuICAgICAgICAgICAgdGhpcy5idXR0b25zLmxhc3QucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5idXR0b25zLmxhc3QuZWxlbWVudCwgJ2stZ3JvdXAtZW5kJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRoaXMubG9jYWxpemF0aW9uQ2hhbmdlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIG5nQWZ0ZXJDb250ZW50Q2hlY2tlZCgpIHtcbiAgICAgICAgdGhpcy52ZXJpZnlTZXR0aW5ncygpO1xuICAgIH1cbiAgICBuYXZpZ2F0ZUZvY3VzKGV2ZW50KSB7XG4gICAgICAgIGxldCBmb2N1c2VkSW5kZXggPSB0aGlzLmJ1dHRvbnMudG9BcnJheSgpLmZpbmRJbmRleChjdXJyZW50ID0+IGN1cnJlbnQuZWxlbWVudC50YWJJbmRleCAhPT0gLTEpO1xuICAgICAgICBjb25zdCBmaXJzdEluZGV4ID0gMDtcbiAgICAgICAgY29uc3QgbGFzdEluZGV4ID0gdGhpcy5idXR0b25zLmxlbmd0aCAtIDE7XG4gICAgICAgIGNvbnN0IGV2ZW50QXJncyA9IG5ldyBQcmV2ZW50YWJsZUV2ZW50KCk7XG4gICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBLZXlzLkFycm93UmlnaHQgJiYgZm9jdXNlZEluZGV4IDwgbGFzdEluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLm5hdmlnYXRlLmVtaXQoZXZlbnRBcmdzKTtcbiAgICAgICAgICAgIGlmICghZXZlbnRBcmdzLmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWZvY3VzKHRoaXMuYnV0dG9ucy50b0FycmF5KCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXModGhpcy5idXR0b25zLmZpbHRlcigoX2N1cnJlbnQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleCA9PT0gZm9jdXNlZEluZGV4ICsgMTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IEtleXMuQXJyb3dMZWZ0ICYmIGZvY3VzZWRJbmRleCA+IGZpcnN0SW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdGUuZW1pdChldmVudEFyZ3MpO1xuICAgICAgICAgICAgaWYgKCFldmVudEFyZ3MuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlZm9jdXModGhpcy5idXR0b25zLnRvQXJyYXkoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1cyh0aGlzLmJ1dHRvbnMuZmlsdGVyKChfY3VycmVudCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4ID09PSBmb2N1c2VkSW5kZXggLSAxO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBkZWFjdGl2YXRlKGJ1dHRvbnMpIHtcbiAgICAgICAgYnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgICAgICAgIGJ1dHRvbi5zZXRTZWxlY3RlZChmYWxzZSk7XG4gICAgICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKHRhYmluZGV4LCBcIi0xXCIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWN0aXZhdGUoYnV0dG9ucykge1xuICAgICAgICBidXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgICAgICAgYnV0dG9uLnNldFNlbGVjdGVkKHRydWUpO1xuICAgICAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSh0YWJpbmRleCwgXCIwXCIpO1xuICAgICAgICAgICAgYnV0dG9uLmZvY3VzKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWZvY3VzKGJ1dHRvbnMpIHtcbiAgICAgICAgYnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUodGFiaW5kZXgsIFwiLTFcIik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmb2N1cyhidXR0b25zKSB7XG4gICAgICAgIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKHRhYmluZGV4LCBcIjBcIik7XG4gICAgICAgICAgICBidXR0b24uZm9jdXMoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHZlcmlmeVNldHRpbmdzKCkge1xuICAgICAgICBpZiAoaXNEZXZNb2RlKCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2VsZWN0aW9uU2luZ2xlKCkgJiYgdGhpcy5idXR0b25zLmZpbHRlcihidXR0b24gPT4gYnV0dG9uLnNlbGVjdGVkKS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdIYXZpbmcgbXVsdGlwbGUgc2VsZWN0ZWQgYnV0dG9ucyB3aXRoIHNpbmdsZSBzZWxlY3Rpb24gbW9kZSBpcyBub3Qgc3VwcG9ydGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNTZWxlY3Rpb25TaW5nbGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbiA9PT0gJ3NpbmdsZSc7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCdkaXNhYmxlZCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgQnV0dG9uR3JvdXBDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgnc2VsZWN0aW9uJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIEJ1dHRvbkdyb3VwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3Rpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCd3aWR0aCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBCdXR0b25Hcm91cENvbXBvbmVudC5wcm90b3R5cGUsIFwid2lkdGhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIEJ1dHRvbkdyb3VwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsb29rXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTnVtYmVyXSlcbl0sIEJ1dHRvbkdyb3VwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0YWJJbmRleFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBCdXR0b25Hcm91cENvbXBvbmVudC5wcm90b3R5cGUsIFwibmF2aWdhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZHJlbihCdXR0b25EaXJlY3RpdmUpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBRdWVyeUxpc3QpXG5dLCBCdXR0b25Hcm91cENvbXBvbmVudC5wcm90b3R5cGUsIFwiYnV0dG9uc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstYnV0dG9uLWdyb3VwJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIEJ1dHRvbkdyb3VwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ3cmFwcGVyQ2xhc3NcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1zdGF0ZS1kaXNhYmxlZCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBCdXR0b25Hcm91cENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlzYWJsZWRDbGFzc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWJ1dHRvbi1ncm91cC1zdHJldGNoZWQnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgQnV0dG9uR3JvdXBDb21wb25lbnQucHJvdG90eXBlLCBcInN0cmV0Y2hlZENsYXNzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstYnV0dG9uLWdyb3VwLWZsYXQnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgQnV0dG9uR3JvdXBDb21wb25lbnQucHJvdG90eXBlLCBcImlzRmxhdFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWJ1dHRvbi1ncm91cC1iYXJlJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIEJ1dHRvbkdyb3VwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc0JhcmVcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1idXR0b24tZ3JvdXAtb3V0bGluZScpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBCdXR0b25Hcm91cENvbXBvbmVudC5wcm90b3R5cGUsIFwiaXNPdXRsaW5lXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIucm9sZScpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIEJ1dHRvbkdyb3VwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJnZXRSb2xlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIuZGlyJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgQnV0dG9uR3JvdXBDb21wb25lbnQucHJvdG90eXBlLCBcImRpclwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLmFyaWEtZGlzYWJsZWQnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgQnV0dG9uR3JvdXBDb21wb25lbnQucHJvdG90eXBlLCBcImFyaWFEaXNhYmxlZFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdzdHlsZS53aWR0aCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIEJ1dHRvbkdyb3VwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ3cmFwcGVyV2lkdGhcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnYXR0ci50YWJpbmRleCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIEJ1dHRvbkdyb3VwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ3cmFwcGVyVGFiSW5kZXhcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0TGlzdGVuZXIoJ2tleWRvd24nLCBbJyRldmVudCddKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbl0sIEJ1dHRvbkdyb3VwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJrZXlkb3duXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdExpc3RlbmVyKCdmb2N1cycpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuXSwgQnV0dG9uR3JvdXBDb21wb25lbnQucHJvdG90eXBlLCBcIm9uRm9jdXNcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgWyckZXZlbnQnXSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cmV0dXJudHlwZVwiLCB2b2lkIDApXG5dLCBCdXR0b25Hcm91cENvbXBvbmVudC5wcm90b3R5cGUsIFwiZm9jdXNvdXRcIiwgbnVsbCk7XG5CdXR0b25Hcm91cENvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgIENvbXBvbmVudCh7XG4gICAgICAgIGV4cG9ydEFzOiAna2VuZG9CdXR0b25Hcm91cCcsXG4gICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgS2VuZG9CdXR0b25TZXJ2aWNlLFxuICAgICAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBMMTBOX1BSRUZJWCxcbiAgICAgICAgICAgICAgICB1c2VWYWx1ZTogJ2tlbmRvLmJ1dHRvbmdyb3VwJ1xuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLWJ1dHRvbmdyb3VwJyxcbiAgICAgICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwiW2tlbmRvQnV0dG9uXVwiPjwvbmctY29udGVudD5cbiAgICBgXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtLZW5kb0J1dHRvblNlcnZpY2UsXG4gICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgIEVsZW1lbnRSZWZdKVxuXSwgQnV0dG9uR3JvdXBDb21wb25lbnQpO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFtOZ01vZHVsZV0oe3sgc2l0ZS5kYXRhLnVybHMuYW5ndWxhclsnbmdtb2R1bGVzJ10gfX0pXG4gKiBkZWZpbml0aW9uIGZvciB0aGUgQnV0dG9uIGRpcmVjdGl2ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYHRzLW5vLXJ1blxuICogLy8gSW1wb3J0IHRoZSBCdXR0b24gbW9kdWxlXG4gKiBpbXBvcnQgeyBCdXR0b25Nb2R1bGUgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1idXR0b25zJztcbiAqXG4gKiAvLyBUaGUgYnJvd3NlciBwbGF0Zm9ybSB3aXRoIGEgY29tcGlsZXJcbiAqIGltcG9ydCB7IHBsYXRmb3JtQnJvd3NlckR5bmFtaWMgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyLWR5bmFtaWMnO1xuICpcbiAqIGltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG4gKlxuICogLy8gSW1wb3J0IHRoZSBhcHAgY29tcG9uZW50XG4gKiBpbXBvcnQgeyBBcHBDb21wb25lbnQgfSBmcm9tICcuL2FwcC5jb21wb25lbnQnO1xuICpcbiAqIC8vIERlZmluZSB0aGUgYXBwIG1vZHVsZVxuICogX0BOZ01vZHVsZSh7XG4gKiAgICAgZGVjbGFyYXRpb25zOiBbQXBwQ29tcG9uZW50XSwgLy8gZGVjbGFyZSBhcHAgY29tcG9uZW50XG4gKiAgICAgaW1wb3J0czogICAgICBbQnJvd3Nlck1vZHVsZSwgQnV0dG9uTW9kdWxlXSwgLy8gaW1wb3J0IEJ1dHRvbiBtb2R1bGVcbiAqICAgICBib290c3RyYXA6ICAgIFtBcHBDb21wb25lbnRdXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSB7fVxuICpcbiAqIC8vIENvbXBpbGUgYW5kIGxhdW5jaCB0aGUgbW9kdWxlXG4gKiBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljKCkuYm9vdHN0cmFwTW9kdWxlKEFwcE1vZHVsZSk7XG4gKlxuICogYGBgXG4gKi9cbmxldCBCdXR0b25Nb2R1bGUgPSBjbGFzcyBCdXR0b25Nb2R1bGUge1xufTtcbkJ1dHRvbk1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgIE5nTW9kdWxlKHtcbiAgICAgICAgZGVjbGFyYXRpb25zOiBbQnV0dG9uRGlyZWN0aXZlXSxcbiAgICAgICAgZXhwb3J0czogW0J1dHRvbkRpcmVjdGl2ZV1cbiAgICB9KVxuXSwgQnV0dG9uTW9kdWxlKTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKlxuICogVGhlIGV4cG9ydGVkIHBhY2thZ2UgbW9kdWxlLlxuICpcbiAqIFRoZSBwYWNrYWdlIGV4cG9ydHM6XG4gKiAtIGBCdXR0b25Hcm91cENvbXBvbmVudGAmbWRhc2g7VGhlIEJ1dHRvbkdyb3VwQ29tcG9uZW50IGNvbXBvbmVudCBjbGFzcy5cbiAqL1xubGV0IEJ1dHRvbkdyb3VwTW9kdWxlID0gY2xhc3MgQnV0dG9uR3JvdXBNb2R1bGUge1xufTtcbkJ1dHRvbkdyb3VwTW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgTmdNb2R1bGUoe1xuICAgICAgICBkZWNsYXJhdGlvbnM6IFtCdXR0b25Hcm91cENvbXBvbmVudF0sXG4gICAgICAgIGV4cG9ydHM6IFtCdXR0b25Hcm91cENvbXBvbmVudF0sXG4gICAgICAgIGltcG9ydHM6IFtDb21tb25Nb2R1bGUsIEJ1dHRvbk1vZHVsZV1cbiAgICB9KVxuXSwgQnV0dG9uR3JvdXBNb2R1bGUpO1xuXG4vKipcbiAqIFVzZWQgZm9yIHJlbmRlcmluZyB0aGUgbGlzdCBpdGVtIGNvbnRlbnQuXG4gKlxuICogVG8gZGVmaW5lIHRoZSBpdGVtIHRlbXBsYXRlLCBuZXN0IGEgYDxuZy10ZW1wbGF0ZT5gIHRhZyB3aXRoIHRoZSBga2VuZG88Q29tcG9uZW50TmFtZT5JdGVtVGVtcGxhdGVgIGRpcmVjdGl2ZSBpbnNpZGUgdGhlIGNvbXBvbmVudCB0YWcuXG4gKlxuICogRm9yIHRoZSBEcm9wRG93bkJ1dHRvbiwgdXNlIHRoZSBga2VuZG9Ecm9wRG93bkJ1dHRvbkl0ZW1UZW1wbGF0ZWAgZGlyZWN0aXZlLlxuICogRm9yIHRoZSBTcGxpdEJ1dHRvbiwgdXNlIHRoZSBga2VuZG9TcGxpdEJ1dHRvbkl0ZW1UZW1wbGF0ZWAgZGlyZWN0aXZlLlxuICpcbiAqIFRoZSB0ZW1wbGF0ZSBjb250ZXh0IGlzIHNldCB0byB0aGUgY3VycmVudCBjb21wb25lbnQuIFRvIGdldCBhIHJlZmVyZW5jZSB0byB0aGUgY3VycmVudCBkYXRhIGl0ZW0sIHVzZSB0aGUgYGxldC1kYXRhSXRlbWAgZGlyZWN0aXZlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogX0BDb21wb25lbnQoe1xuICogc2VsZWN0b3I6ICdteS1hcHAnLFxuICogdGVtcGxhdGU6IGBcbiAqICA8a2VuZG8tc3BsaXRidXR0b24gW2RhdGFdPVwibGlzdEl0ZW1zXCI+XG4gKiAgICA8bmctdGVtcGxhdGUga2VuZG9TcGxpdEJ1dHRvbkl0ZW1UZW1wbGF0ZSBsZXQtZGF0YUl0ZW0+XG4gKiAgICAgIDxzcGFuPnt7ZGF0YUl0ZW19fSBvcHRpb248L3NwYW4+XG4gKiAgICA8L25nLXRlbXBsYXRlPlxuICogIDwva2VuZG8tc3BsaXRidXR0b24+XG4gKiAgPGtlbmRvLWRyb3Bkb3duYnV0dG9uIFtkYXRhXT1cImxpc3RJdGVtc1wiPlxuICogICAgPG5nLXRlbXBsYXRlIGtlbmRvRHJvcERvd25CdXR0b25JdGVtVGVtcGxhdGUgbGV0LWRhdGFJdGVtPlxuICogICAgICA8c3Bhbj57e2RhdGFJdGVtfX0gb3B0aW9uPC9zcGFuPlxuICogICAgPC9uZy10ZW1wbGF0ZT5cbiAqICA8L2tlbmRvLWRyb3Bkb3duYnV0dG9uPlxuICogYFxuICogfSlcbiAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gKiAgIHB1YmxpYyBsaXN0SXRlbXM6IEFycmF5PGFueT4gPSBbe1xuICogICAgICB0ZXh0OiAnaXRlbTEnLFxuICogICAgICBpY29uOiAncmVmcmVzaCcsXG4gKiAgICAgIGRpc2FibGVkOiBmYWxzZSxcbiAqICAgICAgY2xpY2s6IChkYXRhSXRlbTogYW55KSA9PiB7XG4gKiAgICAgICAgICAvL2FjdGlvblxuICogICAgICB9XG4gKiAgfSwge1xuICogICAgICB0ZXh0OiAnaXRlbTInLFxuICogICAgICBpY29uOiAncmVmcmVzaCcsXG4gKiAgICAgIGRpc2FibGVkOiBmYWxzZSxcbiAqICAgICAgY2xpY2s6IChkYXRhSXRlbTogYW55KSA9PiB7XG4gKiAgICAgICAgICAvL2FjdGlvblxuICogICAgICB9XG4gKiAgfV1cbiAqIH1cbiAqIGBgYFxuICpcbiAqIEZvciBtb3JlIGV4YW1wbGVzLCByZWZlciB0byB0aGUgYXJ0aWNsZSBvbiB0aGUgW0Ryb3BEb3duTGlzdCB0ZW1wbGF0ZXNdKHslIHNsdWcgb3ZlcnZpZXdfZGRsICV9I3RlbXBsYXRlcykuXG4gKi9cbmxldCBCdXR0b25JdGVtVGVtcGxhdGVEaXJlY3RpdmUgPSBjbGFzcyBCdXR0b25JdGVtVGVtcGxhdGVEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlUmVmKSB7XG4gICAgICAgIHRoaXMudGVtcGxhdGVSZWYgPSB0ZW1wbGF0ZVJlZjtcbiAgICB9XG59O1xuQnV0dG9uSXRlbVRlbXBsYXRlRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9Ecm9wRG93bkJ1dHRvbkl0ZW1UZW1wbGF0ZV0sW2tlbmRvU3BsaXRCdXR0b25JdGVtVGVtcGxhdGVdJ1xuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbVGVtcGxhdGVSZWZdKVxuXSwgQnV0dG9uSXRlbVRlbXBsYXRlRGlyZWN0aXZlKTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmxldCBMaXN0Q29tcG9uZW50ID0gY2xhc3MgTGlzdENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub25JdGVtQ2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMub25JdGVtQmx1ciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdmFsaWRhdGVQYWNrYWdlKHBhY2thZ2VNZXRhZGF0YSk7XG4gICAgfVxuICAgIGdldFRleHQoZGF0YUl0ZW0pIHtcbiAgICAgICAgaWYgKGRhdGFJdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZXh0RmllbGQgPyBkYXRhSXRlbVt0aGlzLnRleHRGaWVsZF0gOiBkYXRhSXRlbS50ZXh0IHx8IGRhdGFJdGVtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGdldEljb25DbGFzc2VzKGRhdGFJdGVtKSB7XG4gICAgICAgIGNvbnN0IGljb24gPSBkYXRhSXRlbS5pY29uID8gJ2staWNvbiBrLWktJyArIGRhdGFJdGVtLmljb24gOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGNsYXNzZXMgPSB7fTtcbiAgICAgICAgY2xhc3Nlc1tpY29uIHx8IGRhdGFJdGVtLmljb25DbGFzc10gPSB0cnVlO1xuICAgICAgICByZXR1cm4gY2xhc3NlcztcbiAgICB9XG4gICAgb25DbGljayhpbmRleCkge1xuICAgICAgICB0aGlzLm9uSXRlbUNsaWNrLmVtaXQoaW5kZXgpO1xuICAgIH1cbiAgICBvbkJsdXIoKSB7XG4gICAgICAgIHRoaXMub25JdGVtQmx1ci5lbWl0KCk7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEFycmF5KVxuXSwgTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0YVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwidGV4dEZpZWxkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCdXR0b25JdGVtVGVtcGxhdGVEaXJlY3RpdmUpXG5dLCBMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJpdGVtVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJvbkl0ZW1DbGlja1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIExpc3RDb21wb25lbnQucHJvdG90eXBlLCBcIm9uSXRlbUJsdXJcIiwgdm9pZCAwKTtcbkxpc3RDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICBDb21wb25lbnQoe1xuICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLWJ1dHRvbi1saXN0JyxcbiAgICAgICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPHVsIGNsYXNzPVwiay1saXN0IGstcmVzZXRcIiB1bnNlbGVjdGFibGU9XCJvblwiIHJvbGU9XCJtZW51XCI+XG4gICAgICAgICAgICA8bGkgcm9sZT1cIm1lbnVpdGVtXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0YWJpbmRleD1cIi0xXCJcbiAgICAgICAgICAgICAgICBrZW5kb0J1dHRvbkZvY3VzYWJsZVxuICAgICAgICAgICAgICAgICpuZ0Zvcj1cImxldCBkYXRhSXRlbSBvZiBkYXRhOyBsZXQgaW5kZXggPSBpbmRleDtcIlxuICAgICAgICAgICAgICAgIFtpbmRleF09XCJpbmRleFwiXG4gICAgICAgICAgICAgICAgW25nQ2xhc3NdPVwieydrLWl0ZW0nOiB0cnVlLCAnay1zdGF0ZS1kaXNhYmxlZCc6IGRhdGFJdGVtLmRpc2FibGVkfVwiXG4gICAgICAgICAgICAgICAgKGNsaWNrKT1cIm9uQ2xpY2soaW5kZXgpXCJcbiAgICAgICAgICAgICAgICAoYmx1cik9XCJvbkJsdXIoKVwiXG4gICAgICAgICAgICAgICAgW2F0dHIuYXJpYS1kaXNhYmxlZF09XCJkYXRhSXRlbS5kaXNhYmxlZCA/IHRydWUgOiBmYWxzZVwiPlxuICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAqbmdJZj1cIml0ZW1UZW1wbGF0ZT8udGVtcGxhdGVSZWZcIlxuICAgICAgICAgICAgICAgICAgICBbdGVtcGxhdGVDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUmVmOiBpdGVtVGVtcGxhdGU/LnRlbXBsYXRlUmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgJGltcGxpY2l0OiBkYXRhSXRlbVxuICAgICAgICAgICAgICAgICAgICB9XCI+XG4gICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgW25nSWZdPVwiIWl0ZW1UZW1wbGF0ZT8udGVtcGxhdGVSZWZcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgICpuZ0lmPVwiZGF0YUl0ZW0uaWNvbiB8fCBkYXRhSXRlbS5pY29uQ2xhc3NcIlxuICAgICAgICAgICAgICAgICAgICAgICAgW25nQ2xhc3NdPVwiZ2V0SWNvbkNsYXNzZXMoZGF0YUl0ZW0pXCJcbiAgICAgICAgICAgICAgICAgICAgPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgICAgICAgKm5nSWY9XCJkYXRhSXRlbS5pbWFnZVVybFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImstaW1hZ2VcIlxuICAgICAgICAgICAgICAgICAgICAgICAgW3NyY109XCJkYXRhSXRlbS5pbWFnZVVybFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHQ9XCJcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHt7IGdldFRleHQoZGF0YUl0ZW0pIH19XG4gICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgICBgXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgTGlzdENvbXBvbmVudCk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5sZXQgRm9jdXNTZXJ2aWNlID0gY2xhc3MgRm9jdXNTZXJ2aWNlIHtcbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub25Gb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgaXNGb2N1c2VkKGluZGV4KSB7XG4gICAgICAgIHJldHVybiBpbmRleCA9PT0gdGhpcy5mb2N1c2VkO1xuICAgIH1cbiAgICBmb2N1cyhpbmRleCkge1xuICAgICAgICBpZiAodGhpcy5pc0ZvY3VzZWQoaW5kZXgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mb2N1c2VkID0gaW5kZXg7XG4gICAgICAgIHRoaXMub25Gb2N1cy5lbWl0KGluZGV4KTtcbiAgICB9XG4gICAgcmVzZXRGb2N1cygpIHtcbiAgICAgICAgdGhpcy5mb2N1c2VkID0gLTE7XG4gICAgfVxuICAgIGdldCBmb2N1c2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mb2N1c2VkSW5kZXg7XG4gICAgfVxuICAgIHNldCBmb2N1c2VkKGluZGV4KSB7XG4gICAgICAgIHRoaXMuZm9jdXNlZEluZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMub25Gb2N1cy5lbWl0KGluZGV4KTtcbiAgICB9XG59O1xuRm9jdXNTZXJ2aWNlID0gX19kZWNvcmF0ZShbXG4gICAgSW5qZWN0YWJsZSgpXG5dLCBGb2N1c1NlcnZpY2UpO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IEZvY3VzYWJsZURpcmVjdGl2ZSA9IGNsYXNzIEZvY3VzYWJsZURpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IoZm9jdXNTZXJ2aWNlLCBlbGVtZW50UmVmLCByZW5kZXJlcikge1xuICAgICAgICB0aGlzLmZvY3VzU2VydmljZSA9IGZvY3VzU2VydmljZTtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlRXZlbnRzKCk7XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBpZiAodGhpcy5pbmRleCA9PT0gdGhpcy5mb2N1c1NlcnZpY2UuZm9jdXNlZCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsZW1lbnQsICdrLXN0YXRlLWZvY3VzZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5lbGVtZW50LCAnay1zdGF0ZS1mb2N1c2VkJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlRXZlbnRzKCk7XG4gICAgfVxuICAgIHN1YnNjcmliZUV2ZW50cygpIHtcbiAgICAgICAgaWYgKCFpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZvY3VzU3Vic2NyaXB0aW9uID0gdGhpcy5mb2N1c1NlcnZpY2Uub25Gb2N1cy5zdWJzY3JpYmUoKGluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbmRleCA9PT0gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWxlbWVudCwgJ2stc3RhdGUtZm9jdXNlZCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmVsZW1lbnQsICdrLXN0YXRlLWZvY3VzZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlRXZlbnRzKCkge1xuICAgICAgICBpZiAoIWlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZvY3VzU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuXSwgRm9jdXNhYmxlRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJpbmRleFwiLCB2b2lkIDApO1xuRm9jdXNhYmxlRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9CdXR0b25Gb2N1c2FibGVdJ1xuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRm9jdXNTZXJ2aWNlLCBFbGVtZW50UmVmLCBSZW5kZXJlcjJdKVxuXSwgRm9jdXNhYmxlRGlyZWN0aXZlKTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmxldCBUZW1wbGF0ZUNvbnRleHREaXJlY3RpdmUgPSBjbGFzcyBUZW1wbGF0ZUNvbnRleHREaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKHZpZXdDb250YWluZXJSZWYpIHtcbiAgICAgICAgdGhpcy52aWV3Q29udGFpbmVyUmVmID0gdmlld0NvbnRhaW5lclJlZjtcbiAgICB9XG4gICAgc2V0IHRlbXBsYXRlQ29udGV4dChjb250ZXh0KSB7XG4gICAgICAgIGlmICh0aGlzLmluc2VydGVkVmlld1JlZikge1xuICAgICAgICAgICAgdGhpcy52aWV3Q29udGFpbmVyUmVmLnJlbW92ZSh0aGlzLnZpZXdDb250YWluZXJSZWYuaW5kZXhPZih0aGlzLmluc2VydGVkVmlld1JlZikpO1xuICAgICAgICAgICAgdGhpcy5pbnNlcnRlZFZpZXdSZWYgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRleHQudGVtcGxhdGVSZWYpIHtcbiAgICAgICAgICAgIHRoaXMuaW5zZXJ0ZWRWaWV3UmVmID0gdGhpcy52aWV3Q29udGFpbmVyUmVmLmNyZWF0ZUVtYmVkZGVkVmlldyhjb250ZXh0LnRlbXBsYXRlUmVmLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbl0sIFRlbXBsYXRlQ29udGV4dERpcmVjdGl2ZS5wcm90b3R5cGUsIFwidGVtcGxhdGVDb250ZXh0XCIsIG51bGwpO1xuVGVtcGxhdGVDb250ZXh0RGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgc2VsZWN0b3I6ICdbdGVtcGxhdGVDb250ZXh0XScgLy8gdHNsaW50OmRpc2FibGUtbGluZTpkaXJlY3RpdmUtc2VsZWN0b3JcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1ZpZXdDb250YWluZXJSZWZdKVxuXSwgVGVtcGxhdGVDb250ZXh0RGlyZWN0aXZlKTtcblxuY29uc3QgRVhQT1JURURfRElSRUNUSVZFUyA9IFtcbiAgICBMaXN0Q29tcG9uZW50LFxuICAgIEZvY3VzYWJsZURpcmVjdGl2ZSxcbiAgICBCdXR0b25JdGVtVGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgVGVtcGxhdGVDb250ZXh0RGlyZWN0aXZlXG5dO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmxldCBMaXN0TW9kdWxlID0gY2xhc3MgTGlzdE1vZHVsZSB7XG59O1xuTGlzdE1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgIE5nTW9kdWxlKHtcbiAgICAgICAgZGVjbGFyYXRpb25zOiBbRVhQT1JURURfRElSRUNUSVZFU10sXG4gICAgICAgIGV4cG9ydHM6IFtFWFBPUlRFRF9ESVJFQ1RJVkVTXSxcbiAgICAgICAgaW1wb3J0czogW0NvbW1vbk1vZHVsZV1cbiAgICB9KVxuXSwgTGlzdE1vZHVsZSk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG52YXIgS2V5RXZlbnRzO1xuKGZ1bmN0aW9uIChLZXlFdmVudHMpIHtcbiAgICBLZXlFdmVudHNbS2V5RXZlbnRzW1wia2V5ZG93blwiXSA9IDBdID0gXCJrZXlkb3duXCI7XG4gICAgS2V5RXZlbnRzW0tleUV2ZW50c1tcImtleXByZXNzXCJdID0gMV0gPSBcImtleXByZXNzXCI7XG4gICAgS2V5RXZlbnRzW0tleUV2ZW50c1tcImtleXVwXCJdID0gMl0gPSBcImtleXVwXCI7XG59KShLZXlFdmVudHMgfHwgKEtleUV2ZW50cyA9IHt9KSk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG52YXIgTmF2aWdhdGlvbkFjdGlvbjtcbihmdW5jdGlvbiAoTmF2aWdhdGlvbkFjdGlvbikge1xuICAgIE5hdmlnYXRpb25BY3Rpb25bTmF2aWdhdGlvbkFjdGlvbltcIlVuZGVmaW5lZFwiXSA9IDBdID0gXCJVbmRlZmluZWRcIjtcbiAgICBOYXZpZ2F0aW9uQWN0aW9uW05hdmlnYXRpb25BY3Rpb25bXCJPcGVuXCJdID0gMV0gPSBcIk9wZW5cIjtcbiAgICBOYXZpZ2F0aW9uQWN0aW9uW05hdmlnYXRpb25BY3Rpb25bXCJDbG9zZVwiXSA9IDJdID0gXCJDbG9zZVwiO1xuICAgIE5hdmlnYXRpb25BY3Rpb25bTmF2aWdhdGlvbkFjdGlvbltcIkVudGVyXCJdID0gM10gPSBcIkVudGVyXCI7XG4gICAgTmF2aWdhdGlvbkFjdGlvbltOYXZpZ2F0aW9uQWN0aW9uW1wiRW50ZXJQcmVzc1wiXSA9IDRdID0gXCJFbnRlclByZXNzXCI7XG4gICAgTmF2aWdhdGlvbkFjdGlvbltOYXZpZ2F0aW9uQWN0aW9uW1wiRW50ZXJVcFwiXSA9IDVdID0gXCJFbnRlclVwXCI7XG4gICAgTmF2aWdhdGlvbkFjdGlvbltOYXZpZ2F0aW9uQWN0aW9uW1wiVGFiXCJdID0gNl0gPSBcIlRhYlwiO1xuICAgIE5hdmlnYXRpb25BY3Rpb25bTmF2aWdhdGlvbkFjdGlvbltcIkVzY1wiXSA9IDddID0gXCJFc2NcIjtcbiAgICBOYXZpZ2F0aW9uQWN0aW9uW05hdmlnYXRpb25BY3Rpb25bXCJOYXZpZ2F0ZVwiXSA9IDhdID0gXCJOYXZpZ2F0ZVwiO1xufSkoTmF2aWdhdGlvbkFjdGlvbiB8fCAoTmF2aWdhdGlvbkFjdGlvbiA9IHt9KSk7XG5cbi8qIHRzbGludDpkaXNhYmxlOmRlcHJlY2F0aW9uICovXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgTGlzdEJ1dHRvbiB7XG4gICAgY29uc3RydWN0b3IoZm9jdXNTZXJ2aWNlLCBuYXZpZ2F0aW9uU2VydmljZSwgd3JhcHBlclJlZiwgX3pvbmUsIGxvY2FsaXphdGlvbiwgY2RyKSB7XG4gICAgICAgIHRoaXMuZm9jdXNTZXJ2aWNlID0gZm9jdXNTZXJ2aWNlO1xuICAgICAgICB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlID0gbmF2aWdhdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMud3JhcHBlclJlZiA9IHdyYXBwZXJSZWY7XG4gICAgICAgIHRoaXMuX3pvbmUgPSBfem9uZTtcbiAgICAgICAgdGhpcy5jZHIgPSBjZHI7XG4gICAgICAgIHRoaXMuX29wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3BvcHVwU2V0dGluZ3MgPSB7IGFuaW1hdGU6IHRydWUsIHBvcHVwQ2xhc3M6ICcnIH07XG4gICAgICAgIHRoaXMubGlzdElkID0gZ3VpZCgpO1xuICAgICAgICB0aGlzLl9pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5mb2N1c1NlcnZpY2UgPSBmb2N1c1NlcnZpY2U7XG4gICAgICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UgPSBuYXZpZ2F0aW9uU2VydmljZTtcbiAgICAgICAgdGhpcy53cmFwcGVyID0gd3JhcHBlclJlZi5uYXRpdmVFbGVtZW50O1xuICAgICAgICB0aGlzLmxvY2FsaXphdGlvbkNoYW5nZVN1YnNjcmlwdGlvbiA9IGxvY2FsaXphdGlvbi5jaGFuZ2VzLnN1YnNjcmliZSgoeyBydGwgfSkgPT4gKHRoaXMuZGlyZWN0aW9uID0gcnRsID8gJ3J0bCcgOiAnbHRyJykpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZUV2ZW50cygpO1xuICAgIH1cbiAgICBnZXQgcG9wdXBDbGFzc2VzKCkge1xuICAgICAgICBjb25zdCBwb3B1cENsYXNzZXMgPSBbJ2stbGlzdC1jb250YWluZXInLCAnay1yZXNldCcsICdrLWdyb3VwJ107XG4gICAgICAgIGlmICh0aGlzLl9wb3B1cFNldHRpbmdzLnBvcHVwQ2xhc3MpIHtcbiAgICAgICAgICAgIHBvcHVwQ2xhc3Nlcy5wdXNoKHRoaXMuX3BvcHVwU2V0dGluZ3MucG9wdXBDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBvcHVwQ2xhc3Nlcy5qb2luKCcgJyk7XG4gICAgfVxuICAgIGdldCBvcGVuU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcGVuO1xuICAgIH1cbiAgICBzZXQgb3BlblN0YXRlKG9wZW4pIHtcbiAgICAgICAgdGhpcy5fb3BlbiA9IG9wZW47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICB0b2dnbGVQb3B1cFZpc2liaWxpdHkoKSB7XG4gICAgICAgIGlmICh0aGlzLl9kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3BlblN0YXRlID0gIXRoaXMub3BlblN0YXRlO1xuICAgICAgICBpZiAoIXRoaXMub3BlblN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzU2VydmljZS5mb2N1cygtMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uSXRlbUNsaWNrKGluZGV4KSB7XG4gICAgICAgIHRoaXMuZW1pdEl0ZW1DbGlja0hhbmRsZXIoaW5kZXgpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuZm9jdXNXcmFwcGVyKCksIDEpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5vcGVuU3RhdGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZUV2ZW50cygpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5mb2N1c0ZpcnN0VGltZW91dCk7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmJsdXJUaW1lb3V0KTtcbiAgICAgICAgaWYgKHRoaXMubG9jYWxpemF0aW9uQ2hhbmdlU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmxvY2FsaXphdGlvbkNoYW5nZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN1YnNjcmliZUV2ZW50cygpIHtcbiAgICAgICAgaWYgKCFpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN1YnNjcmliZUxpc3RJdGVtRm9jdXNFdmVudCgpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZUNvbXBvbmVudEJsdXJyZWRFdmVudCgpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZU5hdmlnYXRpb25FdmVudHMoKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlTGlzdEl0ZW1Gb2N1c0V2ZW50KCkge1xuICAgICAgICB0aGlzLmZvY3VzU3Vic2NyaXB0aW9uID0gdGhpcy5mb2N1c1NlcnZpY2Uub25Gb2N1cy5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faXNGb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN1YnNjcmliZUNvbXBvbmVudEJsdXJyZWRFdmVudCgpIHtcbiAgICAgICAgdGhpcy5fem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRhYlN1YnNjcmlwdGlvbiA9IHRoaXMubmF2aWdhdGlvblNlcnZpY2UudGFiLnBpcGUoZmlsdGVyKCgpID0+IHRoaXMuX2lzRm9jdXNlZCkpLnN1YnNjcmliZSh0aGlzLmhhbmRsZVRhYi5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Qmx1cnJlZFN1YnNjcmlwdGlvbiA9IGZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJylcbiAgICAgICAgICAgICAgICAucGlwZShmaWx0ZXIoKGV2ZW50KSA9PiAhdGhpcy53cmFwcGVyQ29udGFpbnMoZXZlbnQudGFyZ2V0KSksIGZpbHRlcigoKSA9PiB0aGlzLl9pc0ZvY3VzZWQpKVxuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5fem9uZS5ydW4oKCkgPT4gdGhpcy5ibHVyV3JhcHBlcigpKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdWJzY3JpYmVOYXZpZ2F0aW9uRXZlbnRzKCkge1xuICAgICAgICB0aGlzLm5hdmlnYXRpb25TdWJzY3JpcHRpb24gPSB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLm5hdmlnYXRlLnN1YnNjcmliZSh0aGlzLmZvY3VzU2VydmljZS5mb2N1cy5iaW5kKHRoaXMuZm9jdXNTZXJ2aWNlKSk7XG4gICAgICAgIHRoaXMuZW50ZXJVcFN1YnNjcmlwdGlvbiA9IHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZW50ZXJ1cC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbnRlckhhbmRsZXIoKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNXcmFwcGVyKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9wZW5TdWJzY3JpcHRpb24gPSB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLm9wZW4uc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fb3Blbikge1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlUG9wdXBWaXNpYmlsaXR5KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c0ZpcnN0SXRlbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c1dyYXBwZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2xvc2VTdWJzY3JpcHRpb24gPSBtZXJnZSh0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmNsb3NlLCB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmVzYykuc3Vic2NyaWJlKCgpID0+IHRoaXMuZm9jdXNXcmFwcGVyKCkpO1xuICAgIH1cbiAgICBlbnRlckhhbmRsZXIoKSB7IH0gLy8gdHNsaW50OmRpc2FibGUtbGluZVxuICAgIHVuc3Vic2NyaWJlRXZlbnRzKCkge1xuICAgICAgICBpZiAoIWlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUodGhpcy5jb21wb25lbnRCbHVycmVkU3Vic2NyaXB0aW9uKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSh0aGlzLmZvY3VzU3Vic2NyaXB0aW9uKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSh0aGlzLm5hdmlnYXRpb25TdWJzY3JpcHRpb24pO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKHRoaXMuZW50ZXJQcmVzc1N1YnNjcmlwdGlvbik7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUodGhpcy5lbnRlclVwU3Vic2NyaXB0aW9uKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSh0aGlzLm9wZW5TdWJzY3JpcHRpb24pO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKHRoaXMuY2xvc2VTdWJzY3JpcHRpb24pO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKHRoaXMudGFiU3Vic2NyaXB0aW9uKTtcbiAgICB9XG4gICAgdW5zdWJzY3JpYmUoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBrZXlEb3duSGFuZGxlcihldmVudCkge1xuICAgICAgICB0aGlzLmtleUhhbmRsZXIoZXZlbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAga2V5UHJlc3NIYW5kbGVyKGV2ZW50KSB7XG4gICAgICAgIHRoaXMua2V5SGFuZGxlcihldmVudCwgS2V5RXZlbnRzLmtleXByZXNzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGtleVVwSGFuZGxlcihldmVudCkge1xuICAgICAgICB0aGlzLmtleUhhbmRsZXIoZXZlbnQsIEtleUV2ZW50cy5rZXl1cCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBrZXlIYW5kbGVyKGV2ZW50LCBrZXlFdmVudCkge1xuICAgICAgICBpZiAodGhpcy5fZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZm9jdXNlZCA9IHRoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzZWQgfHwgMDtcbiAgICAgICAgY29uc3QgZXZlbnREYXRhID0gZXZlbnQ7XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMubmF2aWdhdGlvblNlcnZpY2UucHJvY2Vzcyh7XG4gICAgICAgICAgICBhbHRLZXk6IGV2ZW50RGF0YS5hbHRLZXksXG4gICAgICAgICAgICBjdXJyZW50OiBmb2N1c2VkLFxuICAgICAgICAgICAga2V5Q29kZTogZXZlbnREYXRhLmtleUNvZGUsXG4gICAgICAgICAgICBrZXlFdmVudDoga2V5RXZlbnQsXG4gICAgICAgICAgICBtYXg6IHRoaXMuX2RhdGEgPyB0aGlzLl9kYXRhLmxlbmd0aCAtIDEgOiAwLFxuICAgICAgICAgICAgbWluOiAwXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoYWN0aW9uICE9PSBOYXZpZ2F0aW9uQWN0aW9uLlVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgYWN0aW9uICE9PSBOYXZpZ2F0aW9uQWN0aW9uLlRhYiAmJlxuICAgICAgICAgICAgKGFjdGlvbiAhPT0gTmF2aWdhdGlvbkFjdGlvbi5FbnRlciB8fCAoYWN0aW9uID09PSBOYXZpZ2F0aW9uQWN0aW9uLkVudGVyICYmIHRoaXMuX29wZW4pKSkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IEtleXMuU3BhY2UgJiYgYWN0aW9uID09PSBOYXZpZ2F0aW9uQWN0aW9uLkVudGVyVXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBldmVudERhdGEucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbWl0SXRlbUNsaWNrSGFuZGxlcihpbmRleCkge1xuICAgICAgICBjb25zdCBkYXRhSXRlbSA9IHRoaXMuX2RhdGFbaW5kZXhdO1xuICAgICAgICBpZiAodGhpcy5faXRlbUNsaWNrKSB7XG4gICAgICAgICAgICB0aGlzLl9pdGVtQ2xpY2suZW1pdChkYXRhSXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGFJdGVtICYmIGRhdGFJdGVtLmNsaWNrICYmICFkYXRhSXRlbS5kaXNhYmxlZCkge1xuICAgICAgICAgICAgZGF0YUl0ZW0uY2xpY2soZGF0YUl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvY3VzRmlyc3RJdGVtKCkge1xuICAgICAgICBpZiAodGhpcy5fZGF0YSAmJiBpc1ByZXNlbnQodGhpcy5fZGF0YVswXSkpIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNGaXJzdFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzKDApLCAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb2N1c1dyYXBwZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLl9vcGVuKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwVmlzaWJpbGl0eSgpO1xuICAgICAgICAgICAgdGhpcy5mb2N1c0J1dHRvbigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdyYXBwZXJDb250YWlucyhlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXIgPT09IGVsZW1lbnQgfHwgdGhpcy53cmFwcGVyLmNvbnRhaW5zKGVsZW1lbnQpO1xuICAgIH1cbiAgICBibHVyV3JhcHBlcihlbWl0ID0gdHJ1ZSkge1xuICAgICAgICBpZiAodGhpcy5fb3Blbikge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVQb3B1cFZpc2liaWxpdHkoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKGVtaXQpIHtcbiAgICAgICAgICAgIHRoaXMuX2JsdXIuZW1pdCgpO1xuICAgICAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9jdXNCdXR0b24oKSB7XG4gICAgICAgIGlmICh0aGlzLmJ1dHRvbikge1xuICAgICAgICAgICAgdGhpcy5idXR0b24ubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZVRhYigpIHtcbiAgICAgICAgdGhpcy5mb2N1c0J1dHRvbigpO1xuICAgICAgICB0aGlzLmJsdXJXcmFwcGVyKGZhbHNlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBOQVZJR0FUSU9OX0NPTkZJRyA9IG5ldyBJbmplY3Rpb25Ub2tlbignbmF2aWdhdGlvbi5jb25maWcnKTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmxldCBOYXZpZ2F0aW9uU2VydmljZSA9IGNsYXNzIE5hdmlnYXRpb25TZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgdGhpcy5uYXZpZ2F0ZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5vcGVuID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmNsb3NlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmVudGVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmVudGVycHJlc3MgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuZW50ZXJ1cCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy50YWIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuZXNjID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnVzZUxlZnRSaWdodEFycm93cyA9IGNvbmZpZy51c2VMZWZ0UmlnaHRBcnJvd3M7XG4gICAgfVxuICAgIHByb2Nlc3MoYXJncykge1xuICAgICAgICBjb25zdCBrZXlDb2RlID0gYXJncy5rZXlDb2RlO1xuICAgICAgICBjb25zdCBrZXlFdmVudCA9IGFyZ3Mua2V5RXZlbnQ7XG4gICAgICAgIGxldCBpbmRleDtcbiAgICAgICAgbGV0IGFjdGlvbiA9IE5hdmlnYXRpb25BY3Rpb24uVW5kZWZpbmVkO1xuICAgICAgICBpZiAoa2V5RXZlbnQgPT09IEtleUV2ZW50cy5rZXlwcmVzcykge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNFbnRlcihrZXlDb2RlKSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbiA9IE5hdmlnYXRpb25BY3Rpb24uRW50ZXJQcmVzcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXlFdmVudCA9PT0gS2V5RXZlbnRzLmtleXVwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0VudGVyKGtleUNvZGUpKSB7XG4gICAgICAgICAgICAgICAgYWN0aW9uID0gTmF2aWdhdGlvbkFjdGlvbi5FbnRlclVwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGFyZ3MuYWx0S2V5ICYmIGtleUNvZGUgPT09IEtleXMuQXJyb3dEb3duKSB7XG4gICAgICAgICAgICAgICAgYWN0aW9uID0gTmF2aWdhdGlvbkFjdGlvbi5PcGVuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYXJncy5hbHRLZXkgJiYga2V5Q29kZSA9PT0gS2V5cy5BcnJvd1VwKSB7XG4gICAgICAgICAgICAgICAgYWN0aW9uID0gTmF2aWdhdGlvbkFjdGlvbi5DbG9zZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaXNFbnRlcihrZXlDb2RlKSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbiA9IE5hdmlnYXRpb25BY3Rpb24uRW50ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChrZXlDb2RlID09PSBLZXlzLkVzY2FwZSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbiA9IE5hdmlnYXRpb25BY3Rpb24uRXNjO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5Q29kZSA9PT0gS2V5cy5UYWIpIHtcbiAgICAgICAgICAgICAgICBhY3Rpb24gPSBOYXZpZ2F0aW9uQWN0aW9uLlRhYjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGtleUNvZGUgPT09IEtleXMuQXJyb3dVcCB8fCAodGhpcy51c2VMZWZ0UmlnaHRBcnJvd3MgJiYga2V5Q29kZSA9PT0gS2V5cy5BcnJvd0xlZnQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RlcCA9IGFyZ3MuZmxpcE5hdmlnYXRpb24gPyAxIDogLTE7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBhcmdzLmZsaXBOYXZpZ2F0aW9uID8gYXJncy5taW4gOiBhcmdzLm1heDtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSBhcmdzLmZsaXBOYXZpZ2F0aW9uID8gYXJncy5tYXggOiBhcmdzLm1pbjtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMubmV4dCh7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQ6IGFyZ3MuY3VycmVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICAgICAgICAgICAgICBlbmQ6IGVuZCxcbiAgICAgICAgICAgICAgICAgICAgc3RlcDogc3RlcFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFjdGlvbiA9IE5hdmlnYXRpb25BY3Rpb24uTmF2aWdhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChrZXlDb2RlID09PSBLZXlzLkFycm93RG93biB8fCAodGhpcy51c2VMZWZ0UmlnaHRBcnJvd3MgJiYga2V5Q29kZSA9PT0gS2V5cy5BcnJvd1JpZ2h0KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0ZXAgPSBhcmdzLmZsaXBOYXZpZ2F0aW9uID8gLTEgOiAxO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gYXJncy5mbGlwTmF2aWdhdGlvbiA/IGFyZ3MubWF4IDogYXJncy5taW47XG4gICAgICAgICAgICAgICAgY29uc3QgZW5kID0gYXJncy5mbGlwTmF2aWdhdGlvbiA/IGFyZ3MubWluIDogYXJncy5tYXg7XG4gICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLm5leHQoe1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50OiBhcmdzLmN1cnJlbnQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgICAgICAgICAgICAgICAgZW5kOiBlbmQsXG4gICAgICAgICAgICAgICAgICAgIHN0ZXA6IHN0ZXBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhY3Rpb24gPSBOYXZpZ2F0aW9uQWN0aW9uLk5hdmlnYXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5Q29kZSA9PT0gS2V5cy5Ib21lKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBhcmdzLm1pbjtcbiAgICAgICAgICAgICAgICBhY3Rpb24gPSBOYXZpZ2F0aW9uQWN0aW9uLk5hdmlnYXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5Q29kZSA9PT0gS2V5cy5FbmQpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGFyZ3MubWF4O1xuICAgICAgICAgICAgICAgIGFjdGlvbiA9IE5hdmlnYXRpb25BY3Rpb24uTmF2aWdhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFjdGlvbiAhPT0gTmF2aWdhdGlvbkFjdGlvbi5VbmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXNbTmF2aWdhdGlvbkFjdGlvblthY3Rpb25dLnRvTG93ZXJDYXNlKCldLmVtaXQoaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY3Rpb247XG4gICAgfVxuICAgIGlzRW50ZXIoa2V5Q29kZSkge1xuICAgICAgICByZXR1cm4ga2V5Q29kZSA9PT0gS2V5cy5FbnRlciB8fCBrZXlDb2RlID09PSBLZXlzLlNwYWNlO1xuICAgIH1cbiAgICBuZXh0KGFyZ3MpIHtcbiAgICAgICAgaWYgKCFpc1ByZXNlbnQoYXJncy5jdXJyZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIGFyZ3Muc3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYXJncy5jdXJyZW50ICE9PSBhcmdzLmVuZCA/IGFyZ3MuY3VycmVudCArIGFyZ3Muc3RlcCA6IGFyZ3MuZW5kO1xuICAgICAgICB9XG4gICAgfVxufTtcbk5hdmlnYXRpb25TZXJ2aWNlID0gX19kZWNvcmF0ZShbXG4gICAgSW5qZWN0YWJsZSgpLFxuICAgIF9fcGFyYW0oMCwgSW5qZWN0KE5BVklHQVRJT05fQ09ORklHKSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuXSwgTmF2aWdhdGlvblNlcnZpY2UpO1xuXG5jb25zdCBOQVZJR0FUSU9OX1NFVFRJTkdTID0ge1xuICAgIHVzZUxlZnRSaWdodEFycm93czogdHJ1ZVxufTtcbmNvbnN0IMm1MCA9IE5BVklHQVRJT05fU0VUVElOR1M7XG5jb25zdCBOQVZJR0FUSU9OX1NFVFRJTkdTX1BST1ZJREVSID0ge1xuICAgIHByb3ZpZGU6IE5BVklHQVRJT05fQ09ORklHLFxuICAgIHVzZVZhbHVlOiDJtTBcbn07XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIEtlbmRvIFVJIFNwbGl0QnV0dG9uIGNvbXBvbmVudCBmb3IgQW5ndWxhci5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIF9AQ29tcG9uZW50KHtcbiAqIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAqIHRlbXBsYXRlOiBgXG4gKiAgPGtlbmRvLXNwbGl0YnV0dG9uIFtkYXRhXT1cImRhdGFcIiBpY29uPVwicGFzdGVcIlxuICogICAgICAoaXRlbUNsaWNrKT1cIm9uU3BsaXRCdXR0b25JdGVtQ2xpY2soJGV2ZW50KVwiXG4gKiAgICAgIChidXR0b25DbGljayk9XCJvblNwbGl0QnV0dG9uQ2xpY2soKVwiPlBhc3RlPC9rZW5kby1zcGxpdGJ1dHRvbj5cbiAqIGBcbiAqIH0pXG4gKlxuICogY2xhc3MgQXBwQ29tcG9uZW50IHtcbiAqICAgcHVibGljIGRhdGE6IEFycmF5PGFueT4gPSBbe1xuICogICAgICAgdGV4dDogJ0tlZXAgVGV4dCBPbmx5JyxcbiAqICAgICAgIGljb246ICdwYXN0ZS1wbGFpbi10ZXh0JyxcbiAqICAgICAgIGNsaWNrOiAoKSA9PiB7IGNvbnNvbGUubG9nKCdLZWVwIFRleHQgT25seSBjbGljayBoYW5kbGVyJyk7IH1cbiAqICAgfSwge1xuICogICAgICAgdGV4dDogJ1Bhc3RlIGFzIEhUTUwnLFxuICogICAgICAgaWNvbjogJ3Bhc3RlLWFzLWh0bWwnXG4gKiAgIH0sIHtcbiAqICAgICAgIHRleHQ6ICdQYXN0ZSBNYXJrZG93bicsXG4gKiAgICAgICBpY29uOiAncGFzdGUtbWFya2Rvd24nXG4gKiAgIH0sIHtcbiAqICAgICAgIHRleHQ6ICdTZXQgRGVmYXVsdCBQYXN0ZSdcbiAqICAgfV07XG4gKlxuICogICBwdWJsaWMgb25TcGxpdEJ1dHRvbkNsaWNrKGRhdGFJdGVtOiBhbnkpOiB2b2lkIHtcbiAqICAgICAgIGNvbnNvbGUubG9nKCdQYXN0ZScpO1xuICogICB9XG4gKlxuICogICBwdWJsaWMgb25TcGxpdEJ1dHRvbkl0ZW1DbGljayhkYXRhSXRlbTogYW55KTogdm9pZCB7XG4gKiAgICAgICBpZiAoZGF0YUl0ZW0pIHtcbiAqICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhSXRlbS50ZXh0KTtcbiAqICAgICAgIH1cbiAqICAgfVxuICogfVxuICogYGBgXG4gKi9cbmxldCBTcGxpdEJ1dHRvbkNvbXBvbmVudCA9IGNsYXNzIFNwbGl0QnV0dG9uQ29tcG9uZW50IGV4dGVuZHMgTGlzdEJ1dHRvbiB7XG4gICAgY29uc3RydWN0b3IoZm9jdXNTZXJ2aWNlLCBuYXZpZ2F0aW9uU2VydmljZSwgd3JhcHBlclJlZiwgem9uZSwgcG9wdXBTZXJ2aWNlLCBlbFJlZiwgbG9jYWxpemF0aW9uLCBjZHIpIHtcbiAgICAgICAgc3VwZXIoZm9jdXNTZXJ2aWNlLCBuYXZpZ2F0aW9uU2VydmljZSwgd3JhcHBlclJlZiwgem9uZSwgbG9jYWxpemF0aW9uLCBjZHIpO1xuICAgICAgICB0aGlzLnBvcHVwU2VydmljZSA9IHBvcHVwU2VydmljZTtcbiAgICAgICAgdGhpcy5lbFJlZiA9IGVsUmVmO1xuICAgICAgICB0aGlzLmxvY2FsaXphdGlvbiA9IGxvY2FsaXphdGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIHRleHQgb2YgdGhlIFNwbGl0QnV0dG9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50ZXh0ID0gJyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIGFuIGljb24gdG8gYmUgcmVuZGVyZWQgbmV4dCB0byB0aGUgYnV0dG9uIHRleHRcbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBkYXRhYmluZGluZ19zcGxpdGJ1dHRvbiAlfSN0b2MtYXJyYXlzLW9mLWNvbXBsZXgtZGF0YSkpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pY29uID0gJyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIGFuIGljb24gd2l0aCBhIGN1c3RvbSBDU1MgY2xhc3MgdG8gYmUgcmVuZGVyZWQgbmV4dCB0byB0aGUgYnV0dG9uIHRleHRcbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBkYXRhYmluZGluZ19zcGxpdGJ1dHRvbiAlfSN0b2MtYXJyYXlzLW9mLWNvbXBsZXgtZGF0YSkpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pY29uQ2xhc3MgPSAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgdGhlIHR5cGUgYXR0cmlidXRlIG9mIHRoZSBtYWluIGJ1dHRvblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gJ2J1dHRvbic7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIHRoZSBsb2NhdGlvbiBvZiBhbiBpbWFnZSB0byBiZSBkaXNwbGF5ZWQgbmV4dCB0byB0aGUgYnV0dG9uIHRleHRcbiAgICAgICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBkYXRhYmluZGluZ19zcGxpdGJ1dHRvbiAlfSN0b2MtYXJyYXlzLW9mLWNvbXBsZXgtZGF0YSkpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbWFnZVVybCA9ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2hhbmdlcyB0aGUgdmlzdWFsIGFwcGVhcmFuY2UgYnkgdXNpbmcgYWx0ZXJuYXRpdmUgc3R5bGluZyBvcHRpb25zLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgYXZhaWxhYmxlIHZhbHVlcyBhcmU6XG4gICAgICAgICAqICogYGZsYXRgXG4gICAgICAgICAqICogYG91dGxpbmVgXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxvb2sgPSAnZGVmYXVsdCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIFtgdGFiSW5kZXhgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0dsb2JhbF9hdHRyaWJ1dGVzL3RhYmluZGV4KSBvZiB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YWJJbmRleCA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIG5hbWUgb2YgdGhlIFtmb250IGljb25dKHslIHNsdWcgaWNvbnMgJX0jdG9jLWxpc3Qtb2YtZm9udC1pY29ucykgdGhhdCB3aWxsXG4gICAgICAgICAqIGJlIHJlbmRlcmVkIGZvciB0aGUgYnV0dG9uIHdoaWNoIG9wZW5zIHRoZSBwb3B1cC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYXJyb3dCdXR0b25JY29uID0gJ2Fycm93LXMnO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIGNsaWNrcyB0aGUgbWFpbiBidXR0b24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIGBgYHRzXG4gICAgICAgICAqIF9AQ29tcG9uZW50KHtcbiAgICAgICAgICogICAgc2VsZWN0b3I6ICdteS1hcHAnLFxuICAgICAgICAgKiAgICB0ZW1wbGF0ZTogYFxuICAgICAgICAgKiAgICAgICAgPGtlbmRvLXNwbGl0YnV0dG9uIChidXR0b25DbGljayk9XCJvblNwbGl0QnV0dG9uQ2xpY2soKVwiIFtkYXRhXT1cImRhdGFcIj5cbiAgICAgICAgICogICAgICAgICAgICBSZXBseVxuICAgICAgICAgKiAgICAgICAgPC9rZW5kby1zcGxpdGJ1dHRvbj5cbiAgICAgICAgICogICAgYFxuICAgICAgICAgKiB9KVxuICAgICAgICAgKiBjbGFzcyBBcHBDb21wb25lbnQge1xuICAgICAgICAgKiAgICBwdWJsaWMgZGF0YTogQXJyYXk8YW55PiA9IFsnUmVwbHkgQWxsJywgJ0ZvcndhcmQnLCAnUmVwbHkgJiBEZWxldGUnXTtcbiAgICAgICAgICpcbiAgICAgICAgICogICAgcHVibGljIG9uU3BsaXRCdXR0b25DbGljaygpOiB2b2lkIHtcbiAgICAgICAgICogICAgICBjb25zb2xlLmxvZygnU3BsaXRCdXR0b24gY2xpY2snKTtcbiAgICAgICAgICogICAgfVxuICAgICAgICAgKiB9XG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5idXR0b25DbGljayA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgdXNlciBjbGlja3Mgb24gdGhlIGRyb3AtZG93biBsaXN0LiBUaGUgZXZlbnQgZGF0YSBjb250YWlucyB0aGUgZGF0YSBpdGVtIGJvdW5kIHRvIHRoZSBjbGlja2VkIGxpc3QgaXRlbS5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogYGBgdHNcbiAgICAgICAgICogX0BDb21wb25lbnQoe1xuICAgICAgICAgKiAgICAgc2VsZWN0b3I6ICdteS1hcHAnLFxuICAgICAgICAgKiAgICB0ZW1wbGF0ZTogYFxuICAgICAgICAgKiAgICAgICAgPGtlbmRvLXNwbGl0YnV0dG9uIChpdGVtQ2xpY2spPVwib25TcGxpdEJ1dHRvbkl0ZW1DbGljaygkZXZlbnQpXCIgW2RhdGFdPVwiZGF0YVwiPlxuICAgICAgICAgKiAgICAgICAgICBSZXBseVxuICAgICAgICAgKiAgICAgIDwva2VuZG8tc3BsaXRidXR0b24+XG4gICAgICAgICAqICAgIGBcbiAgICAgICAgICogfSlcbiAgICAgICAgICogY2xhc3MgQXBwQ29tcG9uZW50IHtcbiAgICAgICAgICogICAgcHVibGljIGRhdGE6IEFycmF5PGFueT4gPSBbJ1JlcGx5IEFsbCcsICdGb3J3YXJkJywgJ1JlcGx5ICYgRGVsZXRlJ107XG4gICAgICAgICAqXG4gICAgICAgICAqICAgcHVibGljIG9uU3BsaXRCdXR0b25JdGVtQ2xpY2soZGF0YUl0ZW0/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgICogICAgICAgIGlmIChkYXRhSXRlbSkge1xuICAgICAgICAgKiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGFJdGVtKTtcbiAgICAgICAgICogICAgICAgfVxuICAgICAgICAgKiAgICB9XG4gICAgICAgICAqIH1cbiAgICAgICAgICogYGBgXG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLml0ZW1DbGljayA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgU3BsaXRCdXR0b24gZ2V0cyBmb2N1c2VkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbkZvY3VzID0gbmV3IEV2ZW50RW1pdHRlcigpOyAvL3RzbGludDpkaXNhYmxlLWxpbmU6bm8tb3V0cHV0LXJlbmFtZVxuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSBTcGxpdEJ1dHRvbiBnZXRzIGJsdXJyZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uQmx1ciA9IG5ldyBFdmVudEVtaXR0ZXIoKTsgLy90c2xpbnQ6ZGlzYWJsZS1saW5lOm5vLW91dHB1dC1yZW5hbWVcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgcG9wdXAgaXMgYWJvdXQgdG8gb3Blbi5cbiAgICAgICAgICogVGhpcyBldmVudCBpcyBwcmV2ZW50YWJsZS4gSWYgeW91IGNhbmNlbCB0aGUgZXZlbnQsIHRoZSBwb3B1cCB3aWxsIHJlbWFpbiBjbG9zZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9wZW4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHBvcHVwIGlzIGFib3V0IHRvIGNsb3NlLlxuICAgICAgICAgKiBUaGlzIGV2ZW50IGlzIHByZXZlbnRhYmxlLiBJZiB5b3UgY2FuY2VsIHRoZSBldmVudCwgdGhlIHBvcHVwIHdpbGwgcmVtYWluIG9wZW4uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsb3NlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmxpc3RJZCA9IGd1aWQoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYWN0aXZlQXJyb3cgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5idXR0b25UZXh0ID0gJyc7XG4gICAgICAgIHRoaXMubG9ja0ZvY3VzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2l0ZW1DbGljayA9IHRoaXMuaXRlbUNsaWNrO1xuICAgICAgICB0aGlzLl9ibHVyID0gdGhpcy5vbkJsdXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZW4gc2V0IHRvIGB0cnVlYCwgZGlzYWJsZXMgYSBTcGxpdEJ1dHRvbiBpdGVtXG4gICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBkYXRhYmluZGluZ19zcGxpdGJ1dHRvbiAlfSN0b2MtYXJyYXlzLW9mLWNvbXBsZXgtZGF0YSkpLlxuICAgICAqL1xuICAgIHNldCBkaXNhYmxlZCh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kaXNhYmxlZCA9IHZhbHVlO1xuICAgIH1cbiAgICBnZXQgZGlzYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kaXNhYmxlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29uZmlndXJlcyB0aGUgcG9wdXAgb2YgdGhlIFNwbGl0QnV0dG9uLlxuICAgICAqXG4gICAgICogVGhlIGF2YWlsYWJsZSBvcHRpb25zIGFyZTpcbiAgICAgKiAtIGBhbmltYXRlOiBCb29sZWFuYCZtZGFzaDtDb250cm9scyB0aGUgcG9wdXAgYW5pbWF0aW9uLiBCeSBkZWZhdWx0LCB0aGUgb3BlbiBhbmQgY2xvc2UgYW5pbWF0aW9ucyBhcmUgZW5hYmxlZC5cbiAgICAgKiAtIGBwb3B1cENsYXNzOiBTdHJpbmdgJm1kYXNoO1NwZWNpZmllcyBhIGxpc3Qgb2YgQ1NTIGNsYXNzZXMgdGhhdCBhcmUgdXNlZCB0byBzdHlsZSB0aGUgcG9wdXAuXG4gICAgICogLSBgYXBwZW5kVG86IFwicm9vdFwiIHwgXCJjb21wb25lbnRcIiB8IFZpZXdDb250YWluZXJSZWZgJm1kYXNoO1NwZWNpZmllcyB0aGUgY29tcG9uZW50IHRvIHdoaWNoIHRoZSBwb3B1cCB3aWxsIGJlIGFwcGVuZGVkLlxuICAgICAqIC0gYGFsaWduOiBcImxlZnRcIiB8IFwiY2VudGVyXCIgfCBcInJpZ2h0XCJgJm1kYXNoO1NwZWNpZmllcyB0aGUgYWxpZ25tZW50IG9mIHRoZSBwb3B1cC5cbiAgICAgKi9cbiAgICBzZXQgcG9wdXBTZXR0aW5ncyhzZXR0aW5ncykge1xuICAgICAgICB0aGlzLl9wb3B1cFNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7IGFuaW1hdGU6IHRydWUsIHBvcHVwQ2xhc3M6ICcnIH0sIHNldHRpbmdzKTtcbiAgICB9XG4gICAgZ2V0IHBvcHVwU2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wb3B1cFNldHRpbmdzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBkYXRhIG9mIHRoZSBTcGxpdEJ1dHRvbi5cbiAgICAgKlxuICAgICAqID4gVGhlIGRhdGEgaGFzIHRvIGJlIHByb3ZpZGVkIGluIGFuIGFycmF5LWxpa2UgbGlzdC5cbiAgICAgKi9cbiAgICBzZXQgZGF0YShkYXRhKSB7XG4gICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhIHx8IFtdO1xuICAgIH1cbiAgICBnZXQgZGF0YSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9kYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHNldCBvcGVuU3RhdGUob3Blbikge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV2ZW50QXJncyA9IG5ldyBQcmV2ZW50YWJsZUV2ZW50KCk7XG4gICAgICAgIGlmIChvcGVuKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW4uZW1pdChldmVudEFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbG9zZS5lbWl0KGV2ZW50QXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50QXJncy5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3RvZ2dsZShvcGVuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBvcGVuU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcGVuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IGFjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGl2ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBjb21wb25lbnRUYWJJbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQgPyAtMSA6IHRoaXMudGFiSW5kZXg7XG4gICAgfVxuICAgIHNldCBpc0ZvY3VzZWQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5faXNGb2N1c2VkID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBpc0ZvY3VzZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0ZvY3VzZWQgJiYgIXRoaXMuX2Rpc2FibGVkO1xuICAgIH1cbiAgICBnZXQgaXNGbGF0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb29rID09PSAnZmxhdCc7XG4gICAgfVxuICAgIGdldCBpc091dGxpbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvb2sgPT09ICdvdXRsaW5lJztcbiAgICB9XG4gICAgZ2V0IHdpZGdldENsYXNzZXMoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXQgZGlyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgYXJpYUxhYmVsKCkge1xuICAgICAgICBjb25zdCBsb2NhbGl6YXRpb25Nc2cgPSB0aGlzLmxvY2FsaXphdGlvbi5nZXQoJ3NwbGl0QnV0dG9uTGFiZWwnKSB8fCAnJztcbiAgICAgICAgcmV0dXJuIHJlcGxhY2VNZXNzYWdlUGxhY2Vob2xkZXIobG9jYWxpemF0aW9uTXNnLCAnYnV0dG9uVGV4dCcsIHRoaXMuYnV0dG9uVGV4dCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBvbkJ1dHRvbkZvY3VzKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICB0aGlzLl9pc0ZvY3VzZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5vbkZvY3VzLmVtaXQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgb25BcnJvd0J1dHRvbkNsaWNrKCkge1xuICAgICAgICB0aGlzLmxvY2tGb2N1cyA9IHRydWU7XG4gICAgICAgIHRoaXMudG9nZ2xlUG9wdXBWaXNpYmlsaXR5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICB0b2dnbGVCdXR0b25BY3RpdmVTdGF0ZShlbmFibGUpIHtcbiAgICAgICAgdGhpcy5fYWN0aXZlID0gZW5hYmxlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgdG9nZ2xlQXJyb3dCdXR0b25BY3RpdmVTdGF0ZShlbmFibGUpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVBcnJvdyA9IGVuYWJsZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uQnV0dG9uQ2xpY2soKSB7XG4gICAgICAgIHRoaXMubG9ja0ZvY3VzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5idXR0b25DbGljay5lbWl0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBvbkJ1dHRvbkJsdXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc09wZW4gJiYgIXRoaXMubG9ja0ZvY3VzKSB7XG4gICAgICAgICAgICB0aGlzLmJsdXJXcmFwcGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2NrRm9jdXMgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGtleWRvd24oZXZlbnQpIHtcbiAgICAgICAgdGhpcy5rZXlEb3duSGFuZGxlcihldmVudCk7XG4gICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBLZXlzLlNwYWNlKSB7XG4gICAgICAgICAgICB0aGlzLl9hY3RpdmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBrZXlwcmVzcyhldmVudCkge1xuICAgICAgICB0aGlzLmtleVByZXNzSGFuZGxlcihldmVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBrZXl1cChldmVudCkge1xuICAgICAgICB0aGlzLl9hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgIT09IEtleXMuU3BhY2UpIHtcbiAgICAgICAgICAgIHRoaXMua2V5VXBIYW5kbGVyKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUJ1dHRvblRleHQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXMpIHtcbiAgICAgICAgaWYgKGNoYW5nZXMuaGFzT3duUHJvcGVydHkoJ3RleHQnKSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVCdXR0b25UZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQ2hhbmdlZChcInBvcHVwU2V0dGluZ3NcIiwgY2hhbmdlcykgJiYgaXNQcmVzZW50KHRoaXMucG9wdXBSZWYpKSB7XG4gICAgICAgICAgICBjb25zdCBwb3B1cCA9IHRoaXMucG9wdXBSZWYucG9wdXAuaW5zdGFuY2U7XG4gICAgICAgICAgICBjb25zdCBuZXdTZXR0aW5ncyA9IGNoYW5nZXMucG9wdXBTZXR0aW5ncy5jdXJyZW50VmFsdWU7XG4gICAgICAgICAgICBwb3B1cC5wb3B1cENsYXNzID0gbmV3U2V0dGluZ3MucG9wdXBDbGFzcztcbiAgICAgICAgICAgIHBvcHVwLmFuaW1hdGUgPSBuZXdTZXR0aW5ncy5hbmltYXRlO1xuICAgICAgICAgICAgcG9wdXAucG9wdXBBbGlnbiA9IHRoaXMucG9wdXBBbGlnbjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgdG9nZ2xlUG9wdXBWaXNpYmlsaXR5KCkge1xuICAgICAgICBzdXBlci50b2dnbGVQb3B1cFZpc2liaWxpdHkoKTtcbiAgICAgICAgaWYgKGlzRG9jdW1lbnRBdmFpbGFibGUoKSAmJiB0aGlzLmxvY2tGb2N1cykge1xuICAgICAgICAgICAgdGhpcy5idXR0b24ubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICB3cmFwcGVyQ29udGFpbnMoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gKHRoaXMud3JhcHBlciA9PT0gZWxlbWVudCB8fCB0aGlzLndyYXBwZXIuY29udGFpbnMoZWxlbWVudCkgfHwgKHRoaXMucG9wdXBSZWYgJiYgdGhpcy5wb3B1cFJlZi5wb3B1cEVsZW1lbnQuY29udGFpbnMoZWxlbWVudCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBhbmNob3JBbGlnbigpIHtcbiAgICAgICAgbGV0IGFsaWduID0geyBob3Jpem9udGFsOiB0aGlzLnBvcHVwU2V0dGluZ3MuYWxpZ24gfHwgJ2xlZnQnLCB2ZXJ0aWNhbDogJ2JvdHRvbScgfTtcbiAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uID09PSAncnRsJyAmJiAhaXNQcmVzZW50KHRoaXMucG9wdXBTZXR0aW5ncy5hbGlnbikpIHtcbiAgICAgICAgICAgIGFsaWduLmhvcml6b250YWwgPSAncmlnaHQnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhbGlnbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBwb3B1cEFsaWduKCkge1xuICAgICAgICBsZXQgYWxpZ24gPSB7IGhvcml6b250YWw6IHRoaXMucG9wdXBTZXR0aW5ncy5hbGlnbiB8fCAnbGVmdCcsIHZlcnRpY2FsOiAndG9wJyB9O1xuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09ICdydGwnICYmICFpc1ByZXNlbnQodGhpcy5wb3B1cFNldHRpbmdzLmFsaWduKSkge1xuICAgICAgICAgICAgYWxpZ24uaG9yaXpvbnRhbCA9ICdyaWdodCc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFsaWduO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb2N1c2VzIHRoZSBTcGxpdEJ1dHRvbiBjb21wb25lbnQuXG4gICAgICovXG4gICAgZm9jdXMoKSB7XG4gICAgICAgIGlmIChpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBCbHVycyB0aGUgU3BsaXRCdXR0b24gY29tcG9uZW50LlxuICAgICAqL1xuICAgIGJsdXIoKSB7XG4gICAgICAgIGlmIChpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLm5hdGl2ZUVsZW1lbnQuYmx1cigpO1xuICAgICAgICAgICAgdGhpcy5ibHVyV3JhcHBlcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICBzdXBlci5uZ09uRGVzdHJveSgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3lQb3B1cCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUb2dnbGVzIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBwb3B1cC5cbiAgICAgKiBJZiB0aGUgYHRvZ2dsZWAgbWV0aG9kIGlzIHVzZWQgdG8gb3BlbiBvciBjbG9zZSB0aGUgcG9wdXAsIHRoZSBgb3BlbmAgYW5kIGBjbG9zZWAgZXZlbnRzIHdpbGwgbm90IGJlIGZpcmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wZW4gLSBUaGUgc3RhdGUgb2YgdGhlIHBvcHVwLlxuICAgICAqL1xuICAgIHRvZ2dsZShvcGVuKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGljaygoKSA9PiB0aGlzLl90b2dnbGUob3BlbiA9PT0gdW5kZWZpbmVkID8gIXRoaXMuX29wZW4gOiBvcGVuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgb3BlbiBzdGF0ZSBvZiB0aGUgcG9wdXAuXG4gICAgICovXG4gICAgZ2V0IGlzT3BlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3BlblN0YXRlO1xuICAgIH1cbiAgICBlbnRlckhhbmRsZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub3BlblN0YXRlKSB7XG4gICAgICAgICAgICBsZXQgZm9jdXNlZCA9IHRoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzZWQ7XG4gICAgICAgICAgICBpZiAoaXNQcmVzZW50KGZvY3VzZWQpICYmIGZvY3VzZWQgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0SXRlbUNsaWNrSGFuZGxlcihmb2N1c2VkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uQ2xpY2suZW1pdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZUJ1dHRvblRleHQoKSB7XG4gICAgICAgIGlmIChpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIGxldCBpbm5lclRleHQgPSB0aGlzLndyYXBwZXIuaW5uZXJUZXh0XG4gICAgICAgICAgICAgICAgLnNwbGl0KCdcXG4nKVxuICAgICAgICAgICAgICAgIC5qb2luKCcnKVxuICAgICAgICAgICAgICAgIC50cmltKCk7XG4gICAgICAgICAgICAvL3NldFRpbW91dCBpcyBuZWVkZWQgYmVjYXVzZSBvZiBgRXhwcmVzc2lvbiBoYXMgY2hhbmdlZCBhZnRlciBpdCB3YXMgY2hlY2tlZC5gIGVycm9yO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiAodGhpcy5idXR0b25UZXh0ID0gaW5uZXJUZXh0KSwgMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGFwcGVuZFRvKCkge1xuICAgICAgICBjb25zdCB7IGFwcGVuZFRvIH0gPSB0aGlzLnBvcHVwU2V0dGluZ3M7XG4gICAgICAgIGlmICghYXBwZW5kVG8gfHwgYXBwZW5kVG8gPT09ICdyb290Jykge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXBwZW5kVG8gPT09ICdjb21wb25lbnQnID8gdGhpcy5jb250YWluZXJSZWYgOiBhcHBlbmRUbztcbiAgICB9XG4gICAgX3RvZ2dsZShvcGVuKSB7XG4gICAgICAgIHRoaXMuX29wZW4gPSBvcGVuO1xuICAgICAgICB0aGlzLmRlc3Ryb3lQb3B1cCgpO1xuICAgICAgICBpZiAodGhpcy5fb3Blbikge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVQb3B1cCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNyZWF0ZVBvcHVwKCkge1xuICAgICAgICB0aGlzLnBvcHVwUmVmID0gdGhpcy5wb3B1cFNlcnZpY2Uub3Blbih7XG4gICAgICAgICAgICBhbmNob3I6IHRoaXMuZWxSZWYsXG4gICAgICAgICAgICBhbmNob3JBbGlnbjogdGhpcy5hbmNob3JBbGlnbixcbiAgICAgICAgICAgIGFuaW1hdGU6IHRoaXMucG9wdXBTZXR0aW5ncy5hbmltYXRlLFxuICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuYXBwZW5kVG8sXG4gICAgICAgICAgICBjb250ZW50OiB0aGlzLnBvcHVwVGVtcGxhdGUsXG4gICAgICAgICAgICBwb3B1cEFsaWduOiB0aGlzLnBvcHVwQWxpZ24sXG4gICAgICAgICAgICBwb3B1cENsYXNzOiB0aGlzLnBvcHVwQ2xhc3Nlc1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wb3B1cFJlZi5wb3B1cEFuY2hvclZpZXdwb3J0TGVhdmUuc3Vic2NyaWJlKCgpID0+ICh0aGlzLm9wZW5TdGF0ZSA9IGZhbHNlKSk7XG4gICAgICAgIHRoaXMucG9wdXBSZWYucG9wdXBPcGVuLnN1YnNjcmliZSh0aGlzLmZvY3VzRmlyc3RJdGVtLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICBkZXN0cm95UG9wdXAoKSB7XG4gICAgICAgIGlmICh0aGlzLnBvcHVwUmVmKSB7XG4gICAgICAgICAgICB0aGlzLnBvcHVwUmVmLmNsb3NlKCk7XG4gICAgICAgICAgICB0aGlzLnBvcHVwUmVmID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBTcGxpdEJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwidGV4dFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgU3BsaXRCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImljb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFNwbGl0QnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpY29uQ2xhc3NcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFNwbGl0QnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBTcGxpdEJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiaW1hZ2VVcmxcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFNwbGl0QnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsb29rXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuXSwgU3BsaXRCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG5dLCBTcGxpdEJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwicG9wdXBTZXR0aW5nc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIFNwbGl0QnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0YWJJbmRleFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgU3BsaXRCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcInRleHRGaWVsZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG5dLCBTcGxpdEJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0YVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIFNwbGl0QnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJidXR0b25DbGFzc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgU3BsaXRCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImFycm93QnV0dG9uQ2xhc3NcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFNwbGl0QnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhcnJvd0J1dHRvbkljb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBTcGxpdEJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiYnV0dG9uQ2xpY2tcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBTcGxpdEJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiaXRlbUNsaWNrXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoJ2ZvY3VzJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIFNwbGl0QnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvbkZvY3VzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoJ2JsdXInKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgU3BsaXRCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcIm9uQmx1clwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIFNwbGl0QnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvcGVuXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgU3BsaXRCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImNsb3NlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBDb250ZW50Q2hpbGQoQnV0dG9uSXRlbVRlbXBsYXRlRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJ1dHRvbkl0ZW1UZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIFNwbGl0QnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpdGVtVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgnYnV0dG9uJywgeyBzdGF0aWM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEVsZW1lbnRSZWYpXG5dLCBTcGxpdEJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiYnV0dG9uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ2Fycm93QnV0dG9uJywgeyBzdGF0aWM6IHRydWUsIHJlYWQ6IEVsZW1lbnRSZWYgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEVsZW1lbnRSZWYpXG5dLCBTcGxpdEJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiYXJyb3dCdXR0b25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgncG9wdXBUZW1wbGF0ZScsIHsgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUZW1wbGF0ZVJlZilcbl0sIFNwbGl0QnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwb3B1cFRlbXBsYXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ2NvbnRhaW5lcicsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiwgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBWaWV3Q29udGFpbmVyUmVmKVxuXSwgU3BsaXRCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImNvbnRhaW5lclJlZlwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstc3RhdGUtZm9jdXNlZCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuXSwgU3BsaXRCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImlzRm9jdXNlZFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWZsYXQnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgU3BsaXRCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImlzRmxhdFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLW91dGxpbmUnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgU3BsaXRCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImlzT3V0bGluZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXNwbGl0LWJ1dHRvbicpLFxuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWJ1dHRvbi1ncm91cCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBTcGxpdEJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwid2lkZ2V0Q2xhc3Nlc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLmRpcicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIFNwbGl0QnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXJcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0TGlzdGVuZXIoJ2tleWRvd24nLCBbJyRldmVudCddKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbl0sIFNwbGl0QnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJrZXlkb3duXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdExpc3RlbmVyKCdrZXlwcmVzcycsIFsnJGV2ZW50J10pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuXSwgU3BsaXRCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImtleXByZXNzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdExpc3RlbmVyKCdrZXl1cCcsIFsnJGV2ZW50J10pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuXSwgU3BsaXRCdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImtleXVwXCIsIG51bGwpO1xuU3BsaXRCdXR0b25Db21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICBDb21wb25lbnQoe1xuICAgICAgICBleHBvcnRBczogJ2tlbmRvU3BsaXRCdXR0b24nLFxuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIEZvY3VzU2VydmljZSxcbiAgICAgICAgICAgIE5hdmlnYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgTkFWSUdBVElPTl9TRVRUSU5HU19QUk9WSURFUixcbiAgICAgICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogTDEwTl9QUkVGSVgsXG4gICAgICAgICAgICAgICAgdXNlVmFsdWU6ICdrZW5kby5zcGxpdGJ1dHRvbidcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgc2VsZWN0b3I6ICdrZW5kby1zcGxpdGJ1dHRvbicsXG4gICAgICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxuZy1jb250YWluZXIga2VuZG9TcGxpdEJ1dHRvbkxvY2FsaXplZE1lc3NhZ2VzXG4gICAgICAgICAgICBpMThuLXNwbGl0QnV0dG9uTGFiZWw9XCJrZW5kby5zcGxpdGJ1dHRvbi5zcGxpdEJ1dHRvbkxhYmVsfFRoZSB0ZXh0IGZvciB0aGUgU3BsaXRCdXR0b24gYXJpYS1sYWJlbFwiXG4gICAgICAgICAgICBzcGxpdEJ1dHRvbkxhYmVsPVwie3sgJ3tidXR0b25UZXh0fSBzcGxpdGJ1dHRvbicgfX1cIj5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGtlbmRvQnV0dG9uXG4gICAgICAgICAgICAjYnV0dG9uXG4gICAgICAgICAgICBbdHlwZV09XCJ0eXBlXCJcbiAgICAgICAgICAgIFtsb29rXT1cImxvb2tcIlxuICAgICAgICAgICAgW3RhYmluZGV4XT1cImNvbXBvbmVudFRhYkluZGV4XCJcbiAgICAgICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgICAgICBbaWNvbl09XCJpY29uXCJcbiAgICAgICAgICAgIFtjbGFzcy5rLXN0YXRlLWFjdGl2ZV09XCJhY3RpdmVcIlxuICAgICAgICAgICAgW2ljb25DbGFzc109XCJpY29uQ2xhc3NcIlxuICAgICAgICAgICAgW2ltYWdlVXJsXT1cImltYWdlVXJsXCJcbiAgICAgICAgICAgIFtuZ0NsYXNzXT1cImJ1dHRvbkNsYXNzXCJcbiAgICAgICAgICAgIChmb2N1cyk9XCJvbkJ1dHRvbkZvY3VzKClcIlxuICAgICAgICAgICAgKGNsaWNrKT1cIm9uQnV0dG9uQ2xpY2soKVwiXG4gICAgICAgICAgICAoYmx1cik9XCJvbkJ1dHRvbkJsdXIoKVwiXG4gICAgICAgICAgICAobW91c2Vkb3duKT1cInRvZ2dsZUJ1dHRvbkFjdGl2ZVN0YXRlKHRydWUpXCJcbiAgICAgICAgICAgIChtb3VzZXVwKT1cInRvZ2dsZUJ1dHRvbkFjdGl2ZVN0YXRlKGZhbHNlKVwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLWRpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgICAgIFthdHRyLmFyaWEtZXhwYW5kZWRdPVwib3BlblN0YXRlXCJcbiAgICAgICAgICAgIFthdHRyLmFyaWEtaGFzcG9wdXBdPVwidHJ1ZVwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLW93bnNdPVwibGlzdElkXCJcbiAgICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiYXJpYUxhYmVsXCJcbiAgICAgICAgPlxuICAgICAgICAgICAge3sgdGV4dCB9fTxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGtlbmRvQnV0dG9uXG4gICAgICAgICAgICAjYXJyb3dCdXR0b25cbiAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgW2NsYXNzLmstc3RhdGUtYWN0aXZlXT1cImFjdGl2ZUFycm93XCJcbiAgICAgICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgICAgICBbaWNvbl09XCJhcnJvd0J1dHRvbkljb25cIlxuICAgICAgICAgICAgW2xvb2tdPVwibG9va1wiXG4gICAgICAgICAgICBbdGFiaW5kZXhdPVwiLTFcIlxuICAgICAgICAgICAgW25nQ2xhc3NdPVwiYXJyb3dCdXR0b25DbGFzc1wiXG4gICAgICAgICAgICAoY2xpY2spPVwib25BcnJvd0J1dHRvbkNsaWNrKClcIlxuICAgICAgICAgICAgKG1vdXNlZG93bik9XCJ0b2dnbGVBcnJvd0J1dHRvbkFjdGl2ZVN0YXRlKHRydWUpXCJcbiAgICAgICAgICAgIChtb3VzZXVwKT1cInRvZ2dsZUFycm93QnV0dG9uQWN0aXZlU3RhdGUoZmFsc2UpXCJcbiAgICAgICAgPjwvYnV0dG9uPlxuICAgICAgICA8bmctdGVtcGxhdGUgI3BvcHVwVGVtcGxhdGU+XG4gICAgICAgICAgICA8a2VuZG8tYnV0dG9uLWxpc3RcbiAgICAgICAgICAgICAgICBbaWRdPVwibGlzdElkXCJcbiAgICAgICAgICAgICAgICBbZGF0YV09XCJkYXRhXCJcbiAgICAgICAgICAgICAgICBbdGV4dEZpZWxkXT1cInRleHRGaWVsZFwiXG4gICAgICAgICAgICAgICAgW2l0ZW1UZW1wbGF0ZV09XCJpdGVtVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgIChvbkl0ZW1DbGljayk9XCJvbkl0ZW1DbGljaygkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAoa2V5ZG93bik9XCJrZXlEb3duSGFuZGxlcigkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAoa2V5cHJlc3MpPVwia2V5UHJlc3NIYW5kbGVyKCRldmVudClcIlxuICAgICAgICAgICAgICAgIChrZXl1cCk9XCJrZXlVcEhhbmRsZXIoJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgW2F0dHIuZGlyXT1cImRpclwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICA8L2tlbmRvLWJ1dHRvbi1saXN0PlxuICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICA8bmctY29udGFpbmVyICNjb250YWluZXI+PC9uZy1jb250YWluZXI+XG4gICAgYFxuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRm9jdXNTZXJ2aWNlLFxuICAgICAgICBOYXZpZ2F0aW9uU2VydmljZSxcbiAgICAgICAgRWxlbWVudFJlZixcbiAgICAgICAgTmdab25lLFxuICAgICAgICBQb3B1cFNlcnZpY2UsXG4gICAgICAgIEVsZW1lbnRSZWYsXG4gICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgIENoYW5nZURldGVjdG9yUmVmXSlcbl0sIFNwbGl0QnV0dG9uQ29tcG9uZW50KTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIE1lc3NhZ2VzIGV4dGVuZHMgQ29tcG9uZW50TWVzc2FnZXMge1xufVxuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgTWVzc2FnZXMucHJvdG90eXBlLCBcInNwbGl0QnV0dG9uTGFiZWxcIiwgdm9pZCAwKTtcblxudmFyIExvY2FsaXplZFNwbGl0QnV0dG9uTWVzc2FnZXNEaXJlY3RpdmVfMTtcbi8qKlxuICogQGhpZGRlblxuICovXG5sZXQgTG9jYWxpemVkU3BsaXRCdXR0b25NZXNzYWdlc0RpcmVjdGl2ZSA9IExvY2FsaXplZFNwbGl0QnV0dG9uTWVzc2FnZXNEaXJlY3RpdmVfMSA9IGNsYXNzIExvY2FsaXplZFNwbGl0QnV0dG9uTWVzc2FnZXNEaXJlY3RpdmUgZXh0ZW5kcyBNZXNzYWdlcyB7XG4gICAgY29uc3RydWN0b3Ioc2VydmljZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xuICAgIH1cbn07XG5Mb2NhbGl6ZWRTcGxpdEJ1dHRvbk1lc3NhZ2VzRGlyZWN0aXZlID0gTG9jYWxpemVkU3BsaXRCdXR0b25NZXNzYWdlc0RpcmVjdGl2ZV8xID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogTWVzc2FnZXMsXG4gICAgICAgICAgICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTG9jYWxpemVkU3BsaXRCdXR0b25NZXNzYWdlc0RpcmVjdGl2ZV8xKVxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBzZWxlY3RvcjogJ1trZW5kb1NwbGl0QnV0dG9uTG9jYWxpemVkTWVzc2FnZXNdJ1xuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTG9jYWxpemF0aW9uU2VydmljZV0pXG5dLCBMb2NhbGl6ZWRTcGxpdEJ1dHRvbk1lc3NhZ2VzRGlyZWN0aXZlKTtcblxudmFyIFNwbGl0QnV0dG9uQ3VzdG9tTWVzc2FnZXNDb21wb25lbnRfMTtcbi8qKlxuICogQ3VzdG9tIGNvbXBvbmVudCBtZXNzYWdlcyBvdmVycmlkZSBkZWZhdWx0IGNvbXBvbmVudCBtZXNzYWdlc1xuICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBydGxfYnV0dG9ucyAlfSkuXG4gKi9cbmxldCBTcGxpdEJ1dHRvbkN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50ID0gU3BsaXRCdXR0b25DdXN0b21NZXNzYWdlc0NvbXBvbmVudF8xID0gY2xhc3MgU3BsaXRCdXR0b25DdXN0b21NZXNzYWdlc0NvbXBvbmVudCBleHRlbmRzIE1lc3NhZ2VzIHtcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XG4gICAgfVxuICAgIGdldCBvdmVycmlkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufTtcblNwbGl0QnV0dG9uQ3VzdG9tTWVzc2FnZXNDb21wb25lbnQgPSBTcGxpdEJ1dHRvbkN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50XzEgPSBfX2RlY29yYXRlKFtcbiAgICBDb21wb25lbnQoe1xuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBNZXNzYWdlcyxcbiAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBTcGxpdEJ1dHRvbkN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50XzEpXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHNlbGVjdG9yOiAna2VuZG8tc3BsaXRidXR0b24tbWVzc2FnZXMnLFxuICAgICAgICB0ZW1wbGF0ZTogYGBcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0xvY2FsaXphdGlvblNlcnZpY2VdKVxuXSwgU3BsaXRCdXR0b25DdXN0b21NZXNzYWdlc0NvbXBvbmVudCk7XG5cbi8qKlxuICogQGhpZGRlblxuICpcbiAqIFRoZSBleHBvcnRlZCBwYWNrYWdlIG1vZHVsZS5cbiAqXG4gKiBUaGUgcGFja2FnZSBleHBvcnRzOlxuICogLSBgU3BsaXRCdXR0b25Db21wb25lbnRgJm1kYXNoO1RoZSBTcGxpdEJ1dHRvbkNvbXBvbmVudCBjb21wb25lbnQgY2xhc3MuXG4gKi9cbmxldCBTcGxpdEJ1dHRvbk1vZHVsZSA9IGNsYXNzIFNwbGl0QnV0dG9uTW9kdWxlIHtcbn07XG5TcGxpdEJ1dHRvbk1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgIE5nTW9kdWxlKHtcbiAgICAgICAgZGVjbGFyYXRpb25zOiBbU3BsaXRCdXR0b25Db21wb25lbnQsIExvY2FsaXplZFNwbGl0QnV0dG9uTWVzc2FnZXNEaXJlY3RpdmUsIFNwbGl0QnV0dG9uQ3VzdG9tTWVzc2FnZXNDb21wb25lbnRdLFxuICAgICAgICBleHBvcnRzOiBbU3BsaXRCdXR0b25Db21wb25lbnQsIExpc3RNb2R1bGUsIExvY2FsaXplZFNwbGl0QnV0dG9uTWVzc2FnZXNEaXJlY3RpdmUsIFNwbGl0QnV0dG9uQ3VzdG9tTWVzc2FnZXNDb21wb25lbnRdLFxuICAgICAgICBpbXBvcnRzOiBbQ29tbW9uTW9kdWxlLCBQb3B1cE1vZHVsZSwgQnV0dG9uTW9kdWxlLCBMaXN0TW9kdWxlXVxuICAgIH0pXG5dLCBTcGxpdEJ1dHRvbk1vZHVsZSk7XG5cbmNvbnN0IE5BVklHQVRJT05fU0VUVElOR1MkMSA9IHtcbiAgICB1c2VMZWZ0UmlnaHRBcnJvd3M6IHRydWVcbn07XG5jb25zdCDJtTAkMSA9IE5BVklHQVRJT05fU0VUVElOR1MkMTtcbmNvbnN0IE5BVklHQVRJT05fU0VUVElOR1NfUFJPVklERVIkMSA9IHtcbiAgICBwcm92aWRlOiBOQVZJR0FUSU9OX0NPTkZJRyxcbiAgICB1c2VWYWx1ZTogybUwJDFcbn07XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIEtlbmRvIFVJIERyb3BEb3duQnV0dG9uIGNvbXBvbmVudCBmb3IgQW5ndWxhci5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIF9AQ29tcG9uZW50KHtcbiAqIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAqIHRlbXBsYXRlOiBgXG4gKiAgPGtlbmRvLWRyb3Bkb3duYnV0dG9uIFtkYXRhXT1cImRhdGFcIj5cbiAqICAgIFVzZXIgU2V0dGluZ3NcbiAqICA8L2tlbmRvLWRyb3Bkb3duYnV0dG9uPlxuICogYFxuICogfSlcbiAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gKiAgIHB1YmxpYyBkYXRhOiBBcnJheTxhbnk+ID0gW3tcbiAqICAgICAgIHRleHQ6ICdNeSBQcm9maWxlJ1xuICogICB9LCB7XG4gKiAgICAgICB0ZXh0OiAnRnJpZW5kIFJlcXVlc3RzJ1xuICogICB9LCB7XG4gKiAgICAgICB0ZXh0OiAnQWNjb3VudCBTZXR0aW5ncydcbiAqICAgfSwge1xuICogICAgICAgdGV4dDogJ1N1cHBvcnQnXG4gKiAgIH0sIHtcbiAqICAgICAgIHRleHQ6ICdMb2cgT3V0J1xuICogICB9XTtcbiAqIH1cbiAqIGBgYFxuICovXG5sZXQgRHJvcERvd25CdXR0b25Db21wb25lbnQgPSBjbGFzcyBEcm9wRG93bkJ1dHRvbkNvbXBvbmVudCBleHRlbmRzIExpc3RCdXR0b24ge1xuICAgIGNvbnN0cnVjdG9yKGZvY3VzU2VydmljZSwgbmF2aWdhdGlvblNlcnZpY2UsIHdyYXBwZXJSZWYsIHpvbmUsIHBvcHVwU2VydmljZSwgZWxSZWYsIGxvY2FsaXphdGlvbiwgY2RyKSB7XG4gICAgICAgIHN1cGVyKGZvY3VzU2VydmljZSwgbmF2aWdhdGlvblNlcnZpY2UsIHdyYXBwZXJSZWYsIHpvbmUsIGxvY2FsaXphdGlvbiwgY2RyKTtcbiAgICAgICAgdGhpcy5wb3B1cFNlcnZpY2UgPSBwb3B1cFNlcnZpY2U7XG4gICAgICAgIHRoaXMuZWxSZWYgPSBlbFJlZjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgdGhlIG5hbWUgb2YgYW4gZXhpc3RpbmcgaWNvbiBpbiBhIEtlbmRvIFVJIHRoZW1lLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pY29uID0gJyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIHRoZSBsaXN0IG9mIENTUyBjbGFzc2VzIHdoaWNoIGFyZSB1c2VkIGZvciBzdHlsaW5nIHRoZSBCdXR0b24gd2l0aCBjdXN0b20gaWNvbnMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmljb25DbGFzcyA9ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyBhIFVSTCBmb3Igc3R5bGluZyB0aGUgYnV0dG9uIHdpdGggYSBjdXN0b20gaW1hZ2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmltYWdlVXJsID0gJyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGRzIHZpc3VhbCB3ZWlnaHQgdG8gdGhlIGRlZmF1bHQgYnV0dG9uIGFuZCBtYWtlcyBpdCBwcmltYXJ5LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wcmltYXJ5ID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGFuZ2VzIHRoZSB2aXN1YWwgYXBwZWFyYW5jZSBieSB1c2luZyBhbHRlcm5hdGl2ZSBzdHlsaW5nIG9wdGlvbnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBhdmFpbGFibGUgdmFsdWVzIGFyZTpcbiAgICAgICAgICogKiBgZmxhdGBcbiAgICAgICAgICogKiBgb3V0bGluZWBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubG9vayA9ICdkZWZhdWx0JztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB0aGUgW2B0YWJJbmRleGBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvR2xvYmFsX2F0dHJpYnV0ZXMvdGFiaW5kZXgpIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRhYkluZGV4ID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgdXNlciBjbGlja3Mgb24gYSBkcm9wLWRvd24gbGlzdCBpdGVtLiBUaGUgZXZlbnQgZGF0YSBjb250YWlucyB0aGUgZGF0YSBpdGVtIGJvdW5kIHRvIHRoZSBjbGlja2VkIGxpc3QgaXRlbS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXRlbUNsaWNrID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSBwb3B1cCBpcyBhYm91dCB0byBvcGVuLlxuICAgICAgICAgKiBUaGlzIGV2ZW50IGlzIHByZXZlbnRhYmxlLiBJZiB5b3UgY2FuY2VsIHRoZSBldmVudCwgdGhlIHBvcHVwIHdpbGwgcmVtYWluIGNsb3NlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3BlbiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgcG9wdXAgaXMgYWJvdXQgdG8gY2xvc2UuXG4gICAgICAgICAqIFRoaXMgZXZlbnQgaXMgcHJldmVudGFibGUuIElmIHlvdSBjYW5jZWwgdGhlIGV2ZW50LCB0aGUgcG9wdXAgd2lsbCByZW1haW4gb3Blbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xvc2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIERyb3BEb3duQnV0dG9uIGdldHMgZm9jdXNlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25Gb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTsgLy90c2xpbnQ6ZGlzYWJsZS1saW5lOm5vLW91dHB1dC1yZW5hbWVcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgRHJvcERvd25CdXR0b24gZ2V0cyBibHVycmVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbkJsdXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7IC8vdHNsaW50OmRpc2FibGUtbGluZTpuby1vdXRwdXQtcmVuYW1lXG4gICAgICAgIHRoaXMubGlzdElkID0gZ3VpZCgpO1xuICAgICAgICB0aGlzLl9pdGVtQ2xpY2sgPSB0aGlzLml0ZW1DbGljaztcbiAgICAgICAgdGhpcy5fYmx1ciA9IHRoaXMub25CbHVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25maWd1cmVzIHRoZSBwb3B1cCBvZiB0aGUgRHJvcERvd25CdXR0b24uXG4gICAgICpcbiAgICAgKiBUaGUgYXZhaWxhYmxlIG9wdGlvbnMgYXJlOlxuICAgICAqIC0gYGFuaW1hdGU6IEJvb2xlYW5gJm1kYXNoO0NvbnRyb2xzIHRoZSBwb3B1cCBhbmltYXRpb24uIEJ5IGRlZmF1bHQsIHRoZSBvcGVuIGFuZCBjbG9zZSBhbmltYXRpb25zIGFyZSBlbmFibGVkLlxuICAgICAqIC0gYHBvcHVwQ2xhc3M6IFN0cmluZ2AmbWRhc2g7U3BlY2lmaWVzIGEgbGlzdCBvZiBDU1MgY2xhc3NlcyB0aGF0IGFyZSB1c2VkIHRvIHN0eWxlIHRoZSBwb3B1cC5cbiAgICAgKiAtIGBhcHBlbmRUbzogXCJyb290XCIgfCBcImNvbXBvbmVudFwiIHwgVmlld0NvbnRhaW5lclJlZmAmbWRhc2g7U3BlY2lmaWVzIHRoZSBjb21wb25lbnQgdG8gd2hpY2ggdGhlIHBvcHVwIHdpbGwgYmUgYXBwZW5kZWQuXG4gICAgICogLSBgYWxpZ246IFwibGVmdFwiIHwgXCJjZW50ZXJcIiB8IFwicmlnaHRcImAmbWRhc2g7U3BlY2lmaWVzIHRoZSBhbGlnbm1lbnQgb2YgdGhlIHBvcHVwLlxuICAgICAqL1xuICAgIHNldCBwb3B1cFNldHRpbmdzKHNldHRpbmdzKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwU2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHsgYW5pbWF0ZTogdHJ1ZSwgcG9wdXBDbGFzczogJycgfSwgc2V0dGluZ3MpO1xuICAgIH1cbiAgICBnZXQgcG9wdXBTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BvcHVwU2V0dGluZ3M7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGRpc2FibGVkIHN0YXRlIG9mIHRoZSBEcm9wRG93bkJ1dHRvbi5cbiAgICAgKi9cbiAgICBzZXQgZGlzYWJsZWQodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlICYmIHRoaXMub3BlblN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5TdGF0ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2Rpc2FibGVkID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBkaXNhYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIG9yIGdldHMgdGhlIGRhdGEgb2YgdGhlIERyb3BEb3duQnV0dG9uLlxuICAgICAqXG4gICAgICogPiBUaGUgZGF0YSBoYXMgdG8gYmUgcHJvdmlkZWQgaW4gYW4gYXJyYXktbGlrZSBsaXN0LlxuICAgICAqL1xuICAgIHNldCBkYXRhKGRhdGEpIHtcbiAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGEgfHwgW107XG4gICAgfVxuICAgIGdldCBkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHNldCBvcGVuU3RhdGUob3Blbikge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV2ZW50QXJncyA9IG5ldyBQcmV2ZW50YWJsZUV2ZW50KCk7XG4gICAgICAgIGlmIChvcGVuKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW4uZW1pdChldmVudEFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbG9zZS5lbWl0KGV2ZW50QXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50QXJncy5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3RvZ2dsZShvcGVuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBvcGVuU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcGVuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IGNvbXBvbmVudFRhYkluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlZCA/ICgtMSkgOiB0aGlzLnRhYkluZGV4O1xuICAgIH1cbiAgICBnZXQgYXBwZW5kVG8oKSB7XG4gICAgICAgIGNvbnN0IHsgYXBwZW5kVG8gfSA9IHRoaXMucG9wdXBTZXR0aW5ncztcbiAgICAgICAgaWYgKCFhcHBlbmRUbyB8fCBhcHBlbmRUbyA9PT0gJ3Jvb3QnKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcHBlbmRUbyA9PT0gJ2NvbXBvbmVudCcgPyB0aGlzLmNvbnRhaW5lciA6IGFwcGVuZFRvO1xuICAgIH1cbiAgICBnZXQgZm9jdXNlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRm9jdXNlZCAmJiAhdGhpcy5fZGlzYWJsZWQ7XG4gICAgfVxuICAgIGdldCBpc0ZsYXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvb2sgPT09ICdmbGF0JztcbiAgICB9XG4gICAgZ2V0IGlzT3V0bGluZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9vayA9PT0gJ291dGxpbmUnO1xuICAgIH1cbiAgICBnZXQgd2lkZ2V0Q2xhc3NlcygpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGdldCBkaXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBhY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hY3RpdmU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBrZXlkb3duKGV2ZW50KSB7XG4gICAgICAgIHRoaXMua2V5RG93bkhhbmRsZXIoZXZlbnQpO1xuICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gS2V5cy5TcGFjZSkge1xuICAgICAgICAgICAgdGhpcy5fYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAga2V5cHJlc3MoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5rZXlQcmVzc0hhbmRsZXIoZXZlbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAga2V5dXAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5rZXlVcEhhbmRsZXIoZXZlbnQpO1xuICAgICAgICB0aGlzLl9hY3RpdmUgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG1vdXNlZG93bihldmVudCkge1xuICAgICAgICBpZiAodGhpcy5fZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYWN0aXZlID0gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG1vdXNldXAoZXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2Rpc2FibGVkKSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2FjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgb3BlblBvcHVwKCkge1xuICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwVmlzaWJpbGl0eSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgb25CdXR0b25CbHVyKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLmJsdXJXcmFwcGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBhbmNob3JBbGlnbigpIHtcbiAgICAgICAgbGV0IGFsaWduID0geyBob3Jpem9udGFsOiB0aGlzLnBvcHVwU2V0dGluZ3MuYWxpZ24gfHwgJ2xlZnQnLCB2ZXJ0aWNhbDogJ2JvdHRvbScgfTtcbiAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uID09PSAncnRsJyAmJiAhaXNQcmVzZW50KHRoaXMucG9wdXBTZXR0aW5ncy5hbGlnbikpIHtcbiAgICAgICAgICAgIGFsaWduLmhvcml6b250YWwgPSAncmlnaHQnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhbGlnbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBwb3B1cEFsaWduKCkge1xuICAgICAgICBsZXQgYWxpZ24gPSB7IGhvcml6b250YWw6IHRoaXMucG9wdXBTZXR0aW5ncy5hbGlnbiB8fCAnbGVmdCcsIHZlcnRpY2FsOiAndG9wJyB9O1xuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09ICdydGwnICYmICFpc1ByZXNlbnQodGhpcy5wb3B1cFNldHRpbmdzLmFsaWduKSkge1xuICAgICAgICAgICAgYWxpZ24uaG9yaXpvbnRhbCA9ICdyaWdodCc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFsaWduO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb2N1c2VzIHRoZSBEcm9wRG93bkJ1dHRvbiBjb21wb25lbnQuXG4gICAgICovXG4gICAgZm9jdXMoKSB7XG4gICAgICAgIGlmIChpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBCbHVycyB0aGUgRHJvcERvd25CdXR0b24gY29tcG9uZW50LlxuICAgICAqL1xuICAgIGJsdXIoKSB7XG4gICAgICAgIGlmIChpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLm5hdGl2ZUVsZW1lbnQuYmx1cigpO1xuICAgICAgICAgICAgdGhpcy5ibHVyV3JhcHBlcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXMpIHtcbiAgICAgICAgaWYgKGlzQ2hhbmdlZChcInBvcHVwU2V0dGluZ3NcIiwgY2hhbmdlcykgJiYgaXNQcmVzZW50KHRoaXMucG9wdXBSZWYpKSB7XG4gICAgICAgICAgICBjb25zdCBwb3B1cCA9IHRoaXMucG9wdXBSZWYucG9wdXAuaW5zdGFuY2U7XG4gICAgICAgICAgICBjb25zdCBuZXdTZXR0aW5ncyA9IGNoYW5nZXMucG9wdXBTZXR0aW5ncy5jdXJyZW50VmFsdWU7XG4gICAgICAgICAgICBwb3B1cC5wb3B1cENsYXNzID0gbmV3U2V0dGluZ3MucG9wdXBDbGFzcztcbiAgICAgICAgICAgIHBvcHVwLmFuaW1hdGUgPSBuZXdTZXR0aW5ncy5hbmltYXRlO1xuICAgICAgICAgICAgcG9wdXAucG9wdXBBbGlnbiA9IHRoaXMucG9wdXBBbGlnbjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgc3VwZXIubmdPbkRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5kZXN0cm95UG9wdXAoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVG9nZ2xlcyB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgcG9wdXAuXG4gICAgICogSWYgdGhlIGB0b2dnbGVgIG1ldGhvZCBpcyB1c2VkIHRvIG9wZW4gb3IgY2xvc2UgdGhlIHBvcHVwLCB0aGUgYG9wZW5gIGFuZCBgY2xvc2VgIGV2ZW50cyB3aWxsIG5vdCBiZSBmaXJlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcGVuIC0gVGhlIHN0YXRlIG9mIHRoZSBwb3B1cC5cbiAgICAgKi9cbiAgICB0b2dnbGUob3Blbikge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRpY2soKCkgPT4gKHRoaXMuX3RvZ2dsZSgob3BlbiA9PT0gdW5kZWZpbmVkKSA/ICF0aGlzLl9vcGVuIDogb3BlbikpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBvcGVuIHN0YXRlIG9mIHRoZSBwb3B1cC5cbiAgICAgKi9cbiAgICBnZXQgaXNPcGVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcGVuU3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBoYW5kbGVGb2N1cygpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9kaXNhYmxlZCAmJiAhdGhpcy5faXNGb2N1c2VkKSB7XG4gICAgICAgICAgICB0aGlzLl9pc0ZvY3VzZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5vbkZvY3VzLmVtaXQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgd3JhcHBlckNvbnRhaW5zKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlciA9PT0gZWxlbWVudFxuICAgICAgICAgICAgfHwgdGhpcy53cmFwcGVyLmNvbnRhaW5zKGVsZW1lbnQpXG4gICAgICAgICAgICB8fCAodGhpcy5wb3B1cFJlZiAmJiB0aGlzLnBvcHVwUmVmLnBvcHVwRWxlbWVudC5jb250YWlucyhlbGVtZW50KSk7XG4gICAgfVxuICAgIHN1YnNjcmliZU5hdmlnYXRpb25FdmVudHMoKSB7XG4gICAgICAgIHRoaXMubmF2aWdhdGlvblN1YnNjcmlwdGlvbiA9IHRoaXMubmF2aWdhdGlvblNlcnZpY2UubmF2aWdhdGVcbiAgICAgICAgICAgIC5zdWJzY3JpYmUodGhpcy5vbkFycm93S2V5TmF2aWdhdGUuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZW50ZXJVcFN1YnNjcmlwdGlvbiA9IHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZW50ZXJ1cC5zdWJzY3JpYmUodGhpcy5vbk5hdmlnYXRpb25FbnRlclVwLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLm9wZW5TdWJzY3JpcHRpb24gPSB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLm9wZW4uc3Vic2NyaWJlKHRoaXMub25OYXZpZ2F0aW9uT3Blbi5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jbG9zZVN1YnNjcmlwdGlvbiA9IG1lcmdlKHRoaXMubmF2aWdhdGlvblNlcnZpY2UuY2xvc2UsIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZXNjKS5zdWJzY3JpYmUodGhpcy5vbk5hdmlnYXRpb25DbG9zZS5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgb25OYXZpZ2F0aW9uRW50ZXJVcCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9kaXNhYmxlZCAmJiAhdGhpcy5vcGVuU3RhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9wZW5TdGF0ZSkge1xuICAgICAgICAgICAgbGV0IGZvY3VzZWQgPSB0aGlzLmZvY3VzU2VydmljZS5mb2N1c2VkO1xuICAgICAgICAgICAgaWYgKGlzUHJlc2VudChmb2N1c2VkKSAmJiBmb2N1c2VkICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdEl0ZW1DbGlja0hhbmRsZXIoZm9jdXNlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b2dnbGVQb3B1cFZpc2liaWxpdHkoKTtcbiAgICAgICAgaWYgKCF0aGlzLm9wZW5TdGF0ZSAmJiBpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbk5hdmlnYXRpb25PcGVuKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2Rpc2FibGVkICYmICF0aGlzLm9wZW5TdGF0ZSkge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVQb3B1cFZpc2liaWxpdHkoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbk5hdmlnYXRpb25DbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMub3BlblN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwVmlzaWJpbGl0eSgpO1xuICAgICAgICAgICAgaWYgKGlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBvbkFycm93S2V5TmF2aWdhdGUoaW5kZXgpIHtcbiAgICAgICAgdGhpcy5mb2N1c1NlcnZpY2UuZm9jdXMoaW5kZXgpO1xuICAgIH1cbiAgICBfdG9nZ2xlKG9wZW4pIHtcbiAgICAgICAgaWYgKHRoaXMuX29wZW4gPT09IG9wZW4pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9vcGVuID0gb3BlbjtcbiAgICAgICAgdGhpcy5kZXN0cm95UG9wdXAoKTtcbiAgICAgICAgaWYgKHRoaXMuX29wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUG9wdXAoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVQb3B1cCgpIHtcbiAgICAgICAgdGhpcy5wb3B1cFJlZiA9IHRoaXMucG9wdXBTZXJ2aWNlLm9wZW4oe1xuICAgICAgICAgICAgYW5jaG9yOiB0aGlzLmVsUmVmLFxuICAgICAgICAgICAgYW5jaG9yQWxpZ246IHRoaXMuYW5jaG9yQWxpZ24sXG4gICAgICAgICAgICBhbmltYXRlOiB0aGlzLnBvcHVwU2V0dGluZ3MuYW5pbWF0ZSxcbiAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmFwcGVuZFRvLFxuICAgICAgICAgICAgY29udGVudDogdGhpcy5wb3B1cFRlbXBsYXRlLFxuICAgICAgICAgICAgcG9wdXBBbGlnbjogdGhpcy5wb3B1cEFsaWduLFxuICAgICAgICAgICAgcG9wdXBDbGFzczogdGhpcy5wb3B1cENsYXNzZXNcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucG9wdXBSZWYucG9wdXBBbmNob3JWaWV3cG9ydExlYXZlLnN1YnNjcmliZSgoKSA9PiB0aGlzLm9wZW5TdGF0ZSA9IGZhbHNlKTtcbiAgICAgICAgdGhpcy5wb3B1cFJlZi5wb3B1cE9wZW4uc3Vic2NyaWJlKHRoaXMuZm9jdXNGaXJzdEl0ZW0uYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIGRlc3Ryb3lQb3B1cCgpIHtcbiAgICAgICAgaWYgKHRoaXMucG9wdXBSZWYpIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXBSZWYuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMucG9wdXBSZWYgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIERyb3BEb3duQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpY29uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBEcm9wRG93bkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiaWNvbkNsYXNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBEcm9wRG93bkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiaW1hZ2VVcmxcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuXSwgRHJvcERvd25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcInBvcHVwU2V0dGluZ3NcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBEcm9wRG93bkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwidGV4dEZpZWxkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0Jvb2xlYW5dKVxuXSwgRHJvcERvd25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG5dLCBEcm9wRG93bkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGF0YVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBEcm9wRG93bkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwicHJpbWFyeVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgRHJvcERvd25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImxvb2tcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIERyb3BEb3duQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJidXR0b25DbGFzc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuXSwgRHJvcERvd25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcInRhYkluZGV4XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgRHJvcERvd25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcIml0ZW1DbGlja1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIERyb3BEb3duQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvcGVuXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgRHJvcERvd25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImNsb3NlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoJ2ZvY3VzJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIERyb3BEb3duQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvbkZvY3VzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoJ2JsdXInKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgRHJvcERvd25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcIm9uQmx1clwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstc3RhdGUtZm9jdXNlZCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBEcm9wRG93bkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiZm9jdXNlZFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWZsYXQnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgRHJvcERvd25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImlzRmxhdFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLW91dGxpbmUnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgRHJvcERvd25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImlzT3V0bGluZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWRyb3Bkb3duLWJ1dHRvbicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBEcm9wRG93bkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwid2lkZ2V0Q2xhc3Nlc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLmRpcicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIERyb3BEb3duQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXJcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBDb250ZW50Q2hpbGQoQnV0dG9uSXRlbVRlbXBsYXRlRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJ1dHRvbkl0ZW1UZW1wbGF0ZURpcmVjdGl2ZSlcbl0sIERyb3BEb3duQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpdGVtVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgnYnV0dG9uJywgeyBzdGF0aWM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEVsZW1lbnRSZWYpXG5dLCBEcm9wRG93bkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiYnV0dG9uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoJ2J1dHRvbkxpc3QnLCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIExpc3RDb21wb25lbnQpXG5dLCBEcm9wRG93bkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiYnV0dG9uTGlzdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCdwb3B1cFRlbXBsYXRlJywgeyBzdGF0aWM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFRlbXBsYXRlUmVmKVxuXSwgRHJvcERvd25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcInBvcHVwVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgnY29udGFpbmVyJywgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmLCBzdGF0aWM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFZpZXdDb250YWluZXJSZWYpXG5dLCBEcm9wRG93bkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiY29udGFpbmVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0TGlzdGVuZXIoJ2tleWRvd24nLCBbJyRldmVudCddKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbl0sIERyb3BEb3duQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJrZXlkb3duXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdExpc3RlbmVyKCdrZXlwcmVzcycsIFsnJGV2ZW50J10pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuXSwgRHJvcERvd25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImtleXByZXNzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdExpc3RlbmVyKCdrZXl1cCcsIFsnJGV2ZW50J10pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuXSwgRHJvcERvd25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImtleXVwXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdExpc3RlbmVyKCdtb3VzZWRvd24nLCBbJyRldmVudCddKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbl0sIERyb3BEb3duQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtb3VzZWRvd25cIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0TGlzdGVuZXIoJ21vdXNldXAnLCBbJyRldmVudCddKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbl0sIERyb3BEb3duQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtb3VzZXVwXCIsIG51bGwpO1xuRHJvcERvd25CdXR0b25Db21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICBDb21wb25lbnQoe1xuICAgICAgICBleHBvcnRBczogJ2tlbmRvRHJvcERvd25CdXR0b24nLFxuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIEZvY3VzU2VydmljZSxcbiAgICAgICAgICAgIE5hdmlnYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgTkFWSUdBVElPTl9TRVRUSU5HU19QUk9WSURFUiQxLFxuICAgICAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBMMTBOX1BSRUZJWCxcbiAgICAgICAgICAgICAgICB1c2VWYWx1ZTogJ2tlbmRvLmRyb3Bkb3duYnV0dG9uJ1xuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLWRyb3Bkb3duYnV0dG9uJyxcbiAgICAgICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPGJ1dHRvbiBrZW5kb0J1dHRvbiAjYnV0dG9uXG4gICAgICAgICAgICByb2xlPVwibWVudVwiXG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgIFt0YWJpbmRleF09XCJjb21wb25lbnRUYWJJbmRleFwiXG4gICAgICAgICAgICBbY2xhc3Muay1zdGF0ZS1hY3RpdmVdPVwiYWN0aXZlXCJcbiAgICAgICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgICAgICBbaWNvbl09XCJpY29uXCJcbiAgICAgICAgICAgIFtpY29uQ2xhc3NdPVwiaWNvbkNsYXNzXCJcbiAgICAgICAgICAgIFtpbWFnZVVybF09XCJpbWFnZVVybFwiXG4gICAgICAgICAgICBbbmdDbGFzc109XCJidXR0b25DbGFzc1wiXG4gICAgICAgICAgICAoY2xpY2spPVwib3BlblBvcHVwKClcIlxuICAgICAgICAgICAgKGZvY3VzKT1cImhhbmRsZUZvY3VzKClcIlxuICAgICAgICAgICAgKGJsdXIpPVwib25CdXR0b25CbHVyKClcIlxuICAgICAgICAgICAgW2F0dHIuYXJpYS1kaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLWV4cGFuZGVkXT1cIm9wZW5TdGF0ZVwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLWhhc3BvcHVwXT1cInRydWVcIlxuICAgICAgICAgICAgW2F0dHIuYXJpYS1vd25zXT1cImxpc3RJZFwiXG4gICAgICAgICAgICBbbG9va109XCJsb29rXCJcbiAgICAgICAgICAgIFtwcmltYXJ5XT1cInByaW1hcnlcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPG5nLXRlbXBsYXRlICNwb3B1cFRlbXBsYXRlPlxuICAgICAgICAgICAgPGtlbmRvLWJ1dHRvbi1saXN0XG4gICAgICAgICAgICAgICAgI2J1dHRvbkxpc3RcbiAgICAgICAgICAgICAgICBbaWRdPVwibGlzdElkXCJcbiAgICAgICAgICAgICAgICBbZGF0YV09XCJkYXRhXCJcbiAgICAgICAgICAgICAgICBbdGV4dEZpZWxkXT1cInRleHRGaWVsZFwiXG4gICAgICAgICAgICAgICAgW2l0ZW1UZW1wbGF0ZV09XCJpdGVtVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgIChvbkl0ZW1DbGljayk9XCJvbkl0ZW1DbGljaygkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAoa2V5ZG93bik9XCJrZXlEb3duSGFuZGxlcigkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAoa2V5cHJlc3MpPVwia2V5UHJlc3NIYW5kbGVyKCRldmVudClcIlxuICAgICAgICAgICAgICAgIChrZXl1cCk9XCJrZXlVcEhhbmRsZXIoJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgW2F0dHIuZGlyXT1cImRpclwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICA8L2tlbmRvLWJ1dHRvbi1saXN0PlxuICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICA8bmctY29udGFpbmVyICNjb250YWluZXI+PC9uZy1jb250YWluZXI+XG4gICAgYFxuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRm9jdXNTZXJ2aWNlLFxuICAgICAgICBOYXZpZ2F0aW9uU2VydmljZSxcbiAgICAgICAgRWxlbWVudFJlZixcbiAgICAgICAgTmdab25lLFxuICAgICAgICBQb3B1cFNlcnZpY2UsXG4gICAgICAgIEVsZW1lbnRSZWYsXG4gICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgIENoYW5nZURldGVjdG9yUmVmXSlcbl0sIERyb3BEb3duQnV0dG9uQ29tcG9uZW50KTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKlxuICogVGhlIGV4cG9ydGVkIHBhY2thZ2UgbW9kdWxlLlxuICpcbiAqIFRoZSBwYWNrYWdlIGV4cG9ydHM6XG4gKiAtIGBEcm9wRG93bkJ1dHRvbkNvbXBvbmVudGAmbWRhc2g7VGhlIERyb3BEb3duQnV0dG9uQ29tcG9uZW50IGNvbXBvbmVudCBjbGFzcy5cbiAqL1xubGV0IERyb3BEb3duQnV0dG9uTW9kdWxlID0gY2xhc3MgRHJvcERvd25CdXR0b25Nb2R1bGUge1xufTtcbkRyb3BEb3duQnV0dG9uTW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgTmdNb2R1bGUoe1xuICAgICAgICBkZWNsYXJhdGlvbnM6IFtEcm9wRG93bkJ1dHRvbkNvbXBvbmVudF0sXG4gICAgICAgIGV4cG9ydHM6IFtEcm9wRG93bkJ1dHRvbkNvbXBvbmVudCwgTGlzdE1vZHVsZV0sXG4gICAgICAgIGltcG9ydHM6IFtDb21tb25Nb2R1bGUsIFBvcHVwTW9kdWxlLCBMaXN0TW9kdWxlLCBCdXR0b25Nb2R1bGVdXG4gICAgfSlcbl0sIERyb3BEb3duQnV0dG9uTW9kdWxlKTtcblxuLyoqXG4gKiBEaXNwbGF5cyBhIENoaXAgdGhhdCByZXByZXNlbnRzIGFuIGlucHV0LCBhdHRyaWJ1dGUgb3IgYW4gYWN0aW9uLlxuICovXG5sZXQgQ2hpcENvbXBvbmVudCA9IGNsYXNzIENoaXBDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIHJlbmRlcmVyLCBuZ1pvbmUsIGxvY2FsaXphdGlvblNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLm5nWm9uZSA9IG5nWm9uZTtcbiAgICAgICAgdGhpcy5sb2NhbGl6YXRpb25TZXJ2aWNlID0gbG9jYWxpemF0aW9uU2VydmljZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoYW5nZXMgdGhlIHZpc3VhbCBhcHBlYXJhbmNlIGJ5IHVzaW5nIGFsdGVybmF0aXZlIHN0eWxpbmcgb3B0aW9ucy5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGF2YWlsYWJsZSB2YWx1ZXMgYXJlOlxuICAgICAgICAgKiAqIGBzb2xpZGBcbiAgICAgICAgICogKiBgb3V0bGluZWBcbiAgICAgICAgICogKiBgZmlsbGVkYCAoVGhlIGBmaWxsZWRgIG9wdGlvbiB3aWxsIGJlIGRlcHJlY2F0ZWQuIFRvIGFwcGx5IGlkZW50aWNhbCBzdHlsaW5nLCB1c2UgYHNvbGlkYCBpbnN0ZWFkKS5cbiAgICAgICAgICogKiBgb3V0bGluZWRgIChUaGUgYG91dGxpbmVkYCBvcHRpb24gd2lsbCBiZSBkZXByZWNhdGVkLiBUbyBhcHBseSBpZGVudGljYWwgc3R5bGluZywgdXNlIGBvdXRsaW5lYCBpbnN0ZWFkKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubG9vayA9ICdzb2xpZCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIHNlbGVjdGVkIHN0YXRlIG9mIHRoZSBDaGlwLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIGlmIHRoZSBDaGlwIHdpbGwgYmUgcmVtb3ZhYmxlIG9yIG5vdC5cbiAgICAgICAgICogSWYgdGhlIHByb3BlcnR5IGlzIHNldCB0byBgdHJ1ZWAsIHRoZSBDaGlwIHJlbmRlcnMgYSByZW1vdmUgaWNvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVtb3ZhYmxlID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIENoaXAgdHlwZS5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIHBvc3NpYmxlIHZhbHVlcyBhcmU6XG4gICAgICAgICAqIC0gYG5vbmVgIChkZWZhdWx0KVxuICAgICAgICAgKiAtIGBzdWNjZXNzYFxuICAgICAgICAgKiAtIGBlcnJvcmBcbiAgICAgICAgICogLSBgd2FybmluZ2BcbiAgICAgICAgICogLSBgaW5mb2BcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHlwZSA9ICdub25lJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHNldCB0byBgdHJ1ZWAsIHRoZSBDaGlwIHdpbGwgYmUgZGlzYWJsZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIHVzZXIgY2xpY2tzIHRoZSByZW1vdmUgaWNvbiBvZiB0aGUgQ2hpcC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVtb3ZlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIGNsaWNrcyB0aGUgY29udGVudCBvZiB0aGUgQ2hpcC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29udGVudENsaWNrID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnRhYkluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5ob3N0Q2xhc3MgPSB0cnVlO1xuICAgICAgICB0aGlzLmZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgdmFsaWRhdGVQYWNrYWdlKHBhY2thZ2VNZXRhZGF0YSk7XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gbG9jYWxpemF0aW9uU2VydmljZS5ydGwgPyAncnRsJyA6ICdsdHInO1xuICAgIH1cbiAgICBnZXQgYXJpYUNoZWNrZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkO1xuICAgIH1cbiAgICBnZXQgb3V0bGluZUNsYXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb29rID09PSAnb3V0bGluZScgfHwgdGhpcy5sb29rID09PSAnb3V0bGluZWQnO1xuICAgIH1cbiAgICBnZXQgc29saWRDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9vayA9PT0gJ3NvbGlkJyB8fCB0aGlzLmxvb2sgPT09ICdmaWxsZWQnO1xuICAgIH1cbiAgICBnZXQgaGFzSWNvbkNsYXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pY29uIHx8IHRoaXMuaWNvbkNsYXNzID8gdHJ1ZSA6IGZhbHNlO1xuICAgIH1cbiAgICBnZXQgZGlzYWJsZWRDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQ7XG4gICAgfVxuICAgIGdldCBzZWxlY3RlZENsYXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZDtcbiAgICB9XG4gICAgZ2V0IGZvY3VzZWRDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9jdXNlZDtcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY1JUTFN1YnNjcmlwdGlvbiA9IHRoaXMubG9jYWxpemF0aW9uU2VydmljZS5jaGFuZ2VzXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCh7IHJ0bCB9KSA9PiB0aGlzLmRpcmVjdGlvbiA9IHJ0bCA/ICdydGwnIDogJ2x0cicpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZHluYW1pY1JUTFN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5keW5hbWljUlRMU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGV0YWNoRG9tRXZlbnRzKSB7XG4gICAgICAgICAgICB0aGlzLmRldGFjaERvbUV2ZW50cygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICAgICAgY29uc3QgY2hpcCA9IHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICAgICAgICBjb25zdCB0eXBlQ2xhc3MgPSB0aGlzLnR5cGVDbGFzcygpO1xuICAgICAgICBpZiAodGhpcy50eXBlICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoY2hpcCwgdHlwZUNsYXNzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmF0dGFjaEVsZW1lbnRFdmVudEhhbmRsZXJzKGNoaXApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IGljb25DbGFzc2VzKCkge1xuICAgICAgICBjb25zdCBjbGFzc2VzID0gW107XG4gICAgICAgIGlmICh0aGlzLmljb25DbGFzcykge1xuICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKGAke3RoaXMuaWNvbkNsYXNzfWApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmljb24pIHtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaChgay1pY29uIGstaS0ke3RoaXMuaWNvbn1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xhc3NlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBzZWxlY3RlZEljb25DbGFzc2VzKCkge1xuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEljb24pIHtcbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLnNlbGVjdGVkSWNvbn1gO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgay1pY29uIGstaS1jaGVja2A7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgcmVtb3ZlSWNvbkNsYXNzZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZUljb24pIHtcbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLnJlbW92ZUljb259YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYGstaWNvbiBrLWktY2xvc2UtY2lyY2xlYDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHR5cGVDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICdub25lJzogJycsXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ICdrLWNoaXAtc3VjY2VzcycsXG4gICAgICAgICAgICAnd2FybmluZyc6ICdrLWNoaXAtd2FybmluZycsXG4gICAgICAgICAgICAnZXJyb3InOiAnay1jaGlwLWVycm9yJyxcbiAgICAgICAgICAgICdpbmZvJzogJ2stY2hpcC1pbmZvJ1xuICAgICAgICB9W3RoaXMudHlwZV07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvY3VzZXMgdGhlIENoaXAgY29tcG9uZW50LlxuICAgICAqL1xuICAgIGZvY3VzKCkge1xuICAgICAgICBpZiAoaXNEb2N1bWVudEF2YWlsYWJsZSgpKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJsdXJzIHRoZSBDaGlwIGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBibHVyKCkge1xuICAgICAgICBpZiAoaXNEb2N1bWVudEF2YWlsYWJsZSgpKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5ibHVyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uUmVtb3ZlQ2xpY2soZSkge1xuICAgICAgICBpZiAodGhpcy5yZW1vdmFibGUpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlLmVtaXQoeyBzZW5kZXI6IHRoaXMsIG9yaWdpbmFsRXZlbnQ6IGUgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXR0YWNoRWxlbWVudEV2ZW50SGFuZGxlcnMoY2hpcCkge1xuICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmb2N1c0xpc3RlbmVyID0gdGhpcy5yZW5kZXJlci5saXN0ZW4oY2hpcCwgJ2ZvY3VzJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoY2hpcCwgJ2stZm9jdXMnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgYmx1ckxpc3RlbmVyID0gdGhpcy5yZW5kZXJlci5saXN0ZW4oY2hpcCwgJ2JsdXInLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyhjaGlwLCAnay1mb2N1cycpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50Q2xpY2tMaXN0ZW5lciA9IHRoaXMucmVuZGVyZXIubGlzdGVuKGNoaXAsICdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNSZW1vdmVDbGlja2VkID0gY2xvc2VzdChlLnRhcmdldCwgJy5rLXJlbW92ZS1pY29uJyk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1JlbW92ZUNsaWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudENsaWNrLmVtaXQoeyBzZW5kZXI6IHRoaXMsIG9yaWdpbmFsRXZlbnQ6IGUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kZXRhY2hEb21FdmVudHMgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9jdXNMaXN0ZW5lcigpO1xuICAgICAgICAgICAgICAgIGJsdXJMaXN0ZW5lcigpO1xuICAgICAgICAgICAgICAgIGNvbnRlbnRDbGlja0xpc3RlbmVyKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgQ2hpcENvbXBvbmVudC5wcm90b3R5cGUsIFwibG9va1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgQ2hpcENvbXBvbmVudC5wcm90b3R5cGUsIFwibGFiZWxcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIENoaXBDb21wb25lbnQucHJvdG90eXBlLCBcImljb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIENoaXBDb21wb25lbnQucHJvdG90eXBlLCBcImljb25DbGFzc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIENoaXBDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdGVkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBDaGlwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RlZEljb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBDaGlwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJyZW1vdmFibGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIENoaXBDb21wb25lbnQucHJvdG90eXBlLCBcInJlbW92ZUljb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIENoaXBDb21wb25lbnQucHJvdG90eXBlLCBcInR5cGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBDaGlwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIENoaXBDb21wb25lbnQucHJvdG90eXBlLCBcInJlbW92ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIENoaXBDb21wb25lbnQucHJvdG90eXBlLCBcImNvbnRlbnRDbGlja1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIudGFiaW5kZXgnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuXSwgQ2hpcENvbXBvbmVudC5wcm90b3R5cGUsIFwidGFiSW5kZXhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLmFyaWEtY2hlY2tlZCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBDaGlwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhcmlhQ2hlY2tlZFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWNoaXAnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIENoaXBDb21wb25lbnQucHJvdG90eXBlLCBcImhvc3RDbGFzc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstY2hpcC1vdXRsaW5lJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIENoaXBDb21wb25lbnQucHJvdG90eXBlLCBcIm91dGxpbmVDbGFzc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWNoaXAtc29saWQnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgQ2hpcENvbXBvbmVudC5wcm90b3R5cGUsIFwic29saWRDbGFzc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWNoaXAtaGFzLWljb24nKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgQ2hpcENvbXBvbmVudC5wcm90b3R5cGUsIFwiaGFzSWNvbkNsYXNzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIuYXJpYS1kaXNhYmxlZCcpLFxuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWRpc2FibGVkJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIENoaXBDb21wb25lbnQucHJvdG90eXBlLCBcImRpc2FibGVkQ2xhc3NcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1zZWxlY3RlZCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBDaGlwQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RlZENsYXNzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstZm9jdXMnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgQ2hpcENvbXBvbmVudC5wcm90b3R5cGUsIFwiZm9jdXNlZENsYXNzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIuZGlyJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIENoaXBDb21wb25lbnQucHJvdG90eXBlLCBcImRpcmVjdGlvblwiLCB2b2lkIDApO1xuQ2hpcENvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgIENvbXBvbmVudCh7XG4gICAgICAgIHNlbGVjdG9yOiAna2VuZG8tY2hpcCcsXG4gICAgICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxzcGFuIGNsYXNzPVwiay1zZWxlY3RlZC1pY29uLXdyYXBwZXJcIj5cbiAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwic2VsZWN0ZWRcIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiay1zZWxlY3RlZC1pY29uXCJcbiAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJzZWxlY3RlZEljb25DbGFzc2VzXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPC9zcGFuPlxuXG4gICAgICAgIDxzcGFuICpuZ0lmPVwiaWNvbiB8fCBpY29uQ2xhc3NcIlxuICAgICAgICAgICAgY2xhc3M9XCJrLWNoaXAtaWNvblwiXG4gICAgICAgICAgICBbbmdDbGFzc109XCJpY29uQ2xhc3Nlc1wiXG4gICAgICAgID5cbiAgICAgICAgPC9zcGFuPlxuXG4gICAgICAgIDxzcGFuIGNsYXNzPVwiay1jaGlwLWNvbnRlbnRcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiay1jaGlwLWxhYmVsXCIgKm5nSWY9XCJsYWJlbFwiPlxuICAgICAgICAgICAgICAgIHt7IGxhYmVsIH19XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8bmctY29udGVudCAqbmdJZj1cIiFsYWJlbFwiPjwvbmctY29udGVudD5cbiAgICAgICAgPC9zcGFuPlxuXG4gICAgICAgIDxzcGFuICpuZ0lmPVwicmVtb3ZhYmxlXCJcbiAgICAgICAgICAgIGNsYXNzPVwiay1yZW1vdmUtaWNvblwiXG4gICAgICAgICAgICAoY2xpY2spPVwib25SZW1vdmVDbGljaygkZXZlbnQpXCJcbiAgICAgICAgPlxuICAgICAgICAgICAgPHNwYW4gW25nQ2xhc3NdPVwicmVtb3ZlSWNvbkNsYXNzZXNcIj48L3NwYW4+XG4gICAgICAgIDwvc3Bhbj5cbiAgICBgLFxuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogTDEwTl9QUkVGSVgsXG4gICAgICAgICAgICAgICAgdXNlVmFsdWU6ICdrZW5kby5jaGlwJ1xuICAgICAgICAgICAgfVxuICAgICAgICBdXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtFbGVtZW50UmVmLFxuICAgICAgICBSZW5kZXJlcjIsXG4gICAgICAgIE5nWm9uZSxcbiAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZV0pXG5dLCBDaGlwQ29tcG9uZW50KTtcblxubGV0IENoaXBMaXN0Q29tcG9uZW50ID0gY2xhc3MgQ2hpcExpc3RDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGxvY2FsaXphdGlvblNlcnZpY2UsIHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMubG9jYWxpemF0aW9uU2VydmljZSA9IGxvY2FsaXphdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5ob3N0Q2xhc3MgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgc2VsZWN0aW9uIG1vZGUgb2YgdGhlIENoaXBMaXN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgYXZhaWxhYmxlIHZhbHVlcyBhcmU6XG4gICAgICAgICAqICogYG5vbmVgIChkZWZhdWx0KVxuICAgICAgICAgKiAqIGBzaW5nbGVgXG4gICAgICAgICAqICogYG11bHRpcGxlYFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSAnbm9uZSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgd2hlbiB0aGUgQ2hpcExpc3Qgc2VsZWN0aW9uIGlzIGNoYW5nZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNlbGVjdGVkQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSB1c2VyIGNsaWNrcyBvbiB0aGUgcmVtb3ZlIGljb24gb2YgdGhlIENoaXAuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlbW92ZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5yb2xlID0gJ2xpc3Rib3gnO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGxvY2FsaXphdGlvblNlcnZpY2UucnRsID8gJ3J0bCcgOiAnbHRyJztcbiAgICB9XG4gICAgZ2V0IHNpbmdsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uID09PSAnc2luZ2xlJztcbiAgICB9XG4gICAgZ2V0IG11bHRpcGxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb24gPT09ICdtdWx0aXBsZSc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBvbkNsaWNrKCRldmVudCkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSAkZXZlbnQudGFyZ2V0O1xuICAgICAgICBjb25zdCBpc1JlbW92ZUNsaWNrZWQgPSBjbG9zZXN0KHRhcmdldCwgJy5rLXJlbW92ZS1pY29uJyk7XG4gICAgICAgIGNvbnN0IGNsaWNrZWRDaGlwID0gY2xvc2VzdCh0YXJnZXQsICcuay1jaGlwJyk7XG4gICAgICAgIGNvbnN0IGNoaXAgPSB0aGlzLmNoaXBzLmZpbmQoKGNoaXApID0+IGNsaWNrZWRDaGlwID09PSBjaGlwLmVsZW1lbnQubmF0aXZlRWxlbWVudCk7XG4gICAgICAgIGlmIChpc1JlbW92ZUNsaWNrZWQgJiYgY2xpY2tlZENoaXApIHtcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZUV2ZW50QXJncyA9IHsgc2VuZGVyOiB0aGlzLCBvcmlnaW5hbEV2ZW50OiAkZXZlbnQsIHJlbW92ZWRDaGlwOiBjaGlwIH07XG4gICAgICAgICAgICB0aGlzLnJlbW92ZS5lbWl0KHJlbW92ZUV2ZW50QXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uICE9PSAnbm9uZScgJiYgY2xpY2tlZENoaXAgJiYgIWlzUmVtb3ZlQ2xpY2tlZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb24oY2hpcCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY1JUTFN1YnNjcmlwdGlvbiA9IHRoaXMubG9jYWxpemF0aW9uU2VydmljZS5jaGFuZ2VzXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCh7IHJ0bCB9KSA9PiB0aGlzLmRpcmVjdGlvbiA9IHJ0bCA/ICdydGwnIDogJ2x0cicpO1xuICAgIH1cbiAgICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XG4gICAgICAgIHRoaXMuY2hpcHMuZm9yRWFjaCgoY2hpcCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUoY2hpcC5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQsICdyb2xlJywgJ29wdGlvbicpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLmR5bmFtaWNSVExTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY1JUTFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbGVjdGVkQ2hpcHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoaXBzLnJlZHVjZSgoYWNjLCBjdXIsIGlkeCkgPT4geyByZXR1cm4gY3VyLnNlbGVjdGVkID8gYWNjLmNvbmNhdChpZHgpIDogYWNjOyB9LCBbXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHNlbGVjdGlvbiBvbiBjbGljayBvZiBhIENoaXAuIEVtaXRzIGV2ZW50cy5cbiAgICAgKi9cbiAgICBzZXRTZWxlY3Rpb24oY2hpcCkge1xuICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb24gPT09ICdzaW5nbGUnKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKGNoaXApO1xuICAgICAgICB9XG4gICAgICAgIGNoaXAuc2VsZWN0ZWQgPSAhY2hpcC5zZWxlY3RlZDtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENoYW5nZS5lbWl0KHRoaXMuc2VsZWN0ZWRDaGlwcygpKTtcbiAgICB9XG4gICAgY2xlYXJTZWxlY3Rpb24oY2hpcCkge1xuICAgICAgICB0aGlzLmNoaXBzLmZvckVhY2goKGMpID0+IHtcbiAgICAgICAgICAgIGlmIChjaGlwICE9PSBjKSB7XG4gICAgICAgICAgICAgICAgYy5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstY2hpcC1saXN0JyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBDaGlwTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiaG9zdENsYXNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnYXR0ci5kaXInKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgQ2hpcExpc3RDb21wb25lbnQucHJvdG90eXBlLCBcImRpcmVjdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgQ2hpcExpc3RDb21wb25lbnQucHJvdG90eXBlLCBcInNlbGVjdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIENoaXBMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzZWxlY3RlZENoYW5nZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIENoaXBMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJyZW1vdmVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZHJlbihDaGlwQ29tcG9uZW50KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgUXVlcnlMaXN0KVxuXSwgQ2hpcExpc3RDb21wb25lbnQucHJvdG90eXBlLCBcImNoaXBzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1zZWxlY3Rpb24tc2luZ2xlJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIENoaXBMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzaW5nbGVcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1zZWxlY3Rpb24tbXVsdGlwbGUnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgQ2hpcExpc3RDb21wb25lbnQucHJvdG90eXBlLCBcIm11bHRpcGxlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIucm9sZScpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBDaGlwTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwicm9sZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdExpc3RlbmVyKCdjbGljaycsIFsnJGV2ZW50J10pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuXSwgQ2hpcExpc3RDb21wb25lbnQucHJvdG90eXBlLCBcIm9uQ2xpY2tcIiwgbnVsbCk7XG5DaGlwTGlzdENvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgIENvbXBvbmVudCh7XG4gICAgICAgIHNlbGVjdG9yOiAna2VuZG8tY2hpcC1saXN0LCBrZW5kby1jaGlwbGlzdCcsXG4gICAgICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICBgLFxuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogTDEwTl9QUkVGSVgsXG4gICAgICAgICAgICAgICAgdXNlVmFsdWU6ICdrZW5kby5jaGlwLWxpc3QnXG4gICAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0xvY2FsaXphdGlvblNlcnZpY2UsIFJlbmRlcmVyMl0pXG5dLCBDaGlwTGlzdENvbXBvbmVudCk7XG5cbmNvbnN0IGV4cG9ydGVkTW9kdWxlcyA9IFtcbiAgICBDaGlwQ29tcG9uZW50LFxuICAgIENoaXBMaXN0Q29tcG9uZW50XG5dO1xuY29uc3QgZGVjbGFyYXRpb25zID0gW1xuICAgIC4uLmV4cG9ydGVkTW9kdWxlc1xuXTtcbi8qKlxuICogUmVwcmVzZW50cyB0aGUgW05nTW9kdWxlXSh7eyBzaXRlLmRhdGEudXJscy5hbmd1bGFyWyduZ21vZHVsZWFwaSddIH19KVxuICogZGVmaW5pdGlvbiBmb3IgdGhlIENoaXAgYW5kIENoaXBMaXN0IGNvbXBvbmVudHMuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0cy1uby1ydW5cbiAqIC8vIEltcG9ydCB0aGUgQ2hpcCBtb2R1bGVcbiAqIGltcG9ydCB7IENoaXBNb2R1bGUgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1idXR0b25zJztcbiAqXG4gKiAvLyBUaGUgYnJvd3NlciBwbGF0Zm9ybSB3aXRoIGEgY29tcGlsZXJcbiAqIGltcG9ydCB7IHBsYXRmb3JtQnJvd3NlckR5bmFtaWMgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyLWR5bmFtaWMnO1xuICpcbiAqIGltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG4gKlxuICogLy8gSW1wb3J0IHRoZSBhcHAgY29tcG9uZW50XG4gKiBpbXBvcnQgeyBBcHBDb21wb25lbnQgfSBmcm9tICcuL2FwcC5jb21wb25lbnQnO1xuICpcbiAqIC8vIERlZmluZSB0aGUgYXBwIG1vZHVsZVxuICogX0BOZ01vZHVsZSh7XG4gKiAgICAgZGVjbGFyYXRpb25zOiBbQXBwQ29tcG9uZW50XSwgLy8gZGVjbGFyZSBhcHAgY29tcG9uZW50XG4gKiAgICAgaW1wb3J0czogICAgICBbQnJvd3Nlck1vZHVsZSwgQ2hpcE1vZHVsZV0sIC8vIGltcG9ydCBDaGlwIG1vZHVsZVxuICogICAgIGJvb3RzdHJhcDogICAgW0FwcENvbXBvbmVudF1cbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgQXBwTW9kdWxlIHt9XG4gKlxuICogYGBgXG4gKi9cbmxldCBDaGlwTW9kdWxlID0gY2xhc3MgQ2hpcE1vZHVsZSB7XG59O1xuQ2hpcE1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgIE5nTW9kdWxlKHtcbiAgICAgICAgZGVjbGFyYXRpb25zOiBbZGVjbGFyYXRpb25zXSxcbiAgICAgICAgZXhwb3J0czogW2V4cG9ydGVkTW9kdWxlc10sXG4gICAgICAgIGltcG9ydHM6IFtDb21tb25Nb2R1bGVdXG4gICAgfSlcbl0sIENoaXBNb2R1bGUpO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gZ2V0QW5jaG9yQWxpZ24oZmFiQWxpZ24sIHJ0bCkge1xuICAgIGxldCBhbGlnbiA9IHsgaG9yaXpvbnRhbDogKHJ0bCA/ICdyaWdodCcgOiAnbGVmdCcpLCB2ZXJ0aWNhbDogJ2JvdHRvbScgfTtcbiAgICBpZiAoZmFiQWxpZ24uaG9yaXpvbnRhbCA9PT0gJ2VuZCcpIHtcbiAgICAgICAgYWxpZ24uaG9yaXpvbnRhbCA9IHJ0bCA/ICdsZWZ0JyA6ICdyaWdodCc7XG4gICAgfVxuICAgIGlmIChmYWJBbGlnbi52ZXJ0aWNhbCA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgYWxpZ24udmVydGljYWwgPSAndG9wJztcbiAgICB9XG4gICAgaWYgKGZhYkFsaWduLnZlcnRpY2FsID09PSAnYm90dG9tJyAmJiBmYWJBbGlnbi5ob3Jpem9udGFsID09PSAnZW5kJykge1xuICAgICAgICBhbGlnbi5ob3Jpem9udGFsID0gcnRsID8gJ2xlZnQnIDogJ3JpZ2h0JztcbiAgICAgICAgYWxpZ24udmVydGljYWwgPSAndG9wJztcbiAgICB9XG4gICAgcmV0dXJuIGFsaWduO1xufVxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIGdldFBvcHVwQWxpZ24oZmFiQWxpZ24sIHJ0bCkge1xuICAgIGxldCBhbGlnbiA9IHsgaG9yaXpvbnRhbDogKHJ0bCA/ICdyaWdodCcgOiAnbGVmdCcpLCB2ZXJ0aWNhbDogJ3RvcCcgfTtcbiAgICBpZiAoZmFiQWxpZ24uaG9yaXpvbnRhbCA9PT0gJ2VuZCcpIHtcbiAgICAgICAgYWxpZ24uaG9yaXpvbnRhbCA9IHJ0bCA/ICdsZWZ0JyA6ICdyaWdodCc7XG4gICAgfVxuICAgIGlmIChmYWJBbGlnbi52ZXJ0aWNhbCA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgYWxpZ24udmVydGljYWwgPSAnYm90dG9tJztcbiAgICB9XG4gICAgaWYgKGZhYkFsaWduLnZlcnRpY2FsID09PSAnYm90dG9tJyAmJiBmYWJBbGlnbi5ob3Jpem9udGFsID09PSAnZW5kJykge1xuICAgICAgICBhbGlnbi5ob3Jpem9udGFsID0gcnRsID8gJ2xlZnQnIDogJ3JpZ2h0JztcbiAgICAgICAgYWxpZ24udmVydGljYWwgPSAnYm90dG9tJztcbiAgICB9XG4gICAgcmV0dXJuIGFsaWduO1xufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gb3BlbkFuaW1hdGlvbihhbmltYXRpb25TZXR0aW5ncykge1xuICAgIGNvbnN0IGlzQm90dG9tID0gYW5pbWF0aW9uU2V0dGluZ3MuYWxpZ24udmVydGljYWwgPT09ICdib3R0b20nO1xuICAgIGNvbnN0IGR1cmF0aW9uID0gYW5pbWF0aW9uU2V0dGluZ3MuZHVyYXRpb247XG4gICAgY29uc3QgZ2FwID0gYW5pbWF0aW9uU2V0dGluZ3MuZ2FwO1xuICAgIHJldHVybiBzZXF1ZW5jZShbXG4gICAgICAgIHF1ZXJ5KGAuay1mYWItaXRlbWAsIFtcbiAgICAgICAgICAgIHN0eWxlKHsgb3BhY2l0eTogMCwgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWSgke2lzQm90dG9tID8gJzhweCcgOiAnLThweCd9KWAgfSksXG4gICAgICAgICAgICBzdGFnZ2VyKGdhcCwgW2FuaW1hdGUoYCR7ZHVyYXRpb259bXMgZWFzZS1pbmAsIHN0eWxlKHsgb3BhY2l0eTogJyonLCB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKDApJyB9KSldKVxuICAgICAgICBdLCB7IG9wdGlvbmFsOiB0cnVlIH0pXG4gICAgXSk7XG59XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gY2xvc2VBbmltYXRpb24oYW5pbWF0aW9uU2V0dGluZ3MpIHtcbiAgICBjb25zdCBpc0JvdHRvbSA9IGFuaW1hdGlvblNldHRpbmdzLmFsaWduLnZlcnRpY2FsID09PSAnYm90dG9tJztcbiAgICBjb25zdCBkdXJhdGlvbiA9IGFuaW1hdGlvblNldHRpbmdzLmR1cmF0aW9uO1xuICAgIGNvbnN0IGdhcCA9IGFuaW1hdGlvblNldHRpbmdzLmdhcDtcbiAgICByZXR1cm4gc2VxdWVuY2UoW1xuICAgICAgICBxdWVyeShgLmstZmFiLWl0ZW1gLCBbXG4gICAgICAgICAgICBzdHlsZSh7IG9wYWNpdHk6ICcqJywgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgwKScgfSksXG4gICAgICAgICAgICBzdGFnZ2VyKC1nYXAsIFthbmltYXRlKGAke2R1cmF0aW9ufW1zIGVhc2UtaW5gLCBzdHlsZSh7IG9wYWNpdHk6IDAsIHRyYW5zZm9ybTogYHRyYW5zbGF0ZVkoJHtpc0JvdHRvbSA/ICc4cHgnIDogJy04cHgnfSlgIH0pKV0pXG4gICAgICAgIF0sIHsgb3B0aW9uYWw6IHRydWUgfSlcbiAgICBdKTtcbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgdGVtcGxhdGUgdGhhdCBkZWZpbmVzIHRoZSBjb250ZW50IG9mIHRoZSB3aG9sZSBkaWFsIGl0ZW0uXG4gKiBUbyBkZWZpbmUgdGhlIHRlbXBsYXRlLCBuZXN0IGFuIGA8bmctdGVtcGxhdGU+YCB0YWdcbiAqIHdpdGggdGhlIGBrZW5kb0RpYWxJdGVtVGVtcGxhdGVgIGRpcmVjdGl2ZSBpbnNpZGUgdGhlIGA8a2VuZG8tZmxvYXRpbmdhY3Rpb25idXR0b24+YCB0YWdcbiAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgdGVtcGxhdGVzX2Zsb2F0aW5nYWN0aW9uYnV0dG9uICV9I3RvYy1kaWFsLWl0ZW0tdGVtcGxhdGUpKS5cbiAqL1xubGV0IERpYWxJdGVtVGVtcGxhdGVEaXJlY3RpdmUgPSBjbGFzcyBEaWFsSXRlbVRlbXBsYXRlRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZVJlZikge1xuICAgICAgICB0aGlzLnRlbXBsYXRlUmVmID0gdGVtcGxhdGVSZWY7XG4gICAgfVxufTtcbkRpYWxJdGVtVGVtcGxhdGVEaXJlY3RpdmUgPSBfX2RlY29yYXRlKFtcbiAgICBEaXJlY3RpdmUoe1xuICAgICAgICBzZWxlY3RvcjogJ1trZW5kb0RpYWxJdGVtVGVtcGxhdGVdJ1xuICAgIH0pLFxuICAgIF9fcGFyYW0oMCwgT3B0aW9uYWwoKSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtUZW1wbGF0ZVJlZl0pXG5dLCBEaWFsSXRlbVRlbXBsYXRlRGlyZWN0aXZlKTtcblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgdGVtcGxhdGUgdGhhdCBkZWZpbmVzIHRoZSBjb250ZW50IG9mIHRoZSBGbG9hdGluZ0FjdGlvbkJ1dHRvbi5cbiAqIFRvIGRlZmluZSB0aGUgdGVtcGxhdGUsIG5lc3QgYW4gYDxuZy10ZW1wbGF0ZT5gIHRhZ1xuICogd2l0aCB0aGUgYGtlbmRvRmxvYXRpbmdBY3Rpb25CdXR0b25UZW1wbGF0ZWAgZGlyZWN0aXZlIGluc2lkZSB0aGUgYDxrZW5kby1mbG9hdGluZ2FjdGlvbmJ1dHRvbj5gIHRhZ1xuICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyB0ZW1wbGF0ZXNfZmxvYXRpbmdhY3Rpb25idXR0b24gJX0jdG9jLWZsb2F0aW5nYWN0aW9uYnV0dG9uLXRlbXBsYXRlKSkuXG4gKi9cbmxldCBGbG9hdGluZ0FjdGlvbkJ1dHRvblRlbXBsYXRlRGlyZWN0aXZlID0gY2xhc3MgRmxvYXRpbmdBY3Rpb25CdXR0b25UZW1wbGF0ZURpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IodGVtcGxhdGVSZWYpIHtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVJlZiA9IHRlbXBsYXRlUmVmO1xuICAgIH1cbn07XG5GbG9hdGluZ0FjdGlvbkJ1dHRvblRlbXBsYXRlRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9GbG9hdGluZ0FjdGlvbkJ1dHRvblRlbXBsYXRlXSdcbiAgICB9KSxcbiAgICBfX3BhcmFtKDAsIE9wdGlvbmFsKCkpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbVGVtcGxhdGVSZWZdKVxuXSwgRmxvYXRpbmdBY3Rpb25CdXR0b25UZW1wbGF0ZURpcmVjdGl2ZSk7XG5cbmNvbnN0IE5BVklHQVRJT05fU0VUVElOR1MkMiA9IHtcbiAgICB1c2VMZWZ0UmlnaHRBcnJvd3M6IGZhbHNlXG59O1xuY29uc3QgybUwJDIgPSBOQVZJR0FUSU9OX1NFVFRJTkdTJDI7XG5jb25zdCBOQVZJR0FUSU9OX1NFVFRJTkdTX1BST1ZJREVSJDIgPSB7XG4gICAgcHJvdmlkZTogTkFWSUdBVElPTl9DT05GSUcsXG4gICAgdXNlVmFsdWU6IMm1MCQyXG59O1xuY29uc3QgU0laRV9DTEFTU0VTID0ge1xuICAgIHNtYWxsOiAnay1mYWItc20nLFxuICAgIG1lZGl1bTogJ2stZmFiLW1kJyxcbiAgICBsYXJnZTogJ2stZmFiLWxnJ1xufTtcbmNvbnN0IFNIQVBFX0NMQVNTRVMgPSB7XG4gICAgcGlsbDogJ2stZmFiLXBpbGwnLFxuICAgIGNpcmNsZTogJ2stZmFiLWNpcmNsZScsXG4gICAgcmVjdGFuZ2xlOiAnay1mYWItcmVjdGFuZ2xlJyxcbiAgICBzcXVhcmU6ICdrLWZhYi1zcXVhcmUnLFxuICAgIHJvdW5kZWQ6ICdrLWZhYi1yb3VuZGVkJ1xufTtcbmNvbnN0IERFRkFVTFRfRFVSQVRJT04gPSAxODA7XG5jb25zdCBERUZBVUxUX0lURU1fR0FQID0gOTA7XG5jb25zdCBERUZBVUxUX09GRlNFVCA9ICcxNnB4Jztcbi8qKlxuICpcbiAqIFJlcHJlc2VudHMgdGhlIFtLZW5kbyBVSSBGbG9hdGluZ0FjdGlvbkJ1dHRvbiBjb21wb25lbnQgZm9yIEFuZ3VsYXJdKHslIHNsdWcgb3ZlcnZpZXdfZmxvYXRpbmdhY3Rpb25idXR0b24gJX0pLlxuICogVXNlZCB0byBzcGVjaWZ5IHRoZSBwcmltYXJ5IG9yIHRoZSBtb3N0IGNvbW1vbiBhY3Rpb24gaW4gYW4gYXBwbGljYXRpb24uXG4gKlxuICovXG5sZXQgRmxvYXRpbmdBY3Rpb25CdXR0b25Db21wb25lbnQgPSBjbGFzcyBGbG9hdGluZ0FjdGlvbkJ1dHRvbkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocmVuZGVyZXIsIGVsZW1lbnQsIGZvY3VzU2VydmljZSwgbmF2aWdhdGlvblNlcnZpY2UsIG5nWm9uZSwgcG9wdXBTZXJ2aWNlLCBidWlsZGVyLCBsb2NhbGl6YXRpb25TZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5mb2N1c1NlcnZpY2UgPSBmb2N1c1NlcnZpY2U7XG4gICAgICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UgPSBuYXZpZ2F0aW9uU2VydmljZTtcbiAgICAgICAgdGhpcy5uZ1pvbmUgPSBuZ1pvbmU7XG4gICAgICAgIHRoaXMucG9wdXBTZXJ2aWNlID0gcG9wdXBTZXJ2aWNlO1xuICAgICAgICB0aGlzLmJ1aWxkZXIgPSBidWlsZGVyO1xuICAgICAgICB0aGlzLmxvY2FsaXphdGlvblNlcnZpY2UgPSBsb2NhbGl6YXRpb25TZXJ2aWNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoZSBwb3NpdGlvbk1vZGUgb2YgdGhlIEZsb2F0aW5nQWN0aW9uQnV0dG9uXG4gICAgICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgcG9zaXRpb25pbmdfZmxvYXRpbmdhY3Rpb25idXR0b24gJX0jdG9jLXBvc2l0aW9uTW9kZSkpLlxuICAgICAgICAgKlxuICAgICAgICAgKiAqIFRoZSBwb3NzaWJsZSB2YWx1ZXMgYXJlOlxuICAgICAgICAgKiAqIGBhYnNvbHV0ZWAmbWRhc2g7UG9zaXRpb25zIHRoZSBGbG9hdGluZ0FjdGlvbkJ1dHRvbiBhYnNvbHV0ZWx5IHRvIGl0cyBmaXJzdCBwb3NpdGlvbmVkIHBhcmVudCBlbGVtZW50LlxuICAgICAgICAgKiAqIGBmaXhlZGAgKERlZmF1bHQpJm1kYXNoO1Bvc2l0aW9ucyB0aGUgRmxvYXRpbmdBY3Rpb25CdXR0b24gcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0LiBJdCBhbHdheXMgc3RheXMgaW4gdGhlIHNhbWUgcGxhY2UgZXZlbiBpZiB0aGUgcGFnZSBpcyBzY3JvbGxlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucG9zaXRpb25Nb2RlID0gJ2ZpeGVkJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB0aGUgYW5pbWF0aW9uIHNldHRpbmdzIG9mIHRoZSBGbG9hdGluZ0FjdGlvbkJ1dHRvbiBkaWFsIGl0ZW1zLlxuICAgICAgICAgKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIGRpYWxpdGVtc19mbG9hdGluZ2FjdGlvbmJ1dHRvbiAlfSN0b2MtYW5pbWF0aW9uKSkuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBwb3NzaWJsZSB2YWx1ZXMgYXJlOlxuICAgICAgICAgKiAqIEJvb2xlYW5cbiAgICAgICAgICogICAgKiAoRGVmYXVsdCkgYHRydWVgJm1kYXNoO0FwcGxpZXMgdGhlIGRlZmF1bHQgW2BEaWFsSXRlbUFuaW1hdGlvbmBdKHslIHNsdWcgYXBpX2J1dHRvbnNfZGlhbGl0ZW1hbmltYXRpb24gJX0pIHNldHRpbmdzLlxuICAgICAgICAgKiAgICAqIGBmYWxzZWBcbiAgICAgICAgICogKiBgRGlhbEl0ZW1BbmltYXRpb25gXG4gICAgICAgICAqICAgICogYGR1cmF0aW9uYCZtZGFzaDtTcGVjaWZpZXMgdGhlIGFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMgZm9yIGVhY2ggZGlhbCBpdGVtLiBEZWZhdWx0cyB0byBgMTgwbXNgLlxuICAgICAgICAgKiAgICAqIGBnYXBgJm1kYXNoO1NwZWNpZmllcyB0aGUgYW5pbWF0aW9uIGR1cmF0aW9uIGdhcCBpbiBtaWxsaXNlY29uZHMgYWZ0ZXIgZWFjaCBkaWFsIGl0ZW0gaXMgYW5pbWF0ZWQuIERlZmF1bHRzIHRvIGA5MG1zYC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlhbEl0ZW1BbmltYXRpb24gPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoZSBbYHRhYkluZGV4YF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9HbG9iYWxfYXR0cmlidXRlcy90YWJpbmRleCkgb2YgdGhlIEZsb2F0aW5nQWN0aW9uQnV0dG9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YWJJbmRleCA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGhlIGNvbGxlY3Rpb24gb2YgdGhlIGRpYWwgaXRlbXMgdGhhdCB3aWxsIGJlIHJlbmRlcmVkIGluIHRoZSBGbG9hdGluZ0FjdGlvbkJ1dHRvbiBwb3B1cC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlhbEl0ZW1zID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgdGhlIEZsb2F0aW5nQWN0aW9uQnV0dG9uIGdldHMgYmx1cnJlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25CbHVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgZWFjaCB0aW1lIHRoZSBGbG9hdGluZ0FjdGlvbkJ1dHRvbiBnZXRzIGZvY3VzZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uRm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBlYWNoIHRpbWUgYSBkaWFsIGl0ZW0gaXMgY2xpY2tlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlhbEl0ZW1DbGljayA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgcG9wdXAgaXMgYWJvdXQgdG8gb3Blbi5cbiAgICAgICAgICogVGhpcyBldmVudCBpcyBwcmV2ZW50YWJsZS4gSWYgeW91IGNhbmNlbCB0aGUgZXZlbnQsIHRoZSBwb3B1cCB3aWxsIHJlbWFpbiBjbG9zZWRcbiAgICAgICAgICogKFttb3JlIGluZm9ybWF0aW9uIGFuZCBleGFtcGxlXSh7JSBzbHVnIG92ZXJ2aWV3X2Zsb2F0aW5nYWN0aW9uYnV0dG9uICV9I3RvYy1ldmVudHMpKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3BlbiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIGVhY2ggdGltZSB0aGUgcG9wdXAgaXMgYWJvdXQgdG8gY2xvc2UuXG4gICAgICAgICAqIFRoaXMgZXZlbnQgaXMgcHJldmVudGFibGUuIElmIHlvdSBjYW5jZWwgdGhlIGV2ZW50LCB0aGUgcG9wdXAgd2lsbCByZW1haW4gb3BlblxuICAgICAgICAgKiAoW21vcmUgaW5mb3JtYXRpb24gYW5kIGV4YW1wbGVdKHslIHNsdWcgb3ZlcnZpZXdfZmxvYXRpbmdhY3Rpb25idXR0b24gJX0jdG9jLWV2ZW50cykpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbG9zZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaWQgPSBgay0ke2d1aWQoKX1gO1xuICAgICAgICB0aGlzLl90aGVtZUNvbG9yID0gJ3ByaW1hcnknO1xuICAgICAgICB0aGlzLl9zaXplID0gJ21lZGl1bSc7XG4gICAgICAgIHRoaXMuX3NoYXBlID0gJ3BpbGwnO1xuICAgICAgICB0aGlzLl9kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9hbGlnbiA9IHsgaG9yaXpvbnRhbDogJ2VuZCcsIHZlcnRpY2FsOiAnYm90dG9tJyB9O1xuICAgICAgICB0aGlzLl9vZmZzZXQgPSB7IHg6IERFRkFVTFRfT0ZGU0VULCB5OiBERUZBVUxUX09GRlNFVCB9O1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgIHRoaXMucnRsID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uRW5kID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB2YWxpZGF0ZVBhY2thZ2UocGFja2FnZU1ldGFkYXRhKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVOYXZpZ2F0aW9uRXZlbnRzKCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQodGhpcy5sb2NhbGl6YXRpb25TZXJ2aWNlLmNoYW5nZXMuc3Vic2NyaWJlKCh7IHJ0bCB9KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJ0bCA9IHJ0bDtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gdGhpcy5ydGwgPyAncnRsJyA6ICdsdHInO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldCBmaXhlZENsYXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbk1vZGUgPT09ICdmaXhlZCc7XG4gICAgfVxuICAgIGdldCBhYnNvbHV0ZUNsYXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbk1vZGUgPT09ICdhYnNvbHV0ZSc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgdGhlbWUgY29sb3Igb2YgdGhlIEZsb2F0aW5nQWN0aW9uQnV0dG9uXG4gICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBhcHBlYXJhbmNlX2Zsb2F0aW5nYWN0aW9uYnV0dG9uICV9I3RvYy10aGVtZUNvbG9yKSkuXG4gICAgICogVGhlIHRoZW1lIGNvbG9yIHdpbGwgYmUgYXBwbGllZCBhcyBiYWNrZ3JvdW5kIGNvbG9yIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBUaGUgcG9zc2libGUgdmFsdWVzIGFyZTpcbiAgICAgKiAqIGBwcmltYXJ5YCAoRGVmYXVsdCkmbWRhc2g7QXBwbGllcyBjb2xvcmluZyBiYXNlZCBvbiB0aGUgYHByaW1hcnlgIHRoZW1lIGNvbG9yLlxuICAgICAqICogYHNlY29uZGFyeWAmbWRhc2g7QXBwbGllcyBjb2xvcmluZyBiYXNlZCBvbiB0aGUgYHNlY29uZGFyeWAgdGhlbWUgY29sb3IuXG4gICAgICogKiBgdGVydGlhcnlgJm1kYXNoOyBBcHBsaWVzIGNvbG9yaW5nIGJhc2VkIG9uIHRoZSBgdGVydGlhcnlgIHRoZW1lIGNvbG9yLlxuICAgICAqICogYGluaGVyaXRgJm1kYXNoOyBBcHBsaWVzIGluaGVyaXRlZCBjb2xvcmluZyB2YWx1ZS5cbiAgICAgKiAqIGBpbmZvYCZtZGFzaDtBcHBsaWVzIGNvbG9yaW5nIGJhc2VkIG9uIHRoZSBgaW5mb2AgdGhlbWUgY29sb3IuXG4gICAgICogKiBgc3VjY2Vzc2AmbWRhc2g7IEFwcGxpZXMgY29sb3JpbmcgYmFzZWQgb24gdGhlIGBzdWNjZXNzYCB0aGVtZSBjb2xvci5cbiAgICAgKiAqIGB3YXJuaW5nYCZtZGFzaDsgQXBwbGllcyBjb2xvcmluZyBiYXNlZCBvbiB0aGUgYHdhcm5pbmdgIHRoZW1lIGNvbG9yLlxuICAgICAqICogYGVycm9yYCZtZGFzaDsgQXBwbGllcyBjb2xvcmluZyBiYXNlZCBvbiB0aGUgYGVycm9yYCB0aGVtZSBjb2xvci5cbiAgICAgKiAqIGBkYXJrYCZtZGFzaDsgQXBwbGllcyBjb2xvcmluZyBiYXNlZCBvbiB0aGUgYGRhcmtgIHRoZW1lIGNvbG9yLlxuICAgICAqICogYGxpZ2h0YCZtZGFzaDsgQXBwbGllcyBjb2xvcmluZyBiYXNlZCBvbiB0aGUgYGxpZ2h0YCB0aGVtZSBjb2xvci5cbiAgICAgKiAqIGBpbnZlcnNlYCZtZGFzaDsgQXBwbGllcyBjb2xvcmluZyBiYXNlZCBvbiB0aGUgYGludmVyc2VgIHRoZW1lIGNvbG9yLlxuICAgICAqXG4gICAgICovXG4gICAgc2V0IHRoZW1lQ29sb3IodGhlbWVDb2xvcikge1xuICAgICAgICB0aGlzLmhhbmRsZUNsYXNzZXModGhlbWVDb2xvciwgJ3RoZW1lQ29sb3InKTtcbiAgICAgICAgdGhpcy5fdGhlbWVDb2xvciA9IHRoZW1lQ29sb3I7XG4gICAgfVxuICAgIGdldCB0aGVtZUNvbG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGhlbWVDb2xvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSBzaXplIG9mIHRoZSBGbG9hdGluZ0FjdGlvbkJ1dHRvblxuICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgYXBwZWFyYW5jZV9mbG9hdGluZ2FjdGlvbmJ1dHRvbiAlfSN0b2Mtc2l6ZSkpLlxuICAgICAqXG4gICAgICogVGhlIHBvc3NpYmxlIHZhbHVlcyBhcmU6XG4gICAgICogKiBgc21hbGxgXG4gICAgICogKiBgbWVkaXVtYCAoRGVmYXVsdClcbiAgICAgKiAqIGBsYXJnZWBcbiAgICAgKlxuICAgICAqL1xuICAgIHNldCBzaXplKHNpemUpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVDbGFzc2VzKHNpemUsICdzaXplJyk7XG4gICAgICAgIHRoaXMuX3NpemUgPSBzaXplO1xuICAgIH1cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NpemU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgc2hhcGUgb2YgdGhlIEZsb2F0aW5nQWN0aW9uQnV0dG9uXG4gICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBhcHBlYXJhbmNlX2Zsb2F0aW5nYWN0aW9uYnV0dG9uICV9I3RvYy1zaGFwZSkpLlxuICAgICAqXG4gICAgICogVGhlIHBvc3NpYmxlIHZhbHVlcyBhcmU6XG4gICAgICogKiBgcGlsbGAgKERlZmF1bHQpJm1kYXNoO0FwcGxpZXMgYm9yZGVyIHJhZGl1cyBlcXVhbCB0byBoYWxmIG9mIHRoZSBoZWlnaHQgb2YgdGhlIEZsb2F0aW5nQWN0aW9uQnV0dG9uLlxuICAgICAqICogYGNpcmNsZWAmbWRhc2g7QXBwbGllcyBjaXJjbGUgc2hhcGUgb24gdGhlIEZsb2F0aW5nQWN0aW9uQnV0dG9uLlxuICAgICAqICogYHJlY3RhbmdsZWAmbWRhc2g7QXBwbGllcyByZWN0YW5ndWxhciBzaGFwZSBvbiB0aGUgRmxvYXRpbmdBY3Rpb25CdXR0b24uXG4gICAgICogKiBgcm91bmRlZGAmbWRhc2g7QXBwbGllcyByb3VuZGVkIHNoYXBlIG9uIHRoZSBGbG9hdGluZ0FjdGlvbkJ1dHRvbi5cbiAgICAgKiAqIGBzcXVhcmVgJm1kYXNoO0FwcGxpZXMgc3F1YXJlIHNoYXBlIG9uIHRoZSBGbG9hdGluZ0FjdGlvbkJ1dHRvbi5cbiAgICAgKlxuICAgICAqL1xuICAgIHNldCBzaGFwZShzaGFwZSkge1xuICAgICAgICB0aGlzLmhhbmRsZUNsYXNzZXMoc2hhcGUsICdzaGFwZScpO1xuICAgICAgICB0aGlzLl9zaGFwZSA9IHNoYXBlO1xuICAgIH1cbiAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zaGFwZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHdoZXRoZXIgdGhlIEZsb2F0aW5nQWN0aW9uQnV0dG9uIGlzIGRpc2FibGVkLlxuICAgICAqL1xuICAgIHNldCBkaXNhYmxlZChkaXNhYmxlZCkge1xuICAgICAgICB0aGlzLl9kaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgIH1cbiAgICBnZXQgZGlzYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kaXNhYmxlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSBob3Jpem9udGFsIGFuZCB2ZXJ0aWNhbCBhbGlnbm1lbnQgb2YgdGhlIEZsb2F0aW5nQWN0aW9uQnV0dG9uXG4gICAgICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBwb3NpdGlvbmluZ19mbG9hdGluZ2FjdGlvbmJ1dHRvbiAlfSN0b2MtYWxpZ24pKS5cbiAgICAgKlxuICAgICAqIFRoZSBwb3NzaWJsZSB2YWx1ZXMgYXJlOlxuICAgICAqICogYHsgaG9yaXpvbnRhbDogJ3N0YXJ0J3wnY2VudGVyJ3wnZW5kJywgdmVydGljYWw6ICd0b3AnfCdtaWRkbGUnfCdib3R0b20nIH1gXG4gICAgICpcbiAgICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBpczpcbiAgICAgKiAqIGB7IGhvcml6b250YWw6ICdlbmQnLCB2ZXJ0aWNhbDogJ2JvdHRvbScgfWBcbiAgICAgKlxuICAgICAqL1xuICAgIHNldCBhbGlnbihhbGlnbikge1xuICAgICAgICB0aGlzLl9hbGlnbiA9IE9iamVjdC5hc3NpZ24odGhpcy5fYWxpZ24sIGFsaWduKTtcbiAgICB9XG4gICAgZ2V0IGFsaWduKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWxpZ247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgaG9yaXpvbnRhbCBhbmQgdmVydGljYWwgb2Zmc2V0IHBvc2l0aW9uIG9mIHRoZSBGbG9hdGluZ0FjdGlvbkJ1dHRvblxuICAgICAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgcG9zaXRpb25pbmdfZmxvYXRpbmdhY3Rpb25idXR0b24gJX0jdG9jLW9mZnNldCkpLlxuICAgICAqXG4gICAgICogKiBUaGUgZGVmYXVsdCB2YWx1ZSBpczpcbiAgICAgKiAqIGB7IHg6ICcxNnB4JywgeTogJzE2cHgnIH1gXG4gICAgICovXG4gICAgc2V0IG9mZnNldChvZmZzZXQpIHtcbiAgICAgICAgdGhpcy5fb2Zmc2V0ID0gT2JqZWN0LmFzc2lnbih0aGlzLl9vZmZzZXQsIG9mZnNldCk7XG4gICAgICAgIHRoaXMub2Zmc2V0U3R5bGVzKCk7XG4gICAgfVxuICAgIGdldCBvZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vZmZzZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgY29tcG9uZW50VGFiSW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkID8gKC0xKSA6IHRoaXMudGFiSW5kZXg7XG4gICAgfVxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICAgICAgdGhpcy5hcHBseUNsYXNzZXMoKTtcbiAgICAgICAgdGhpcy5vZmZzZXRTdHlsZXMoKTtcbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgRmxvYXRpbmdBY3Rpb25CdXR0b24gaXMgY3VycmVudGx5IG9wZW4uXG4gICAgICovXG4gICAgZ2V0IGlzT3BlbigpIHsgcmV0dXJuIGlzUHJlc2VudCh0aGlzLnBvcHVwUmVmKTsgfVxuICAgIC8qKlxuICAgICAqIEZvY3VzZXMgdGhlIEZsb2F0aW5nQWN0aW9uQnV0dG9uLlxuICAgICAqL1xuICAgIGZvY3VzKCkge1xuICAgICAgICBpZiAoaXNEb2N1bWVudEF2YWlsYWJsZSgpKSB7XG4gICAgICAgICAgICB0aGlzLmJ1dHRvbi5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQmx1cnMgdGhlIEZsb2F0aW5nQWN0aW9uQnV0dG9uLlxuICAgICAqL1xuICAgIGJsdXIoKSB7XG4gICAgICAgIGlmIChpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLm5hdGl2ZUVsZW1lbnQuYmx1cigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRvZ2dsZXMgdGhlIHZpc2liaWxpdHkgb2YgdGhlIEZsb2F0aW5nQWN0aW9uQnV0dG9uIGRpYWwgaXRlbXMgcG9wdXAuXG4gICAgICpcbiAgICAgKiBJZiB5b3UgdXNlIHRoZSBgdG9nZ2xlRGlhbGAgbWV0aG9kIHRvIG9wZW4gb3IgY2xvc2UgdGhlIGRpYWwgaXRlbXMsXG4gICAgICogdGhlIGBvcGVuYCBhbmQgYGNsb3NlYCBldmVudHMgZG8gbm90IGZpcmUgKFttb3JlIGluZm9ybWF0aW9uIGFuZCBleGFtcGxlc10oeyUgc2x1ZyBvcGVuc3RhdGVfZmxvYXRpbmdhY3Rpb25idXR0b24gJX0jdG9jLWV2ZW50cykpLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wZW4gLSBUaGUgc3RhdGUgb2YgZGlhbCBpdGVtcyBwb3B1cC5cbiAgICAgKi9cbiAgICB0b2dnbGVEaWFsKG9wZW4pIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgIXRoaXMuaGFzRGlhbEl0ZW1zKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2hvdWxkT3BlbiA9IGlzUHJlc2VudChvcGVuKSA/IG9wZW4gOiAhdGhpcy5pc09wZW47XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHNob3VsZE9wZW4gPT09IHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2hvdWxkT3BlbiA/IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5vcGVuRGlhbCgpKSA6IHRoaXMuY2xvc2VEaWFsKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgcm9sZSgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmRpYWxJdGVtcyAmJiB0aGlzLmRpYWxJdGVtcy5sZW5ndGgpID8gJ21lbnVidXR0b24nIDogJ2J1dHRvbic7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgYXJpYUV4cGFuZGVkKCkge1xuICAgICAgICByZXR1cm4gaXNQcmVzZW50KHRoaXMuaXNPcGVuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCBhcmlhSGFzUG9wdXAoKSB7XG4gICAgICAgIHJldHVybiBpc1ByZXNlbnQodGhpcy5pc09wZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IGljb25DbGFzc2VzKCkge1xuICAgICAgICBjb25zdCBjbGFzc2VzID0gW107XG4gICAgICAgIGlmICh0aGlzLmljb25DbGFzcykge1xuICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKGAke3RoaXMuaWNvbkNsYXNzfWApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmljb24pIHtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaChgay1mYWItaWNvbiBrLWljb24gay1pLSR7dGhpcy5pY29ufWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjbGFzc2VzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgY2xpY2tIYW5kbGVyKCkge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCAhdGhpcy5oYXNEaWFsSXRlbXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2hvdWxkT3BlbiA9ICF0aGlzLmlzT3BlbjtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlRGlhbFdpdGhFdmVudHMoc2hvdWxkT3Blbik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAga2V5RG93bkhhbmRsZXIoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5rZXlIYW5kbGVyKGV2ZW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGtleUhhbmRsZXIoZXZlbnQsIGtleUV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZm9jdXNlZCA9IHRoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzZWQgfHwgMDtcbiAgICAgICAgY29uc3Qga2V5Q29kZSA9IGV2ZW50LmtleUNvZGU7XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMubmF2aWdhdGlvblNlcnZpY2UucHJvY2Vzcyh7XG4gICAgICAgICAgICBhbHRLZXk6IGV2ZW50LmFsdEtleSxcbiAgICAgICAgICAgIGN1cnJlbnQ6IGZvY3VzZWQsXG4gICAgICAgICAgICBrZXlDb2RlLFxuICAgICAgICAgICAga2V5RXZlbnQ6IGtleUV2ZW50LFxuICAgICAgICAgICAgbWF4OiB0aGlzLmRpYWxJdGVtcyA/IHRoaXMuZGlhbEl0ZW1zLmxlbmd0aCAtIDEgOiAwLFxuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgZmxpcE5hdmlnYXRpb246IHRoaXMuYWxpZ24udmVydGljYWwgPT09ICdib3R0b20nXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoYWN0aW9uICE9PSBOYXZpZ2F0aW9uQWN0aW9uLlVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgYWN0aW9uICE9PSBOYXZpZ2F0aW9uQWN0aW9uLlRhYikge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgb25JdGVtQ2xpY2soZXZlbnQpIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IGNsb3Nlc3QoZXZlbnQudGFyZ2V0LCAnLmstZmFiLWl0ZW0nKTtcbiAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXggPSBpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1mYWItaXRlbS1pbmRleCcpO1xuICAgICAgICB0aGlzLmVtaXRJdGVtQ2xpY2soaW5kZXgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZm9jdXNIYW5kbGVyKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMub25Gb2N1cy5lbWl0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGJsdXJIYW5kbGVyKCkge1xuICAgICAgICB0aGlzLm9uQmx1ci5lbWl0KCk7XG4gICAgICAgIHRoaXMudG9nZ2xlRGlhbFdpdGhFdmVudHMoZmFsc2UpO1xuICAgIH1cbiAgICBoYW5kbGVDbGFzc2VzKGlucHV0VmFsdWUsIGlucHV0KSB7XG4gICAgICAgIGlmIChpc1ByZXNlbnQodGhpcy5idXR0b24pICYmICh0aGlzW2lucHV0XSAhPT0gaW5wdXRWYWx1ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuYnV0dG9uLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICBjb25zdCBjbGFzc2VzVG9SZW1vdmUgPSB7XG4gICAgICAgICAgICAgICAgdGhlbWVDb2xvcjogYGstZmFiLSR7dGhpcy50aGVtZUNvbG9yfWAsXG4gICAgICAgICAgICAgICAgc2l6ZTogU0laRV9DTEFTU0VTW3RoaXMuc2l6ZV0sXG4gICAgICAgICAgICAgICAgc2hhcGU6IFNIQVBFX0NMQVNTRVNbdGhpcy5zaGFwZV1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjbGFzc2VzVG9BZGQgPSB7XG4gICAgICAgICAgICAgICAgdGhlbWVDb2xvcjogYGstZmFiLSR7aW5wdXRWYWx1ZX1gLFxuICAgICAgICAgICAgICAgIHNpemU6IFNJWkVfQ0xBU1NFU1tpbnB1dFZhbHVlXSxcbiAgICAgICAgICAgICAgICBzaGFwZTogU0hBUEVfQ0xBU1NFU1tpbnB1dFZhbHVlXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3MoYnV0dG9uLCBjbGFzc2VzVG9SZW1vdmVbaW5wdXRdKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoYnV0dG9uLCBjbGFzc2VzVG9BZGRbaW5wdXRdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbkVudGVyUHJlc3NlZCgpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmZvY3VzU2VydmljZS5mb2N1c2VkO1xuICAgICAgICB0aGlzLmVtaXRJdGVtQ2xpY2soaW5kZXgpO1xuICAgIH1cbiAgICBlbWl0SXRlbUNsaWNrKGluZGV4KSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmRpYWxJdGVtc1tpbmRleF07XG4gICAgICAgIGlmIChpdGVtICYmICFpdGVtLmRpc2FibGVkKSB7XG4gICAgICAgICAgICBjb25zdCBjbGlja0V2ZW50QXJncyA9IHsgaXRlbTogaXRlbSwgaW5kZXg6IGluZGV4IH07XG4gICAgICAgICAgICB0aGlzLmRpYWxJdGVtQ2xpY2suZW1pdChjbGlja0V2ZW50QXJncyk7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZURpYWxXaXRoRXZlbnRzKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdWJzY3JpYmVOYXZpZ2F0aW9uRXZlbnRzKCkge1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKHRoaXMubmF2aWdhdGlvblNlcnZpY2UubmF2aWdhdGUuc3Vic2NyaWJlKHRoaXMub25BcnJvd0tleU5hdmlnYXRlLmJpbmQodGhpcykpKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZCh0aGlzLm5hdmlnYXRpb25TZXJ2aWNlLmVudGVyLnN1YnNjcmliZSh0aGlzLm9uTmF2aWdhdGlvbkVudGVyUHJlc3MuYmluZCh0aGlzKSkpO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKG1lcmdlKHRoaXMubmF2aWdhdGlvblNlcnZpY2UuY2xvc2UsIHRoaXMubmF2aWdhdGlvblNlcnZpY2UuZXNjKS5zdWJzY3JpYmUodGhpcy5vbk5hdmlnYXRpb25DbG9zZS5iaW5kKHRoaXMpKSk7XG4gICAgfVxuICAgIG9uQXJyb3dLZXlOYXZpZ2F0ZShpbmRleCkge1xuICAgICAgICB0aGlzLmZvY3VzU2VydmljZS5mb2N1cyhpbmRleCk7XG4gICAgfVxuICAgIG9uTmF2aWdhdGlvbkVudGVyUHJlc3MoKSB7XG4gICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgICAgICBsZXQgZm9jdXNlZEluZGV4ID0gdGhpcy5mb2N1c1NlcnZpY2UuZm9jdXNlZDtcbiAgICAgICAgICAgICAgICBjb25zdCBmb2N1c2VkSXRlbSA9IHRoaXMuZGlhbEl0ZW1zW2ZvY3VzZWRJbmRleF07XG4gICAgICAgICAgICAgICAgaWYgKGZvY3VzZWRJdGVtICYmIGZvY3VzZWRJdGVtLmRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGlzUHJlc2VudChmb2N1c2VkSW5kZXgpICYmIGZvY3VzZWRJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkVudGVyUHJlc3NlZCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzT3BlbiAmJiBpc0RvY3VtZW50QXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZURpYWxXaXRoRXZlbnRzKHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9uTmF2aWdhdGlvbkNsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVEaWFsV2l0aEV2ZW50cyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzRG9jdW1lbnRBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1dHRvbi5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWxpZ25DbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIGBrLXBvcy0ke3RoaXMuYWxpZ24udmVydGljYWx9LSR7dGhpcy5hbGlnbi5ob3Jpem9udGFsfWA7XG4gICAgfVxuICAgIGFwcGx5Q2xhc3NlcygpIHtcbiAgICAgICAgY29uc3QgaG9zdEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudDtcbiAgICAgICAgY29uc3QgYnV0dG9uID0gdGhpcy5idXR0b24ubmF0aXZlRWxlbWVudDtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhidXR0b24sIFNIQVBFX0NMQVNTRVNbdGhpcy5zaGFwZV0pO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGJ1dHRvbiwgYGstZmFiLSR7dGhpcy50aGVtZUNvbG9yfWApO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGJ1dHRvbiwgU0laRV9DTEFTU0VTW3RoaXMuc2l6ZV0pO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGhvc3RFbGVtZW50LCB0aGlzLmFsaWduQ2xhc3MoKSk7XG4gICAgfVxuICAgIHRvZ2dsZURpYWxXaXRoRXZlbnRzKG9wZW4pIHtcbiAgICAgICAgaWYgKG9wZW4gPT09IHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgUHJldmVudGFibGVFdmVudCgpO1xuICAgICAgICBvcGVuID8gdGhpcy5vcGVuLmVtaXQoZXZlbnQpIDogdGhpcy5jbG9zZS5lbWl0KGV2ZW50KTtcbiAgICAgICAgaWYgKGV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgb3BlbiA/IHRoaXMub3BlbkRpYWwoKSA6IHRoaXMuY2xvc2VEaWFsKCk7XG4gICAgfVxuICAgIG9wZW5Qb3B1cCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNJY29uRmFiID0gdGhpcy5pY29uICYmICF0aGlzLnRleHQ7XG4gICAgICAgIGNvbnN0IHJ0bCA9IHRoaXMucnRsO1xuICAgICAgICBjb25zdCBhbGlnbiA9IHRoaXMuYWxpZ247XG4gICAgICAgIHRoaXMucG9wdXBSZWYgPSB0aGlzLnBvcHVwU2VydmljZS5vcGVuKHtcbiAgICAgICAgICAgIGFuY2hvcjogdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQsXG4gICAgICAgICAgICBhbmltYXRlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMucG9wdXBUZW1wbGF0ZSxcbiAgICAgICAgICAgIGFuY2hvckFsaWduOiBnZXRBbmNob3JBbGlnbihhbGlnbiwgcnRsKSxcbiAgICAgICAgICAgIHBvcHVwQWxpZ246IGdldFBvcHVwQWxpZ24oYWxpZ24sIHJ0bCksXG4gICAgICAgICAgICBwb3B1cENsYXNzOiAnay1mYWItcG9wdXAgay1wb3B1cC10cmFuc3BhcmVudCdcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHBvcHVwRWxlbWVudCA9IHRoaXMucG9wdXBSZWYucG9wdXBFbGVtZW50O1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHBvcHVwRWxlbWVudCwgJ2JveC1zaGFkb3cnLCAnbm9uZScpO1xuICAgICAgICBpZiAoaXNJY29uRmFiKSB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKHRoaXMucG9wdXBSZWYucG9wdXBPcGVuLnN1YnNjcmliZSgoKSA9PiB0aGlzLnBvc2l0aW9uUG9wdXAoKSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucG9wdXBNb3VzZURvd25MaXN0ZW5lciA9IHRoaXMucmVuZGVyZXIubGlzdGVuKHBvcHVwRWxlbWVudCwgJ21vdXNlZG93bicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucG9wdXBSZWYucG9wdXBBbmNob3JWaWV3cG9ydExlYXZlLnN1YnNjcmliZSgoKSA9PiB0aGlzLnRvZ2dsZURpYWxXaXRoRXZlbnRzKGZhbHNlKSk7XG4gICAgfVxuICAgIGNsb3NlUG9wdXAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgaWYgKHRoaXMucG9wdXBNb3VzZURvd25MaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdXBNb3VzZURvd25MaXN0ZW5lcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wb3B1cFJlZi5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5wb3B1cFJlZiA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb3BlbkRpYWwoKSB7XG4gICAgICAgIHRoaXMub3BlblBvcHVwKCk7XG4gICAgICAgIHRoaXMuZm9jdXNTZXJ2aWNlLmZvY3VzKDApO1xuICAgICAgICBpZiAodGhpcy5kaWFsSXRlbUFuaW1hdGlvbiAmJiB0aGlzLmlzVmFsaWRBbmltYXRpb24oKSkge1xuICAgICAgICAgICAgdGhpcy5wbGF5QW5pbWF0aW9uKHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNsb3NlRGlhbCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlhbEl0ZW1BbmltYXRpb24gJiYgdGhpcy5pc1ZhbGlkQW5pbWF0aW9uKCkpIHtcbiAgICAgICAgICAgIHRoaXMucGxheUFuaW1hdGlvbihmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkVuZC5waXBlKHRha2UoMSkpLnN1YnNjcmliZSgoKSA9PiB0aGlzLmNsb3NlUG9wdXAoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpc1ZhbGlkQW5pbWF0aW9uKCkge1xuICAgICAgICBjb25zdCBhbmltYXRpb24gPSB0aGlzLmRpYWxJdGVtQW5pbWF0aW9uO1xuICAgICAgICBpZiAodHlwZW9mIGFuaW1hdGlvbiAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICByZXR1cm4gYW5pbWF0aW9uLmR1cmF0aW9uICE9PSAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBwb3NpdGlvblBvcHVwKCkge1xuICAgICAgICBpZiAodGhpcy5kaWFsSXRlbVRlbXBsYXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmFiID0gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGZhYldpZHRoID0gZmFiLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgICBjb25zdCBwb3B1cEVsID0gdGhpcy5wb3B1cFJlZi5wb3B1cEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGljb24gPSBwb3B1cEVsLnF1ZXJ5U2VsZWN0b3IoJy5rLWZhYi1pdGVtLWljb24nKTtcbiAgICAgICAgaWYgKCFpY29uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaWNvbldpZHRoID0gaWNvbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgY29uc3QgbGVmdCA9IChmYWJXaWR0aCAvIDIpIC0gKGljb25XaWR0aCAvIDIpO1xuICAgICAgICBjb25zdCBwb3B1cExlZnQgPSBwb3B1cEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XG4gICAgICAgIGNvbnN0IGlzRW5kQWxpZ24gPSB0aGlzLmFsaWduLmhvcml6b250YWwgPT09ICdlbmQnO1xuICAgICAgICBjb25zdCBsZWZ0VmFsdWUgPSBpc0VuZEFsaWduID8gKHBvcHVwTGVmdCAtIGxlZnQpIDogKGxlZnQgKyBwb3B1cExlZnQpO1xuICAgICAgICBjb25zdCBydGxMZWZ0VmFsdWUgPSBpc0VuZEFsaWduID8gKGxlZnQgKyBwb3B1cExlZnQpIDogKHBvcHVwTGVmdCAtIGxlZnQpO1xuICAgICAgICBwb3B1cEVsLnN0eWxlLmxlZnQgPSB0aGlzLnJ0bCA/IGAke3J0bExlZnRWYWx1ZX1weGAgOiBgJHtsZWZ0VmFsdWV9cHhgO1xuICAgIH1cbiAgICBvZmZzZXRTdHlsZXMoKSB7XG4gICAgICAgIGNvbnN0IGhvc3RFbGVtZW50ID0gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoaG9zdEVsZW1lbnQsIHRoaXMuaG9yaXpvbnRhbFBvc2l0aW9uLCB0aGlzLmhvcml6b250YWxPZmZzZXQpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGhvc3RFbGVtZW50LCB0aGlzLnZlcnRpY2FsUG9zaXRpb24sIHRoaXMudmVydGljYWxPZmZzZXQpO1xuICAgIH1cbiAgICBnZXQgaGFzRGlhbEl0ZW1zKCkge1xuICAgICAgICByZXR1cm4gaXNQcmVzZW50KHRoaXMuZGlhbEl0ZW1zKSAmJiB0aGlzLmRpYWxJdGVtcy5sZW5ndGggIT09IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIENTUyBwcm9wIG5hbWUgb2YgdGhlIHNlbGVjdGVkIHZlcnRpY2FsIHBvc2l0aW9uIChgdG9wYC9gYm90dG9tYCk7XG4gICAgICovXG4gICAgZ2V0IHZlcnRpY2FsUG9zaXRpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b3A6ICd0b3AnLFxuICAgICAgICAgICAgbWlkZGxlOiAndG9wJyxcbiAgICAgICAgICAgIGJvdHRvbTogJ2JvdHRvbSdcbiAgICAgICAgfVt0aGlzLmFsaWduLnZlcnRpY2FsXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgb2Zmc2V0IGFjY29yZGluZyB0byB0aGUgc2VsZWN0ZWQgdmVydGljYWwgcG9zaXRpb24uXG4gICAgICovXG4gICAgZ2V0IHZlcnRpY2FsT2Zmc2V0KCkge1xuICAgICAgICBpZiAodGhpcy5hbGlnbi52ZXJ0aWNhbCA9PT0gJ21pZGRsZScpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9mZnNldC55ID09PSBERUZBVUxUX09GRlNFVCA/ICc1MCUnIDogYGNhbGMoNTAlICsgJHt0aGlzLm9mZnNldC55fSlgO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm9mZnNldC55O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBDU1MgcHJvcCBuYW1lIG9mIHRoZSBzZWxlY3RlZCBob3Jpem9udGFsIHBvc2l0aW9uIChgbGVmdGAvYHJpZ2h0YCk7XG4gICAgICovXG4gICAgZ2V0IGhvcml6b250YWxQb3NpdGlvbigpIHtcbiAgICAgICAgY29uc3QgeyBob3Jpem9udGFsIH0gPSB0aGlzLmFsaWduO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZW5kOiB0aGlzLnJ0bCA/ICdsZWZ0JyA6ICdyaWdodCcsXG4gICAgICAgICAgICBjZW50ZXI6ICdsZWZ0JyxcbiAgICAgICAgICAgIHN0YXJ0OiB0aGlzLnJ0bCA/ICdyaWdodCcgOiAnbGVmdCdcbiAgICAgICAgfVtob3Jpem9udGFsXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgb2Zmc2V0IGFjY29yZGluZyB0byB0aGUgc2VsZWN0ZWQgaG9yaXpvbnRhbCBwb3NpdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgaG9yaXpvbnRhbE9mZnNldCgpIHtcbiAgICAgICAgaWYgKHRoaXMuYWxpZ24uaG9yaXpvbnRhbCA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9mZnNldC54ID09PSBERUZBVUxUX09GRlNFVCA/ICc1MCUnIDogYGNhbGMoNTAlICsgJHt0aGlzLm9mZnNldC54fSlgO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm9mZnNldC54O1xuICAgIH1cbiAgICBwbGF5ZXJGb3IoZWxlbWVudCwgYW5pbWF0aW9uKSB7XG4gICAgICAgIGNvbnN0IGZhY3RvcnkgPSB0aGlzLmJ1aWxkZXIuYnVpbGQoYW5pbWF0aW9uKTtcbiAgICAgICAgcmV0dXJuIGZhY3RvcnkuY3JlYXRlKGVsZW1lbnQpO1xuICAgIH1cbiAgICBwbGF5QW5pbWF0aW9uKG9wZW4pIHtcbiAgICAgICAgY29uc3QgZHVyYXRpb25TZXR0aW5ncyA9IHRoaXMuZHVyYXRpb25TZXR0aW5ncygpO1xuICAgICAgICBjb25zdCBhbmltYXRpb25TZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvblNldHRpbmdzLmR1cmF0aW9uLFxuICAgICAgICAgICAgZ2FwOiBkdXJhdGlvblNldHRpbmdzLmdhcCxcbiAgICAgICAgICAgIGFsaWduOiB0aGlzLmFsaWduXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGFuaW1hdGlvbiA9IG9wZW4gPyBvcGVuQW5pbWF0aW9uKGFuaW1hdGlvblNldHRpbmdzKSA6IGNsb3NlQW5pbWF0aW9uKGFuaW1hdGlvblNldHRpbmdzKTtcbiAgICAgICAgbGV0IHBsYXllciA9IHRoaXMucGxheWVyRm9yKHRoaXMucG9wdXBSZWYucG9wdXBFbGVtZW50LCBhbmltYXRpb24pO1xuICAgICAgICBwbGF5ZXIucGxheSgpO1xuICAgICAgICBwbGF5ZXIub25Eb25lKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkVuZC5lbWl0KCk7XG4gICAgICAgICAgICAgICAgcGxheWVyLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICBwbGF5ZXIgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZHVyYXRpb25TZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmFuaW1hdGlvbkR1cmF0aW9uKCksXG4gICAgICAgICAgICBnYXA6IHRoaXMuYW5pbWF0aW9uR2FwKClcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYW5pbWF0aW9uR2FwKCkge1xuICAgICAgICBjb25zdCBhbmltYXRpb24gPSB0aGlzLmRpYWxJdGVtQW5pbWF0aW9uO1xuICAgICAgICBpZiAodHlwZW9mIGFuaW1hdGlvbiAhPT0gJ2Jvb2xlYW4nICYmIGlzUHJlc2VudChhbmltYXRpb24uZ2FwKSkge1xuICAgICAgICAgICAgcmV0dXJuIGFuaW1hdGlvbi5nYXA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIERFRkFVTFRfSVRFTV9HQVA7XG4gICAgfVxuICAgIGFuaW1hdGlvbkR1cmF0aW9uKCkge1xuICAgICAgICBjb25zdCBhbmltYXRpb24gPSB0aGlzLmRpYWxJdGVtQW5pbWF0aW9uO1xuICAgICAgICBpZiAodHlwZW9mIGFuaW1hdGlvbiAhPT0gJ2Jvb2xlYW4nICYmIGlzUHJlc2VudChhbmltYXRpb24uZHVyYXRpb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gYW5pbWF0aW9uLmR1cmF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBERUZBVUxUX0RVUkFUSU9OO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1wb3MtZml4ZWQnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgRmxvYXRpbmdBY3Rpb25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImZpeGVkQ2xhc3NcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1wb3MtYWJzb2x1dGUnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgRmxvYXRpbmdBY3Rpb25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImFic29sdXRlQ2xhc3NcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnYXR0ci5kaXInKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgRmxvYXRpbmdBY3Rpb25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImRpcmVjdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCdidXR0b24nLCB7IHN0YXRpYzogdHJ1ZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRWxlbWVudFJlZilcbl0sIEZsb2F0aW5nQWN0aW9uQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJidXR0b25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZCgncG9wdXBUZW1wbGF0ZScsIHsgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUZW1wbGF0ZVJlZilcbl0sIEZsb2F0aW5nQWN0aW9uQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwb3B1cFRlbXBsYXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBDb250ZW50Q2hpbGQoRGlhbEl0ZW1UZW1wbGF0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIERpYWxJdGVtVGVtcGxhdGVEaXJlY3RpdmUpXG5dLCBGbG9hdGluZ0FjdGlvbkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlhbEl0ZW1UZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkKEZsb2F0aW5nQWN0aW9uQnV0dG9uVGVtcGxhdGVEaXJlY3RpdmUsIHsgc3RhdGljOiB0cnVlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGbG9hdGluZ0FjdGlvbkJ1dHRvblRlbXBsYXRlRGlyZWN0aXZlKVxuXSwgRmxvYXRpbmdBY3Rpb25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImZhYlRlbXBsYXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbU3RyaW5nXSlcbl0sIEZsb2F0aW5nQWN0aW9uQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0aGVtZUNvbG9yXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1N0cmluZ10pXG5dLCBGbG9hdGluZ0FjdGlvbkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwic2l6ZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtTdHJpbmddKVxuXSwgRmxvYXRpbmdBY3Rpb25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcInNoYXBlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtCb29sZWFuXSlcbl0sIEZsb2F0aW5nQWN0aW9uQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuXSwgRmxvYXRpbmdBY3Rpb25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImFsaWduXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG5dLCBGbG9hdGluZ0FjdGlvbkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwib2Zmc2V0XCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgRmxvYXRpbmdBY3Rpb25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcInBvc2l0aW9uTW9kZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgRmxvYXRpbmdBY3Rpb25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImljb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIEZsb2F0aW5nQWN0aW9uQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpY29uQ2xhc3NcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIEZsb2F0aW5nQWN0aW9uQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJidXR0b25DbGFzc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgRmxvYXRpbmdBY3Rpb25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImRpYWxDbGFzc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgRmxvYXRpbmdBY3Rpb25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcInRleHRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIEZsb2F0aW5nQWN0aW9uQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaWFsSXRlbUFuaW1hdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKVxuXSwgRmxvYXRpbmdBY3Rpb25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcInRhYkluZGV4XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBBcnJheSlcbl0sIEZsb2F0aW5nQWN0aW9uQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaWFsSXRlbXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgnYmx1cicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBGbG9hdGluZ0FjdGlvbkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwib25CbHVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoJ2ZvY3VzJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIEZsb2F0aW5nQWN0aW9uQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJvbkZvY3VzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoJ2RpYWxJdGVtQ2xpY2snKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgRmxvYXRpbmdBY3Rpb25CdXR0b25Db21wb25lbnQucHJvdG90eXBlLCBcImRpYWxJdGVtQ2xpY2tcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBGbG9hdGluZ0FjdGlvbkJ1dHRvbkNvbXBvbmVudC5wcm90b3R5cGUsIFwib3BlblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIEZsb2F0aW5nQWN0aW9uQnV0dG9uQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjbG9zZVwiLCB2b2lkIDApO1xuRmxvYXRpbmdBY3Rpb25CdXR0b25Db21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICBDb21wb25lbnQoe1xuICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLWZsb2F0aW5nYWN0aW9uYnV0dG9uJyxcbiAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICBGb2N1c1NlcnZpY2UsXG4gICAgICAgICAgICBOYXZpZ2F0aW9uU2VydmljZSxcbiAgICAgICAgICAgIE5BVklHQVRJT05fU0VUVElOR1NfUFJPVklERVIkMixcbiAgICAgICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogTDEwTl9QUkVGSVgsXG4gICAgICAgICAgICAgICAgdXNlVmFsdWU6ICdrZW5kby5mbG9hdGluZ2FjdGlvbmJ1dHRvbidcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgI2J1dHRvblxuICAgICAgICAgICAgW2F0dHIuaWRdPVwiaWRcIlxuICAgICAgICAgICAgW2F0dHIucm9sZV09XCJyb2xlXCJcbiAgICAgICAgICAgIFt0YWJJbmRleF09XCJjb21wb25lbnRUYWJJbmRleFwiXG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgIFtjbGFzcy5rLWZhYl09XCJ0cnVlXCJcbiAgICAgICAgICAgIFtjbGFzcy5rLXN0YXRlLWRpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgICAgIFtuZ0NsYXNzXT1cImJ1dHRvbkNsYXNzXCJcbiAgICAgICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLWRpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgICAgIFthdHRyLmFyaWEtZXhwYW5kZWRdPVwiYXJpYUV4cGFuZGVkXCJcbiAgICAgICAgICAgIFthdHRyLmFyaWEtaGFzcG9wdXBdPVwiYXJpYUhhc1BvcHVwXCJcbiAgICAgICAgICAgIChmb2N1cyk9XCJmb2N1c0hhbmRsZXIoKVwiXG4gICAgICAgICAgICAoYmx1cik9XCJibHVySGFuZGxlcigpXCJcbiAgICAgICAgICAgIFtrZW5kb0V2ZW50c091dHNpZGVBbmd1bGFyXT1cIntcbiAgICAgICAgICAgICAgICBrZXlkb3duOiBrZXlEb3duSGFuZGxlcixcbiAgICAgICAgICAgICAgICBjbGljazogY2xpY2tIYW5kbGVyXG4gICAgICAgICAgICB9XCJcbiAgICAgICAgICAgIFtzY29wZV09XCJ0aGlzXCJcbiAgICAgICAgPlxuICAgICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ0lmPVwiZmFiVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cImZhYlRlbXBsYXRlPy50ZW1wbGF0ZVJlZlwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuXG4gICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiIWZhYlRlbXBsYXRlXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJpY29uIHx8IGljb25DbGFzc1wiIFtuZ0NsYXNzXT1cImljb25DbGFzc2VzXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwidGV4dFwiIGNsYXNzPVwiay1mYWItdGV4dFwiPnt7IHRleHQgfX08L3NwYW4+XG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgPG5nLXRlbXBsYXRlICNwb3B1cFRlbXBsYXRlPlxuICAgICAgICAgICAgPHVsXG4gICAgICAgICAgICAgICAga2VuZG9EaWFsTGlzdFxuICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cImRpYWxDbGFzc1wiXG4gICAgICAgICAgICAgICAgW2RpYWxJdGVtc109XCJkaWFsSXRlbXNcIlxuICAgICAgICAgICAgICAgIFtkaWFsSXRlbVRlbXBsYXRlXT0nZGlhbEl0ZW1UZW1wbGF0ZT8udGVtcGxhdGVSZWYnXG4gICAgICAgICAgICAgICAgW2FsaWduXT1cImFsaWduXCJcbiAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsbGVkYnldPVwiaWRcIlxuICAgICAgICAgICAgICAgIChjbGljayk9XCJvbkl0ZW1DbGljaygkZXZlbnQpXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgYFxuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbUmVuZGVyZXIyLFxuICAgICAgICBFbGVtZW50UmVmLFxuICAgICAgICBGb2N1c1NlcnZpY2UsXG4gICAgICAgIE5hdmlnYXRpb25TZXJ2aWNlLFxuICAgICAgICBOZ1pvbmUsXG4gICAgICAgIFBvcHVwU2VydmljZSxcbiAgICAgICAgQW5pbWF0aW9uQnVpbGRlcixcbiAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZV0pXG5dLCBGbG9hdGluZ0FjdGlvbkJ1dHRvbkNvbXBvbmVudCk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5sZXQgRGlhbExpc3RDb21wb25lbnQgPSBjbGFzcyBEaWFsTGlzdENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoZm9jdXNTZXJ2aWNlLCBjZHIpIHtcbiAgICAgICAgdGhpcy5mb2N1c1NlcnZpY2UgPSBmb2N1c1NlcnZpY2U7XG4gICAgICAgIHRoaXMuY2RyID0gY2RyO1xuICAgICAgICB0aGlzLmhvc3RDbGFzcyA9IHRydWU7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZCh0aGlzLmZvY3VzU2VydmljZS5vbkZvY3VzLnN1YnNjcmliZSgoKSA9PiB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCkpKTtcbiAgICB9XG4gICAgZ2V0IGJvdHRvbUNsYXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hbGlnbi52ZXJ0aWNhbCA9PT0gJ3RvcCcgfHwgdGhpcy5hbGlnbi52ZXJ0aWNhbCA9PT0gJ21pZGRsZSc7XG4gICAgfVxuICAgIGdldCB0b3BDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWxpZ24udmVydGljYWwgPT09ICdib3R0b20nO1xuICAgIH1cbiAgICBpc0ZvY3VzZWQoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9jdXNTZXJ2aWNlLmlzRm9jdXNlZChpbmRleCk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMudW5zdWJzY3JpYmUoKTtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstZmFiLWl0ZW1zJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBEaWFsTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiaG9zdENsYXNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1mYWItaXRlbXMtYm90dG9tJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIERpYWxMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJib3R0b21DbGFzc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWZhYi1pdGVtcy10b3AnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgRGlhbExpc3RDb21wb25lbnQucHJvdG90eXBlLCBcInRvcENsYXNzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQXJyYXkpXG5dLCBEaWFsTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiZGlhbEl0ZW1zXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBUZW1wbGF0ZVJlZilcbl0sIERpYWxMaXN0Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkaWFsSXRlbVRlbXBsYXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBEaWFsTGlzdENvbXBvbmVudC5wcm90b3R5cGUsIFwiYWxpZ25cIiwgdm9pZCAwKTtcbkRpYWxMaXN0Q29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgQ29tcG9uZW50KHtcbiAgICAgICAgc2VsZWN0b3I6ICdba2VuZG9EaWFsTGlzdF0nLFxuICAgICAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8bmctY29udGFpbmVyICpuZ0Zvcj0nbGV0IGl0ZW0gb2YgZGlhbEl0ZW1zOyBsZXQgaWR4ID0gaW5kZXgnPlxuICAgICAgICAgICAgPGxpXG4gICAgICAgICAgICAgICAga2VuZG9CdXR0b25Gb2N1c2FibGVcbiAgICAgICAgICAgICAgICBrZW5kb0RpYWxJdGVtXG4gICAgICAgICAgICAgICAgW2l0ZW1dPVwiZGlhbEl0ZW1zW2lkeF1cIlxuICAgICAgICAgICAgICAgIFtpbmRleF09XCJpZHhcIlxuICAgICAgICAgICAgICAgIFtkaWFsSXRlbVRlbXBsYXRlXT1cImRpYWxJdGVtVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgIFtpc0ZvY3VzZWRdPVwiaXNGb2N1c2VkKGlkeClcIlxuICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT0naXRlbS5jc3NDbGFzcydcbiAgICAgICAgICAgICAgICBbbmdTdHlsZV09J2l0ZW0uY3NzU3R5bGUnXG4gICAgICAgICAgICAgICAgW2FsaWduXT1cImFsaWduXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgIGBcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0ZvY3VzU2VydmljZSwgQ2hhbmdlRGV0ZWN0b3JSZWZdKVxuXSwgRGlhbExpc3RDb21wb25lbnQpO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IERpYWxJdGVtQ29tcG9uZW50ID0gY2xhc3MgRGlhbEl0ZW1Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIHJlbmRlcmVyLCBsb2NhbGlzYXRpb25TZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5sb2NhbGlzYXRpb25TZXJ2aWNlID0gbG9jYWxpc2F0aW9uU2VydmljZTtcbiAgICAgICAgdGhpcy5ob3N0Q2xhc3MgPSB0cnVlO1xuICAgICAgICB0aGlzLnJvbGUgPSAnbWVudWl0ZW0nO1xuICAgIH1cbiAgICBnZXQgZGlzYWJsZWRDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbS5kaXNhYmxlZDtcbiAgICB9XG4gICAgZ2V0IHRpdGxlKCkge1xuICAgICAgICBjb25zdCBsYWJlbCA9IHRoaXMuaXRlbS5sYWJlbDtcbiAgICAgICAgcmV0dXJuIGxhYmVsID8gbGFiZWwgOiB0aGlzLml0ZW1UaXRsZTtcbiAgICB9XG4gICAgZ2V0IGluZGV4QXR0cigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXg7XG4gICAgfVxuICAgIGdldCBpY29uQ2xhc3NlcygpIHtcbiAgICAgICAgY29uc3QgY2xhc3NlcyA9IFtdO1xuICAgICAgICBpZiAodGhpcy5pdGVtLmljb25DbGFzcykge1xuICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKGAke3RoaXMuaXRlbS5pY29uQ2xhc3N9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXRlbS5pY29uKSB7XG4gICAgICAgICAgICBjbGFzc2VzLnB1c2goYGstZmFiLWl0ZW0taWNvbiBrLWljb24gay1pLSR7dGhpcy5pdGVtLmljb259YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsYXNzZXM7XG4gICAgfVxuICAgIGdldCBpdGVtVGl0bGUoKSB7XG4gICAgICAgIGNvbnN0IGljb24gPSB0aGlzLml0ZW0uaWNvbjtcbiAgICAgICAgY29uc3QgaXRlbVRpdGxlID0gdGhpcy5pdGVtLml0ZW1UaXRsZTtcbiAgICAgICAgcmV0dXJuIChpY29uICYmIGl0ZW1UaXRsZSkgPyBpdGVtVGl0bGUgOiBpY29uO1xuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudDtcbiAgICAgICAgY29uc3QgcnRsID0gdGhpcy5sb2NhbGlzYXRpb25TZXJ2aWNlLnJ0bDtcbiAgICAgICAgY29uc3QgaEFsaWduID0gdGhpcy5hbGlnbi5ob3Jpem9udGFsO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGVsZW1lbnQsIHRoaXMuZ2V0VGV4dERpcmVjdGlvbkNsYXNzKHJ0bCwgaEFsaWduKSk7XG4gICAgfVxuICAgIGdldFRleHREaXJlY3Rpb25DbGFzcyhydGwsIGhBbGlnbikge1xuICAgICAgICBjb25zdCBkaXIgPSBydGwgPyAncnRsJyA6ICdsdHInO1xuICAgICAgICBjb25zdCBhbGlnbiA9IGhBbGlnbiA9PT0gJ2VuZCcgPyAnZW5kJyA6ICdzdGFydCc7XG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbnMgPSB7XG4gICAgICAgICAgICBydGw6IHsgZW5kOiAnay10ZXh0LWxlZnQnLCBzdGFydDogJ2stdGV4dC1yaWdodCcgfSxcbiAgICAgICAgICAgIGx0cjogeyBzdGFydDogJ2stdGV4dC1sZWZ0JywgZW5kOiAnay10ZXh0LXJpZ2h0JyB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBkaXJlY3Rpb25zW2Rpcl1bYWxpZ25dO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1mYWItaXRlbScpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgRGlhbEl0ZW1Db21wb25lbnQucHJvdG90eXBlLCBcImhvc3RDbGFzc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIucm9sZScpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBEaWFsSXRlbUNvbXBvbmVudC5wcm90b3R5cGUsIFwicm9sZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIuYXJpYS1kaXNhYmxlZCcpLFxuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXN0YXRlLWRpc2FibGVkJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIERpYWxJdGVtQ29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXNhYmxlZENsYXNzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIudGl0bGUnKSxcbiAgICBIb3N0QmluZGluZygnYXR0ci5hcmlhLWxhYmVsJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgRGlhbEl0ZW1Db21wb25lbnQucHJvdG90eXBlLCBcInRpdGxlXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIuZGF0YS1mYWItaXRlbS1pbmRleCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIERpYWxJdGVtQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpbmRleEF0dHJcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBEaWFsSXRlbUNvbXBvbmVudC5wcm90b3R5cGUsIFwiY3NzQ2xhc3NcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIERpYWxJdGVtQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjc3NTdHlsZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIERpYWxJdGVtQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpc0ZvY3VzZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIERpYWxJdGVtQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpbmRleFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgRGlhbEl0ZW1Db21wb25lbnQucHJvdG90eXBlLCBcIml0ZW1cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFRlbXBsYXRlUmVmKVxuXSwgRGlhbEl0ZW1Db21wb25lbnQucHJvdG90eXBlLCBcImRpYWxJdGVtVGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIERpYWxJdGVtQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhbGlnblwiLCB2b2lkIDApO1xuRGlhbEl0ZW1Db21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICBDb21wb25lbnQoe1xuICAgICAgICBzZWxlY3RvcjogJ1trZW5kb0RpYWxJdGVtXScsXG4gICAgICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxuZy10ZW1wbGF0ZSAqbmdJZj1cImRpYWxJdGVtVGVtcGxhdGVcIlxuICAgICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRdPVwiZGlhbEl0ZW1UZW1wbGF0ZVwiXG4gICAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldENvbnRleHRdPVwieyAkaW1wbGljaXQ6IGl0ZW0sIGluZGV4OiBpbmRleCwgaXNGb2N1c2VkOiBpc0ZvY3VzZWQgfVwiXG4gICAgICAgID5cbiAgICAgICAgPC9uZy10ZW1wbGF0ZT5cblxuICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiIWRpYWxJdGVtVGVtcGxhdGVcIj5cbiAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiaXRlbS5sYWJlbFwiIGNsYXNzPVwiay1mYWItaXRlbS10ZXh0XCI+e3sgaXRlbS5sYWJlbCB9fTwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiaXRlbS5pY29uIHx8IGl0ZW0uaWNvbkNsYXNzXCIgW25nQ2xhc3NdPVwiaWNvbkNsYXNzZXNcIj48L3NwYW4+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgIGBcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0VsZW1lbnRSZWYsXG4gICAgICAgIFJlbmRlcmVyMixcbiAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZV0pXG5dLCBEaWFsSXRlbUNvbXBvbmVudCk7XG5cbmNvbnN0IGV4cG9ydGVkTW9kdWxlcyQxID0gW1xuICAgIEZsb2F0aW5nQWN0aW9uQnV0dG9uQ29tcG9uZW50LFxuICAgIERpYWxJdGVtVGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgRmxvYXRpbmdBY3Rpb25CdXR0b25UZW1wbGF0ZURpcmVjdGl2ZVxuXTtcbmNvbnN0IGRlY2xhcmF0aW9ucyQxID0gW1xuICAgIC4uLmV4cG9ydGVkTW9kdWxlcyQxLFxuICAgIERpYWxMaXN0Q29tcG9uZW50LFxuICAgIERpYWxJdGVtQ29tcG9uZW50XG5dO1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBbTmdNb2R1bGVdKHt7IHNpdGUuZGF0YS51cmxzLmFuZ3VsYXJbJ25nbW9kdWxlYXBpJ10gfX0pXG4gKiBkZWZpbml0aW9uIGZvciB0aGUgRmxvYXRpbmdBY3Rpb25CdXR0b24gY29tcG9uZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogYGBgdHMtbm8tcnVuXG4gKiAvLyBJbXBvcnQgdGhlIEZsb2F0aW5nQWN0aW9uQnV0dG9uIG1vZHVsZVxuICogaW1wb3J0IHsgRmxvYXRpbmdBY3Rpb25CdXR0b25Nb2R1bGUgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1idXR0b25zJztcbiAqXG4gKiAvLyBUaGUgYnJvd3NlciBwbGF0Zm9ybSB3aXRoIGEgY29tcGlsZXJcbiAqIGltcG9ydCB7IHBsYXRmb3JtQnJvd3NlckR5bmFtaWMgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyLWR5bmFtaWMnO1xuICpcbiAqIGltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG4gKlxuICogLy8gSW1wb3J0IHRoZSBhcHAgY29tcG9uZW50XG4gKiBpbXBvcnQgeyBBcHBDb21wb25lbnQgfSBmcm9tICcuL2FwcC5jb21wb25lbnQnO1xuICpcbiAqIC8vIERlZmluZSB0aGUgYXBwIG1vZHVsZVxuICogX0BOZ01vZHVsZSh7XG4gKiAgICAgZGVjbGFyYXRpb25zOiBbQXBwQ29tcG9uZW50XSwgLy8gZGVjbGFyZSBhcHAgY29tcG9uZW50XG4gKiAgICAgaW1wb3J0czogICAgICBbQnJvd3Nlck1vZHVsZSwgRmxvYXRpbmdBY3Rpb25CdXR0b25Nb2R1bGVdLCAvLyBpbXBvcnQgRmxvYXRpbmdBY3Rpb25CdXR0b24gbW9kdWxlXG4gKiAgICAgYm9vdHN0cmFwOiAgICBbQXBwQ29tcG9uZW50XVxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBBcHBNb2R1bGUge31cbiAqXG4gKiBgYGBcbiAqL1xubGV0IEZsb2F0aW5nQWN0aW9uQnV0dG9uTW9kdWxlID0gY2xhc3MgRmxvYXRpbmdBY3Rpb25CdXR0b25Nb2R1bGUge1xufTtcbkZsb2F0aW5nQWN0aW9uQnV0dG9uTW9kdWxlID0gX19kZWNvcmF0ZShbXG4gICAgTmdNb2R1bGUoe1xuICAgICAgICBkZWNsYXJhdGlvbnM6IFtkZWNsYXJhdGlvbnMkMV0sXG4gICAgICAgIGV4cG9ydHM6IFtleHBvcnRlZE1vZHVsZXMkMV0sXG4gICAgICAgIGltcG9ydHM6IFtDb21tb25Nb2R1bGUsIFBvcHVwTW9kdWxlLCBMaXN0TW9kdWxlLCBFdmVudHNNb2R1bGVdXG4gICAgfSlcbl0sIEZsb2F0aW5nQWN0aW9uQnV0dG9uTW9kdWxlKTtcblxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBbTmdNb2R1bGVdKHt7IHNpdGUuZGF0YS51cmxzLmFuZ3VsYXJbJ25nbW9kdWxlcyddIH19KVxuICogZGVmaW5pdGlvbiBmb3IgdGhlIEJ1dHRvbnMgY29tcG9uZW50cy5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYHRzLW5vLXJ1blxuICogLy8gSW1wb3J0IHRoZSBCdXR0b25zIG1vZHVsZVxuICogaW1wb3J0IHsgQnV0dG9uc01vZHVsZSB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1hbmd1bGFyLWJ1dHRvbnMnO1xuICpcbiAqIC8vIFRoZSBicm93c2VyIHBsYXRmb3JtIHdpdGggYSBjb21waWxlclxuICogaW1wb3J0IHsgcGxhdGZvcm1Ccm93c2VyRHluYW1pYyB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXItZHluYW1pYyc7XG4gKlxuICogaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbiAqXG4gKiAvLyBJbXBvcnQgdGhlIGFwcCBjb21wb25lbnRcbiAqIGltcG9ydCB7IEFwcENvbXBvbmVudCB9IGZyb20gJy4vYXBwLmNvbXBvbmVudCc7XG4gKlxuICogLy8gRGVmaW5lIHRoZSBhcHAgbW9kdWxlXG4gKiBfQE5nTW9kdWxlKHtcbiAqICAgICBkZWNsYXJhdGlvbnM6IFtBcHBDb21wb25lbnRdLCAvLyBkZWNsYXJlIGFwcCBjb21wb25lbnRcbiAqICAgICBpbXBvcnRzOiAgICAgIFtCcm93c2VyTW9kdWxlLCBCdXR0b25zTW9kdWxlXSwgLy8gaW1wb3J0IEJ1dHRvbnMgbW9kdWxlXG4gKiAgICAgYm9vdHN0cmFwOiAgICBbQXBwQ29tcG9uZW50XVxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBBcHBNb2R1bGUge31cbiAqXG4gKiAvLyBDb21waWxlIGFuZCBsYXVuY2ggdGhlIG1vZHVsZVxuICogcGxhdGZvcm1Ccm93c2VyRHluYW1pYygpLmJvb3RzdHJhcE1vZHVsZShBcHBNb2R1bGUpO1xuICpcbiAqIGBgYFxuICovXG5sZXQgQnV0dG9uc01vZHVsZSA9IGNsYXNzIEJ1dHRvbnNNb2R1bGUge1xufTtcbkJ1dHRvbnNNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICBOZ01vZHVsZSh7XG4gICAgICAgIGV4cG9ydHM6IFtCdXR0b25Hcm91cE1vZHVsZSwgQnV0dG9uTW9kdWxlLCBTcGxpdEJ1dHRvbk1vZHVsZSwgRHJvcERvd25CdXR0b25Nb2R1bGUsIENoaXBNb2R1bGUsIEZsb2F0aW5nQWN0aW9uQnV0dG9uTW9kdWxlXVxuICAgIH0pXG5dLCBCdXR0b25zTW9kdWxlKTtcblxuLyoqXG4gKiBHZW5lcmF0ZWQgYnVuZGxlIGluZGV4LiBEbyBub3QgZWRpdC5cbiAqL1xuXG5leHBvcnQgeyBLZW5kb0J1dHRvblNlcnZpY2UsIERpYWxJdGVtQ29tcG9uZW50LCBEaWFsTGlzdENvbXBvbmVudCwgRm9jdXNTZXJ2aWNlLCBGb2N1c2FibGVEaXJlY3RpdmUsIEJ1dHRvbkl0ZW1UZW1wbGF0ZURpcmVjdGl2ZSwgTGlzdEJ1dHRvbiwgTGlzdENvbXBvbmVudCwgTGlzdE1vZHVsZSwgVGVtcGxhdGVDb250ZXh0RGlyZWN0aXZlLCBOQVZJR0FUSU9OX0NPTkZJRywgTmF2aWdhdGlvblNlcnZpY2UsIExvY2FsaXplZFNwbGl0QnV0dG9uTWVzc2FnZXNEaXJlY3RpdmUsIE1lc3NhZ2VzLCBCdXR0b25EaXJlY3RpdmUsIEJ1dHRvbkRpcmVjdGl2ZSBhcyBCdXR0b24sIEJ1dHRvbkdyb3VwQ29tcG9uZW50LCBCdXR0b25Hcm91cENvbXBvbmVudCBhcyBCdXR0b25Hcm91cCwgQnV0dG9uR3JvdXBNb2R1bGUsIEJ1dHRvbk1vZHVsZSwgQnV0dG9uc01vZHVsZSwgU3BsaXRCdXR0b25Db21wb25lbnQsIFNwbGl0QnV0dG9uQ29tcG9uZW50IGFzIFNwbGl0QnV0dG9uLCBTcGxpdEJ1dHRvbk1vZHVsZSwgU3BsaXRCdXR0b25DdXN0b21NZXNzYWdlc0NvbXBvbmVudCwgRHJvcERvd25CdXR0b25Db21wb25lbnQsIERyb3BEb3duQnV0dG9uQ29tcG9uZW50IGFzIERyb3BEb3duQnV0dG9uLCBEcm9wRG93bkJ1dHRvbk1vZHVsZSwgQ2hpcENvbXBvbmVudCwgQ2hpcExpc3RDb21wb25lbnQsIENoaXBNb2R1bGUsIEZsb2F0aW5nQWN0aW9uQnV0dG9uTW9kdWxlLCBGbG9hdGluZ0FjdGlvbkJ1dHRvbkNvbXBvbmVudCwgRmxvYXRpbmdBY3Rpb25CdXR0b25UZW1wbGF0ZURpcmVjdGl2ZSwgRGlhbEl0ZW1UZW1wbGF0ZURpcmVjdGl2ZSB9O1xuIl19","map":null,"metadata":{},"sourceType":"module"}