{"ast":null,"code":"/**-----------------------------------------------------------------------------------------\n* Copyright © 2021 Progress Software Corporation. All rights reserved.\n* Licensed under commercial license. See LICENSE.md in the project root for more information\n*-------------------------------------------------------------------------------------------*/\nimport { __decorate, __metadata, __param } from 'tslib';\nimport { EventEmitter, TemplateRef, Input, Output, HostBinding, Component, ElementRef, InjectionToken, Inject, Optional, NgZone, ContentChildren, QueryList, ViewChildren, ViewChild, Renderer2, ChangeDetectorRef, Injectable, isDevMode, ComponentFactoryResolver, Directive, Host, HostListener, ContentChild, ViewContainerRef, forwardRef, NgModule } from '@angular/core';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\nimport { LocalizationService, L10N_PREFIX, RTL, MessageService, ComponentMessages } from '@progress/kendo-angular-l10n';\nimport { take, filter, map, share, tap, switchMap, takeUntil } from 'rxjs/operators';\nimport { validatePackage } from '@progress/kendo-licensing';\nimport { Subscription, Subject, merge, of } from 'rxjs';\nimport { DraggableDirective, isChanged, isDocumentAvailable, DraggableModule } from '@progress/kendo-angular-common';\nimport { offset, scrollPosition, positionWithScroll, getDocumentElement, getWindowViewPort } from '@progress/kendo-popup-common';\nimport { Button } from '@progress/kendo-angular-buttons';\nimport { CommonModule } from '@angular/common';\n/**\n * Specifies the action buttons of the Dialog\n * ([see example]({% slug actionbuttons_dialog %})).\n */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\nimport * as ɵngcc2 from '@progress/kendo-angular-l10n';\nimport * as ɵngcc3 from '@progress/kendo-angular-common';\n\nfunction DialogActionsComponent_ng_content_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵprojection(0, 0, [\"*ngIf\", \"!actions\"]);\n  }\n}\n\nfunction DialogActionsComponent_ng_container_1_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"button\", 2);\n    ɵngcc0.ɵɵlistener(\"click\", function DialogActionsComponent_ng_container_1_button_1_Template_button_click_0_listener($event) {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r6);\n      const action_r4 = restoredCtx.$implicit;\n      const ctx_r5 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r5.onButtonClick(action_r4, $event);\n    });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const action_r4 = ctx.$implicit;\n    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r3.buttonClass(action_r4));\n    ɵngcc0.ɵɵattribute(\"aria-label\", action_r4.text);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", action_r4.text, \" \");\n  }\n}\n\nfunction DialogActionsComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, DialogActionsComponent_ng_container_1_button_1_Template, 2, 3, \"button\", 1);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r1.actions);\n  }\n}\n\nfunction DialogActionsComponent_2_ng_template_0_Template(rf, ctx) {}\n\nfunction DialogActionsComponent_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, DialogActionsComponent_2_ng_template_0_Template, 0, 0, \"ng-template\", 3);\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r2.actions);\n  }\n}\n\nconst _c0 = [\"*\"];\n\nfunction DialogComponent_kendo_dialog_titlebar_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"kendo-dialog-titlebar\", 7);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"closeTitle\", ctx_r0.closeTitle)(\"id\", ctx_r0.titleId);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r0.title);\n  }\n}\n\nfunction DialogComponent_ng_content_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵprojection(0, 0, [\"*ngIf\", \"!title\"]);\n  }\n}\n\nfunction DialogComponent_ng_content_6_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵprojection(0, 1, [\"*ngIf\", \"!contentTemplate\"]);\n  }\n}\n\nfunction DialogComponent_7_ng_template_0_Template(rf, ctx) {}\n\nfunction DialogComponent_7_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, DialogComponent_7_ng_template_0_Template, 0, 0, \"ng-template\", 8);\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r3.contentTemplate);\n  }\n}\n\nfunction DialogComponent_ng_content_8_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵprojection(0, 2, [\"*ngIf\", \"!actions\"]);\n  }\n}\n\nfunction DialogComponent_kendo_dialog_actions_9_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"kendo-dialog-actions\", 9);\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"actions\", ctx_r5.actions)(\"layout\", ctx_r5.actionsLayout);\n  }\n}\n\nconst _c5 = [[[\"kendo-dialog-titlebar\"]], \"*\", [[\"kendo-dialog-actions\"]]];\nconst _c6 = [\"kendo-dialog-titlebar\", \"*\", \"kendo-dialog-actions\"];\n\nfunction WindowTitleBarComponent_ng_content_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵprojection(0, 0, [\"*ngIf\", \"!template\"]);\n  }\n}\n\nfunction WindowTitleBarComponent_1_ng_template_0_Template(rf, ctx) {}\n\nconst _c7 = function (a0) {\n  return {\n    \"$implicit\": a0\n  };\n};\n\nfunction WindowTitleBarComponent_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, WindowTitleBarComponent_1_ng_template_0_Template, 0, 0, \"ng-template\", 1);\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r1.template)(\"ngTemplateOutletContext\", ɵngcc0.ɵɵpureFunction1(2, _c7, ctx_r1.service));\n  }\n}\n\nfunction WindowComponent_kendo_window_titlebar_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"kendo-window-titlebar\", 5);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 6);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"div\", 7);\n    ɵngcc0.ɵɵelement(4, \"button\", 8);\n    ɵngcc0.ɵɵelement(5, \"button\", 9);\n    ɵngcc0.ɵɵelement(6, \"button\", 10);\n    ɵngcc0.ɵɵelement(7, \"button\", 11);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"template\", ctx_r0.titleBarTemplate);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r0.title);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵattribute(\"title\", ctx_r0.minimizeButtonTitle)(\"aria-label\", ctx_r0.minimizeButtonTitle);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵattribute(\"title\", ctx_r0.maximizeButtonTitle)(\"aria-label\", ctx_r0.maximizeButtonTitle);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵattribute(\"title\", ctx_r0.restoreButtonTitle)(\"aria-label\", ctx_r0.restoreButtonTitle);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵattribute(\"title\", ctx_r0.closeButtonTitle)(\"aria-label\", ctx_r0.closeButtonTitle);\n  }\n}\n\nfunction WindowComponent_ng_content_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵprojection(0, 0, [\"*ngIf\", \"!showDefaultTitleBar\"]);\n  }\n}\n\nfunction WindowComponent_div_4_ng_content_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵprojection(0, 1, [\"*ngIf\", \"!contentTemplate\"]);\n  }\n}\n\nfunction WindowComponent_div_4_2_ng_template_0_Template(rf, ctx) {}\n\nfunction WindowComponent_div_4_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, WindowComponent_div_4_2_ng_template_0_Template, 0, 0, \"ng-template\", 13);\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r5.contentTemplate);\n  }\n}\n\nfunction WindowComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 12);\n    ɵngcc0.ɵɵtemplate(1, WindowComponent_div_4_ng_content_1_Template, 1, 0, \"ng-content\", 2);\n    ɵngcc0.ɵɵtemplate(2, WindowComponent_div_4_2_Template, 1, 1, undefined, 2);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"hidden\", ctx_r2.state === \"minimized\" && ctx_r2.keepContent);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r2.contentTemplate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.contentTemplate);\n  }\n}\n\nfunction WindowComponent_ng_template_5_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"div\", 15);\n  }\n\n  if (rf & 2) {\n    const dir_r8 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"direction\", dir_r8);\n  }\n}\n\nfunction WindowComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, WindowComponent_ng_template_5_div_0_Template, 1, 1, \"div\", 14);\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r3.resizeDirections);\n  }\n}\n\nconst _c16 = [[[\"kendo-window-titlebar\"]], \"*\"];\nconst _c17 = [\"kendo-window-titlebar\", \"*\"];\nlet DialogActionsComponent = /*#__PURE__*/(() => {\n  let DialogActionsComponent = class DialogActionsComponent {\n    constructor(el) {\n      this.el = el;\n      /**\n       * Specifies the possible layout of the action buttons.\n       */\n\n      this.layout = 'stretched';\n      /**\n       * Fires when the user clicks an action button.\n       */\n\n      this.action = new EventEmitter();\n      this.buttonGroupClassName = true;\n    }\n\n    get className() {\n      return this.layout === 'stretched';\n    }\n    /**\n     * @hidden\n     */\n\n\n    actionTemplate() {\n      return this.actions instanceof TemplateRef;\n    }\n    /**\n     * @hidden\n     */\n\n\n    onButtonClick(action, _e) {\n      this.action.emit(action);\n    }\n    /**\n     * @hidden\n     */\n\n\n    buttonClass(action) {\n      const classes = ['k-button'];\n\n      if (action.primary) {\n        classes.push('k-primary');\n      }\n\n      return classes.join(' ');\n    }\n\n  };\n\n  DialogActionsComponent.ɵfac = function DialogActionsComponent_Factory(t) {\n    return new (t || DialogActionsComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef));\n  };\n\n  DialogActionsComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: DialogActionsComponent,\n    selectors: [[\"kendo-dialog-actions\"]],\n    hostVars: 6,\n    hostBindings: function DialogActionsComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"k-dialog-buttongroup\", ctx.buttonGroupClassName)(\"k-actions\", ctx.buttonGroupClassName)(\"k-actions-stretched\", ctx.className);\n      }\n    },\n    inputs: {\n      layout: \"layout\",\n      actions: \"actions\"\n    },\n    outputs: {\n      action: \"action\"\n    },\n    ngContentSelectors: _c0,\n    decls: 3,\n    vars: 3,\n    consts: [[4, \"ngIf\"], [\"type\", \"button\", 3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 3, \"ngClass\", \"click\"], [3, \"ngTemplateOutlet\"]],\n    template: function DialogActionsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵtemplate(0, DialogActionsComponent_ng_content_0_Template, 1, 0, \"ng-content\", 0);\n        ɵngcc0.ɵɵtemplate(1, DialogActionsComponent_ng_container_1_Template, 2, 1, \"ng-container\", 0);\n        ɵngcc0.ɵɵtemplate(2, DialogActionsComponent_2_Template, 1, 1, undefined, 0);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.actions);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.actionTemplate());\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.actionTemplate());\n      }\n    },\n    directives: [ɵngcc1.NgIf, ɵngcc1.NgForOf, ɵngcc1.NgClass, ɵngcc1.NgTemplateOutlet],\n    encapsulation: 2\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], DialogActionsComponent.prototype, \"actions\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], DialogActionsComponent.prototype, \"layout\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], DialogActionsComponent.prototype, \"action\", void 0);\n\n  __decorate([HostBinding('class.k-dialog-buttongroup'), HostBinding('class.k-actions'), __metadata(\"design:type\", Boolean)], DialogActionsComponent.prototype, \"buttonGroupClassName\", void 0);\n\n  __decorate([HostBinding('class.k-actions-stretched'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], DialogActionsComponent.prototype, \"className\", null);\n\n  DialogActionsComponent = __decorate([__metadata(\"design:paramtypes\", [ElementRef])], DialogActionsComponent);\n  /**\n   * @hidden\n   */\n\n  return DialogActionsComponent;\n})();\n\nclass PreventableEvent {\n  constructor() {\n    this.prevented = false;\n  }\n  /**\n   * Prevents the default action for a specified event.\n   * In this way, the source component suppresses the built-in behavior that follows the event.\n   */\n\n\n  preventDefault() {\n    this.prevented = true;\n  }\n  /**\n   * If the event is prevented by any of its subscribers, returns `true`.\n   *\n   * @returns `true` if the default action was prevented. Otherwise, returns `false`.\n   */\n\n\n  isDefaultPrevented() {\n    return this.prevented;\n  }\n\n}\n/**\n * @hidden\n */\n\n\nconst DIALOG_LOCALIZATION_SERVICE = new InjectionToken('Dialog LocalizationService');\n/**\n * @hidden\n */\n\nlet TitleBarLocalizationService = /*#__PURE__*/(() => {\n  let TitleBarLocalizationService = class TitleBarLocalizationService extends LocalizationService {\n    constructor(prefix, messageService, rtl, dialogLocalization) {\n      super(prefix, messageService, rtl);\n      this.dialogLocalization = dialogLocalization;\n    }\n\n    get(shortKey) {\n      if (this.dialogLocalization) {\n        return this.dialogLocalization.get(shortKey);\n      }\n\n      return super.get(shortKey);\n    }\n\n  };\n\n  TitleBarLocalizationService.ɵfac = function TitleBarLocalizationService_Factory(t) {\n    return new (t || TitleBarLocalizationService)(ɵngcc0.ɵɵinject(L10N_PREFIX), ɵngcc0.ɵɵinject(ɵngcc2.MessageService, 8), ɵngcc0.ɵɵinject(RTL, 8), ɵngcc0.ɵɵinject(DIALOG_LOCALIZATION_SERVICE, 8));\n  };\n\n  TitleBarLocalizationService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: TitleBarLocalizationService,\n    factory: function (t) {\n      return TitleBarLocalizationService.ɵfac(t);\n    }\n  });\n  TitleBarLocalizationService = __decorate([__param(0, Inject(L10N_PREFIX)), __param(1, Optional()), __param(2, Optional()), __param(2, Inject(RTL)), __param(3, Optional()), __param(3, Inject(DIALOG_LOCALIZATION_SERVICE)), __metadata(\"design:paramtypes\", [String, MessageService, Boolean, LocalizationService])], TitleBarLocalizationService);\n  /**\n   * Represents the [Kendo UI DialogTitleBar component for Angular]({% slug api_dialog_dialogtitlebarcomponent %}).\n   *\n   * It is used as part of the Dialog content when the component is created dynamically by using an [Angular service]({% slug service_dialog %}).\n   */\n\n  return TitleBarLocalizationService;\n})();\nlet DialogTitleBarComponent = /*#__PURE__*/(() => {\n  let DialogTitleBarComponent = class DialogTitleBarComponent {\n    constructor(zone, hostElement, localizationService) {\n      this.zone = zone;\n      this.hostElement = hostElement;\n      this.localizationService = localizationService;\n      /**\n       * Fires when the close button of the title-bar is clicked.\n       */\n\n      this.close = new EventEmitter();\n    }\n\n    get className() {\n      return true;\n    }\n\n    get closeButtonTitle() {\n      return this.closeTitle || this.localizationService.get('closeTitle');\n    }\n\n    ngAfterViewInit() {\n      this.zone.onStable.pipe(take(1)).subscribe(() => {\n        const element = this.hostElement.nativeElement.querySelector('.k-dialog-title');\n        element.setAttribute('id', this.id);\n      });\n    }\n    /**\n     * @hidden\n     */\n\n\n    onCloseClick(e) {\n      e.preventDefault();\n      const eventArgs = new PreventableEvent();\n      this.close.emit(eventArgs);\n    }\n\n  };\n\n  DialogTitleBarComponent.ɵfac = function DialogTitleBarComponent_Factory(t) {\n    return new (t || DialogTitleBarComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.LocalizationService, 8));\n  };\n\n  DialogTitleBarComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: DialogTitleBarComponent,\n    selectors: [[\"kendo-dialog-titlebar\"]],\n    hostVars: 4,\n    hostBindings: function DialogTitleBarComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"k-window-titlebar\", ctx.className)(\"k-dialog-titlebar\", ctx.className);\n      }\n    },\n    inputs: {\n      id: \"id\",\n      closeTitle: \"closeTitle\"\n    },\n    outputs: {\n      close: \"close\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([TitleBarLocalizationService, {\n      provide: LocalizationService,\n      useExisting: TitleBarLocalizationService\n    }, {\n      provide: L10N_PREFIX,\n      useValue: 'kendo.dialog'\n    }])],\n    ngContentSelectors: _c0,\n    decls: 6,\n    vars: 2,\n    consts: function () {\n      let i18n_1;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\n         * @desc The title of the close button\n         * @meaning kendo.dialog.closeTitle\n         */\n        const MSG_EXTERNAL_7499923323865444383$$DIST_FESM2015_INDEX_JS_2 = goog.getMsg(\"Close\");\n        i18n_1 = MSG_EXTERNAL_7499923323865444383$$DIST_FESM2015_INDEX_JS_2;\n      } else {\n        i18n_1 = $localize`:kendo.dialog.closeTitle|The title of the close button␟9b2bd34897f127e69e5f02f64692fca98a5a7572␟7499923323865444383:Close`;\n      }\n\n      return [[\"kendoDialogTitleBarLocalizedMessages\", \"\", \"closeTitle\", i18n_1], [1, \"k-window-title\", \"k-dialog-title\"], [1, \"k-window-actions\", \"k-dialog-actions\"], [\"href\", \"#\", \"role\", \"button\", 1, \"k-button\", \"k-flat\", \"k-button-icon\", \"k-window-action\", \"k-dialog-action\", \"k-dialog-close\", 3, \"click\"], [1, \"k-icon\", \"k-i-x\"]];\n    },\n    template: function DialogTitleBarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementContainerStart(0, 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵprojection(2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(3, \"div\", 2);\n        ɵngcc0.ɵɵelementStart(4, \"a\", 3);\n        ɵngcc0.ɵɵlistener(\"click\", function DialogTitleBarComponent_Template_a_click_4_listener($event) {\n          return ctx.onCloseClick($event);\n        });\n        ɵngcc0.ɵɵelement(5, \"span\", 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementContainerEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵattribute(\"title\", ctx.closeButtonTitle)(\"aria-label\", ctx.closeButtonTitle);\n      }\n    },\n    directives: function () {\n      return [LocalizedMessagesDirective];\n    },\n    encapsulation: 2\n  });\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], DialogTitleBarComponent.prototype, \"close\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], DialogTitleBarComponent.prototype, \"id\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], DialogTitleBarComponent.prototype, \"closeTitle\", void 0);\n\n  __decorate([HostBinding('class.k-window-titlebar'), HostBinding('class.k-dialog-titlebar'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], DialogTitleBarComponent.prototype, \"className\", null);\n\n  DialogTitleBarComponent = __decorate([__param(2, Optional()), __metadata(\"design:paramtypes\", [NgZone, ElementRef, LocalizationService])], DialogTitleBarComponent);\n  /**\n   * @hidden\n   */\n\n  return DialogTitleBarComponent;\n})();\nconst packageMetadata = {\n  name: '@progress/kendo-angular-dialog',\n  productName: 'Kendo UI for Angular',\n  productCodes: ['KENDOUIANGULAR', 'KENDOUICOMPLETE'],\n  publishDate: 1637576271,\n  version: '',\n  licensingDocsUrl: 'https://www.telerik.com/kendo-angular-ui/my-license/?utm_medium=product&utm_source=kendoangular&utm_campaign=kendo-ui-angular-purchase-license-keys-warning'\n};\n/**\n * @hidden\n */\n\nconst isPresent = value => value !== null && value !== undefined;\n/**\n * @hidden\n */\n\n\nconst isTruthy = value => !!value;\n\nconst toClassList = classNames => String(classNames).trim().split(' ');\n\nconst focusableRegex = /^(?:a|input|select|textarea|button|object)$/i;\n/**\n * @hidden\n */\n\nvar Keys = /*#__PURE__*/(() => {\n  (function (Keys) {\n    Keys[Keys[\"esc\"] = 27] = \"esc\";\n    Keys[Keys[\"tab\"] = 9] = \"tab\";\n    Keys[Keys[\"enter\"] = 13] = \"enter\";\n    Keys[Keys[\"space\"] = 32] = \"space\";\n    Keys[Keys[\"ctrl\"] = 17] = \"ctrl\";\n    Keys[Keys[\"shift\"] = 16] = \"shift\";\n    Keys[Keys[\"left\"] = 37] = \"left\";\n    Keys[Keys[\"up\"] = 38] = \"up\";\n    Keys[Keys[\"right\"] = 39] = \"right\";\n    Keys[Keys[\"down\"] = 40] = \"down\";\n  })(Keys || (Keys = {}));\n\n  return Keys;\n})();\n\n/**\n * @hidden\n */\nconst DIALOG_ELEMENTS_HANDLING_ESC_KEY = 'k-dialog-wrapper k-dialog-buttongroup k-dialog-action';\n/**\n * @hidden\n */\n\nconst DIALOG_ELEMENTS_HANDLING_ARROWS = 'k-dialog-buttongroup';\n/**\n * @hidden\n */\n\nconst WINDOW_CLASSES = 'k-window';\n/**\n * @hidden\n */\n\nconst hasClasses = (element, classNames) => {\n  const namesList = toClassList(classNames);\n  return Boolean(toClassList(element.className).find(className => namesList.indexOf(className) >= 0));\n};\n/**\n * @hidden\n */\n\n\nconst isVisible = element => {\n  const rect = element.getBoundingClientRect();\n  return !!(rect.width && rect.height) && window.getComputedStyle(element).visibility !== 'hidden';\n};\n/**\n * @hidden\n */\n\n\nconst isFocusable = (element, checkVisibility = true) => {\n  if (element.tagName) {\n    const tagName = element.tagName.toLowerCase();\n    const tabIndex = element.getAttribute('tabIndex');\n    const validTabIndex = tabIndex !== null && !isNaN(tabIndex) && tabIndex > -1;\n    let focusable = false;\n\n    if (focusableRegex.test(tagName)) {\n      focusable = !element.disabled;\n    } else {\n      focusable = validTabIndex;\n    }\n\n    return focusable && (!checkVisibility || isVisible(element));\n  }\n\n  return false;\n};\n/**\n * @hidden\n */\n\n\nconst setHTMLAttributes = (attributes, renderer, element) => {\n  for (const attribute in attributes) {\n    if (attribute) {\n      renderer.setAttribute(element, attribute, attributes[attribute]);\n    }\n  }\n};\n/**\n * Receives CSS class declarations either as an object, string or array and returns an array of the class names.\n *\n * @hidden\n */\n\n\nconst parseCSSClassNames = value => {\n  if (isObject(value)) {\n    return parseObjectClassNames(value);\n  }\n\n  if (isString(value)) {\n    return parseStringClassNames(value);\n  }\n\n  if (Array.isArray(value)) {\n    return parseArrayClassNames(value);\n  }\n};\n\nconst parseObjectClassNames = value => {\n  const classes = [];\n  Object.keys(value).forEach(className => {\n    const currentClassName = splitStringToArray(className);\n\n    if (value[className] && currentClassName[0]) {\n      classes.push(...currentClassName);\n    }\n  });\n  return classes;\n};\n\nconst parseStringClassNames = value => {\n  const classes = [];\n  const classesArray = splitStringToArray(value);\n  classesArray.forEach(className => {\n    classes.push(className);\n  });\n  return classes;\n};\n\nconst parseArrayClassNames = value => {\n  const classes = [];\n  value.forEach(className => {\n    const current = splitStringToArray(className);\n\n    if (current[0]) {\n      classes.push(...current);\n    }\n  });\n  return classes;\n};\n/**\n * @hidden\n */\n\n\nconst focusableSelector = ['a[href]', 'area[href]', 'input:not([disabled])', 'select:not([disabled])', 'textarea:not([disabled])', 'button:not([disabled])', 'iframe', 'object', 'embed', '*[tabindex]', '*[contenteditable]'].join(',');\n/**\n * @hidden\n */\n\nconst preventDefault = ({\n  originalEvent: event\n}) => {\n  event.stopPropagation();\n  event.preventDefault();\n};\n/**\n * @hidden\n */\n\n\nconst RESIZE_DIRECTIONS = ['n', 'e', 's', 'w', 'se', 'sw', 'ne', 'nw'];\n/**\n * @hidden\n */\n\nconst OFFSET_STYLES = ['top', 'left', 'width', 'height'];\n/**\n * @hidden\n */\n\nconst isString = value => value instanceof String || typeof value === 'string';\n/**\n * @hidden\n */\n\n\nconst isObject = value => isPresent(value) && !Array.isArray(value) && typeof value === 'object';\n/**\n * @hidden\n */\n\n\nconst isNumber = value => typeof value === 'number' && isFinite(value);\n/**\n * @hidden\n */\n\n\nconst createValueWithUnit = value => value + (isNumber(value) ? 'px' : '');\n/**\n * @hidden\n */\n\n\nconst splitStringToArray = value => value.trim().replace(/\\s+/g, \" \").split(' ');\n/**\n * The settings for the Dialog actions when the Dialog is opened through `DialogService`\n * ([see example]({% slug api_dialog_dialogservice %}#toc-open)).\n */\n\n\nclass DialogAction {}\n/**\n * Indicates that the **Close** button is clicked. Used when the results from\n * the Dialogs that are opened through `DialogService` are filtered\n * ([see example]({% slug api_dialog_dialogservice %}#toc-open)).\n */\n\n\nclass DialogCloseResult {}\n/**\n * The settings that can be used when the Dialog is opened through `DialogService`.\n * ([see example]({% slug api_dialog_dialogservice %}#toc-open)).\n */\n\n\nclass DialogSettings {}\n/**\n * Holds references to the object instance and published events of the Dialog.\n * Controls the Dialogs that were opened through the `DialogService`\n * ([see example]({% slug api_dialog_dialogservice %}#toc-open)).\n */\n\n\nclass DialogRef {}\n/**\n * Represents the [Kendo UI Dialog component for Angular]({% slug overview_dialog_dialogs %}).\n */\n\n\nlet DialogComponent = /*#__PURE__*/(() => {\n  let DialogComponent = class DialogComponent {\n    constructor(wrapper, renderer, localization, cdr, ngZone) {\n      this.wrapper = wrapper;\n      this.renderer = renderer;\n      this.cdr = cdr;\n      this.ngZone = ngZone;\n      /**\n       * Specifies the layout of the action buttons in the Dialog.\n       * This option is only applicable if the action buttons are specified through the `actions` options.\n       *\n       * @default 'stretched'\n       */\n\n      this.actionsLayout = 'stretched';\n      /**\n       * @hidden\n       */\n\n      this.titleId = null;\n      /**\n       * @hidden\n       */\n\n      this.contentId = null;\n      /**\n       * Fires when the user clicks an action button of the Dialog.\n       * The event is fired only when the action buttons are specified through the `actions` options.\n       */\n\n      this.action = new EventEmitter();\n      /**\n       * Fires when the user clicks the **Close** button of the Dialog or the **ESC** key.\n       */\n\n      this.close = new EventEmitter();\n      this.tabIndex = 0;\n      this.subscriptions = [];\n      this.domSubs = new Subscription();\n      validatePackage(packageMetadata);\n      this.direction = localization.rtl ? 'rtl' : 'ltr';\n      this.subscriptions.push(localization.changes.subscribe(({\n        rtl\n      }) => this.direction = rtl ? 'rtl' : 'ltr'));\n      this.titleId = this.generateTitleId();\n      this.contentId = this.generateContentId();\n    }\n    /**\n     * @hidden\n     */\n\n\n    set htmlAttributes(attributes) {\n      setHTMLAttributes(attributes, this.renderer, this.wrapper.nativeElement);\n      const el = this.wrapper.nativeElement;\n      const dir = el.getAttribute('dir');\n      const tIndex = el.getAttribute('tabindex');\n\n      if (this.direction !== dir) {\n        this.direction = dir;\n      }\n\n      if (this.tabIndex !== tIndex) {\n        this.tabIndex = tIndex;\n      }\n\n      this._htmlAttributes = attributes;\n    }\n\n    get htmlAttributes() {\n      return this._htmlAttributes;\n    }\n    /**\n     * @hidden\n     */\n\n\n    set cssClass(classes) {\n      this.setServiceClasses(this._cssClass, classes);\n      this._cssClass = classes;\n    }\n\n    get cssClass() {\n      return this._cssClass;\n    }\n\n    get dir() {\n      return this.direction;\n    }\n\n    ngAfterContentInit() {\n      this.bubble('close', this.titlebarContent.first);\n      this.renderer.setAttribute(this.wrapper.nativeElement.querySelector('.k-dialog'), 'aria-describedby', this.contentId);\n\n      if (this.titlebarContent.first) {\n        this.titlebarContent.first.id = this.titleId;\n      } else {\n        this.subscriptions.push(this.titlebarContent.changes.subscribe(() => {\n          if (isPresent(this.titlebarContent.first)) {\n            this.titlebarContent.first.id = this.titleId;\n            this.ngZone.onStable.pipe(take(1)).subscribe(() => {\n              this.bubble('close', this.titlebarContent.first);\n              this.renderer.setAttribute(this.wrapper.nativeElement.querySelector('.k-dialog'), 'aria-labelledby', this.titleId);\n            });\n          }\n        }));\n      }\n    }\n\n    ngAfterViewInit() {\n      this.handleInitialFocus();\n      this.bubble('close', this.titlebarView.first);\n      this.bubble('action', this.actionsView);\n\n      if (this.titlebarView.first || this.titlebarContent.first) {\n        //Needed for Dialogs created via service\n        this.renderer.setAttribute(this.wrapper.nativeElement.querySelector('.k-dialog'), 'aria-labelledby', this.titleId);\n      } else {\n        this.subscriptions.push(this.titlebarView.changes.subscribe(() => {\n          if (isPresent(this.titlebarView.first)) {\n            this.titlebarView.first.id = this.titleId;\n            this.ngZone.onStable.pipe(take(1)).subscribe(() => {\n              this.bubble('close', this.titlebarView.first);\n              this.renderer.setAttribute(this.wrapper.nativeElement.querySelector('.k-dialog'), 'aria-labelledby', this.titleId);\n            });\n          }\n        }));\n      }\n\n      this.initDomEvents();\n    }\n\n    ngOnInit() {\n      this.renderer.removeAttribute(this.wrapper.nativeElement, 'title');\n      this.cdr.detectChanges();\n    }\n\n    ngOnDestroy() {\n      this.subscriptions.forEach(s => s.unsubscribe());\n      this.subscriptions = [];\n\n      if (this.domSubs) {\n        this.domSubs.unsubscribe();\n      }\n    }\n    /**\n     * Focuses the wrapper of the Dialog component.\n     */\n\n\n    focus() {\n      const wrapper = this.wrapper.nativeElement;\n\n      if (isPresent(wrapper)) {\n        wrapper.focus();\n      }\n    }\n\n    initDomEvents() {\n      if (!this.wrapper) {\n        return;\n      }\n\n      this.ngZone.runOutsideAngular(() => {\n        this.domSubs.add(this.renderer.listen(this.wrapper.nativeElement, 'keydown', ev => {\n          this.onKeyDown(ev);\n        }));\n      });\n    }\n\n    onKeyDown(event) {\n      const target = event.target;\n      const parent = target.parentElement;\n\n      if (hasClasses(target, DIALOG_ELEMENTS_HANDLING_ESC_KEY) || hasClasses(parent, DIALOG_ELEMENTS_HANDLING_ESC_KEY)) {\n        if (event.keyCode === Keys.esc) {\n          this.ngZone.run(() => {\n            this.close.emit(new DialogCloseResult());\n          });\n        }\n      }\n\n      if (hasClasses(target, 'k-button') && hasClasses(parent, DIALOG_ELEMENTS_HANDLING_ARROWS) && (event.keyCode === Keys.left || event.keyCode === Keys.right)) {\n        this.ngZone.run(() => {\n          this.handleActionButtonFocus(parent, event.keyCode);\n        });\n      }\n\n      if (event.keyCode === Keys.tab) {\n        this.ngZone.run(() => {\n          this.keepFocusWithinComponent(target, event);\n        });\n      }\n    }\n\n    setServiceClasses(prevValue, value) {\n      const el = this.wrapper.nativeElement;\n\n      if (prevValue) {\n        parseCSSClassNames(prevValue).forEach(className => {\n          this.renderer.removeClass(el, className);\n        });\n      }\n\n      if (value) {\n        parseCSSClassNames(value).forEach(className => {\n          this.renderer.addClass(el, className);\n        });\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    handleInitialFocus() {\n      const wrapper = this.wrapper.nativeElement;\n      const primaryButton = wrapper.querySelector('.k-primary');\n\n      if (this.autoFocusedElement) {\n        const initiallyFocusedElement = wrapper.querySelector(this.autoFocusedElement);\n\n        if (initiallyFocusedElement) {\n          initiallyFocusedElement.focus();\n        }\n      } else if (this.shouldFocusPrimary(primaryButton)) {\n        primaryButton.focus();\n      } else {\n        wrapper.focus();\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    handleActionButtonFocus(parent, key) {\n      const focusableActionButtons = this.getAllFocusableChildren(parent);\n\n      for (let i = 0; i < focusableActionButtons.length; i++) {\n        const current = focusableActionButtons[i];\n\n        if (current === document.activeElement) {\n          if (key === Keys.left && i > 0) {\n            focusableActionButtons[i - 1].focus();\n            break;\n          }\n\n          if (key === Keys.right && i < focusableActionButtons.length - 1) {\n            focusableActionButtons[i + 1].focus();\n            break;\n          }\n        }\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    keepFocusWithinComponent(target, event) {\n      const wrapper = this.wrapper.nativeElement;\n      const [firstFocusable, lastFocusable] = this.getFirstAndLastFocusable(wrapper);\n      const tabAfterLastFocusable = !event.shiftKey && target === lastFocusable;\n      const shiftTabAfterFirstFocusable = event.shiftKey && target === firstFocusable;\n\n      if (tabAfterLastFocusable) {\n        event.preventDefault();\n        firstFocusable.focus();\n      }\n\n      if (shiftTabAfterFirstFocusable) {\n        event.preventDefault();\n        lastFocusable.focus();\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    shouldFocusPrimary(el) {\n      return isPresent(el) && isFocusable(el);\n    }\n    /**\n     * @hidden\n     */\n\n\n    getAllFocusableChildren(parent) {\n      return parent.querySelectorAll(focusableSelector);\n    }\n    /**\n     * @hidden\n     */\n\n\n    getFirstAndLastFocusable(parent) {\n      const all = this.getAllFocusableChildren(parent);\n      const firstFocusable = all.length > 0 ? all[0] : parent;\n      const lastFocusable = all.length > 0 ? all[all.length - 1] : parent;\n      return [firstFocusable, lastFocusable];\n    }\n    /**\n     * @hidden\n     */\n\n\n    generateTitleId() {\n      return 'kendo-dialog-title-' + Math.ceil(Math.random() * 1000000).toString();\n    }\n    /**\n     * @hidden\n     */\n\n\n    generateContentId() {\n      return 'kendo-dialog-content-' + Math.ceil(Math.random() * 1000000).toString();\n    }\n\n    get wrapperClass() {\n      return true;\n    }\n\n    get styles() {\n      const styles = {};\n\n      if (this.width) {\n        styles.width = createValueWithUnit(this.width);\n      }\n\n      if (this.height) {\n        styles.height = createValueWithUnit(this.height);\n      }\n\n      if (this.minWidth) {\n        styles.minWidth = createValueWithUnit(this.minWidth);\n      }\n\n      if (this.maxWidth) {\n        styles.maxWidth = createValueWithUnit(this.maxWidth);\n      }\n\n      if (this.minHeight) {\n        styles.minHeight = createValueWithUnit(this.minHeight);\n      }\n\n      if (this.maxHeight) {\n        styles.maxHeight = createValueWithUnit(this.maxHeight);\n      }\n\n      return styles;\n    }\n\n    bubble(eventName, component) {\n      if (component) {\n        const emit = e => this[eventName].emit(e);\n\n        const s = component[eventName].subscribe(emit);\n        this.subscriptions.push(s);\n      }\n    }\n\n  };\n\n  DialogComponent.ɵfac = function DialogComponent_Factory(t) {\n    return new (t || DialogComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone));\n  };\n\n  DialogComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: DialogComponent,\n    selectors: [[\"kendo-dialog\"]],\n    contentQueries: function DialogComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, DialogTitleBarComponent, 4);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.titlebarContent = _t);\n      }\n    },\n    viewQuery: function DialogComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(DialogActionsComponent, 5);\n        ɵngcc0.ɵɵviewQuery(DialogTitleBarComponent, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.actionsView = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.titlebarView = _t);\n      }\n    },\n    hostVars: 4,\n    hostBindings: function DialogComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"tabIndex\", ctx.tabIndex)(\"dir\", ctx.dir);\n        ɵngcc0.ɵɵclassProp(\"k-dialog-wrapper\", ctx.wrapperClass);\n      }\n    },\n    inputs: {\n      actionsLayout: \"actionsLayout\",\n      actions: \"actions\",\n      autoFocusedElement: \"autoFocusedElement\",\n      title: \"title\",\n      width: \"width\",\n      minWidth: \"minWidth\",\n      maxWidth: \"maxWidth\",\n      height: \"height\",\n      minHeight: \"minHeight\",\n      maxHeight: \"maxHeight\"\n    },\n    outputs: {\n      action: \"action\",\n      close: \"close\"\n    },\n    exportAs: [\"kendoDialog\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([LocalizationService, {\n      provide: DIALOG_LOCALIZATION_SERVICE,\n      useExisting: LocalizationService\n    }, {\n      provide: L10N_PREFIX,\n      useValue: 'kendo.dialog'\n    }])],\n    ngContentSelectors: _c6,\n    decls: 10,\n    vars: 10,\n    consts: function () {\n      let i18n_3;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\n         * @desc The title of the close button\n         * @meaning kendo.dialog.closeTitle\n         */\n        const MSG_EXTERNAL_7499923323865444383$$DIST_FESM2015_INDEX_JS_4 = goog.getMsg(\"Close\");\n        i18n_3 = MSG_EXTERNAL_7499923323865444383$$DIST_FESM2015_INDEX_JS_4;\n      } else {\n        i18n_3 = $localize`:kendo.dialog.closeTitle|The title of the close button␟9b2bd34897f127e69e5f02f64692fca98a5a7572␟7499923323865444383:Close`;\n      }\n\n      return [[\"kendoDialogLocalizedMessages\", \"\", \"closeTitle\", i18n_3], [1, \"k-overlay\"], [\"role\", \"dialog\", \"aria-modal\", \"true\", 1, \"k-window\", \"k-dialog\", 3, \"ngStyle\"], [3, \"closeTitle\", \"id\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"k-content\", \"k-window-content\", \"k-dialog-content\", 3, \"id\"], [3, \"actions\", \"layout\", 4, \"ngIf\"], [3, \"closeTitle\", \"id\"], [3, \"ngTemplateOutlet\"], [3, \"actions\", \"layout\"]];\n    },\n    template: function DialogComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c5);\n        ɵngcc0.ɵɵelementContainerStart(0, 0);\n        ɵngcc0.ɵɵelement(1, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"div\", 2);\n        ɵngcc0.ɵɵtemplate(3, DialogComponent_kendo_dialog_titlebar_3_Template, 2, 3, \"kendo-dialog-titlebar\", 3);\n        ɵngcc0.ɵɵtemplate(4, DialogComponent_ng_content_4_Template, 1, 0, \"ng-content\", 4);\n        ɵngcc0.ɵɵelementStart(5, \"div\", 5);\n        ɵngcc0.ɵɵtemplate(6, DialogComponent_ng_content_6_Template, 1, 0, \"ng-content\", 4);\n        ɵngcc0.ɵɵtemplate(7, DialogComponent_7_Template, 1, 1, undefined, 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(8, DialogComponent_ng_content_8_Template, 1, 0, \"ng-content\", 4);\n        ɵngcc0.ɵɵtemplate(9, DialogComponent_kendo_dialog_actions_9_Template, 1, 2, \"kendo-dialog-actions\", 6);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementContainerEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"@overlayAppear\", undefined);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngStyle\", ctx.styles)(\"@dialogSlideInAppear\", undefined);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.title);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.title);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"id\", ctx.contentId);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.contentTemplate);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.contentTemplate);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.actions);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.actions);\n      }\n    },\n    directives: function () {\n      return [LocalizedMessagesDirective, ɵngcc1.NgStyle, ɵngcc1.NgIf, DialogTitleBarComponent, ɵngcc1.NgTemplateOutlet, DialogActionsComponent];\n    },\n    encapsulation: 2,\n    data: {\n      animation: [trigger('overlayAppear', [state('in', style({\n        opacity: 1\n      })), transition('void => *', [style({\n        opacity: 0.1\n      }), animate('.3s cubic-bezier(.2, .6, .4, 1)')])]), trigger('dialogSlideInAppear', [state('in', style({\n        transform: 'translate(0, 0)'\n      })), transition('void => *', [style({\n        transform: 'translate(0, -10%)'\n      }), animate('.3s cubic-bezier(.2, 1, .2, 1)')])])]\n    }\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", Array)], DialogComponent.prototype, \"actions\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], DialogComponent.prototype, \"actionsLayout\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], DialogComponent.prototype, \"autoFocusedElement\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], DialogComponent.prototype, \"title\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], DialogComponent.prototype, \"width\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], DialogComponent.prototype, \"minWidth\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], DialogComponent.prototype, \"maxWidth\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], DialogComponent.prototype, \"height\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], DialogComponent.prototype, \"minHeight\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], DialogComponent.prototype, \"maxHeight\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], DialogComponent.prototype, \"action\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], DialogComponent.prototype, \"close\", void 0);\n\n  __decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], DialogComponent.prototype, \"dir\", null);\n\n  __decorate([HostBinding('attr.tabIndex'), __metadata(\"design:type\", Number)], DialogComponent.prototype, \"tabIndex\", void 0);\n\n  __decorate([ContentChildren(DialogTitleBarComponent, {\n    descendants: false\n  }), __metadata(\"design:type\", QueryList)], DialogComponent.prototype, \"titlebarContent\", void 0);\n\n  __decorate([ViewChildren(DialogTitleBarComponent), __metadata(\"design:type\", QueryList)], DialogComponent.prototype, \"titlebarView\", void 0);\n\n  __decorate([ViewChild(DialogActionsComponent, {\n    static: false\n  }), __metadata(\"design:type\", DialogActionsComponent)], DialogComponent.prototype, \"actionsView\", void 0);\n\n  __decorate([HostBinding('class.k-dialog-wrapper'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], DialogComponent.prototype, \"wrapperClass\", null);\n\n  DialogComponent = __decorate([__metadata(\"design:paramtypes\", [ElementRef, Renderer2, LocalizationService, ChangeDetectorRef, NgZone])], DialogComponent);\n  /**\n   * The base class  which will be extended by a component that is provided as content through `content`\n   * ([see example]({% slug service_dialog %}#toc-passing-title-content-and-actions-as-a-single-component)).\n   */\n\n  return DialogComponent;\n})();\nlet DialogContentBase = /*#__PURE__*/(() => {\n  class DialogContentBase {\n    constructor(dialog) {\n      this.dialog = dialog;\n    }\n    /**\n     * @hidden\n     */\n\n\n    ngAfterViewInit() {\n      if (this.dialogTitleBar) {\n        // when opening component inside dialog with service AND the component has defined its own titlebar\n        this.dialogTitleBar.close.pipe(filter(e => !e.isDefaultPrevented())).subscribe(() => {\n          this.dialog.close();\n        });\n      }\n\n      if (this.dialogActions) {\n        if (this.dialogActions.actions) {\n          this.dialogActions.action.subscribe(action => this.dialog.dialog.instance.action.emit(action));\n        }\n      }\n    }\n\n  }\n\n  DialogContentBase.ɵfac = function DialogContentBase_Factory(t) {\n    ɵngcc0.ɵɵinvalidFactory();\n  };\n\n  DialogContentBase.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: DialogContentBase,\n    viewQuery: function DialogContentBase_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(DialogTitleBarComponent, 5);\n        ɵngcc0.ɵɵviewQuery(DialogActionsComponent, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.dialogTitleBar = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.dialogActions = _t.first);\n      }\n    }\n  });\n\n  __decorate([ViewChild(DialogTitleBarComponent, {\n    static: false\n  }), __metadata(\"design:type\", DialogTitleBarComponent)], DialogContentBase.prototype, \"dialogTitleBar\", void 0);\n\n  __decorate([ViewChild(DialogActionsComponent, {\n    static: false\n  }), __metadata(\"design:type\", DialogActionsComponent)], DialogContentBase.prototype, \"dialogActions\", void 0);\n\n  return DialogContentBase;\n})();\nvar DialogContainerService_1;\n/**\n * @hidden\n */\n\nlet DialogContainerService = DialogContainerService_1 = class DialogContainerService {\n  set container(container) {\n    DialogContainerService_1.container = container;\n  }\n\n  get container() {\n    return DialogContainerService_1.container;\n  }\n\n};\n\nDialogContainerService.ɵfac = function DialogContainerService_Factory(t) {\n  return new (t || DialogContainerService)();\n};\n\nDialogContainerService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n  token: DialogContainerService,\n  factory: function (t) {\n    return DialogContainerService.ɵfac(t);\n  }\n});\nDialogContainerService.container = null;\n\nconst isNotComponent = component => isString(component) || component instanceof TemplateRef;\n\nclass DialogInjector {\n  constructor(getDialogRef, parentInjector) {\n    this.getDialogRef = getDialogRef;\n    this.parentInjector = parentInjector;\n  }\n\n  get(token, notFoundValue) {\n    if (token === DialogRef) {\n      return this.getDialogRef();\n    }\n\n    return this.parentInjector.get(token, notFoundValue);\n  }\n\n}\n/**\n * A service for opening Dialog windows dynamically\n * ([see example]({% slug service_dialog %})).\n */\n\n\nlet DialogService = /*#__PURE__*/(() => {\n  let DialogService = class DialogService {\n    constructor(\n    /**\n     * @hidden\n     */\n    resolver, containerService) {\n      this.resolver = resolver;\n      this.containerService = containerService;\n    }\n    /**\n     * Opens a Dialog window. Requires an element in the application that uses the\n     * [`kendoDialogContainer`]({% slug api_dialog_dialogcontainerdirective %}) directive.\n     * Created Dialogs will be mounted in the DOM directly after that element.\n     *\n     * @param {DialogAction} options - The options that define the Dialog.\n     * @returns {DialogRef} - A reference to the Dialog object and the convenience properties.\n     *\n     * @example\n     *\n     * ```ts-no-run\n     * _@Component({\n     *   selector: 'my-app',\n     *   template: `\n     *     <button kendoButton (click)=\"open()\">Harmless button</button>\n     *     <div kendoDialogContainer></div>\n     *   `\n     * })\n     * export class AppComponent {\n     *     constructor( private dialogService: DialogService ) {}\n     *\n     *     public open() {\n     *         var dialog = this.dialogService.open({\n     *           title: \"Please confirm\",\n     *           content: \"Are you sure?\",\n     *           actions: [\n     *             { text: \"No\" },\n     *             { text: \"Yes\", primary: true }\n     *           ]\n     *         });\n     *\n     *         dialog.result.subscribe((result) => {\n     *           if (result instanceof DialogCloseResult) {\n     *             console.log(\"close\");\n     *           } else {\n     *             console.log(\"action\", result);\n     *           }\n     *         });\n     *     }\n     * }\n     * ```\n     *\n     */\n\n\n    open(options) {\n      const factory = this.resolver.resolveComponentFactory(DialogComponent);\n      const container = options.appendTo || this.containerService.container;\n\n      if (!container) {\n        throw new Error(`\nCannot attach dialog to the page.\nAdd an element that uses the kendoDialogContainer directive, or set the 'appendTo' property.\nSee https://www.telerik.com/kendo-angular-ui/components/dialogs/dialog/service/.\n          `);\n      } // create DialogRef to (1) pass as result, (2) provide through injector\n\n\n      const dialogRef = {\n        close: () => {\n          /* noop */\n        },\n        content: null,\n        dialog: null,\n        result: null\n      };\n      return this.initializeDialog(options.content, factory, container, dialogRef, options);\n    }\n\n    initializeDialog(component, factory, container, dialogRef, options) {\n      const content = this.contentFrom(component, container, dialogRef);\n      const dialog = container.createComponent(factory, undefined, undefined, content.nodes);\n      dialogRef.dialog = dialog;\n      dialog.changeDetectorRef.markForCheck(); // copy @Input options to dialog instance\n\n      this.applyOptions(dialog.instance, options); // create close handler and result stream\n\n      const apiClose = new Subject();\n\n      const close = e => {\n        if (e instanceof PreventableEvent) {\n          e = new DialogCloseResult();\n        }\n\n        apiClose.next(e || new DialogCloseResult());\n\n        if (content.componentRef) {\n          content.componentRef.destroy();\n        }\n\n        dialog.destroy();\n      };\n\n      const result = merge(apiClose, // triggered when the titlebar or actions are defined in DialogSettings\n      merge(dialog.instance.close, dialog.instance.action).pipe(map(e => e instanceof PreventableEvent ? new DialogCloseResult() : e), filter(e => {\n        if (options.preventAction) {\n          // add dialogRef only when using component\n          const dialogRefParameter = isNotComponent(component) ? undefined : dialogRef;\n          return !options.preventAction(e, dialogRefParameter);\n        }\n\n        return true;\n      }))).pipe(take(1), // Takes care for multiple subscriptions:\n      // We subscribe internaly and the user may subscribe to get a close result - dialog.result.subscribe().\n      // This causes multiple subscriptions to the same source and thus multiple emissions. share() solves that.\n      share());\n      result.subscribe(close);\n      dialogRef.close = close;\n      dialogRef.result = result;\n\n      if (component && isDevMode()) {\n        const hasContentTitle = content.nodes[0] && content.nodes[0].length > 0;\n        const hasContentActions = content.nodes[2] && content.nodes[2].length > 0;\n        const multipleTitles = options.title && hasContentTitle;\n        const multipleActions = options.actions && hasContentActions;\n\n        if (component.prototype instanceof DialogContentBase) {\n          // content component extends DialogContentBase\n          if (multipleTitles || multipleActions) {\n            console.warn(`\n                    Multiple Title and/or Actions configurations detected.\n                    When using a component as content, provide the title and actions either in the component's markup\n                    or via the title and actions properties of the DialogSettings object, but not both.\n                    See https://www.telerik.com/kendo-angular-ui/components/dialogs/dialog/service/#toc-passing-title-content-and-actions-as-a-single-component'`);\n          }\n        } else {\n          if (hasContentTitle || hasContentActions) {\n            console.warn(`\n                    When Title and/or Actions markup is provided in content component's template,\n                    the component needs to inherit the DialogContentBase class to ensure that close and result events are properly hooked.\n                    See https://www.telerik.com/kendo-angular-ui/components/dialogs/dialog/service/#toc-passing-title-content-and-actions-as-a-single-component'`);\n          }\n        }\n      }\n\n      return dialogRef;\n    }\n\n    applyOptions(instance, options) {\n      instance.title = options.title;\n      instance.actions = options.actions;\n      instance.actionsLayout = options.actionsLayout || 'stretched';\n      instance.width = options.width;\n      instance.minWidth = options.minWidth;\n      instance.maxWidth = options.maxWidth;\n      instance.height = options.height;\n      instance.minHeight = options.minHeight;\n      instance.maxHeight = options.maxHeight;\n      instance.autoFocusedElement = options.autoFocusedElement;\n      instance.closeTitle = options.closeTitle;\n      instance.cssClass = options.cssClass;\n      instance.htmlAttributes = options.htmlAttributes;\n\n      if (options.content instanceof TemplateRef) {\n        instance.contentTemplate = options.content;\n      }\n    }\n\n    contentFrom(content, container, dialogRef) {\n      const renderer = container.injector.get(Renderer2);\n      let nodes = [];\n      let titleNodes = [];\n      let actionNodes = [];\n      let componentRef = null;\n\n      if (typeof content === 'string') {\n        nodes = [renderer.createText(content)];\n      } else if (content && !(content instanceof TemplateRef)) {\n        // Component\n        const injector = new DialogInjector(() => dialogRef, container.injector);\n        const factory = this.resolver.resolveComponentFactory(content);\n        componentRef = container.createComponent(factory, undefined, injector);\n        titleNodes = Array.from(componentRef.location.nativeElement.querySelectorAll('kendo-dialog-titlebar'));\n        nodes = [componentRef.location.nativeElement];\n        actionNodes = Array.from(componentRef.location.nativeElement.querySelectorAll('kendo-dialog-actions'));\n        dialogRef.content = componentRef;\n      }\n\n      return {\n        componentRef,\n        nodes: [titleNodes, nodes, actionNodes // <ng-content select=\"kendo-dialog-actions\">\n        ]\n      };\n    }\n\n  };\n\n  DialogService.ɵfac = function DialogService_Factory(t) {\n    return new (t || DialogService)(ɵngcc0.ɵɵinject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵinject(DialogContainerService));\n  };\n\n  DialogService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: DialogService,\n    factory: function (t) {\n      return DialogService.ɵfac(t);\n    }\n  });\n  DialogService = __decorate([__param(1, Inject(DialogContainerService)), __metadata(\"design:paramtypes\", [ComponentFactoryResolver, DialogContainerService])], DialogService);\n  /**\n   * @hidden\n   */\n\n  return DialogService;\n})();\nlet newZIndex = 10002;\n/**\n * @hidden\n */\n\nconst DEFAULT_OPTIONS = {\n  draggable: true,\n  height: null,\n  left: null,\n  minHeight: 100,\n  minWidth: 120,\n  position: 'absolute',\n  resizable: true,\n  state: 'default',\n  top: null,\n  width: null\n};\n/**\n * @hidden\n */\n\nconst createMoveStream = (el, ev) => mouseDown => {\n  return el.kendoDrag.pipe(takeUntil(el.kendoRelease.pipe(tap(() => {\n    ev.emit();\n  }))), map(({\n    pageX,\n    pageY\n  }) => ({\n    originalX: mouseDown.pageX,\n    originalY: mouseDown.pageY,\n    pageX,\n    pageY\n  })));\n};\n/**\n * @hidden\n */\n\n\nlet DragResizeService = /*#__PURE__*/(() => {\n  let DragResizeService = class DragResizeService {\n    constructor(ngZone) {\n      this.ngZone = ngZone;\n      this.close = new EventEmitter();\n      this.focus = new EventEmitter();\n      this.change = new EventEmitter();\n      this.stateChange = new EventEmitter();\n      this.dragStart = new EventEmitter();\n      this.dragEnd = new EventEmitter();\n      this.resizeStart = new EventEmitter();\n      this.resizeEnd = new EventEmitter();\n      this.options = Object.assign({}, DEFAULT_OPTIONS);\n      this.lastAction = null;\n      this.subscriptions = new Subscription();\n      this.dragSubscription = new Subscription();\n    }\n\n    ngOnDestroy() {\n      if (this.subscriptions) {\n        this.subscriptions.unsubscribe();\n      }\n\n      if (this.dragSubscription) {\n        this.dragSubscription.unsubscribe();\n      }\n    }\n\n    init(el) {\n      const state$$1 = this.options.state;\n      let options = this.options;\n      this.window = el;\n\n      if (state$$1 !== 'default') {\n        this.restoreOptions = Object.assign({}, options);\n      }\n\n      if (state$$1 === 'minimized') {\n        options.height = 0;\n        options.minHeight = 0;\n      }\n\n      if (state$$1 === 'maximized') {\n        options.position = 'fixed';\n      }\n    }\n\n    onDrag(el) {\n      this.subscriptions.add(this.ngZone.runOutsideAngular(() => {\n        let startPosition;\n        let dragStarted;\n        this.dragSubscription = el.kendoPress.pipe(tap(ev => {\n          if (!ev.isTouch) {\n            preventDefault(ev);\n          }\n\n          this.focus.emit();\n          startPosition = this.currentPosition();\n          dragStarted = false;\n        }), switchMap(createMoveStream(el, this.dragEnd))).subscribe(({\n          pageX,\n          pageY,\n          originalX,\n          originalY\n        }) => {\n          if (!dragStarted) {\n            this.ensureWidth();\n            this.dragStart.emit();\n            dragStarted = true;\n          }\n\n          this.handleDrag({\n            originalX,\n            originalY,\n            pageX,\n            pageY,\n            startPosition\n          });\n        });\n      }));\n    }\n\n    handleDrag({\n      originalX,\n      originalY,\n      pageX,\n      pageY,\n      startPosition\n    }) {\n      this.options.left = startPosition.x + pageX - originalX;\n      this.options.top = startPosition.y + pageY - originalY;\n\n      if (this.options.state === 'minimized' && isPresent(this.restoreOptions)) {\n        this.restoreOptions.left = this.options.left;\n        this.restoreOptions.top = this.options.top;\n      }\n\n      this.change.emit({\n        left: startPosition.x + pageX - originalX,\n        top: startPosition.y + pageY - originalY\n      });\n    }\n\n    onResize(handle, direction) {\n      this.subscriptions.add(this.ngZone.runOutsideAngular(() => {\n        let startOffsetAndPosition;\n        let resizeStarted = false;\n        handle.kendoPress.pipe(tap(ev => {\n          preventDefault(ev);\n          this.focus.emit();\n          startOffsetAndPosition = this.currentOffsetAndPosition();\n          resizeStarted = false;\n        }), switchMap(createMoveStream(handle, this.resizeEnd))).subscribe(({\n          pageX,\n          pageY,\n          originalX,\n          originalY\n        }) => {\n          if (!resizeStarted) {\n            this.resizeStart.emit(direction);\n            resizeStarted = true;\n          }\n\n          let deltaX = pageX - originalX;\n          let deltaY = pageY - originalY;\n          this.handleResize(startOffsetAndPosition, direction, deltaX, deltaY);\n        });\n      }));\n    }\n\n    handleResize(initial, dir, deltaX, deltaY) {\n      const old = this.options;\n      let ev = {};\n\n      if (dir.indexOf('e') >= 0) {\n        const newWidth = initial.width + deltaX;\n\n        if (newWidth !== old.width && newWidth >= old.minWidth) {\n          ev.width = newWidth;\n        }\n      }\n\n      if (dir.indexOf('n') >= 0) {\n        const newHeight = initial.height - deltaY;\n        const newTop = initial.y + deltaY;\n\n        if (newHeight !== old.height && newHeight >= old.minHeight && newTop !== old.top) {\n          ev.height = newHeight;\n          ev.top = newTop;\n        }\n      }\n\n      if (dir.indexOf('s') >= 0) {\n        const newHeight = initial.height + deltaY;\n\n        if (newHeight !== old.height && newHeight >= old.minHeight) {\n          ev.height = newHeight;\n        }\n      }\n\n      if (dir.indexOf('w') >= 0) {\n        const newLeft = initial.x + deltaX;\n        const newWidth = initial.width - deltaX;\n\n        if (newWidth !== old.width && newWidth >= old.minWidth && newLeft !== old.left) {\n          ev.width = newWidth;\n          ev.left = newLeft;\n        }\n      }\n\n      if (isPresent(ev.width) || isPresent(ev.height)) {\n        OFFSET_STYLES.forEach(style$$1 => {\n          if (isPresent(ev[style$$1])) {\n            this.options[style$$1] = ev[style$$1];\n          }\n        });\n        this.change.emit(ev);\n      }\n    }\n\n    restoreAction() {\n      this.lastAction = 'restore';\n      this.defaultState();\n    }\n\n    defaultState() {\n      if (isPresent(this.restoreOptions)) {\n        this.options = Object.assign({}, this.restoreOptions);\n      }\n\n      this.options.state = 'default';\n      this.stateChange.emit('default');\n    }\n\n    storeOptions() {\n      this.restoreOptions = Object.assign({}, this.options);\n    }\n\n    maximizeAction() {\n      this.lastAction = 'maximize';\n      this.maximizeState();\n    }\n\n    maximizeState() {\n      this.storeOptions();\n      const wnd = this.windowViewPort;\n      this.options = Object.assign({}, this.options, {\n        height: wnd.height,\n        left: 0,\n        position: 'fixed',\n        state: 'maximized',\n        top: 0,\n        width: wnd.width\n      });\n      this.stateChange.emit('maximized');\n    }\n\n    minimizeAction() {\n      this.lastAction = 'minimize';\n      this.minimizeState();\n    }\n\n    minimizeState() {\n      this.storeOptions();\n      this.options = Object.assign({}, this.options, {\n        height: null,\n        minHeight: 0,\n        state: 'minimized'\n      });\n      this.stateChange.emit('minimized');\n    }\n    /**\n     * Handles manual changes of the 'state' property.\n     * Required to distinguish them from action clicks.\n     */\n\n\n    applyManualState() {\n      const state$$1 = this.options.state;\n\n      switch (state$$1) {\n        case 'default':\n          this.clearHeight();\n          this.defaultState();\n          break;\n\n        case 'maximized':\n          this.clearHeight();\n          this.maximizeState();\n          break;\n\n        case 'minimized':\n          this.minimizeState();\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    closeAction() {\n      this.close.emit();\n    }\n\n    ensureWidth() {\n      const windowOffset = offset(this.window.nativeElement);\n\n      if (!isPresent(this.options.width)) {\n        this.options.width = windowOffset.width;\n        this.change.emit({\n          width: windowOffset.width\n        });\n      }\n    }\n\n    clearHeight() {\n      if (this.options.height === 0) {\n        delete this.options.height;\n      }\n\n      if (this.options.minHeight === 0) {\n        delete this.options.minHeight;\n      }\n    }\n\n    center() {\n      if (this.options.state === 'maximized') {\n        return;\n      }\n\n      let scroll = scrollPosition(this.window.nativeElement);\n      let wnd = this.windowViewPort;\n      let wrapper = offset(this.window.nativeElement);\n      let ev = {};\n\n      if (!isPresent(this.options.left)) {\n        this.options.left = scroll.x + Math.max(0, (wnd.width - wrapper.width) / 2);\n        ev.left = this.options.left;\n      }\n\n      if (!isPresent(this.options.top)) {\n        this.options.top = scroll.y + Math.max(0, (wnd.height - wrapper.height) / 2);\n        ev.top = this.options.top;\n      }\n\n      this.change.emit(ev);\n    }\n\n    currentOffsetAndPosition() {\n      const o = this.options;\n      const off = offset(this.window.nativeElement);\n      return Object.assign({}, this.currentPosition(), {\n        height: o.height ? o.height : off.height,\n        width: o.width ? o.width : off.width\n      });\n    }\n\n    currentPosition() {\n      const o = this.options;\n\n      if (!o.top || !o.left) {\n        this.setPosition();\n      }\n\n      return {\n        x: this.options.left,\n        y: this.options.top\n      };\n    }\n\n    setPosition() {\n      const wrapper = positionWithScroll(this.window.nativeElement, getDocumentElement(this.window.nativeElement));\n      this.options.left = wrapper.left;\n      this.options.top = wrapper.top;\n    }\n\n    setRestoreOption(style$$1, value) {\n      if (isPresent(this.restoreOptions)) {\n        this.restoreOptions[style$$1] = value;\n      }\n    }\n\n    get nextPossibleZIndex() {\n      return newZIndex;\n    }\n\n    get nextZIndex() {\n      return newZIndex++;\n    }\n\n    get windowViewPort() {\n      return getWindowViewPort(this.window.nativeElement);\n    }\n\n  };\n\n  DragResizeService.ɵfac = function DragResizeService_Factory(t) {\n    return new (t || DragResizeService)(ɵngcc0.ɵɵinject(ɵngcc0.NgZone));\n  };\n\n  DragResizeService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: DragResizeService,\n    factory: function (t) {\n      return DragResizeService.ɵfac(t);\n    }\n  });\n  DragResizeService = __decorate([__metadata(\"design:paramtypes\", [NgZone])], DragResizeService);\n  /**\n   * @hidden\n   */\n\n  return DragResizeService;\n})();\nlet ResizeHandleDirective = /*#__PURE__*/(() => {\n  let ResizeHandleDirective = class ResizeHandleDirective {\n    constructor(draggable, el, renderer, service) {\n      this.draggable = draggable;\n      this.el = el;\n      this.renderer = renderer;\n      this.service = service;\n      this.subscriptions = new Subscription();\n    }\n\n    get hostClass() {\n      return true;\n    }\n\n    ngOnInit() {\n      this.setDisplay();\n      this.renderer.addClass(this.el.nativeElement, 'k-resize-' + this.direction);\n      this.subscriptions.add(of(this.draggable).subscribe(handle => {\n        this.service.onResize(handle, this.direction);\n      }));\n      this.subscriptions.add(this.service.resizeStart.subscribe(dir => {\n        if (dir !== this.direction) {\n          this.setDisplay('none');\n        }\n      }));\n      this.subscriptions.add(this.service.dragStart.subscribe(() => {\n        this.setDisplay('none');\n      }));\n      this.subscriptions.add(merge(this.service.resizeEnd, this.service.dragEnd).subscribe(() => {\n        this.setDisplay('block');\n      }));\n      this.subscriptions.add(this.service.stateChange.subscribe(state$$1 => {\n        this.setDisplay(state$$1 === 'default' ? 'block' : 'none');\n      }));\n    }\n\n    ngOnDestroy() {\n      this.subscriptions.unsubscribe();\n    }\n\n    setDisplay(value = 'block') {\n      this.renderer.setStyle(this.el.nativeElement, 'display', this.service.options.state === 'default' ? value : 'none');\n    }\n\n  };\n\n  ResizeHandleDirective.ɵfac = function ResizeHandleDirective_Factory(t) {\n    return new (t || ResizeHandleDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc3.DraggableDirective, 1), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(DragResizeService));\n  };\n\n  ResizeHandleDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: ResizeHandleDirective,\n    selectors: [[\"\", \"kendoWindowResizeHandle\", \"\"]],\n    hostVars: 2,\n    hostBindings: function ResizeHandleDirective_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"k-resize-handle\", ctx.hostClass);\n      }\n    },\n    inputs: {\n      direction: \"direction\"\n    }\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", String)], ResizeHandleDirective.prototype, \"direction\", void 0);\n\n  __decorate([HostBinding('class.k-resize-handle'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], ResizeHandleDirective.prototype, \"hostClass\", null);\n\n  ResizeHandleDirective = __decorate([__param(0, Host()), __metadata(\"design:paramtypes\", [DraggableDirective, ElementRef, Renderer2, DragResizeService])], ResizeHandleDirective);\n  return ResizeHandleDirective;\n})();\nlet WindowTitleBarComponent = /*#__PURE__*/(() => {\n  let WindowTitleBarComponent = class WindowTitleBarComponent {\n    constructor(el, service, ngZone) {\n      this.el = el;\n      this.ngZone = ngZone;\n      this.service = service;\n    }\n\n    ngOnInit() {\n      this.dragDirective = new DraggableDirective(this.el, this.ngZone);\n      this.dragDirective.ngOnInit();\n\n      if (this.isDraggable) {\n        this.subscribeDrag();\n      }\n\n      this.subscribeStateChange();\n    }\n\n    ngOnDestroy() {\n      this.dragDirective.ngOnDestroy();\n      this.unsubscribeDrag();\n      this.unsubscribeState();\n    }\n    /**\n     * @hidden\n     */\n\n\n    subscribeDrag() {\n      this.unsubscribeDrag();\n      this.dragSubscription = of(this.dragDirective).subscribe(titleBar => {\n        this.service.onDrag(titleBar);\n      });\n    }\n    /**\n     * @hidden\n     */\n\n\n    subscribeStateChange() {\n      this.stateSubscription = this.service.stateChange.subscribe(state$$1 => {\n        if (this.service.options.draggable) {\n          if (state$$1 === 'maximized') {\n            this.unsubscribeDrag();\n          } else {\n            this.subscribeDrag();\n          }\n        }\n      });\n    }\n    /**\n     * @hidden\n     */\n\n\n    unsubscribeDrag() {\n      if (this.dragSubscription) {\n        this.service.dragSubscription.unsubscribe();\n        this.dragSubscription.unsubscribe();\n        this.dragSubscription = null;\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    unsubscribeState() {\n      if (this.stateSubscription) {\n        this.stateSubscription.unsubscribe();\n        this.stateSubscription = null;\n      }\n    }\n\n    get className() {\n      return true;\n    }\n\n    get touchAction() {\n      if (this.isDraggable) {\n        return 'none';\n      }\n    }\n    /**\n     * @hidden\n     */\n\n\n    handle(ev) {\n      const target = ev.target;\n      const state$$1 = this.service.options.state;\n\n      if (!hasClasses(target, 'k-icon') && !isFocusable(target, false) && this.service.options.resizable) {\n        if (state$$1 === 'default') {\n          this.service.maximizeAction();\n        } else if (state$$1 === 'maximized') {\n          this.service.restoreAction();\n        }\n      }\n    }\n\n    get isDraggable() {\n      const options = this.service.options;\n      return options.draggable && options.state !== 'maximized';\n    }\n\n  };\n\n  WindowTitleBarComponent.ɵfac = function WindowTitleBarComponent_Factory(t) {\n    return new (t || WindowTitleBarComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(DragResizeService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone));\n  };\n\n  WindowTitleBarComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: WindowTitleBarComponent,\n    selectors: [[\"kendo-window-titlebar\"]],\n    hostVars: 6,\n    hostBindings: function WindowTitleBarComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"dblclick\", function WindowTitleBarComponent_dblclick_HostBindingHandler($event) {\n          return ctx.handle($event);\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵstyleProp(\"touch-action\", ctx.touchAction);\n        ɵngcc0.ɵɵclassProp(\"k-window-titlebar\", ctx.className)(\"k-dialog-titlebar\", ctx.className);\n      }\n    },\n    inputs: {\n      template: \"template\"\n    },\n    ngContentSelectors: _c0,\n    decls: 2,\n    vars: 2,\n    consts: [[4, \"ngIf\"], [3, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"]],\n    template: function WindowTitleBarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵtemplate(0, WindowTitleBarComponent_ng_content_0_Template, 1, 0, \"ng-content\", 0);\n        ɵngcc0.ɵɵtemplate(1, WindowTitleBarComponent_1_Template, 1, 4, undefined, 0);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.template);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.template);\n      }\n    },\n    directives: [ɵngcc1.NgIf, ɵngcc1.NgTemplateOutlet],\n    encapsulation: 2\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", TemplateRef)], WindowTitleBarComponent.prototype, \"template\", void 0);\n\n  __decorate([HostBinding('class.k-window-titlebar'), HostBinding('class.k-dialog-titlebar'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], WindowTitleBarComponent.prototype, \"className\", null);\n\n  __decorate([HostBinding('style.touch-action'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], WindowTitleBarComponent.prototype, \"touchAction\", null);\n\n  __decorate([HostListener('dblclick', ['$event']), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], WindowTitleBarComponent.prototype, \"handle\", null);\n\n  WindowTitleBarComponent = __decorate([__metadata(\"design:paramtypes\", [ElementRef, DragResizeService, NgZone])], WindowTitleBarComponent);\n  /**\n   * @hidden\n   */\n\n  return WindowTitleBarComponent;\n})();\nlet NavigationService = /*#__PURE__*/(() => {\n  let NavigationService = class NavigationService {\n    constructor(window, ngZone) {\n      this.window = window;\n      this.ngZone = ngZone;\n    }\n\n    process(ev) {\n      const key = ev.keyCode;\n\n      switch (key) {\n        case Keys.up:\n        case Keys.down:\n        case Keys.left:\n        case Keys.right:\n          {\n            ev.preventDefault();\n            this.ngZone.run(() => {\n              this.handleArrow(key, ev);\n            });\n            break;\n          }\n\n        case Keys.esc:\n          this.ngZone.run(() => {\n            this.handleEscape();\n          });\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    handleArrow(key, ev) {\n      const options = this.window.options;\n\n      if (ev.altKey) {\n        this.handleStateChange(key, options.state);\n        return;\n      }\n\n      if ((ev.ctrlKey || ev.metaKey) && options.state === 'default') {\n        this.handleResize(key);\n      } else {\n        this.handleDrag(key);\n      }\n    }\n\n    handleEscape() {\n      this.window.closeAction();\n    }\n\n    handleDrag(key) {\n      let options = this.window.options;\n\n      if (!options.draggable) {\n        return;\n      }\n\n      const offset$$1 = this.window.currentOffsetAndPosition();\n      let restoreOptions = this.window.restoreOptions;\n      let ev = {};\n      let delta = 10;\n\n      if (key === Keys.left || key === Keys.up) {\n        delta *= -1;\n      }\n\n      switch (key) {\n        case Keys.left:\n        case Keys.right:\n          {\n            ev.left = offset$$1.x + delta;\n            options.left = ev.left;\n            break;\n          }\n\n        case Keys.up:\n        case Keys.down:\n          {\n            ev.top = offset$$1.y + delta;\n            options.top = ev.top;\n            break;\n          }\n\n        default:\n          break;\n      }\n\n      if (options.state === 'minimized' && isPresent(restoreOptions)) {\n        restoreOptions.left = options.left;\n        restoreOptions.top = options.top;\n      }\n\n      this.window.change.emit(ev);\n    }\n\n    handleResize(key) {\n      const options = this.window.options;\n\n      if (!options.resizable) {\n        return;\n      }\n\n      const offset$$1 = this.window.currentOffsetAndPosition();\n      let newWidth;\n      let newHeight;\n      let ev = {};\n      let delta = 10;\n\n      if (key === Keys.left || key === Keys.up) {\n        delta *= -1;\n      }\n\n      switch (key) {\n        case Keys.left:\n        case Keys.right:\n          {\n            newWidth = offset$$1.width + delta;\n\n            if (newWidth !== options.width && newWidth >= options.minWidth) {\n              ev.width = newWidth;\n            }\n\n            break;\n          }\n\n        case Keys.up:\n        case Keys.down:\n          {\n            newHeight = offset$$1.height + delta;\n\n            if (newHeight !== options.height && newHeight >= options.minHeight) {\n              ev.height = newHeight;\n            }\n\n            break;\n          }\n\n        default:\n          break;\n      }\n\n      if (isPresent(ev.width) || isPresent(ev.height)) {\n        OFFSET_STYLES.forEach(style$$1 => {\n          if (isPresent(ev[style$$1])) {\n            this.window.options[style$$1] = ev[style$$1];\n          }\n        });\n        this.window.change.emit(ev);\n      }\n    }\n\n    handleStateChange(key, state$$1) {\n      if (state$$1 === 'minimized' && key === Keys.up || state$$1 === 'maximized' && key === Keys.down) {\n        this.window.restoreAction();\n        return;\n      }\n\n      if (state$$1 === 'default') {\n        if (key === Keys.up) {\n          this.window.maximizeAction();\n        } else if (key === Keys.down) {\n          this.window.minimizeAction();\n        }\n      }\n    }\n\n  };\n\n  NavigationService.ɵfac = function NavigationService_Factory(t) {\n    return new (t || NavigationService)(ɵngcc0.ɵɵinject(DragResizeService), ɵngcc0.ɵɵinject(ɵngcc0.NgZone));\n  };\n\n  NavigationService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NavigationService,\n    factory: function (t) {\n      return NavigationService.ɵfac(t);\n    }\n  });\n  NavigationService = __decorate([__metadata(\"design:paramtypes\", [DragResizeService, NgZone])], NavigationService);\n  /**\n   * Represents the [Kendo UI Window component for Angular]({% slug overview_window_dialogs %}).\n   */\n\n  return NavigationService;\n})();\nlet WindowComponent = /*#__PURE__*/(() => {\n  let WindowComponent = class WindowComponent {\n    constructor(el, renderer, service, navigation, ngZone, localization) {\n      this.el = el;\n      this.renderer = renderer;\n      this.service = service;\n      this.navigation = navigation;\n      this.ngZone = ngZone;\n      this.localization = localization;\n      /**\n       * Specifies if the content of the component is persisted in the DOM when minimized.\n       * @default false\n       */\n\n      this.keepContent = false;\n      /**\n       * Fires when the user starts to move the Window.\n       */\n\n      this.dragStart = new EventEmitter();\n      /**\n       * Fires when the Window was moved by the user.\n       */\n\n      this.dragEnd = new EventEmitter();\n      /**\n       * Fires when the user starts to resize the Window.\n       */\n\n      this.resizeStart = new EventEmitter();\n      /**\n       * Fires when the Window was resized by the user.\n       */\n\n      this.resizeEnd = new EventEmitter();\n      /**\n       * Fires when the user closes the Window.\n       */\n\n      this.close = new EventEmitter();\n      /**\n       * Fires when the `width` property of the component was updated. The event is triggered only after the resizing\n       * has ended. The event data contains the new width. Allows a two-way binding of the `width` property.\n       */\n\n      this.widthChange = new EventEmitter();\n      /**\n       * Fires when the `height` property of the component was updated. The event is triggered only after the resizing\n       * has ended. The event data contains the new height. Allows a two-way binding of the `height` property.\n       */\n\n      this.heightChange = new EventEmitter();\n      /**\n       * Fires when the `top` property of the component was updated. The event is triggered only after the dragging\n       * and resizing have ended. The event data contains the new top offset. Allows a two-way binding of the `top` property.\n       */\n\n      this.topChange = new EventEmitter();\n      /**\n       * Fires when the `left` property of the component was updated. The event is triggered only after the dragging\n       * and resizing have ended. The event data contains the new left offset. Allows a two-way binding of the `left` property.\n       */\n\n      this.leftChange = new EventEmitter();\n      /**\n       * Fires when the `state` property of the component was updated. The event data contains the new state. Allows a\n       * two-way binding of the `state` property.\n       */\n\n      this.stateChange = new EventEmitter();\n      /**\n       * @hidden\n       */\n\n      this.messages = {};\n      this.tabIndex = 0;\n      this.draged = false;\n      this.resized = false;\n      this.windowSubscription = new Subscription();\n      this.domSubs = new Subscription();\n      validatePackage(packageMetadata);\n      this.direction = this.localization.rtl ? 'rtl' : 'ltr';\n      this.localizationChangeSubscription = this.localization.changes.subscribe(({\n        rtl\n      }) => this.direction = rtl ? 'rtl' : 'ltr');\n      this.resizeDirections = RESIZE_DIRECTIONS;\n      this.subscribeEvents();\n    }\n    /**\n     * Specifies whether the user will be able to drag the component.\n     * @default true\n     */\n\n\n    set draggable(value) {\n      this.options.draggable = value;\n    }\n\n    get draggable() {\n      return this.options.draggable;\n    }\n    /**\n     * Specifies whether the user will be able to resize the component.\n     * @default true\n     */\n\n\n    set resizable(value) {\n      this.options.resizable = value;\n    }\n\n    get resizable() {\n      return this.options.resizable;\n    }\n    /**\n     * @hidden\n     */\n\n\n    set cssClass(classes) {\n      this.setServiceClasses(this._cssClass, classes);\n      this._cssClass = classes;\n    }\n\n    get cssClass() {\n      return this._cssClass;\n    }\n    /**\n     * @hidden\n     */\n\n\n    set htmlAttributes(attributes) {\n      setHTMLAttributes(attributes, this.renderer, this.el.nativeElement);\n      const el = this.el.nativeElement;\n      const dir = el.getAttribute('dir');\n      const tIndex = el.getAttribute('tabindex');\n\n      if (this.direction !== dir) {\n        this.direction = dir;\n      }\n\n      if (this.tabIndex !== tIndex) {\n        this.tabIndex = tIndex;\n      }\n\n      this._htmlAttributes = attributes;\n    }\n\n    get htmlAttributes() {\n      return this._htmlAttributes;\n    }\n    /**\n     * Specifies the initial state of the component.\n     * If not specified, the value is set to `default`.\n     *\n     * The possible values are:\n     * * `minimized`\n     * * `maximized`\n     * * `default`\n     */\n\n\n    set state(value) {\n      this.options.state = value;\n    }\n\n    get state() {\n      return this.options.state;\n    }\n    /**\n     * Specifies the minimum width of the component.\n     * The `minWidth` property has to be set in pixels.\n     * @default 120\n     */\n\n\n    set minWidth(value) {\n      this.setOption('minWidth', value);\n    }\n\n    get minWidth() {\n      return this.options.minWidth;\n    }\n    /**\n     * Specifies the minimum height of the Window.\n     * The `minHeight` property has to be set in pixels.\n     * @default 100\n     */\n\n\n    set minHeight(value) {\n      this.setOption('minHeight', value);\n    }\n\n    get minHeight() {\n      return this.options.minHeight;\n    }\n    /**\n     * Specifies the width of the Window.\n     * The `width` property has to be set in pixels.\n     */\n\n\n    set width(value) {\n      this.setOption('width', value);\n    }\n\n    get width() {\n      return this.options.width;\n    }\n    /**\n     * Specifies the height of the Window.\n     * The `height` property has to be set in pixels.\n     */\n\n\n    set height(value) {\n      this.setOption('height', value);\n    }\n\n    get height() {\n      return this.options.height;\n    }\n    /**\n     * Specifies the initial top offset of the Window.\n     * The `top` property has to be set in pixels.\n     */\n\n\n    set top(value) {\n      this.setOption('top', value);\n    }\n\n    get top() {\n      return this.options.top;\n    }\n    /**\n     * Specifies the initial left offset of the Window.\n     * Numeric values are treated as pixels.\n     */\n\n\n    set left(value) {\n      this.setOption('left', value);\n    }\n\n    get left() {\n      return this.options.left;\n    }\n\n    get closeButtonTitle() {\n      if (this.messages && this.messages.closeTitle) {\n        return this.messages.closeTitle;\n      }\n\n      return this.localization.get('closeTitle');\n    }\n\n    get restoreButtonTitle() {\n      if (this.messages && this.messages.restoreTitle) {\n        return this.messages.restoreTitle;\n      }\n\n      return this.localization.get('restoreTitle');\n    }\n\n    get maximizeButtonTitle() {\n      if (this.messages && this.messages.maximizeTitle) {\n        return this.messages.maximizeTitle;\n      }\n\n      return this.localization.get('maximizeTitle');\n    }\n\n    get minimizeButtonTitle() {\n      if (this.messages && this.messages.minimizeTitle) {\n        return this.messages.minimizeTitle;\n      }\n\n      return this.localization.get('minimizeTitle');\n    }\n\n    get hostClasses() {\n      return true;\n    }\n\n    get dir() {\n      return this.direction;\n    }\n\n    ngAfterViewInit() {\n      this.setNextZIndex();\n      this.handleInitialFocus();\n      this.ngZone.runOutsideAngular(() => Promise.resolve(null).then(() => this.setInitialOffset()));\n      this.initDomEvents();\n    }\n\n    ngOnInit() {\n      this.renderer.removeAttribute(this.el.nativeElement, 'title');\n      this.service.init(this.el);\n    }\n\n    ngOnChanges(changes) {\n      OFFSET_STYLES.forEach(style$$1 => {\n        if (isChanged(style$$1, changes)) {\n          this.setStyle(style$$1, this.options[style$$1]);\n        }\n      });\n\n      if (isChanged('draggable', changes)) {\n        const titleBar = isPresent(this.titleBarContent) ? this.titleBarContent : this.titleBarView;\n\n        if (isTruthy(changes.draggable.currentValue)) {\n          titleBar.subscribeDrag();\n        } else {\n          titleBar.unsubscribeDrag();\n        }\n      }\n\n      if (isChanged('state', changes)) {\n        if (isPresent(this.service.lastAction)) {\n          this.service.lastAction = null;\n        } else {\n          this.service.applyManualState();\n          this.updateAllOffset();\n        }\n      }\n    }\n\n    ngOnDestroy() {\n      if (this.windowSubscription) {\n        this.windowSubscription.unsubscribe();\n      }\n\n      if (this.domSubs) {\n        this.domSubs.unsubscribe();\n      }\n\n      this.localizationChangeSubscription.unsubscribe();\n    }\n    /**\n     * Focuses the wrapper of the Window component.\n     */\n\n\n    focus() {\n      const wrapper = this.el.nativeElement;\n\n      if (isPresent(wrapper)) {\n        wrapper.focus();\n      }\n    }\n    /**\n     * Brings the current Window component on top of other Window components on the page.\n     */\n\n\n    bringToFront() {\n      this.setNextZIndex();\n    }\n    /**\n     * Manually updates the `width` or `height` option of the Window.\n     * The required style will be applied to the Window wrapper element and the\n     * corresponding property of the component instance will be updated.\n     * This method is intended to be used for sizing dynamically created components using the\n     * [`WindowService`]({% slug api_dialog_windowservice %})\n     * @param {WindowDimensionSetting} dimension - The option that will be updated\n     * @param {number} value - The value set in pixels\n     */\n\n\n    setDimension(dimension, value) {\n      this.setOption(dimension, value);\n      this.setStyle(dimension, value);\n    }\n    /**\n     * Manually updates the `top` or `left` offset of the Window.\n     * The required style will be applied to the Window wrapper element and the\n     * corresponding property of the component instance will be updated.\n     * This method is intended to be used for positioning dynamically created components using the\n     * [`WindowService`]({% slug api_dialog_windowservice %})\n     * @param {WindowOffsetSetting} offset - The option that will be updated\n     * @param {number} value - The value set in pixels\n     */\n\n\n    setOffset(offset$$1, value) {\n      this.setOption(offset$$1, value);\n      this.setStyle(offset$$1, value);\n    }\n\n    get showDefaultTitleBar() {\n      return !isPresent(this.titleBarContent);\n    }\n\n    get styleMinWidth() {\n      return this.minWidth + 'px';\n    }\n\n    get styleMinHeight() {\n      return this.minHeight + 'px';\n    }\n\n    get stylePosition() {\n      return this.options.position;\n    }\n\n    get wrapperMaximizedClass() {\n      return this.state === 'maximized';\n    }\n\n    get wrapperMinimizedClass() {\n      return this.state === 'minimized';\n    }\n    /**\n     * @hidden\n     */\n\n\n    onComponentFocus() {\n      this.renderer.addClass(this.el.nativeElement, 'k-state-focused');\n      this.setNextZIndex();\n    }\n    /**\n     * @hidden\n     */\n\n\n    onComponentBlur() {\n      this.renderer.removeClass(this.el.nativeElement, 'k-state-focused');\n    }\n\n    subscribeEvents() {\n      if (!isDocumentAvailable()) {\n        return;\n      }\n\n      this.windowSubscription.add(this.service.focus.subscribe(() => {\n        this.el.nativeElement.focus();\n      }));\n      this.windowSubscription.add(this.service.dragStart.subscribe(() => {\n        this.draged = true;\n        this.ngZone.run(() => {\n          this.dragStart.emit();\n        });\n      }));\n      this.windowSubscription.add(this.service.dragEnd.subscribe(() => {\n        if (this.draged) {\n          this.draged = false;\n          this.ngZone.run(() => {\n            this.dragEnd.emit();\n          });\n        }\n      }));\n      this.windowSubscription.add(this.service.close.subscribe(() => {\n        this.close.emit();\n      }));\n      this.windowSubscription.add(this.service.resizeStart.subscribe(() => {\n        this.resized = true;\n        this.ngZone.run(() => {\n          this.resizeStart.emit();\n        });\n      }));\n      this.windowSubscription.add(this.service.resizeEnd.subscribe(() => {\n        if (this.resized) {\n          this.resized = false;\n          this.ngZone.run(() => {\n            this.resizeEnd.emit();\n          });\n        }\n      }));\n      this.windowSubscription.add(this.service.change.subscribe(ev => {\n        OFFSET_STYLES.forEach(style$$1 => {\n          if (isPresent(ev[style$$1])) {\n            this.setStyle(style$$1, ev[style$$1]);\n\n            if (this.state !== 'maximized') {\n              const emitter = this[style$$1 + 'Change'];\n\n              if (emitter.observers.length) {\n                this.ngZone.run(() => {\n                  emitter.emit(ev[style$$1]);\n                });\n              }\n            }\n          }\n        });\n      }));\n      this.windowSubscription.add(this.service.stateChange.subscribe(state$$1 => {\n        if (isPresent(this.service.lastAction)) {\n          this.updateAllOffset();\n          this.stateChange.emit(state$$1);\n        }\n      }));\n    }\n\n    initDomEvents() {\n      if (!this.el) {\n        return;\n      }\n\n      this.ngZone.runOutsideAngular(() => {\n        this.domSubs.add(this.renderer.listen(this.el.nativeElement, 'keydown', ev => {\n          this.onKeyDown(ev);\n        }));\n      });\n    }\n\n    onKeyDown(event) {\n      if (hasClasses(event.target, WINDOW_CLASSES)) {\n        this.navigation.process(event);\n      }\n    }\n\n    setServiceClasses(prevValue, value) {\n      const el = this.el.nativeElement;\n\n      if (prevValue) {\n        parseCSSClassNames(prevValue).forEach(className => {\n          this.renderer.removeClass(el, className);\n        });\n      }\n\n      if (value) {\n        parseCSSClassNames(value).forEach(className => {\n          this.renderer.addClass(el, className);\n        });\n      }\n    }\n\n    setNextZIndex() {\n      const currentZIndex = this.el.nativeElement.style['z-index'];\n      const nextPossibleZIndex = this.service.nextPossibleZIndex;\n\n      if (!currentZIndex || nextPossibleZIndex - currentZIndex > 1) {\n        this.renderer.setStyle(this.el.nativeElement, \"z-index\", this.service.nextZIndex);\n      }\n    }\n\n    setInitialOffset() {\n      if (this.state !== 'maximized') {\n        this.updateAllOffset();\n\n        if (!isPresent(this.left) || !isPresent(this.top)) {\n          this.service.center();\n        }\n      } else {\n        const viewPort = this.service.windowViewPort;\n        this.setStyle('width', viewPort.width);\n        this.setStyle('height', viewPort.height);\n        this.setStyle('top', 0);\n        this.setStyle('left', 0);\n      }\n    }\n\n    updateAllOffset() {\n      OFFSET_STYLES.forEach(style$$1 => {\n        if (isPresent(this[style$$1])) {\n          this.setStyle(style$$1, this[style$$1]);\n        } else {\n          this.removeStyle(style$$1);\n        }\n      });\n    }\n\n    setStyle(style$$1, value) {\n      this.renderer.setStyle(this.el.nativeElement, style$$1, value + 'px');\n    }\n\n    removeStyle(style$$1) {\n      this.renderer.removeStyle(this.el.nativeElement, style$$1);\n    }\n\n    get options() {\n      return this.service.options;\n    }\n\n    setOption(style$$1, value) {\n      if (typeof value !== 'number' && typeof value !== 'string') {\n        return;\n      }\n\n      const parsedValue = typeof value === 'number' ? value : parseInt(value, 10);\n      this.options[style$$1] = parsedValue;\n      this.service.setRestoreOption(style$$1, parsedValue);\n    }\n\n    handleInitialFocus() {\n      const wrapper = this.el.nativeElement;\n\n      if (this.autoFocusedElement) {\n        const initiallyFocusedElement = wrapper.querySelector(this.autoFocusedElement);\n\n        if (initiallyFocusedElement) {\n          initiallyFocusedElement.focus();\n        }\n      } else {\n        this.focus();\n      }\n    }\n\n  };\n\n  WindowComponent.ɵfac = function WindowComponent_Factory(t) {\n    return new (t || WindowComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(DragResizeService), ɵngcc0.ɵɵdirectiveInject(NavigationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.LocalizationService));\n  };\n\n  WindowComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: WindowComponent,\n    selectors: [[\"kendo-window\"]],\n    contentQueries: function WindowComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, WindowTitleBarComponent, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.titleBarContent = _t.first);\n      }\n    },\n    viewQuery: function WindowComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(WindowTitleBarComponent, 5);\n        ɵngcc0.ɵɵviewQuery(ResizeHandleDirective, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.titleBarView = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.resizeHandles = _t);\n      }\n    },\n    hostVars: 14,\n    hostBindings: function WindowComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"focus\", function WindowComponent_focus_HostBindingHandler() {\n          return ctx.onComponentFocus();\n        })(\"blur\", function WindowComponent_blur_HostBindingHandler() {\n          return ctx.onComponentBlur();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"tabIndex\", ctx.tabIndex)(\"dir\", ctx.dir);\n        ɵngcc0.ɵɵstyleProp(\"min-width\", ctx.styleMinWidth)(\"min-height\", ctx.styleMinHeight)(\"position\", ctx.stylePosition);\n        ɵngcc0.ɵɵclassProp(\"k-window\", ctx.hostClasses)(\"k-window-maximized\", ctx.wrapperMaximizedClass)(\"k-window-minimized\", ctx.wrapperMinimizedClass);\n      }\n    },\n    inputs: {\n      keepContent: \"keepContent\",\n      draggable: \"draggable\",\n      resizable: \"resizable\",\n      state: \"state\",\n      minWidth: \"minWidth\",\n      minHeight: \"minHeight\",\n      width: \"width\",\n      height: \"height\",\n      top: \"top\",\n      left: \"left\",\n      autoFocusedElement: \"autoFocusedElement\",\n      title: \"title\"\n    },\n    outputs: {\n      dragStart: \"dragStart\",\n      dragEnd: \"dragEnd\",\n      resizeStart: \"resizeStart\",\n      resizeEnd: \"resizeEnd\",\n      close: \"close\",\n      widthChange: \"widthChange\",\n      heightChange: \"heightChange\",\n      topChange: \"topChange\",\n      leftChange: \"leftChange\",\n      stateChange: \"stateChange\"\n    },\n    exportAs: [\"kendoWindow\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([DragResizeService, NavigationService, LocalizationService, {\n      provide: L10N_PREFIX,\n      useValue: 'kendo.window'\n    }]), ɵngcc0.ɵɵNgOnChangesFeature],\n    ngContentSelectors: _c17,\n    decls: 6,\n    vars: 4,\n    consts: function () {\n      let i18n_8;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\n         * @desc The title of the close button\n         * @meaning kendo.window.closeTitle\n         */\n        const MSG_EXTERNAL_2849207436137160812$$DIST_FESM2015_INDEX_JS_9 = goog.getMsg(\"Close\");\n        i18n_8 = MSG_EXTERNAL_2849207436137160812$$DIST_FESM2015_INDEX_JS_9;\n      } else {\n        i18n_8 = $localize`:kendo.window.closeTitle|The title of the close button␟bb50cb526949482fc976fd868573ab283580ee69␟2849207436137160812:Close`;\n      }\n\n      let i18n_10;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\n         * @desc The title of the restore button\n         * @meaning kendo.window.restoreTitle\n         */\n        const MSG_EXTERNAL_3443120027481340803$$DIST_FESM2015_INDEX_JS_11 = goog.getMsg(\"Restore\");\n        i18n_10 = MSG_EXTERNAL_3443120027481340803$$DIST_FESM2015_INDEX_JS_11;\n      } else {\n        i18n_10 = $localize`:kendo.window.restoreTitle|The title of the restore button␟9a9ce231f0396e40adcfa80bfa76e546e0085be0␟3443120027481340803:Restore`;\n      }\n\n      let i18n_12;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\n         * @desc The title of the maximize button\n         * @meaning kendo.window.maximizeTitle\n         */\n        const MSG_EXTERNAL_7793415109119115257$$DIST_FESM2015_INDEX_JS_13 = goog.getMsg(\"Maximize\");\n        i18n_12 = MSG_EXTERNAL_7793415109119115257$$DIST_FESM2015_INDEX_JS_13;\n      } else {\n        i18n_12 = $localize`:kendo.window.maximizeTitle|The title of the maximize button␟42bc654ef8767c5df5277aa88941b94f8d373b4d␟7793415109119115257:Maximize`;\n      }\n\n      let i18n_14;\n\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\n         * @desc The title of the minimize button\n         * @meaning kendo.window.minimizeTitle\n         */\n        const MSG_EXTERNAL_7581084655285341827$$DIST_FESM2015_INDEX_JS_15 = goog.getMsg(\"Minimize\");\n        i18n_14 = MSG_EXTERNAL_7581084655285341827$$DIST_FESM2015_INDEX_JS_15;\n      } else {\n        i18n_14 = $localize`:kendo.window.minimizeTitle|The title of the minimize button␟7ca9f9b41a23760f7f74e91ee4c76d5a5f4a706c␟7581084655285341827:Minimize`;\n      }\n\n      return [[\"kendoWindowLocalizedMessages\", \"\", \"closeTitle\", i18n_8, \"restoreTitle\", i18n_10, \"maximizeTitle\", i18n_12, \"minimizeTitle\", i18n_14], [3, \"template\", 4, \"ngIf\"], [4, \"ngIf\"], [\"class\", \"k-content k-window-content\", 3, \"hidden\", 4, \"ngIf\"], [3, \"ngIf\"], [3, \"template\"], [1, \"k-window-title\"], [1, \"k-window-actions\"], [\"kendoWindowMinimizeAction\", \"\"], [\"kendoWindowMaximizeAction\", \"\"], [\"kendoWindowRestoreAction\", \"\"], [\"kendoWindowCloseAction\", \"\"], [1, \"k-content\", \"k-window-content\", 3, \"hidden\"], [3, \"ngTemplateOutlet\"], [\"kendoWindowResizeHandle\", \"\", \"kendoDraggable\", \"\", 3, \"direction\", 4, \"ngFor\", \"ngForOf\"], [\"kendoWindowResizeHandle\", \"\", \"kendoDraggable\", \"\", 3, \"direction\"]];\n    },\n    template: function WindowComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c16);\n        ɵngcc0.ɵɵelementContainerStart(0, 0);\n        ɵngcc0.ɵɵelementContainerStart(1);\n        ɵngcc0.ɵɵtemplate(2, WindowComponent_kendo_window_titlebar_2_Template, 8, 10, \"kendo-window-titlebar\", 1);\n        ɵngcc0.ɵɵtemplate(3, WindowComponent_ng_content_3_Template, 1, 0, \"ng-content\", 2);\n        ɵngcc0.ɵɵtemplate(4, WindowComponent_div_4_Template, 3, 3, \"div\", 3);\n        ɵngcc0.ɵɵtemplate(5, WindowComponent_ng_template_5_Template, 1, 1, \"ng-template\", 4);\n        ɵngcc0.ɵɵelementContainerEnd();\n        ɵngcc0.ɵɵelementContainerEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showDefaultTitleBar);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.showDefaultTitleBar);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.state !== \"minimized\" || ctx.keepContent);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.resizable);\n      }\n    },\n    directives: function () {\n      return [LocalizedMessagesDirective, ɵngcc1.NgIf, WindowTitleBarComponent, WindowMinimizeActionDirective, WindowMaximizeActionDirective, WindowRestoreActionDirective, WindowCloseActionDirective, ɵngcc1.NgTemplateOutlet, ɵngcc1.NgForOf, ResizeHandleDirective, ɵngcc3.DraggableDirective];\n    },\n    encapsulation: 2\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", String)], WindowComponent.prototype, \"autoFocusedElement\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], WindowComponent.prototype, \"title\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [Boolean])], WindowComponent.prototype, \"draggable\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [Boolean])], WindowComponent.prototype, \"resizable\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Boolean)], WindowComponent.prototype, \"keepContent\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [String])], WindowComponent.prototype, \"state\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], WindowComponent.prototype, \"minWidth\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], WindowComponent.prototype, \"minHeight\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], WindowComponent.prototype, \"width\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], WindowComponent.prototype, \"height\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], WindowComponent.prototype, \"top\", null);\n\n  __decorate([Input(), __metadata(\"design:type\", Number), __metadata(\"design:paramtypes\", [Number])], WindowComponent.prototype, \"left\", null);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], WindowComponent.prototype, \"dragStart\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], WindowComponent.prototype, \"dragEnd\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], WindowComponent.prototype, \"resizeStart\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], WindowComponent.prototype, \"resizeEnd\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], WindowComponent.prototype, \"close\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], WindowComponent.prototype, \"widthChange\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], WindowComponent.prototype, \"heightChange\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], WindowComponent.prototype, \"topChange\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], WindowComponent.prototype, \"leftChange\", void 0);\n\n  __decorate([Output(), __metadata(\"design:type\", EventEmitter)], WindowComponent.prototype, \"stateChange\", void 0);\n\n  __decorate([HostBinding('attr.tabIndex'), __metadata(\"design:type\", Number)], WindowComponent.prototype, \"tabIndex\", void 0);\n\n  __decorate([HostBinding('class.k-window'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], WindowComponent.prototype, \"hostClasses\", null);\n\n  __decorate([HostBinding('attr.dir'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], WindowComponent.prototype, \"dir\", null);\n\n  __decorate([ViewChild(WindowTitleBarComponent, {\n    static: false\n  }), __metadata(\"design:type\", WindowTitleBarComponent)], WindowComponent.prototype, \"titleBarView\", void 0);\n\n  __decorate([ContentChild(WindowTitleBarComponent, {\n    static: false\n  }), __metadata(\"design:type\", WindowTitleBarComponent)], WindowComponent.prototype, \"titleBarContent\", void 0);\n\n  __decorate([ViewChildren(ResizeHandleDirective), __metadata(\"design:type\", QueryList)], WindowComponent.prototype, \"resizeHandles\", void 0);\n\n  __decorate([HostBinding('style.minWidth'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], WindowComponent.prototype, \"styleMinWidth\", null);\n\n  __decorate([HostBinding('style.minHeight'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], WindowComponent.prototype, \"styleMinHeight\", null);\n\n  __decorate([HostBinding('style.position'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], WindowComponent.prototype, \"stylePosition\", null);\n\n  __decorate([HostBinding('class.k-window-maximized'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], WindowComponent.prototype, \"wrapperMaximizedClass\", null);\n\n  __decorate([HostBinding('class.k-window-minimized'), __metadata(\"design:type\", Boolean), __metadata(\"design:paramtypes\", [])], WindowComponent.prototype, \"wrapperMinimizedClass\", null);\n\n  __decorate([HostListener('focus'), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", []), __metadata(\"design:returntype\", void 0)], WindowComponent.prototype, \"onComponentFocus\", null);\n\n  __decorate([HostListener('blur'), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", []), __metadata(\"design:returntype\", void 0)], WindowComponent.prototype, \"onComponentBlur\", null);\n\n  WindowComponent = __decorate([__metadata(\"design:paramtypes\", [ElementRef, Renderer2, DragResizeService, NavigationService, NgZone, LocalizationService])], WindowComponent);\n  return WindowComponent;\n})();\nlet WindowMaximizeActionDirective = /*#__PURE__*/(() => {\n  let WindowMaximizeActionDirective = class WindowMaximizeActionDirective extends Button {\n    constructor(el, renderer, _service, localization, ngZone) {\n      super(el, renderer, null, localization, ngZone);\n      this.buttonType = 'button';\n      this.window = _service;\n      this.look = 'bare';\n      this.icon = 'window-maximize';\n    }\n    /**\n     * @hidden\n     */\n\n\n    onClick() {\n      if (!this.isDisabled) {\n        this.window.maximizeAction();\n      }\n    }\n\n    get visible() {\n      return this.window.options.state === 'default' ? 'inline-flex' : 'none';\n    }\n\n  };\n\n  WindowMaximizeActionDirective.ɵfac = function WindowMaximizeActionDirective_Factory(t) {\n    return new (t || WindowMaximizeActionDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(DragResizeService, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone));\n  };\n\n  WindowMaximizeActionDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: WindowMaximizeActionDirective,\n    selectors: [[\"button\", \"kendoWindowMaximizeAction\", \"\"]],\n    hostVars: 3,\n    hostBindings: function WindowMaximizeActionDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function WindowMaximizeActionDirective_click_HostBindingHandler() {\n          return ctx.onClick();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"type\", ctx.buttonType);\n        ɵngcc0.ɵɵstyleProp(\"display\", ctx.visible);\n      }\n    },\n    inputs: {\n      window: \"window\"\n    },\n    exportAs: [\"kendoWindowMaximizeAction\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([LocalizationService, {\n      provide: L10N_PREFIX,\n      useValue: 'kendo.button'\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], WindowMaximizeActionDirective.prototype, \"window\", void 0);\n\n  __decorate([HostBinding('attr.type'), __metadata(\"design:type\", String)], WindowMaximizeActionDirective.prototype, \"buttonType\", void 0);\n\n  __decorate([HostListener('click'), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", []), __metadata(\"design:returntype\", void 0)], WindowMaximizeActionDirective.prototype, \"onClick\", null);\n\n  __decorate([HostBinding('style.display'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], WindowMaximizeActionDirective.prototype, \"visible\", null);\n\n  WindowMaximizeActionDirective = __decorate([__param(2, Optional()), __metadata(\"design:paramtypes\", [ElementRef, Renderer2, DragResizeService, LocalizationService, NgZone])], WindowMaximizeActionDirective);\n  return WindowMaximizeActionDirective;\n})();\nlet WindowMinimizeActionDirective = /*#__PURE__*/(() => {\n  let WindowMinimizeActionDirective = class WindowMinimizeActionDirective extends Button {\n    constructor(el, renderer, _service, localization, ngZone) {\n      super(el, renderer, null, localization, ngZone);\n      this.buttonType = 'button';\n      this.window = _service;\n      this.look = 'bare';\n      this.icon = 'window-minimize';\n    }\n    /**\n     * @hidden\n     */\n\n\n    onClick() {\n      if (!this.isDisabled) {\n        this.window.minimizeAction();\n      }\n    }\n\n    get visible() {\n      return this.window.options.state === 'default' ? 'inline-flex' : 'none';\n    }\n\n  };\n\n  WindowMinimizeActionDirective.ɵfac = function WindowMinimizeActionDirective_Factory(t) {\n    return new (t || WindowMinimizeActionDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(DragResizeService, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone));\n  };\n\n  WindowMinimizeActionDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: WindowMinimizeActionDirective,\n    selectors: [[\"button\", \"kendoWindowMinimizeAction\", \"\"]],\n    hostVars: 3,\n    hostBindings: function WindowMinimizeActionDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function WindowMinimizeActionDirective_click_HostBindingHandler() {\n          return ctx.onClick();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"type\", ctx.buttonType);\n        ɵngcc0.ɵɵstyleProp(\"display\", ctx.visible);\n      }\n    },\n    inputs: {\n      window: \"window\"\n    },\n    exportAs: [\"kendoWindowMinimizeAction\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([LocalizationService, {\n      provide: L10N_PREFIX,\n      useValue: 'kendo.button'\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], WindowMinimizeActionDirective.prototype, \"window\", void 0);\n\n  __decorate([HostBinding('attr.type'), __metadata(\"design:type\", String)], WindowMinimizeActionDirective.prototype, \"buttonType\", void 0);\n\n  __decorate([HostListener('click'), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", []), __metadata(\"design:returntype\", void 0)], WindowMinimizeActionDirective.prototype, \"onClick\", null);\n\n  __decorate([HostBinding('style.display'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], WindowMinimizeActionDirective.prototype, \"visible\", null);\n\n  WindowMinimizeActionDirective = __decorate([__param(2, Optional()), __metadata(\"design:paramtypes\", [ElementRef, Renderer2, DragResizeService, LocalizationService, NgZone])], WindowMinimizeActionDirective);\n  return WindowMinimizeActionDirective;\n})();\nlet WindowCloseActionDirective = /*#__PURE__*/(() => {\n  let WindowCloseActionDirective = class WindowCloseActionDirective extends Button {\n    constructor(el, renderer, _service, localization, ngZone) {\n      super(el, renderer, null, localization, ngZone);\n      this.buttonType = 'button';\n      this.window = _service;\n      this.look = 'bare';\n      this.icon = 'close';\n    }\n    /**\n     * @hidden\n     */\n\n\n    onClick() {\n      if (!this.isDisabled) {\n        this.window.closeAction();\n      }\n    }\n\n  };\n\n  WindowCloseActionDirective.ɵfac = function WindowCloseActionDirective_Factory(t) {\n    return new (t || WindowCloseActionDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(DragResizeService, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone));\n  };\n\n  WindowCloseActionDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: WindowCloseActionDirective,\n    selectors: [[\"button\", \"kendoWindowCloseAction\", \"\"]],\n    hostVars: 1,\n    hostBindings: function WindowCloseActionDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function WindowCloseActionDirective_click_HostBindingHandler() {\n          return ctx.onClick();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"type\", ctx.buttonType);\n      }\n    },\n    inputs: {\n      window: \"window\"\n    },\n    exportAs: [\"kendoWindowCloseAction\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([LocalizationService, {\n      provide: L10N_PREFIX,\n      useValue: 'kendo.button'\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], WindowCloseActionDirective.prototype, \"window\", void 0);\n\n  __decorate([HostBinding('attr.type'), __metadata(\"design:type\", String)], WindowCloseActionDirective.prototype, \"buttonType\", void 0);\n\n  __decorate([HostListener('click'), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", []), __metadata(\"design:returntype\", void 0)], WindowCloseActionDirective.prototype, \"onClick\", null);\n\n  WindowCloseActionDirective = __decorate([__param(2, Optional()), __metadata(\"design:paramtypes\", [ElementRef, Renderer2, DragResizeService, LocalizationService, NgZone])], WindowCloseActionDirective);\n  return WindowCloseActionDirective;\n})();\nlet WindowRestoreActionDirective = /*#__PURE__*/(() => {\n  let WindowRestoreActionDirective = class WindowRestoreActionDirective extends Button {\n    constructor(el, renderer, _service, localization, ngZone) {\n      super(el, renderer, null, localization, ngZone);\n      this.buttonType = 'button';\n      this.window = _service;\n      this.look = 'bare';\n      this.icon = 'window-restore';\n    }\n    /**\n     * @hidden\n     */\n\n\n    onClick() {\n      if (!this.isDisabled) {\n        this.window.restoreAction();\n      }\n    }\n\n    get visible() {\n      return this.window.options.state === 'default' ? 'none' : 'inline-flex';\n    }\n\n  };\n\n  WindowRestoreActionDirective.ɵfac = function WindowRestoreActionDirective_Factory(t) {\n    return new (t || WindowRestoreActionDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(DragResizeService, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.LocalizationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone));\n  };\n\n  WindowRestoreActionDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: WindowRestoreActionDirective,\n    selectors: [[\"button\", \"kendoWindowRestoreAction\", \"\"]],\n    hostVars: 3,\n    hostBindings: function WindowRestoreActionDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function WindowRestoreActionDirective_click_HostBindingHandler() {\n          return ctx.onClick();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"type\", ctx.buttonType);\n        ɵngcc0.ɵɵstyleProp(\"display\", ctx.visible);\n      }\n    },\n    inputs: {\n      window: \"window\"\n    },\n    exportAs: [\"kendoWindowRestoreAction\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([LocalizationService, {\n      provide: L10N_PREFIX,\n      useValue: 'kendo.button'\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", Object)], WindowRestoreActionDirective.prototype, \"window\", void 0);\n\n  __decorate([HostBinding('attr.type'), __metadata(\"design:type\", String)], WindowRestoreActionDirective.prototype, \"buttonType\", void 0);\n\n  __decorate([HostListener('click'), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", []), __metadata(\"design:returntype\", void 0)], WindowRestoreActionDirective.prototype, \"onClick\", null);\n\n  __decorate([HostBinding('style.display'), __metadata(\"design:type\", String), __metadata(\"design:paramtypes\", [])], WindowRestoreActionDirective.prototype, \"visible\", null);\n\n  WindowRestoreActionDirective = __decorate([__param(2, Optional()), __metadata(\"design:paramtypes\", [ElementRef, Renderer2, DragResizeService, LocalizationService, NgZone])], WindowRestoreActionDirective);\n  /**\n   * The settings for the Window actions when the Window is opened through `WindowService`\n   * ([see example]({% slug api_dialog_windowservice %}#toc-open)).\n   */\n\n  return WindowRestoreActionDirective;\n})();\n\nclass WindowSettings {}\n/**\n * Indicates that the **Close** button of a Window that is opened through `WindowService` is clicked.\n */\n\n\nclass WindowCloseResult {}\n/**\n * Holds references to the object instance of the Window.\n * Controls the Windows that were opened through `WindowService`\n * ([see example]({% slug api_dialog_windowservice %}#toc-open)).\n */\n\n\nclass WindowRef {}\n\nvar WindowContainerService_1;\n/**\n * @hidden\n */\n\nlet WindowContainerService = WindowContainerService_1 = class WindowContainerService {\n  set container(container) {\n    WindowContainerService_1.container = container;\n  }\n\n  get container() {\n    return WindowContainerService_1.container;\n  }\n\n};\n\nWindowContainerService.ɵfac = function WindowContainerService_Factory(t) {\n  return new (t || WindowContainerService)();\n};\n\nWindowContainerService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n  token: WindowContainerService,\n  factory: function (t) {\n    return WindowContainerService.ɵfac(t);\n  }\n});\nWindowContainerService.container = null;\n\nconst isNotComponent$1 = component => isString(component) || component instanceof TemplateRef;\n\nclass WindowInjector {\n  constructor(getWindowRef, parentInjector) {\n    this.getWindowRef = getWindowRef;\n    this.parentInjector = parentInjector;\n  }\n\n  get(token, notFoundValue) {\n    if (token === WindowRef) {\n      return this.getWindowRef();\n    }\n\n    return this.parentInjector.get(token, notFoundValue);\n  }\n\n}\n/**\n * A service for opening Windows dynamically\n * ([see example]({% slug service_window %})).\n */\n\n\nlet WindowService = /*#__PURE__*/(() => {\n  let WindowService = class WindowService {\n    constructor(\n    /**\n     * @hidden\n     */\n    resolver, containerService) {\n      this.resolver = resolver;\n      this.containerService = containerService;\n    }\n    /**\n     * Opens a Window component.\n     *\n     * @param {WindowSettings} settings - The settings that define the Window.\n     * @returns {WindowRef} - A reference to the Window object.\n     *\n     * @example\n     *\n     * ```ts-no-run\n     * _@Component({\n     *   selector: 'my-app',\n     *   template: `\n     *     <button kendoButton (click)=\"open()\">Open window</button>\n     *     <div kendoWindowContainer></div>\n     *   `\n     * })\n     * export class AppComponent {\n     *     constructor( private windowService: WindowService ) {}\n     *\n     *     public open() {\n     *         var window = this.windowService.open({\n     *           title: \"My window\",\n     *           content: \"My content!\"\n     *         });\n     *\n     *         window.result.subscribe((result) => {\n     *           if (result instanceof WindowCloseResult) {\n     *             console.log(\"Window was closed\");\n     *           }\n     *         });\n     *     }\n     * }\n     * ```\n     *\n     */\n\n\n    open(settings) {\n      const factory = this.resolver.resolveComponentFactory(WindowComponent);\n      const container = settings.appendTo || this.containerService.container;\n\n      if (!container) {\n        throw new Error(`Cannot attach window to the page.\n                Add an element that uses the kendoWindowContainer directive, or set the 'appendTo' property.\n                See https://www.telerik.com/kendo-angular-ui/components/dialogs/window/service/\n            `);\n      }\n\n      const windowRef = {\n        close: () => {},\n        content: null,\n        result: null,\n        window: null\n      };\n      const content = this.contentFrom(settings.content, container, windowRef);\n      const window = container.createComponent(factory, undefined, undefined, content.nodes);\n      windowRef.window = window;\n      this.applyOptions(window.instance, settings);\n      const apiClose = new Subject();\n\n      const close = e => {\n        apiClose.next(e || new WindowCloseResult());\n\n        if (content.componentRef) {\n          content.componentRef.destroy();\n        }\n\n        window.destroy();\n      };\n\n      const result = merge(apiClose, window.instance.close.pipe(map(e => e ? e : new WindowCloseResult()), filter(e => {\n        if (settings.preventClose) {\n          // add windowRef only when using component\n          const windowRefParameter = isNotComponent$1(settings.content) ? undefined : windowRef;\n          return !settings.preventClose(e, windowRefParameter);\n        }\n\n        return true;\n      }))).pipe(take(1), // Takes care for multiple subscriptions:\n      // We subscribe internally and the user may subscribe to get a close result - window.result.subscribe().\n      // This causes multiple subscriptions to the same source and thus multiple emissions. share() solves that.\n      share());\n      result.subscribe(close);\n      windowRef.close = close;\n      windowRef.result = result;\n      window.changeDetectorRef.markForCheck();\n      return windowRef;\n    }\n\n    applyOptions(instance, options) {\n      if (isPresent(options.htmlAttributes)) {\n        instance.htmlAttributes = options.htmlAttributes;\n      }\n\n      if (isPresent(options.cssClass)) {\n        instance.cssClass = options.cssClass;\n      }\n\n      if (isPresent(options.title)) {\n        instance.title = options.title;\n      }\n\n      if (isPresent(options.keepContent)) {\n        instance.keepContent = options.keepContent;\n      }\n\n      if (isPresent(options.width)) {\n        instance.width = options.width;\n      }\n\n      if (isPresent(options.minWidth)) {\n        instance.minWidth = options.minWidth;\n      }\n\n      if (isPresent(options.height)) {\n        instance.height = options.height;\n      }\n\n      if (isPresent(options.minHeight)) {\n        instance.minHeight = options.minHeight;\n      }\n\n      if (isPresent(options.left)) {\n        instance.left = options.left;\n      }\n\n      if (isPresent(options.top)) {\n        instance.top = options.top;\n      }\n\n      if (isPresent(options.draggable)) {\n        instance.draggable = options.draggable;\n      }\n\n      if (isPresent(options.resizable)) {\n        instance.resizable = options.resizable;\n      }\n\n      if (isPresent(options.messages && options.messages.closeTitle)) {\n        instance.messages.closeTitle = options.messages.closeTitle;\n      }\n\n      if (isPresent(options.messages && options.messages.restoreTitle)) {\n        instance.messages.restoreTitle = options.messages.restoreTitle;\n      }\n\n      if (isPresent(options.messages && options.messages.maximizeTitle)) {\n        instance.messages.maximizeTitle = options.messages.maximizeTitle;\n      }\n\n      if (isPresent(options.messages && options.messages.minimizeTitle)) {\n        instance.messages.minimizeTitle = options.messages.minimizeTitle;\n      }\n\n      if (isPresent(options.autoFocusedElement)) {\n        instance.autoFocusedElement = options.autoFocusedElement;\n      }\n\n      if (isPresent(options.state)) {\n        instance.state = options.state;\n\n        if (options.state === 'minimized') {\n          instance.keepContent = true;\n        }\n      }\n\n      if (options.content instanceof TemplateRef) {\n        instance.contentTemplate = options.content;\n      }\n\n      if (options.titleBarContent instanceof TemplateRef) {\n        instance.titleBarTemplate = options.titleBarContent;\n      }\n    }\n\n    contentFrom(content, container, windowRef) {\n      const renderer = container.injector.get(Renderer2);\n      let nodes = [];\n      let componentRef = null;\n\n      if (typeof content === 'string') {\n        nodes = [renderer.createText(content)];\n      } else if (content && !(content instanceof TemplateRef)) {\n        const injector = new WindowInjector(() => windowRef, container.injector);\n        const factory = this.resolver.resolveComponentFactory(content);\n        componentRef = container.createComponent(factory, undefined, injector);\n        nodes = [componentRef.location.nativeElement];\n        windowRef.content = componentRef;\n      }\n\n      return {\n        componentRef,\n        nodes: [[], nodes // Content\n        ]\n      };\n    }\n\n  };\n\n  WindowService.ɵfac = function WindowService_Factory(t) {\n    return new (t || WindowService)(ɵngcc0.ɵɵinject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵinject(WindowContainerService));\n  };\n\n  WindowService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: WindowService,\n    factory: function (t) {\n      return WindowService.ɵfac(t);\n    }\n  });\n  WindowService = __decorate([__param(1, Inject(WindowContainerService)), __metadata(\"design:paramtypes\", [ComponentFactoryResolver, WindowContainerService])], WindowService);\n  /**\n   * Provides an insertion point for the Dialogs which are created through the\n   * Dialog service ([see example]({% slug api_dialog_dialogservice %}#toc-open)).\n   * Created Dialogs will be mounted after that element.\n   *\n   * @example\n   * ```html-no-run\n   * <div kendoDialogContainer></div>\n   * ```\n   */\n\n  return WindowService;\n})();\nlet DialogContainerDirective = /*#__PURE__*/(() => {\n  let DialogContainerDirective = class DialogContainerDirective {\n    constructor(container, service) {\n      service.container = container;\n    }\n\n  };\n\n  DialogContainerDirective.ɵfac = function DialogContainerDirective_Factory(t) {\n    return new (t || DialogContainerDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef), ɵngcc0.ɵɵdirectiveInject(DialogContainerService));\n  };\n\n  DialogContainerDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: DialogContainerDirective,\n    selectors: [[\"\", \"kendoDialogContainer\", \"\"]]\n  });\n  DialogContainerDirective = __decorate([__metadata(\"design:paramtypes\", [ViewContainerRef, DialogContainerService])], DialogContainerDirective);\n  /**\n   * @hidden\n   */\n\n  return DialogContainerDirective;\n})();\nlet Messages = /*#__PURE__*/(() => {\n  class Messages extends ComponentMessages {}\n\n  Messages.ɵfac = /*@__PURE__*/function () {\n    let ɵMessages_BaseFactory;\n    return function Messages_Factory(t) {\n      return (ɵMessages_BaseFactory || (ɵMessages_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(Messages)))(t || Messages);\n    };\n  }();\n\n  Messages.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: Messages,\n    inputs: {\n      closeTitle: \"closeTitle\",\n      restoreTitle: \"restoreTitle\",\n      maximizeTitle: \"maximizeTitle\",\n      minimizeTitle: \"minimizeTitle\"\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n\n  __decorate([Input(), __metadata(\"design:type\", String)], Messages.prototype, \"closeTitle\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], Messages.prototype, \"restoreTitle\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], Messages.prototype, \"maximizeTitle\", void 0);\n\n  __decorate([Input(), __metadata(\"design:type\", String)], Messages.prototype, \"minimizeTitle\", void 0);\n\n  return Messages;\n})();\nvar LocalizedMessagesDirective_1;\n/**\n * @hidden\n */\n\nlet LocalizedMessagesDirective = LocalizedMessagesDirective_1 = class LocalizedMessagesDirective extends Messages {\n  constructor(service) {\n    super();\n    this.service = service;\n  }\n\n};\n\nLocalizedMessagesDirective.ɵfac = function LocalizedMessagesDirective_Factory(t) {\n  return new (t || LocalizedMessagesDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.LocalizationService));\n};\n\nLocalizedMessagesDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: LocalizedMessagesDirective,\n  selectors: [[\"\", \"kendoDialogLocalizedMessages\", \"\"], [\"\", \"kendoWindowLocalizedMessages\", \"\"], [\"\", \"kendoDialogTitleBarLocalizedMessages\", \"\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: Messages,\n    useExisting: forwardRef(() => LocalizedMessagesDirective_1)\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n});\nLocalizedMessagesDirective = LocalizedMessagesDirective_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService])], LocalizedMessagesDirective);\nvar CustomMessagesComponent_1;\n/**\n * Custom component messages override default component messages\n * ([see example]({% slug globalization_dialogs %}#toc-localization)).\n */\n\nlet CustomMessagesComponent = CustomMessagesComponent_1 = class CustomMessagesComponent extends Messages {\n  constructor(service) {\n    super();\n    this.service = service;\n  }\n\n  get override() {\n    return true;\n  }\n\n};\n\nCustomMessagesComponent.ɵfac = function CustomMessagesComponent_Factory(t) {\n  return new (t || CustomMessagesComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.LocalizationService));\n};\n\nCustomMessagesComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: CustomMessagesComponent,\n  selectors: [[\"kendo-dialog-messages\"], [\"kendo-window-messages\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: Messages,\n    useExisting: forwardRef(() => CustomMessagesComponent_1) // tslint:disable-line:no-forward-ref\n\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n  decls: 0,\n  vars: 0,\n  template: function CustomMessagesComponent_Template(rf, ctx) {},\n  encapsulation: 2\n});\nCustomMessagesComponent = CustomMessagesComponent_1 = __decorate([__metadata(\"design:paramtypes\", [LocalizationService])], CustomMessagesComponent);\n/**\n * @hidden\n */\n\nconst SHARED_DIRECTIVES = [DialogActionsComponent, CustomMessagesComponent, LocalizedMessagesDirective];\n/**\n * @hidden\n */\n\nlet SharedModule = /*#__PURE__*/(() => {\n  let SharedModule = class SharedModule {};\n\n  SharedModule.ɵfac = function SharedModule_Factory(t) {\n    return new (t || SharedModule)();\n  };\n\n  SharedModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: SharedModule\n  });\n  SharedModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule], CommonModule]\n  });\n  /**\n   * @hidden\n   */\n\n  return SharedModule;\n})();\nconst DIALOG_DIRECTIVES = [DialogComponent, DialogTitleBarComponent];\n/**\n * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})\n * definition for the Dialog component that includes all Dialog components and directives.\n * Imports `DialogModule` into the [root module]({{ site.data.urls.angular['ngmodules'] }}#angular-modularity)\n * of your application or into any other sub-module that will use the Dialog component.\n *\n * @example\n * ```ts-no-run\n * import { NgModule } from '@angular/core';\n * import { BrowserModule } from '@angular/platform-browser';\n * import { DialogModule } from '@progress/kendo-angular-dialog';\n * import { AppComponent } from './app.component';\n *\n * _@NgModule({\n *     bootstrap:    [AppComponent],\n *     declarations: [AppComponent],\n *     imports:      [BrowserModule, DialogModule]\n * })\n * export class AppModule {\n * }\n * ```\n */\n\nlet DialogModule = /*#__PURE__*/(() => {\n  let DialogModule = class DialogModule {};\n\n  DialogModule.ɵfac = function DialogModule_Factory(t) {\n    return new (t || DialogModule)();\n  };\n\n  DialogModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: DialogModule\n  });\n  DialogModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    providers: [DialogContainerService, DialogService],\n    imports: [[SharedModule]]\n  });\n  /**\n   * Provides an insertion point for the Windows which are created through the\n   * Window service ([see example]({% slug api_dialog_windowservice %}#toc-open)).\n   * Created Windows will be mounted after that element.\n   *\n   * @example\n   * ```html-no-run\n   * <div kendoWindowContainer></div>\n   * ```\n   */\n\n  return DialogModule;\n})();\nlet WindowContainerDirective = /*#__PURE__*/(() => {\n  let WindowContainerDirective = class WindowContainerDirective {\n    constructor(container, service) {\n      service.container = container;\n    }\n\n  };\n\n  WindowContainerDirective.ɵfac = function WindowContainerDirective_Factory(t) {\n    return new (t || WindowContainerDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef), ɵngcc0.ɵɵdirectiveInject(WindowContainerService));\n  };\n\n  WindowContainerDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: WindowContainerDirective,\n    selectors: [[\"\", \"kendoWindowContainer\", \"\"]]\n  });\n  WindowContainerDirective = __decorate([__metadata(\"design:paramtypes\", [ViewContainerRef, WindowContainerService])], WindowContainerDirective);\n  return WindowContainerDirective;\n})();\nconst WINDOW_DIRECTIVES = [ResizeHandleDirective, WindowComponent, WindowTitleBarComponent, WindowCloseActionDirective, WindowMinimizeActionDirective, WindowMaximizeActionDirective, WindowRestoreActionDirective];\nconst ENTRY_COMPONENTS = [WindowComponent, WindowTitleBarComponent];\nconst exportedModules = [WindowComponent, WindowCloseActionDirective, WindowMinimizeActionDirective, WindowMaximizeActionDirective, WindowRestoreActionDirective, WindowTitleBarComponent];\n/**\n * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})\n * definition for the Window component. Imports `WindowModule` into the\n * [root module]({{ site.data.urls.angular['ngmodules'] }}#angular-modularity)\n * of your application or into any other sub-module that will use the Window component.\n *\n * @example\n * ```ts-no-run\n * import { NgModule } from '@angular/core';\n * import { BrowserModule } from '@angular/platform-browser';\n * import { WindowModule } from '@progress/kendo-angular-window';\n * import { AppComponent } from './app.component';\n *\n * _@NgModule({\n *     bootstrap:    [AppComponent],\n *     declarations: [AppComponent],\n *     imports:      [BrowserModule, WindowModule]\n * })\n * export class AppModule {\n * }\n * ```\n */\n\nlet WindowModule = /*#__PURE__*/(() => {\n  let WindowModule = class WindowModule {};\n\n  WindowModule.ɵfac = function WindowModule_Factory(t) {\n    return new (t || WindowModule)();\n  };\n\n  WindowModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: WindowModule\n  });\n  WindowModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    providers: [WindowContainerService, WindowService],\n    imports: [[SharedModule, DraggableModule]]\n  });\n  /**\n   * Represents the [NgModule]({{ site.data.urls.angular['ngmoduleapi'] }})\n   * definition for the Dialogs components.\n   *\n   * @example\n   *\n   * ```ts-no-run\n   * import { DialogsModule } from '@progress/kendo-angular-dialog';\n   *\n   * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n   * import { NgModule } from '@angular/core';\n   *\n   * import { AppComponent } from './app.component';\n   *\n   * _@NgModule({\n   *     declarations: [AppComponent],\n   *     imports:      [BrowserModule, DialogsModule],\n   *     bootstrap:    [AppComponent]\n   * })\n   * export class AppModule {}\n   *\n   * platformBrowserDynamic().bootstrapModule(AppModule);\n   *\n   * ```\n   */\n\n  return WindowModule;\n})();\nlet DialogsModule = /*#__PURE__*/(() => {\n  let DialogsModule = class DialogsModule {};\n\n  DialogsModule.ɵfac = function DialogsModule_Factory(t) {\n    return new (t || DialogsModule)();\n  };\n\n  DialogsModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: DialogsModule\n  });\n  DialogsModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [DialogModule, WindowModule]\n  });\n  return DialogsModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(SharedModule, {\n    declarations: function () {\n      return [DialogActionsComponent, CustomMessagesComponent, LocalizedMessagesDirective];\n    },\n    imports: function () {\n      return [CommonModule];\n    },\n    exports: function () {\n      return [DialogActionsComponent, CustomMessagesComponent, LocalizedMessagesDirective, CommonModule];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(DialogModule, {\n    declarations: [DialogComponent, DialogTitleBarComponent, DialogContainerDirective],\n    imports: [SharedModule],\n    exports: [DialogComponent, DialogTitleBarComponent, DialogActionsComponent, CustomMessagesComponent, LocalizedMessagesDirective, DialogContainerDirective]\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(WindowModule, {\n    declarations: function () {\n      return [ResizeHandleDirective, WindowComponent, WindowTitleBarComponent, WindowCloseActionDirective, WindowMinimizeActionDirective, WindowMaximizeActionDirective, WindowRestoreActionDirective, WindowContainerDirective];\n    },\n    imports: function () {\n      return [SharedModule, DraggableModule];\n    },\n    exports: function () {\n      return [WindowComponent, WindowCloseActionDirective, WindowMinimizeActionDirective, WindowMaximizeActionDirective, WindowRestoreActionDirective, WindowTitleBarComponent, DialogActionsComponent, CustomMessagesComponent, LocalizedMessagesDirective, WindowContainerDirective];\n    }\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(DialogsModule, {\n    exports: [DialogModule, WindowModule]\n  });\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { DIALOG_DIRECTIVES, DialogContainerDirective, DialogContainerService, CustomMessagesComponent, DIALOG_LOCALIZATION_SERVICE, LocalizedMessagesDirective, Messages, TitleBarLocalizationService, SHARED_DIRECTIVES, SharedModule, DragResizeService, NavigationService, WindowContainerDirective, WindowContainerService, ResizeHandleDirective, DialogComponent, DialogTitleBarComponent, DialogContentBase, DialogActionsComponent, DialogService, DialogCloseResult, DialogRef, DialogSettings, DialogAction, WindowComponent, WindowTitleBarComponent, WindowMaximizeActionDirective, WindowMinimizeActionDirective, WindowCloseActionDirective, WindowRestoreActionDirective, WindowSettings, WindowRef, WindowCloseResult, WindowService, DialogModule, WindowModule, DialogsModule }; //# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztpSEFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBbUJHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzJMQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsrRkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQXVDRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2VBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBZ0RHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztXQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs0S0FBRTtBQUNGLHdDQUcyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztpSkFBRTtBQUNGLDRCQUVHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzZKQUFFO0FBQ0YsZ0NBRUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OytDQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBSUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztpRkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQVdHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7NkpBQUU7QUFDRixnQ0FFRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7d1ZBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQXlERztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztrREFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBWUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7a0RBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQVlHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7a0RBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBWUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7a0RBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQVlHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7NEtBQUU7QUFDRix3Q0FHMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztpSkFBRTtBQUNGLDRCQUVHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzBKQUFFO0FBQ0YsdUNBSUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs4UEFBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztrREFBRTtBQUNGLHdFQWNHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7eUpBQUU7QUFDRixrRUFXRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O3VHQU9pQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7NklBU2lCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzswSkFBRTtBQUNGLHVDQUlHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OEpBU2lCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBS2tCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXNDb250ZW50IjpbIi8qKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qIENvcHlyaWdodCDCqSAyMDIxIFByb2dyZXNzIFNvZnR3YXJlIENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuKiBMaWNlbnNlZCB1bmRlciBjb21tZXJjaWFsIGxpY2Vuc2UuIFNlZSBMSUNFTlNFLm1kIGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIG1vcmUgaW5mb3JtYXRpb25cbiotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEsIF9fcGFyYW0gfSBmcm9tICd0c2xpYic7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIFRlbXBsYXRlUmVmLCBJbnB1dCwgT3V0cHV0LCBIb3N0QmluZGluZywgQ29tcG9uZW50LCBFbGVtZW50UmVmLCBJbmplY3Rpb25Ub2tlbiwgSW5qZWN0LCBPcHRpb25hbCwgTmdab25lLCBDb250ZW50Q2hpbGRyZW4sIFF1ZXJ5TGlzdCwgVmlld0NoaWxkcmVuLCBWaWV3Q2hpbGQsIFJlbmRlcmVyMiwgQ2hhbmdlRGV0ZWN0b3JSZWYsIEluamVjdGFibGUsIGlzRGV2TW9kZSwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBEaXJlY3RpdmUsIEhvc3QsIEhvc3RMaXN0ZW5lciwgQ29udGVudENoaWxkLCBWaWV3Q29udGFpbmVyUmVmLCBmb3J3YXJkUmVmLCBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgdHJpZ2dlciwgc3RhdGUsIHN0eWxlLCB0cmFuc2l0aW9uLCBhbmltYXRlIH0gZnJvbSAnQGFuZ3VsYXIvYW5pbWF0aW9ucyc7XG5pbXBvcnQgeyBMb2NhbGl6YXRpb25TZXJ2aWNlLCBMMTBOX1BSRUZJWCwgUlRMLCBNZXNzYWdlU2VydmljZSwgQ29tcG9uZW50TWVzc2FnZXMgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1sMTBuJztcbmltcG9ydCB7IHRha2UsIGZpbHRlciwgbWFwLCBzaGFyZSwgdGFwLCBzd2l0Y2hNYXAsIHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IHZhbGlkYXRlUGFja2FnZSB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1saWNlbnNpbmcnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uLCBTdWJqZWN0LCBtZXJnZSwgb2YgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IERyYWdnYWJsZURpcmVjdGl2ZSwgaXNDaGFuZ2VkLCBpc0RvY3VtZW50QXZhaWxhYmxlLCBEcmFnZ2FibGVNb2R1bGUgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1jb21tb24nO1xuaW1wb3J0IHsgb2Zmc2V0LCBzY3JvbGxQb3NpdGlvbiwgcG9zaXRpb25XaXRoU2Nyb2xsLCBnZXREb2N1bWVudEVsZW1lbnQsIGdldFdpbmRvd1ZpZXdQb3J0IH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLXBvcHVwLWNvbW1vbic7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1idXR0b25zJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5cbi8qKlxuICogU3BlY2lmaWVzIHRoZSBhY3Rpb24gYnV0dG9ucyBvZiB0aGUgRGlhbG9nXG4gKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIGFjdGlvbmJ1dHRvbnNfZGlhbG9nICV9KSkuXG4gKi9cbmxldCBEaWFsb2dBY3Rpb25zQ29tcG9uZW50ID0gY2xhc3MgRGlhbG9nQWN0aW9uc0NvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoZWwpIHtcbiAgICAgICAgdGhpcy5lbCA9IGVsO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoZSBwb3NzaWJsZSBsYXlvdXQgb2YgdGhlIGFjdGlvbiBidXR0b25zLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5sYXlvdXQgPSAnc3RyZXRjaGVkJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIHdoZW4gdGhlIHVzZXIgY2xpY2tzIGFuIGFjdGlvbiBidXR0b24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFjdGlvbiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5idXR0b25Hcm91cENsYXNzTmFtZSA9IHRydWU7XG4gICAgfVxuICAgIGdldCBjbGFzc05hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheW91dCA9PT0gJ3N0cmV0Y2hlZCc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBhY3Rpb25UZW1wbGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWN0aW9ucyBpbnN0YW5jZW9mIFRlbXBsYXRlUmVmO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgb25CdXR0b25DbGljayhhY3Rpb24sIF9lKSB7XG4gICAgICAgIHRoaXMuYWN0aW9uLmVtaXQoYWN0aW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGJ1dHRvbkNsYXNzKGFjdGlvbikge1xuICAgICAgICBjb25zdCBjbGFzc2VzID0gWydrLWJ1dHRvbiddO1xuICAgICAgICBpZiAoYWN0aW9uLnByaW1hcnkpIHtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnay1wcmltYXJ5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBEaWFsb2dBY3Rpb25zQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhY3Rpb25zXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBEaWFsb2dBY3Rpb25zQ29tcG9uZW50LnByb3RvdHlwZSwgXCJsYXlvdXRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBEaWFsb2dBY3Rpb25zQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhY3Rpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWRpYWxvZy1idXR0b25ncm91cCcpLFxuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWFjdGlvbnMnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIERpYWxvZ0FjdGlvbnNDb21wb25lbnQucHJvdG90eXBlLCBcImJ1dHRvbkdyb3VwQ2xhc3NOYW1lXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnY2xhc3Muay1hY3Rpb25zLXN0cmV0Y2hlZCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBEaWFsb2dBY3Rpb25zQ29tcG9uZW50LnByb3RvdHlwZSwgXCJjbGFzc05hbWVcIiwgbnVsbCk7XG5EaWFsb2dBY3Rpb25zQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgQ29tcG9uZW50KHtcbiAgICAgICAgc2VsZWN0b3I6ICdrZW5kby1kaWFsb2ctYWN0aW9ucycsXG4gICAgICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxuZy1jb250ZW50ICpuZ0lmPVwiIWFjdGlvbnNcIj48L25nLWNvbnRlbnQ+XG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhYWN0aW9uVGVtcGxhdGUoKVwiPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cImJ1dHRvbkNsYXNzKGFjdGlvbilcIlxuICAgICAgICAgICAgICAgIChjbGljayk9XCJvbkJ1dHRvbkNsaWNrKGFjdGlvbiwgJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgKm5nRm9yPVwibGV0IGFjdGlvbiBvZiBhY3Rpb25zXCJcbiAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cImFjdGlvbi50ZXh0XCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7eyBhY3Rpb24udGV4dCB9fVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICA8bmctdGVtcGxhdGUgW25nVGVtcGxhdGVPdXRsZXRdPVwiYWN0aW9uc1wiICpuZ0lmPVwiYWN0aW9uVGVtcGxhdGUoKVwiPjwvbmctdGVtcGxhdGU+XG4gICAgYFxuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRWxlbWVudFJlZl0pXG5dLCBEaWFsb2dBY3Rpb25zQ29tcG9uZW50KTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIFByZXZlbnRhYmxlRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnByZXZlbnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcmV2ZW50cyB0aGUgZGVmYXVsdCBhY3Rpb24gZm9yIGEgc3BlY2lmaWVkIGV2ZW50LlxuICAgICAqIEluIHRoaXMgd2F5LCB0aGUgc291cmNlIGNvbXBvbmVudCBzdXBwcmVzc2VzIHRoZSBidWlsdC1pbiBiZWhhdmlvciB0aGF0IGZvbGxvd3MgdGhlIGV2ZW50LlxuICAgICAqL1xuICAgIHByZXZlbnREZWZhdWx0KCkge1xuICAgICAgICB0aGlzLnByZXZlbnRlZCA9IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHRoZSBldmVudCBpcyBwcmV2ZW50ZWQgYnkgYW55IG9mIGl0cyBzdWJzY3JpYmVycywgcmV0dXJucyBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGRlZmF1bHQgYWN0aW9uIHdhcyBwcmV2ZW50ZWQuIE90aGVyd2lzZSwgcmV0dXJucyBgZmFsc2VgLlxuICAgICAqL1xuICAgIGlzRGVmYXVsdFByZXZlbnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJldmVudGVkO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IERJQUxPR19MT0NBTElaQVRJT05fU0VSVklDRSA9IG5ldyBJbmplY3Rpb25Ub2tlbignRGlhbG9nIExvY2FsaXphdGlvblNlcnZpY2UnKTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmxldCBUaXRsZUJhckxvY2FsaXphdGlvblNlcnZpY2UgPSBjbGFzcyBUaXRsZUJhckxvY2FsaXphdGlvblNlcnZpY2UgZXh0ZW5kcyBMb2NhbGl6YXRpb25TZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcihwcmVmaXgsIG1lc3NhZ2VTZXJ2aWNlLCBydGwsIGRpYWxvZ0xvY2FsaXphdGlvbikge1xuICAgICAgICBzdXBlcihwcmVmaXgsIG1lc3NhZ2VTZXJ2aWNlLCBydGwpO1xuICAgICAgICB0aGlzLmRpYWxvZ0xvY2FsaXphdGlvbiA9IGRpYWxvZ0xvY2FsaXphdGlvbjtcbiAgICB9XG4gICAgZ2V0KHNob3J0S2V5KSB7XG4gICAgICAgIGlmICh0aGlzLmRpYWxvZ0xvY2FsaXphdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlhbG9nTG9jYWxpemF0aW9uLmdldChzaG9ydEtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldChzaG9ydEtleSk7XG4gICAgfVxufTtcblRpdGxlQmFyTG9jYWxpemF0aW9uU2VydmljZSA9IF9fZGVjb3JhdGUoW1xuICAgIF9fcGFyYW0oMCwgSW5qZWN0KEwxME5fUFJFRklYKSksXG4gICAgX19wYXJhbSgxLCBPcHRpb25hbCgpKSxcbiAgICBfX3BhcmFtKDIsIE9wdGlvbmFsKCkpLCBfX3BhcmFtKDIsIEluamVjdChSVEwpKSxcbiAgICBfX3BhcmFtKDMsIE9wdGlvbmFsKCkpLCBfX3BhcmFtKDMsIEluamVjdChESUFMT0dfTE9DQUxJWkFUSU9OX1NFUlZJQ0UpKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1N0cmluZywgTWVzc2FnZVNlcnZpY2UsIEJvb2xlYW4sIExvY2FsaXphdGlvblNlcnZpY2VdKVxuXSwgVGl0bGVCYXJMb2NhbGl6YXRpb25TZXJ2aWNlKTtcblxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBbS2VuZG8gVUkgRGlhbG9nVGl0bGVCYXIgY29tcG9uZW50IGZvciBBbmd1bGFyXSh7JSBzbHVnIGFwaV9kaWFsb2dfZGlhbG9ndGl0bGViYXJjb21wb25lbnQgJX0pLlxuICpcbiAqIEl0IGlzIHVzZWQgYXMgcGFydCBvZiB0aGUgRGlhbG9nIGNvbnRlbnQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGNyZWF0ZWQgZHluYW1pY2FsbHkgYnkgdXNpbmcgYW4gW0FuZ3VsYXIgc2VydmljZV0oeyUgc2x1ZyBzZXJ2aWNlX2RpYWxvZyAlfSkuXG4gKi9cbmxldCBEaWFsb2dUaXRsZUJhckNvbXBvbmVudCA9IGNsYXNzIERpYWxvZ1RpdGxlQmFyQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih6b25lLCBob3N0RWxlbWVudCwgbG9jYWxpemF0aW9uU2VydmljZSkge1xuICAgICAgICB0aGlzLnpvbmUgPSB6b25lO1xuICAgICAgICB0aGlzLmhvc3RFbGVtZW50ID0gaG9zdEVsZW1lbnQ7XG4gICAgICAgIHRoaXMubG9jYWxpemF0aW9uU2VydmljZSA9IGxvY2FsaXphdGlvblNlcnZpY2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyB3aGVuIHRoZSBjbG9zZSBidXR0b24gb2YgdGhlIHRpdGxlLWJhciBpcyBjbGlja2VkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbG9zZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgZ2V0IGNsYXNzTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGdldCBjbG9zZUJ1dHRvblRpdGxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbG9zZVRpdGxlIHx8IHRoaXMubG9jYWxpemF0aW9uU2VydmljZS5nZXQoJ2Nsb3NlVGl0bGUnKTtcbiAgICB9XG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICB0aGlzLnpvbmUub25TdGFibGUucGlwZSh0YWtlKDEpKS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuay1kaWFsb2ctdGl0bGUnKTtcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsIHRoaXMuaWQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uQ2xvc2VDbGljayhlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgZXZlbnRBcmdzID0gbmV3IFByZXZlbnRhYmxlRXZlbnQoKTtcbiAgICAgICAgdGhpcy5jbG9zZS5lbWl0KGV2ZW50QXJncyk7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBEaWFsb2dUaXRsZUJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwiY2xvc2VcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIERpYWxvZ1RpdGxlQmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJpZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgRGlhbG9nVGl0bGVCYXJDb21wb25lbnQucHJvdG90eXBlLCBcImNsb3NlVGl0bGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXdpbmRvdy10aXRsZWJhcicpLFxuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWRpYWxvZy10aXRsZWJhcicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBEaWFsb2dUaXRsZUJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwiY2xhc3NOYW1lXCIsIG51bGwpO1xuRGlhbG9nVGl0bGVCYXJDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICBDb21wb25lbnQoe1xuICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLWRpYWxvZy10aXRsZWJhcicsXG4gICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgVGl0bGVCYXJMb2NhbGl6YXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgICAgICAgICAgdXNlRXhpc3Rpbmc6IFRpdGxlQmFyTG9jYWxpemF0aW9uU2VydmljZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBMMTBOX1BSRUZJWCxcbiAgICAgICAgICAgICAgICB1c2VWYWx1ZTogJ2tlbmRvLmRpYWxvZydcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgdGVtcGxhdGU6IGBcbiAgICAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgICAgIGtlbmRvRGlhbG9nVGl0bGVCYXJMb2NhbGl6ZWRNZXNzYWdlc1xuICAgICAgICAgICAgaTE4bi1jbG9zZVRpdGxlPVwia2VuZG8uZGlhbG9nLmNsb3NlVGl0bGV8VGhlIHRpdGxlIG9mIHRoZSBjbG9zZSBidXR0b25cIlxuICAgICAgICAgICAgY2xvc2VUaXRsZT1cIkNsb3NlXCJcbiAgICAgICAgPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImstd2luZG93LXRpdGxlIGstZGlhbG9nLXRpdGxlXCI+XG4gICAgICAgICAgICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJrLXdpbmRvdy1hY3Rpb25zIGstZGlhbG9nLWFjdGlvbnNcIj5cbiAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICBocmVmPVwiI1wiXG4gICAgICAgICAgICAgICAgICAgIHJvbGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICBbYXR0ci50aXRsZV09XCJjbG9zZUJ1dHRvblRpdGxlXCJcbiAgICAgICAgICAgICAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJjbG9zZUJ1dHRvblRpdGxlXCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJrLWJ1dHRvbiBrLWZsYXQgay1idXR0b24taWNvbiBrLXdpbmRvdy1hY3Rpb24gay1kaWFsb2ctYWN0aW9uIGstZGlhbG9nLWNsb3NlXCJcbiAgICAgICAgICAgICAgICAgICAgKGNsaWNrKT1cIm9uQ2xvc2VDbGljaygkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiay1pY29uIGstaS14XCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICBgXG4gICAgfSksXG4gICAgX19wYXJhbSgyLCBPcHRpb25hbCgpKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW05nWm9uZSwgRWxlbWVudFJlZiwgTG9jYWxpemF0aW9uU2VydmljZV0pXG5dLCBEaWFsb2dUaXRsZUJhckNvbXBvbmVudCk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBwYWNrYWdlTWV0YWRhdGEgPSB7XG4gICAgbmFtZTogJ0Bwcm9ncmVzcy9rZW5kby1hbmd1bGFyLWRpYWxvZycsXG4gICAgcHJvZHVjdE5hbWU6ICdLZW5kbyBVSSBmb3IgQW5ndWxhcicsXG4gICAgcHJvZHVjdENvZGVzOiBbJ0tFTkRPVUlBTkdVTEFSJywgJ0tFTkRPVUlDT01QTEVURSddLFxuICAgIHB1Ymxpc2hEYXRlOiAxNjM3NTc2MjcxLFxuICAgIHZlcnNpb246ICcnLFxuICAgIGxpY2Vuc2luZ0RvY3NVcmw6ICdodHRwczovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL215LWxpY2Vuc2UvP3V0bV9tZWRpdW09cHJvZHVjdCZ1dG1fc291cmNlPWtlbmRvYW5ndWxhciZ1dG1fY2FtcGFpZ249a2VuZG8tdWktYW5ndWxhci1wdXJjaGFzZS1saWNlbnNlLWtleXMtd2FybmluZydcbn07XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBpc1ByZXNlbnQgPSAodmFsdWUpID0+IHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQ7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgaXNUcnV0aHkgPSAodmFsdWUpID0+ICEhdmFsdWU7XG5jb25zdCB0b0NsYXNzTGlzdCA9IChjbGFzc05hbWVzKSA9PiBTdHJpbmcoY2xhc3NOYW1lcykudHJpbSgpLnNwbGl0KCcgJyk7XG5jb25zdCBmb2N1c2FibGVSZWdleCA9IC9eKD86YXxpbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkL2k7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xudmFyIEtleXM7XG4oZnVuY3Rpb24gKEtleXMpIHtcbiAgICBLZXlzW0tleXNbXCJlc2NcIl0gPSAyN10gPSBcImVzY1wiO1xuICAgIEtleXNbS2V5c1tcInRhYlwiXSA9IDldID0gXCJ0YWJcIjtcbiAgICBLZXlzW0tleXNbXCJlbnRlclwiXSA9IDEzXSA9IFwiZW50ZXJcIjtcbiAgICBLZXlzW0tleXNbXCJzcGFjZVwiXSA9IDMyXSA9IFwic3BhY2VcIjtcbiAgICBLZXlzW0tleXNbXCJjdHJsXCJdID0gMTddID0gXCJjdHJsXCI7XG4gICAgS2V5c1tLZXlzW1wic2hpZnRcIl0gPSAxNl0gPSBcInNoaWZ0XCI7XG4gICAgS2V5c1tLZXlzW1wibGVmdFwiXSA9IDM3XSA9IFwibGVmdFwiO1xuICAgIEtleXNbS2V5c1tcInVwXCJdID0gMzhdID0gXCJ1cFwiO1xuICAgIEtleXNbS2V5c1tcInJpZ2h0XCJdID0gMzldID0gXCJyaWdodFwiO1xuICAgIEtleXNbS2V5c1tcImRvd25cIl0gPSA0MF0gPSBcImRvd25cIjtcbn0pKEtleXMgfHwgKEtleXMgPSB7fSkpO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IERJQUxPR19FTEVNRU5UU19IQU5ETElOR19FU0NfS0VZID0gJ2stZGlhbG9nLXdyYXBwZXIgay1kaWFsb2ctYnV0dG9uZ3JvdXAgay1kaWFsb2ctYWN0aW9uJztcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBESUFMT0dfRUxFTUVOVFNfSEFORExJTkdfQVJST1dTID0gJ2stZGlhbG9nLWJ1dHRvbmdyb3VwJztcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBXSU5ET1dfQ0xBU1NFUyA9ICdrLXdpbmRvdyc7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgaGFzQ2xhc3NlcyA9IChlbGVtZW50LCBjbGFzc05hbWVzKSA9PiB7XG4gICAgY29uc3QgbmFtZXNMaXN0ID0gdG9DbGFzc0xpc3QoY2xhc3NOYW1lcyk7XG4gICAgcmV0dXJuIEJvb2xlYW4odG9DbGFzc0xpc3QoZWxlbWVudC5jbGFzc05hbWUpLmZpbmQoKGNsYXNzTmFtZSkgPT4gbmFtZXNMaXN0LmluZGV4T2YoY2xhc3NOYW1lKSA+PSAwKSk7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGlzVmlzaWJsZSA9IChlbGVtZW50KSA9PiB7XG4gICAgY29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuICEhKHJlY3Qud2lkdGggJiYgcmVjdC5oZWlnaHQpICYmIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLnZpc2liaWxpdHkgIT09ICdoaWRkZW4nO1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBpc0ZvY3VzYWJsZSA9IChlbGVtZW50LCBjaGVja1Zpc2liaWxpdHkgPSB0cnVlKSA9PiB7XG4gICAgaWYgKGVsZW1lbnQudGFnTmFtZSkge1xuICAgICAgICBjb25zdCB0YWdOYW1lID0gZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IHRhYkluZGV4ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RhYkluZGV4Jyk7XG4gICAgICAgIGNvbnN0IHZhbGlkVGFiSW5kZXggPSB0YWJJbmRleCAhPT0gbnVsbCAmJiAhaXNOYU4odGFiSW5kZXgpICYmIHRhYkluZGV4ID4gLTE7XG4gICAgICAgIGxldCBmb2N1c2FibGUgPSBmYWxzZTtcbiAgICAgICAgaWYgKGZvY3VzYWJsZVJlZ2V4LnRlc3QodGFnTmFtZSkpIHtcbiAgICAgICAgICAgIGZvY3VzYWJsZSA9ICFlbGVtZW50LmRpc2FibGVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9jdXNhYmxlID0gdmFsaWRUYWJJbmRleDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm9jdXNhYmxlICYmICghY2hlY2tWaXNpYmlsaXR5IHx8IGlzVmlzaWJsZShlbGVtZW50KSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3Qgc2V0SFRNTEF0dHJpYnV0ZXMgPSAoYXR0cmlidXRlcywgcmVuZGVyZXIsIGVsZW1lbnQpID0+IHtcbiAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGlmIChhdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgIHJlbmRlcmVyLnNldEF0dHJpYnV0ZShlbGVtZW50LCBhdHRyaWJ1dGUsIGF0dHJpYnV0ZXNbYXR0cmlidXRlXSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuLyoqXG4gKiBSZWNlaXZlcyBDU1MgY2xhc3MgZGVjbGFyYXRpb25zIGVpdGhlciBhcyBhbiBvYmplY3QsIHN0cmluZyBvciBhcnJheSBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiB0aGUgY2xhc3MgbmFtZXMuXG4gKlxuICogQGhpZGRlblxuICovXG5jb25zdCBwYXJzZUNTU0NsYXNzTmFtZXMgPSAodmFsdWUpID0+IHtcbiAgICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBwYXJzZU9iamVjdENsYXNzTmFtZXModmFsdWUpO1xuICAgIH1cbiAgICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBwYXJzZVN0cmluZ0NsYXNzTmFtZXModmFsdWUpO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlQXJyYXlDbGFzc05hbWVzKHZhbHVlKTtcbiAgICB9XG59O1xuY29uc3QgcGFyc2VPYmplY3RDbGFzc05hbWVzID0gKHZhbHVlKSA9PiB7XG4gICAgY29uc3QgY2xhc3NlcyA9IFtdO1xuICAgIE9iamVjdC5rZXlzKHZhbHVlKS5mb3JFYWNoKGNsYXNzTmFtZSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRDbGFzc05hbWUgPSBzcGxpdFN0cmluZ1RvQXJyYXkoY2xhc3NOYW1lKTtcbiAgICAgICAgaWYgKHZhbHVlW2NsYXNzTmFtZV0gJiYgY3VycmVudENsYXNzTmFtZVswXSkge1xuICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKC4uLmN1cnJlbnRDbGFzc05hbWUpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGNsYXNzZXM7XG59O1xuY29uc3QgcGFyc2VTdHJpbmdDbGFzc05hbWVzID0gKHZhbHVlKSA9PiB7XG4gICAgY29uc3QgY2xhc3NlcyA9IFtdO1xuICAgIGNvbnN0IGNsYXNzZXNBcnJheSA9IHNwbGl0U3RyaW5nVG9BcnJheSh2YWx1ZSk7XG4gICAgY2xhc3Nlc0FycmF5LmZvckVhY2goY2xhc3NOYW1lID0+IHtcbiAgICAgICAgY2xhc3Nlcy5wdXNoKGNsYXNzTmFtZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGNsYXNzZXM7XG59O1xuY29uc3QgcGFyc2VBcnJheUNsYXNzTmFtZXMgPSAodmFsdWUpID0+IHtcbiAgICBjb25zdCBjbGFzc2VzID0gW107XG4gICAgdmFsdWUuZm9yRWFjaCgoY2xhc3NOYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBzcGxpdFN0cmluZ1RvQXJyYXkoY2xhc3NOYW1lKTtcbiAgICAgICAgaWYgKGN1cnJlbnRbMF0pIHtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaCguLi5jdXJyZW50KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjbGFzc2VzO1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBmb2N1c2FibGVTZWxlY3RvciA9IFtcbiAgICAnYVtocmVmXScsXG4gICAgJ2FyZWFbaHJlZl0nLFxuICAgICdpbnB1dDpub3QoW2Rpc2FibGVkXSknLFxuICAgICdzZWxlY3Q6bm90KFtkaXNhYmxlZF0pJyxcbiAgICAndGV4dGFyZWE6bm90KFtkaXNhYmxlZF0pJyxcbiAgICAnYnV0dG9uOm5vdChbZGlzYWJsZWRdKScsXG4gICAgJ2lmcmFtZScsXG4gICAgJ29iamVjdCcsXG4gICAgJ2VtYmVkJyxcbiAgICAnKlt0YWJpbmRleF0nLFxuICAgICcqW2NvbnRlbnRlZGl0YWJsZV0nXG5dLmpvaW4oJywnKTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBwcmV2ZW50RGVmYXVsdCA9ICh7IG9yaWdpbmFsRXZlbnQ6IGV2ZW50IH0pID0+IHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xufTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBSRVNJWkVfRElSRUNUSU9OUyA9IFsnbicsICdlJywgJ3MnLCAndycsICdzZScsICdzdycsICduZScsICdudyddO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IE9GRlNFVF9TVFlMRVMgPSBbJ3RvcCcsICdsZWZ0JywgJ3dpZHRoJywgJ2hlaWdodCddO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGlzU3RyaW5nID0gKHZhbHVlKSA9PiB2YWx1ZSBpbnN0YW5jZW9mIFN0cmluZyB8fCB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGlzT2JqZWN0ID0gKHZhbHVlKSA9PiBpc1ByZXNlbnQodmFsdWUpICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGlzTnVtYmVyID0gKHZhbHVlKSA9PiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmIGlzRmluaXRlKHZhbHVlKTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBjcmVhdGVWYWx1ZVdpdGhVbml0ID0gKHZhbHVlKSA9PiB2YWx1ZSArIChpc051bWJlcih2YWx1ZSkgPyAncHgnIDogJycpO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IHNwbGl0U3RyaW5nVG9BcnJheSA9ICh2YWx1ZSkgPT4gdmFsdWUudHJpbSgpLnJlcGxhY2UoL1xccysvZywgXCIgXCIpLnNwbGl0KCcgJyk7XG5cbi8qKlxuICogVGhlIHNldHRpbmdzIGZvciB0aGUgRGlhbG9nIGFjdGlvbnMgd2hlbiB0aGUgRGlhbG9nIGlzIG9wZW5lZCB0aHJvdWdoIGBEaWFsb2dTZXJ2aWNlYFxuICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBhcGlfZGlhbG9nX2RpYWxvZ3NlcnZpY2UgJX0jdG9jLW9wZW4pKS5cbiAqL1xuY2xhc3MgRGlhbG9nQWN0aW9uIHtcbn1cbi8qKlxuICogSW5kaWNhdGVzIHRoYXQgdGhlICoqQ2xvc2UqKiBidXR0b24gaXMgY2xpY2tlZC4gVXNlZCB3aGVuIHRoZSByZXN1bHRzIGZyb21cbiAqIHRoZSBEaWFsb2dzIHRoYXQgYXJlIG9wZW5lZCB0aHJvdWdoIGBEaWFsb2dTZXJ2aWNlYCBhcmUgZmlsdGVyZWRcbiAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgYXBpX2RpYWxvZ19kaWFsb2dzZXJ2aWNlICV9I3RvYy1vcGVuKSkuXG4gKi9cbmNsYXNzIERpYWxvZ0Nsb3NlUmVzdWx0IHtcbn1cbi8qKlxuICogVGhlIHNldHRpbmdzIHRoYXQgY2FuIGJlIHVzZWQgd2hlbiB0aGUgRGlhbG9nIGlzIG9wZW5lZCB0aHJvdWdoIGBEaWFsb2dTZXJ2aWNlYC5cbiAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgYXBpX2RpYWxvZ19kaWFsb2dzZXJ2aWNlICV9I3RvYy1vcGVuKSkuXG4gKi9cbmNsYXNzIERpYWxvZ1NldHRpbmdzIHtcbn1cbi8qKlxuICogSG9sZHMgcmVmZXJlbmNlcyB0byB0aGUgb2JqZWN0IGluc3RhbmNlIGFuZCBwdWJsaXNoZWQgZXZlbnRzIG9mIHRoZSBEaWFsb2cuXG4gKiBDb250cm9scyB0aGUgRGlhbG9ncyB0aGF0IHdlcmUgb3BlbmVkIHRocm91Z2ggdGhlIGBEaWFsb2dTZXJ2aWNlYFxuICogKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBhcGlfZGlhbG9nX2RpYWxvZ3NlcnZpY2UgJX0jdG9jLW9wZW4pKS5cbiAqL1xuY2xhc3MgRGlhbG9nUmVmIHtcbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBbS2VuZG8gVUkgRGlhbG9nIGNvbXBvbmVudCBmb3IgQW5ndWxhcl0oeyUgc2x1ZyBvdmVydmlld19kaWFsb2dfZGlhbG9ncyAlfSkuXG4gKi9cbmxldCBEaWFsb2dDb21wb25lbnQgPSBjbGFzcyBEaWFsb2dDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHdyYXBwZXIsIHJlbmRlcmVyLCBsb2NhbGl6YXRpb24sIGNkciwgbmdab25lKSB7XG4gICAgICAgIHRoaXMud3JhcHBlciA9IHdyYXBwZXI7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5jZHIgPSBjZHI7XG4gICAgICAgIHRoaXMubmdab25lID0gbmdab25lO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoZSBsYXlvdXQgb2YgdGhlIGFjdGlvbiBidXR0b25zIGluIHRoZSBEaWFsb2cuXG4gICAgICAgICAqIFRoaXMgb3B0aW9uIGlzIG9ubHkgYXBwbGljYWJsZSBpZiB0aGUgYWN0aW9uIGJ1dHRvbnMgYXJlIHNwZWNpZmllZCB0aHJvdWdoIHRoZSBgYWN0aW9uc2Agb3B0aW9ucy5cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlZmF1bHQgJ3N0cmV0Y2hlZCdcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYWN0aW9uc0xheW91dCA9ICdzdHJldGNoZWQnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGhpZGRlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50aXRsZUlkID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29udGVudElkID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIHdoZW4gdGhlIHVzZXIgY2xpY2tzIGFuIGFjdGlvbiBidXR0b24gb2YgdGhlIERpYWxvZy5cbiAgICAgICAgICogVGhlIGV2ZW50IGlzIGZpcmVkIG9ubHkgd2hlbiB0aGUgYWN0aW9uIGJ1dHRvbnMgYXJlIHNwZWNpZmllZCB0aHJvdWdoIHRoZSBgYWN0aW9uc2Agb3B0aW9ucy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYWN0aW9uID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgd2hlbiB0aGUgdXNlciBjbGlja3MgdGhlICoqQ2xvc2UqKiBidXR0b24gb2YgdGhlIERpYWxvZyBvciB0aGUgKipFU0MqKiBrZXkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsb3NlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnRhYkluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG4gICAgICAgIHRoaXMuZG9tU3VicyA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgICAgICAgdmFsaWRhdGVQYWNrYWdlKHBhY2thZ2VNZXRhZGF0YSk7XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gbG9jYWxpemF0aW9uLnJ0bCA/ICdydGwnIDogJ2x0cic7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKGxvY2FsaXphdGlvbi5jaGFuZ2VzLnN1YnNjcmliZSgoeyBydGwgfSkgPT4gKHRoaXMuZGlyZWN0aW9uID0gcnRsID8gJ3J0bCcgOiAnbHRyJykpKTtcbiAgICAgICAgdGhpcy50aXRsZUlkID0gdGhpcy5nZW5lcmF0ZVRpdGxlSWQoKTtcbiAgICAgICAgdGhpcy5jb250ZW50SWQgPSB0aGlzLmdlbmVyYXRlQ29udGVudElkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZXQgaHRtbEF0dHJpYnV0ZXMoYXR0cmlidXRlcykge1xuICAgICAgICBzZXRIVE1MQXR0cmlidXRlcyhhdHRyaWJ1dGVzLCB0aGlzLnJlbmRlcmVyLCB0aGlzLndyYXBwZXIubmF0aXZlRWxlbWVudCk7XG4gICAgICAgIGNvbnN0IGVsID0gdGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGRpciA9IGVsLmdldEF0dHJpYnV0ZSgnZGlyJyk7XG4gICAgICAgIGNvbnN0IHRJbmRleCA9IGVsLmdldEF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uICE9PSBkaXIpIHtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gZGlyO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRhYkluZGV4ICE9PSB0SW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMudGFiSW5kZXggPSB0SW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faHRtbEF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuICAgIH1cbiAgICBnZXQgaHRtbEF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9odG1sQXR0cmlidXRlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHNldCBjc3NDbGFzcyhjbGFzc2VzKSB7XG4gICAgICAgIHRoaXMuc2V0U2VydmljZUNsYXNzZXModGhpcy5fY3NzQ2xhc3MsIGNsYXNzZXMpO1xuICAgICAgICB0aGlzLl9jc3NDbGFzcyA9IGNsYXNzZXM7XG4gICAgfVxuICAgIGdldCBjc3NDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nzc0NsYXNzO1xuICAgIH1cbiAgICBnZXQgZGlyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb247XG4gICAgfVxuICAgIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICAgICAgdGhpcy5idWJibGUoJ2Nsb3NlJywgdGhpcy50aXRsZWJhckNvbnRlbnQuZmlyc3QpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEF0dHJpYnV0ZSh0aGlzLndyYXBwZXIubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuay1kaWFsb2cnKSwgJ2FyaWEtZGVzY3JpYmVkYnknLCB0aGlzLmNvbnRlbnRJZCk7XG4gICAgICAgIGlmICh0aGlzLnRpdGxlYmFyQ29udGVudC5maXJzdCkge1xuICAgICAgICAgICAgdGhpcy50aXRsZWJhckNvbnRlbnQuZmlyc3QuaWQgPSB0aGlzLnRpdGxlSWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaCh0aGlzLnRpdGxlYmFyQ29udGVudC5jaGFuZ2VzLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlzUHJlc2VudCh0aGlzLnRpdGxlYmFyQ29udGVudC5maXJzdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aXRsZWJhckNvbnRlbnQuZmlyc3QuaWQgPSB0aGlzLnRpdGxlSWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmdab25lLm9uU3RhYmxlLnBpcGUodGFrZSgxKSkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnViYmxlKCdjbG9zZScsIHRoaXMudGl0bGViYXJDb250ZW50LmZpcnN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0QXR0cmlidXRlKHRoaXMud3JhcHBlci5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5rLWRpYWxvZycpLCAnYXJpYS1sYWJlbGxlZGJ5JywgdGhpcy50aXRsZUlkKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVJbml0aWFsRm9jdXMoKTtcbiAgICAgICAgdGhpcy5idWJibGUoJ2Nsb3NlJywgdGhpcy50aXRsZWJhclZpZXcuZmlyc3QpO1xuICAgICAgICB0aGlzLmJ1YmJsZSgnYWN0aW9uJywgdGhpcy5hY3Rpb25zVmlldyk7XG4gICAgICAgIGlmICh0aGlzLnRpdGxlYmFyVmlldy5maXJzdCB8fCB0aGlzLnRpdGxlYmFyQ29udGVudC5maXJzdCkge1xuICAgICAgICAgICAgLy9OZWVkZWQgZm9yIERpYWxvZ3MgY3JlYXRlZCB2aWEgc2VydmljZVxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUodGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmstZGlhbG9nJyksICdhcmlhLWxhYmVsbGVkYnknLCB0aGlzLnRpdGxlSWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2godGhpcy50aXRsZWJhclZpZXcuY2hhbmdlcy5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpc1ByZXNlbnQodGhpcy50aXRsZWJhclZpZXcuZmlyc3QpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGl0bGViYXJWaWV3LmZpcnN0LmlkID0gdGhpcy50aXRsZUlkO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5nWm9uZS5vblN0YWJsZS5waXBlKHRha2UoMSkpLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1YmJsZSgnY2xvc2UnLCB0aGlzLnRpdGxlYmFyVmlldy5maXJzdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEF0dHJpYnV0ZSh0aGlzLndyYXBwZXIubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuay1kaWFsb2cnKSwgJ2FyaWEtbGFiZWxsZWRieScsIHRoaXMudGl0bGVJZCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmluaXREb21FdmVudHMoKTtcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQXR0cmlidXRlKHRoaXMud3JhcHBlci5uYXRpdmVFbGVtZW50LCAndGl0bGUnKTtcbiAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmZvckVhY2gocyA9PiBzLnVuc3Vic2NyaWJlKCkpO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcbiAgICAgICAgaWYgKHRoaXMuZG9tU3Vicykge1xuICAgICAgICAgICAgdGhpcy5kb21TdWJzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9jdXNlcyB0aGUgd3JhcHBlciBvZiB0aGUgRGlhbG9nIGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBmb2N1cygpIHtcbiAgICAgICAgY29uc3Qgd3JhcHBlciA9IHRoaXMud3JhcHBlci5uYXRpdmVFbGVtZW50O1xuICAgICAgICBpZiAoaXNQcmVzZW50KHdyYXBwZXIpKSB7XG4gICAgICAgICAgICB3cmFwcGVyLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5pdERvbUV2ZW50cygpIHtcbiAgICAgICAgaWYgKCF0aGlzLndyYXBwZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRvbVN1YnMuYWRkKHRoaXMucmVuZGVyZXIubGlzdGVuKHRoaXMud3JhcHBlci5uYXRpdmVFbGVtZW50LCAna2V5ZG93bicsIChldikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub25LZXlEb3duKGV2KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9uS2V5RG93bihldmVudCkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IHRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgICBpZiAoaGFzQ2xhc3Nlcyh0YXJnZXQsIERJQUxPR19FTEVNRU5UU19IQU5ETElOR19FU0NfS0VZKSB8fCBoYXNDbGFzc2VzKHBhcmVudCwgRElBTE9HX0VMRU1FTlRTX0hBTkRMSU5HX0VTQ19LRVkpKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gS2V5cy5lc2MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlLmVtaXQobmV3IERpYWxvZ0Nsb3NlUmVzdWx0KCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNDbGFzc2VzKHRhcmdldCwgJ2stYnV0dG9uJykgJiYgaGFzQ2xhc3NlcyhwYXJlbnQsIERJQUxPR19FTEVNRU5UU19IQU5ETElOR19BUlJPV1MpICYmXG4gICAgICAgICAgICAoZXZlbnQua2V5Q29kZSA9PT0gS2V5cy5sZWZ0IHx8IGV2ZW50LmtleUNvZGUgPT09IEtleXMucmlnaHQpKSB7XG4gICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQWN0aW9uQnV0dG9uRm9jdXMocGFyZW50LCBldmVudC5rZXlDb2RlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBLZXlzLnRhYikge1xuICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmtlZXBGb2N1c1dpdGhpbkNvbXBvbmVudCh0YXJnZXQsIGV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldFNlcnZpY2VDbGFzc2VzKHByZXZWYWx1ZSwgdmFsdWUpIHtcbiAgICAgICAgY29uc3QgZWwgPSB0aGlzLndyYXBwZXIubmF0aXZlRWxlbWVudDtcbiAgICAgICAgaWYgKHByZXZWYWx1ZSkge1xuICAgICAgICAgICAgcGFyc2VDU1NDbGFzc05hbWVzKHByZXZWYWx1ZSkuZm9yRWFjaChjbGFzc05hbWUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3MoZWwsIGNsYXNzTmFtZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHBhcnNlQ1NTQ2xhc3NOYW1lcyh2YWx1ZSkuZm9yRWFjaChjbGFzc05hbWUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoZWwsIGNsYXNzTmFtZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgaGFuZGxlSW5pdGlhbEZvY3VzKCkge1xuICAgICAgICBjb25zdCB3cmFwcGVyID0gdGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHByaW1hcnlCdXR0b24gPSB3cmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5rLXByaW1hcnknKTtcbiAgICAgICAgaWYgKHRoaXMuYXV0b0ZvY3VzZWRFbGVtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBpbml0aWFsbHlGb2N1c2VkRWxlbWVudCA9IHdyYXBwZXIucXVlcnlTZWxlY3Rvcih0aGlzLmF1dG9Gb2N1c2VkRWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoaW5pdGlhbGx5Rm9jdXNlZEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsbHlGb2N1c2VkRWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc2hvdWxkRm9jdXNQcmltYXJ5KHByaW1hcnlCdXR0b24pKSB7XG4gICAgICAgICAgICBwcmltYXJ5QnV0dG9uLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB3cmFwcGVyLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGhhbmRsZUFjdGlvbkJ1dHRvbkZvY3VzKHBhcmVudCwga2V5KSB7XG4gICAgICAgIGNvbnN0IGZvY3VzYWJsZUFjdGlvbkJ1dHRvbnMgPSB0aGlzLmdldEFsbEZvY3VzYWJsZUNoaWxkcmVuKHBhcmVudCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm9jdXNhYmxlQWN0aW9uQnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IGZvY3VzYWJsZUFjdGlvbkJ1dHRvbnNbaV07XG4gICAgICAgICAgICBpZiAoY3VycmVudCA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IEtleXMubGVmdCAmJiBpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb2N1c2FibGVBY3Rpb25CdXR0b25zW2kgLSAxXS5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gS2V5cy5yaWdodCAmJiBpIDwgZm9jdXNhYmxlQWN0aW9uQnV0dG9ucy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvY3VzYWJsZUFjdGlvbkJ1dHRvbnNbaSArIDFdLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAga2VlcEZvY3VzV2l0aGluQ29tcG9uZW50KHRhcmdldCwgZXZlbnQpIHtcbiAgICAgICAgY29uc3Qgd3JhcHBlciA9IHRoaXMud3JhcHBlci5uYXRpdmVFbGVtZW50O1xuICAgICAgICBjb25zdCBbZmlyc3RGb2N1c2FibGUsIGxhc3RGb2N1c2FibGVdID0gdGhpcy5nZXRGaXJzdEFuZExhc3RGb2N1c2FibGUod3JhcHBlcik7XG4gICAgICAgIGNvbnN0IHRhYkFmdGVyTGFzdEZvY3VzYWJsZSA9ICFldmVudC5zaGlmdEtleSAmJiB0YXJnZXQgPT09IGxhc3RGb2N1c2FibGU7XG4gICAgICAgIGNvbnN0IHNoaWZ0VGFiQWZ0ZXJGaXJzdEZvY3VzYWJsZSA9IGV2ZW50LnNoaWZ0S2V5ICYmIHRhcmdldCA9PT0gZmlyc3RGb2N1c2FibGU7XG4gICAgICAgIGlmICh0YWJBZnRlckxhc3RGb2N1c2FibGUpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBmaXJzdEZvY3VzYWJsZS5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaGlmdFRhYkFmdGVyRmlyc3RGb2N1c2FibGUpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBsYXN0Rm9jdXNhYmxlLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHNob3VsZEZvY3VzUHJpbWFyeShlbCkge1xuICAgICAgICByZXR1cm4gaXNQcmVzZW50KGVsKSAmJiBpc0ZvY3VzYWJsZShlbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXRBbGxGb2N1c2FibGVDaGlsZHJlbihwYXJlbnQpIHtcbiAgICAgICAgcmV0dXJuIHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKGZvY3VzYWJsZVNlbGVjdG9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldEZpcnN0QW5kTGFzdEZvY3VzYWJsZShwYXJlbnQpIHtcbiAgICAgICAgY29uc3QgYWxsID0gdGhpcy5nZXRBbGxGb2N1c2FibGVDaGlsZHJlbihwYXJlbnQpO1xuICAgICAgICBjb25zdCBmaXJzdEZvY3VzYWJsZSA9IGFsbC5sZW5ndGggPiAwID8gYWxsWzBdIDogcGFyZW50O1xuICAgICAgICBjb25zdCBsYXN0Rm9jdXNhYmxlID0gYWxsLmxlbmd0aCA+IDAgPyBhbGxbYWxsLmxlbmd0aCAtIDFdIDogcGFyZW50O1xuICAgICAgICByZXR1cm4gW2ZpcnN0Rm9jdXNhYmxlLCBsYXN0Rm9jdXNhYmxlXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdlbmVyYXRlVGl0bGVJZCgpIHtcbiAgICAgICAgcmV0dXJuICdrZW5kby1kaWFsb2ctdGl0bGUtJyArIE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogMTAwMDAwMCkudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdlbmVyYXRlQ29udGVudElkKCkge1xuICAgICAgICByZXR1cm4gJ2tlbmRvLWRpYWxvZy1jb250ZW50LScgKyBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGdldCB3cmFwcGVyQ2xhc3MoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXQgc3R5bGVzKCkge1xuICAgICAgICBjb25zdCBzdHlsZXMgPSB7fTtcbiAgICAgICAgaWYgKHRoaXMud2lkdGgpIHtcbiAgICAgICAgICAgIHN0eWxlcy53aWR0aCA9IGNyZWF0ZVZhbHVlV2l0aFVuaXQodGhpcy53aWR0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGVpZ2h0KSB7XG4gICAgICAgICAgICBzdHlsZXMuaGVpZ2h0ID0gY3JlYXRlVmFsdWVXaXRoVW5pdCh0aGlzLmhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWluV2lkdGgpIHtcbiAgICAgICAgICAgIHN0eWxlcy5taW5XaWR0aCA9IGNyZWF0ZVZhbHVlV2l0aFVuaXQodGhpcy5taW5XaWR0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWF4V2lkdGgpIHtcbiAgICAgICAgICAgIHN0eWxlcy5tYXhXaWR0aCA9IGNyZWF0ZVZhbHVlV2l0aFVuaXQodGhpcy5tYXhXaWR0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWluSGVpZ2h0KSB7XG4gICAgICAgICAgICBzdHlsZXMubWluSGVpZ2h0ID0gY3JlYXRlVmFsdWVXaXRoVW5pdCh0aGlzLm1pbkhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWF4SGVpZ2h0KSB7XG4gICAgICAgICAgICBzdHlsZXMubWF4SGVpZ2h0ID0gY3JlYXRlVmFsdWVXaXRoVW5pdCh0aGlzLm1heEhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0eWxlcztcbiAgICB9XG4gICAgYnViYmxlKGV2ZW50TmFtZSwgY29tcG9uZW50KSB7XG4gICAgICAgIGlmIChjb21wb25lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGVtaXQgPSBlID0+IHRoaXNbZXZlbnROYW1lXS5lbWl0KGUpO1xuICAgICAgICAgICAgY29uc3QgcyA9IGNvbXBvbmVudFtldmVudE5hbWVdLnN1YnNjcmliZShlbWl0KTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHMpO1xuICAgICAgICB9XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEFycmF5KVxuXSwgRGlhbG9nQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhY3Rpb25zXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBEaWFsb2dDb21wb25lbnQucHJvdG90eXBlLCBcImFjdGlvbnNMYXlvdXRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIERpYWxvZ0NvbXBvbmVudC5wcm90b3R5cGUsIFwiYXV0b0ZvY3VzZWRFbGVtZW50XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBEaWFsb2dDb21wb25lbnQucHJvdG90eXBlLCBcInRpdGxlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBEaWFsb2dDb21wb25lbnQucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBEaWFsb2dDb21wb25lbnQucHJvdG90eXBlLCBcIm1pbldpZHRoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBEaWFsb2dDb21wb25lbnQucHJvdG90eXBlLCBcIm1heFdpZHRoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBEaWFsb2dDb21wb25lbnQucHJvdG90eXBlLCBcImhlaWdodFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgRGlhbG9nQ29tcG9uZW50LnByb3RvdHlwZSwgXCJtaW5IZWlnaHRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIERpYWxvZ0NvbXBvbmVudC5wcm90b3R5cGUsIFwibWF4SGVpZ2h0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgRGlhbG9nQ29tcG9uZW50LnByb3RvdHlwZSwgXCJhY3Rpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBEaWFsb2dDb21wb25lbnQucHJvdG90eXBlLCBcImNsb3NlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnYXR0ci5kaXInKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBEaWFsb2dDb21wb25lbnQucHJvdG90eXBlLCBcImRpclwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLnRhYkluZGV4JyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIERpYWxvZ0NvbXBvbmVudC5wcm90b3R5cGUsIFwidGFiSW5kZXhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIENvbnRlbnRDaGlsZHJlbihEaWFsb2dUaXRsZUJhckNvbXBvbmVudCwgeyBkZXNjZW5kYW50czogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFF1ZXJ5TGlzdClcbl0sIERpYWxvZ0NvbXBvbmVudC5wcm90b3R5cGUsIFwidGl0bGViYXJDb250ZW50XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGRyZW4oRGlhbG9nVGl0bGVCYXJDb21wb25lbnQpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBRdWVyeUxpc3QpXG5dLCBEaWFsb2dDb21wb25lbnQucHJvdG90eXBlLCBcInRpdGxlYmFyVmlld1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKERpYWxvZ0FjdGlvbnNDb21wb25lbnQsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRGlhbG9nQWN0aW9uc0NvbXBvbmVudClcbl0sIERpYWxvZ0NvbXBvbmVudC5wcm90b3R5cGUsIFwiYWN0aW9uc1ZpZXdcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWRpYWxvZy13cmFwcGVyJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIERpYWxvZ0NvbXBvbmVudC5wcm90b3R5cGUsIFwid3JhcHBlckNsYXNzXCIsIG51bGwpO1xuRGlhbG9nQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgQ29tcG9uZW50KHtcbiAgICAgICAgYW5pbWF0aW9uczogW1xuICAgICAgICAgICAgdHJpZ2dlcignb3ZlcmxheUFwcGVhcicsIFtcbiAgICAgICAgICAgICAgICBzdGF0ZSgnaW4nLCBzdHlsZSh7IG9wYWNpdHk6IDEgfSkpLFxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24oJ3ZvaWQgPT4gKicsIFtzdHlsZSh7IG9wYWNpdHk6IDAuMSB9KSwgYW5pbWF0ZSgnLjNzIGN1YmljLWJlemllciguMiwgLjYsIC40LCAxKScpXSlcbiAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgdHJpZ2dlcignZGlhbG9nU2xpZGVJbkFwcGVhcicsIFtcbiAgICAgICAgICAgICAgICBzdGF0ZSgnaW4nLCBzdHlsZSh7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgwLCAwKScgfSkpLFxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24oJ3ZvaWQgPT4gKicsIFtzdHlsZSh7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgwLCAtMTAlKScgfSksIGFuaW1hdGUoJy4zcyBjdWJpYy1iZXppZXIoLjIsIDEsIC4yLCAxKScpXSlcbiAgICAgICAgICAgIF0pXG4gICAgICAgIF0sXG4gICAgICAgIGV4cG9ydEFzOiAna2VuZG9EaWFsb2cnLFxuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogRElBTE9HX0xPQ0FMSVpBVElPTl9TRVJWSUNFLFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBMb2NhbGl6YXRpb25TZXJ2aWNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IEwxME5fUFJFRklYLFxuICAgICAgICAgICAgICAgIHVzZVZhbHVlOiAna2VuZG8uZGlhbG9nJ1xuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBzZWxlY3RvcjogJ2tlbmRvLWRpYWxvZycsXG4gICAgICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgICAgIGtlbmRvRGlhbG9nTG9jYWxpemVkTWVzc2FnZXNcbiAgICAgICAgICAgIGkxOG4tY2xvc2VUaXRsZT1cImtlbmRvLmRpYWxvZy5jbG9zZVRpdGxlfFRoZSB0aXRsZSBvZiB0aGUgY2xvc2UgYnV0dG9uXCJcbiAgICAgICAgICAgIGNsb3NlVGl0bGU9XCJDbG9zZVwiXG4gICAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzcz1cImstb3ZlcmxheVwiIEBvdmVybGF5QXBwZWFyPjwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJrLXdpbmRvdyBrLWRpYWxvZ1wiIHJvbGU9XCJkaWFsb2dcIiBhcmlhLW1vZGFsPVwidHJ1ZVwiIFtuZ1N0eWxlXT1cInN0eWxlc1wiIEBkaWFsb2dTbGlkZUluQXBwZWFyPlxuICAgICAgICAgICAgPGtlbmRvLWRpYWxvZy10aXRsZWJhciAqbmdJZj1cInRpdGxlXCIgW2Nsb3NlVGl0bGVdPVwiY2xvc2VUaXRsZVwiIFtpZF09XCJ0aXRsZUlkXCI+e3sgdGl0bGUgfX08L2tlbmRvLWRpYWxvZy10aXRsZWJhcj5cbiAgICAgICAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cImtlbmRvLWRpYWxvZy10aXRsZWJhclwiICpuZ0lmPVwiIXRpdGxlXCI+PC9uZy1jb250ZW50PlxuXG4gICAgICAgICAgICA8ZGl2IFtpZF09XCJjb250ZW50SWRcIiBjbGFzcz1cImstY29udGVudCBrLXdpbmRvdy1jb250ZW50IGstZGlhbG9nLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICA8bmctY29udGVudCAqbmdJZj1cIiFjb250ZW50VGVtcGxhdGVcIj48L25nLWNvbnRlbnQ+XG4gICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIFtuZ1RlbXBsYXRlT3V0bGV0XT1cImNvbnRlbnRUZW1wbGF0ZVwiICpuZ0lmPVwiY29udGVudFRlbXBsYXRlXCI+PC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XCJrZW5kby1kaWFsb2ctYWN0aW9uc1wiICpuZ0lmPVwiIWFjdGlvbnNcIj48L25nLWNvbnRlbnQ+XG4gICAgICAgICAgICA8a2VuZG8tZGlhbG9nLWFjdGlvbnMgKm5nSWY9XCJhY3Rpb25zXCIgW2FjdGlvbnNdPVwiYWN0aW9uc1wiIFtsYXlvdXRdPVwiYWN0aW9uc0xheW91dFwiPiA8L2tlbmRvLWRpYWxvZy1hY3Rpb25zPlxuICAgICAgICA8L2Rpdj5cbiAgICA8L25nLWNvbnRhaW5lcj5cbiAgICBgXG4gICAgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtFbGVtZW50UmVmLFxuICAgICAgICBSZW5kZXJlcjIsXG4gICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgIENoYW5nZURldGVjdG9yUmVmLFxuICAgICAgICBOZ1pvbmVdKVxuXSwgRGlhbG9nQ29tcG9uZW50KTtcblxuLyoqXG4gKiBUaGUgYmFzZSBjbGFzcyAgd2hpY2ggd2lsbCBiZSBleHRlbmRlZCBieSBhIGNvbXBvbmVudCB0aGF0IGlzIHByb3ZpZGVkIGFzIGNvbnRlbnQgdGhyb3VnaCBgY29udGVudGBcbiAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgc2VydmljZV9kaWFsb2cgJX0jdG9jLXBhc3NpbmctdGl0bGUtY29udGVudC1hbmQtYWN0aW9ucy1hcy1hLXNpbmdsZS1jb21wb25lbnQpKS5cbiAqL1xuY2xhc3MgRGlhbG9nQ29udGVudEJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKGRpYWxvZykge1xuICAgICAgICB0aGlzLmRpYWxvZyA9IGRpYWxvZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlhbG9nVGl0bGVCYXIpIHtcbiAgICAgICAgICAgIC8vIHdoZW4gb3BlbmluZyBjb21wb25lbnQgaW5zaWRlIGRpYWxvZyB3aXRoIHNlcnZpY2UgQU5EIHRoZSBjb21wb25lbnQgaGFzIGRlZmluZWQgaXRzIG93biB0aXRsZWJhclxuICAgICAgICAgICAgdGhpcy5kaWFsb2dUaXRsZUJhci5jbG9zZS5waXBlKGZpbHRlcigoZSkgPT4gIWUuaXNEZWZhdWx0UHJldmVudGVkKCkpKS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nLmNsb3NlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kaWFsb2dBY3Rpb25zKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kaWFsb2dBY3Rpb25zLmFjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0FjdGlvbnMuYWN0aW9uLnN1YnNjcmliZShhY3Rpb24gPT4gdGhpcy5kaWFsb2cuZGlhbG9nLmluc3RhbmNlLmFjdGlvbi5lbWl0KGFjdGlvbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKERpYWxvZ1RpdGxlQmFyQ29tcG9uZW50LCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIERpYWxvZ1RpdGxlQmFyQ29tcG9uZW50KVxuXSwgRGlhbG9nQ29udGVudEJhc2UucHJvdG90eXBlLCBcImRpYWxvZ1RpdGxlQmFyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoRGlhbG9nQWN0aW9uc0NvbXBvbmVudCwgeyBzdGF0aWM6IGZhbHNlIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBEaWFsb2dBY3Rpb25zQ29tcG9uZW50KVxuXSwgRGlhbG9nQ29udGVudEJhc2UucHJvdG90eXBlLCBcImRpYWxvZ0FjdGlvbnNcIiwgdm9pZCAwKTtcblxudmFyIERpYWxvZ0NvbnRhaW5lclNlcnZpY2VfMTtcbi8qKlxuICogQGhpZGRlblxuICovXG5sZXQgRGlhbG9nQ29udGFpbmVyU2VydmljZSA9IERpYWxvZ0NvbnRhaW5lclNlcnZpY2VfMSA9IGNsYXNzIERpYWxvZ0NvbnRhaW5lclNlcnZpY2Uge1xuICAgIHNldCBjb250YWluZXIoY29udGFpbmVyKSB7XG4gICAgICAgIERpYWxvZ0NvbnRhaW5lclNlcnZpY2VfMS5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgfVxuICAgIGdldCBjb250YWluZXIoKSB7XG4gICAgICAgIHJldHVybiBEaWFsb2dDb250YWluZXJTZXJ2aWNlXzEuY29udGFpbmVyO1xuICAgIH1cbn07XG5EaWFsb2dDb250YWluZXJTZXJ2aWNlLmNvbnRhaW5lciA9IG51bGw7XG5EaWFsb2dDb250YWluZXJTZXJ2aWNlID0gRGlhbG9nQ29udGFpbmVyU2VydmljZV8xID0gX19kZWNvcmF0ZShbXG4gICAgSW5qZWN0YWJsZSgpXG5dLCBEaWFsb2dDb250YWluZXJTZXJ2aWNlKTtcblxuY29uc3QgaXNOb3RDb21wb25lbnQgPSAoY29tcG9uZW50KSA9PiBpc1N0cmluZyhjb21wb25lbnQpIHx8IGNvbXBvbmVudCBpbnN0YW5jZW9mIFRlbXBsYXRlUmVmO1xuY2xhc3MgRGlhbG9nSW5qZWN0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGdldERpYWxvZ1JlZiwgcGFyZW50SW5qZWN0b3IpIHtcbiAgICAgICAgdGhpcy5nZXREaWFsb2dSZWYgPSBnZXREaWFsb2dSZWY7XG4gICAgICAgIHRoaXMucGFyZW50SW5qZWN0b3IgPSBwYXJlbnRJbmplY3RvcjtcbiAgICB9XG4gICAgZ2V0KHRva2VuLCBub3RGb3VuZFZhbHVlKSB7XG4gICAgICAgIGlmICh0b2tlbiA9PT0gRGlhbG9nUmVmKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREaWFsb2dSZWYoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnRJbmplY3Rvci5nZXQodG9rZW4sIG5vdEZvdW5kVmFsdWUpO1xuICAgIH1cbn1cbi8qKlxuICogQSBzZXJ2aWNlIGZvciBvcGVuaW5nIERpYWxvZyB3aW5kb3dzIGR5bmFtaWNhbGx5XG4gKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIHNlcnZpY2VfZGlhbG9nICV9KSkuXG4gKi9cbmxldCBEaWFsb2dTZXJ2aWNlID0gY2xhc3MgRGlhbG9nU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlc29sdmVyLCBjb250YWluZXJTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMucmVzb2x2ZXIgPSByZXNvbHZlcjtcbiAgICAgICAgdGhpcy5jb250YWluZXJTZXJ2aWNlID0gY29udGFpbmVyU2VydmljZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3BlbnMgYSBEaWFsb2cgd2luZG93LiBSZXF1aXJlcyBhbiBlbGVtZW50IGluIHRoZSBhcHBsaWNhdGlvbiB0aGF0IHVzZXMgdGhlXG4gICAgICogW2BrZW5kb0RpYWxvZ0NvbnRhaW5lcmBdKHslIHNsdWcgYXBpX2RpYWxvZ19kaWFsb2djb250YWluZXJkaXJlY3RpdmUgJX0pIGRpcmVjdGl2ZS5cbiAgICAgKiBDcmVhdGVkIERpYWxvZ3Mgd2lsbCBiZSBtb3VudGVkIGluIHRoZSBET00gZGlyZWN0bHkgYWZ0ZXIgdGhhdCBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtEaWFsb2dBY3Rpb259IG9wdGlvbnMgLSBUaGUgb3B0aW9ucyB0aGF0IGRlZmluZSB0aGUgRGlhbG9nLlxuICAgICAqIEByZXR1cm5zIHtEaWFsb2dSZWZ9IC0gQSByZWZlcmVuY2UgdG8gdGhlIERpYWxvZyBvYmplY3QgYW5kIHRoZSBjb252ZW5pZW5jZSBwcm9wZXJ0aWVzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGBgYHRzLW5vLXJ1blxuICAgICAqIF9AQ29tcG9uZW50KHtcbiAgICAgKiAgIHNlbGVjdG9yOiAnbXktYXBwJyxcbiAgICAgKiAgIHRlbXBsYXRlOiBgXG4gICAgICogICAgIDxidXR0b24ga2VuZG9CdXR0b24gKGNsaWNrKT1cIm9wZW4oKVwiPkhhcm1sZXNzIGJ1dHRvbjwvYnV0dG9uPlxuICAgICAqICAgICA8ZGl2IGtlbmRvRGlhbG9nQ29udGFpbmVyPjwvZGl2PlxuICAgICAqICAgYFxuICAgICAqIH0pXG4gICAgICogZXhwb3J0IGNsYXNzIEFwcENvbXBvbmVudCB7XG4gICAgICogICAgIGNvbnN0cnVjdG9yKCBwcml2YXRlIGRpYWxvZ1NlcnZpY2U6IERpYWxvZ1NlcnZpY2UgKSB7fVxuICAgICAqXG4gICAgICogICAgIHB1YmxpYyBvcGVuKCkge1xuICAgICAqICAgICAgICAgdmFyIGRpYWxvZyA9IHRoaXMuZGlhbG9nU2VydmljZS5vcGVuKHtcbiAgICAgKiAgICAgICAgICAgdGl0bGU6IFwiUGxlYXNlIGNvbmZpcm1cIixcbiAgICAgKiAgICAgICAgICAgY29udGVudDogXCJBcmUgeW91IHN1cmU/XCIsXG4gICAgICogICAgICAgICAgIGFjdGlvbnM6IFtcbiAgICAgKiAgICAgICAgICAgICB7IHRleHQ6IFwiTm9cIiB9LFxuICAgICAqICAgICAgICAgICAgIHsgdGV4dDogXCJZZXNcIiwgcHJpbWFyeTogdHJ1ZSB9XG4gICAgICogICAgICAgICAgIF1cbiAgICAgKiAgICAgICAgIH0pO1xuICAgICAqXG4gICAgICogICAgICAgICBkaWFsb2cucmVzdWx0LnN1YnNjcmliZSgocmVzdWx0KSA9PiB7XG4gICAgICogICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBEaWFsb2dDbG9zZVJlc3VsdCkge1xuICAgICAqICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY2xvc2VcIik7XG4gICAgICogICAgICAgICAgIH0gZWxzZSB7XG4gICAgICogICAgICAgICAgICAgY29uc29sZS5sb2coXCJhY3Rpb25cIiwgcmVzdWx0KTtcbiAgICAgKiAgICAgICAgICAgfVxuICAgICAqICAgICAgICAgfSk7XG4gICAgICogICAgIH1cbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKi9cbiAgICBvcGVuKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZmFjdG9yeSA9IHRoaXMucmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoRGlhbG9nQ29tcG9uZW50KTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gb3B0aW9ucy5hcHBlbmRUbyB8fCB0aGlzLmNvbnRhaW5lclNlcnZpY2UuY29udGFpbmVyO1xuICAgICAgICBpZiAoIWNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcbkNhbm5vdCBhdHRhY2ggZGlhbG9nIHRvIHRoZSBwYWdlLlxuQWRkIGFuIGVsZW1lbnQgdGhhdCB1c2VzIHRoZSBrZW5kb0RpYWxvZ0NvbnRhaW5lciBkaXJlY3RpdmUsIG9yIHNldCB0aGUgJ2FwcGVuZFRvJyBwcm9wZXJ0eS5cblNlZSBodHRwczovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL2NvbXBvbmVudHMvZGlhbG9ncy9kaWFsb2cvc2VydmljZS8uXG4gICAgICAgICAgYCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY3JlYXRlIERpYWxvZ1JlZiB0byAoMSkgcGFzcyBhcyByZXN1bHQsICgyKSBwcm92aWRlIHRocm91Z2ggaW5qZWN0b3JcbiAgICAgICAgY29uc3QgZGlhbG9nUmVmID0ge1xuICAgICAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAvKiBub29wICovXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udGVudDogbnVsbCxcbiAgICAgICAgICAgIGRpYWxvZzogbnVsbCxcbiAgICAgICAgICAgIHJlc3VsdDogbnVsbFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5pbml0aWFsaXplRGlhbG9nKG9wdGlvbnMuY29udGVudCwgZmFjdG9yeSwgY29udGFpbmVyLCBkaWFsb2dSZWYsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBpbml0aWFsaXplRGlhbG9nKGNvbXBvbmVudCwgZmFjdG9yeSwgY29udGFpbmVyLCBkaWFsb2dSZWYsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IHRoaXMuY29udGVudEZyb20oY29tcG9uZW50LCBjb250YWluZXIsIGRpYWxvZ1JlZik7XG4gICAgICAgIGNvbnN0IGRpYWxvZyA9IGNvbnRhaW5lci5jcmVhdGVDb21wb25lbnQoZmFjdG9yeSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbnRlbnQubm9kZXMpO1xuICAgICAgICBkaWFsb2dSZWYuZGlhbG9nID0gZGlhbG9nO1xuICAgICAgICBkaWFsb2cuY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIC8vIGNvcHkgQElucHV0IG9wdGlvbnMgdG8gZGlhbG9nIGluc3RhbmNlXG4gICAgICAgIHRoaXMuYXBwbHlPcHRpb25zKGRpYWxvZy5pbnN0YW5jZSwgb3B0aW9ucyk7XG4gICAgICAgIC8vIGNyZWF0ZSBjbG9zZSBoYW5kbGVyIGFuZCByZXN1bHQgc3RyZWFtXG4gICAgICAgIGNvbnN0IGFwaUNsb3NlID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgY29uc3QgY2xvc2UgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBQcmV2ZW50YWJsZUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgZSA9IG5ldyBEaWFsb2dDbG9zZVJlc3VsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXBpQ2xvc2UubmV4dChlIHx8IG5ldyBEaWFsb2dDbG9zZVJlc3VsdCgpKTtcbiAgICAgICAgICAgIGlmIChjb250ZW50LmNvbXBvbmVudFJlZikge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQuY29tcG9uZW50UmVmLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpYWxvZy5kZXN0cm95KCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG1lcmdlKGFwaUNsb3NlLCBcbiAgICAgICAgLy8gdHJpZ2dlcmVkIHdoZW4gdGhlIHRpdGxlYmFyIG9yIGFjdGlvbnMgYXJlIGRlZmluZWQgaW4gRGlhbG9nU2V0dGluZ3NcbiAgICAgICAgbWVyZ2UoZGlhbG9nLmluc3RhbmNlLmNsb3NlLCBkaWFsb2cuaW5zdGFuY2UuYWN0aW9uKS5waXBlKG1hcChlID0+IChlIGluc3RhbmNlb2YgUHJldmVudGFibGVFdmVudCA/IG5ldyBEaWFsb2dDbG9zZVJlc3VsdCgpIDogZSkpLCBmaWx0ZXIoZSA9PiB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5wcmV2ZW50QWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gYWRkIGRpYWxvZ1JlZiBvbmx5IHdoZW4gdXNpbmcgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgY29uc3QgZGlhbG9nUmVmUGFyYW1ldGVyID0gaXNOb3RDb21wb25lbnQoY29tcG9uZW50KSA/IHVuZGVmaW5lZCA6IGRpYWxvZ1JlZjtcbiAgICAgICAgICAgICAgICByZXR1cm4gIW9wdGlvbnMucHJldmVudEFjdGlvbihlLCBkaWFsb2dSZWZQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pKSkucGlwZSh0YWtlKDEpLCBcbiAgICAgICAgLy8gVGFrZXMgY2FyZSBmb3IgbXVsdGlwbGUgc3Vic2NyaXB0aW9uczpcbiAgICAgICAgLy8gV2Ugc3Vic2NyaWJlIGludGVybmFseSBhbmQgdGhlIHVzZXIgbWF5IHN1YnNjcmliZSB0byBnZXQgYSBjbG9zZSByZXN1bHQgLSBkaWFsb2cucmVzdWx0LnN1YnNjcmliZSgpLlxuICAgICAgICAvLyBUaGlzIGNhdXNlcyBtdWx0aXBsZSBzdWJzY3JpcHRpb25zIHRvIHRoZSBzYW1lIHNvdXJjZSBhbmQgdGh1cyBtdWx0aXBsZSBlbWlzc2lvbnMuIHNoYXJlKCkgc29sdmVzIHRoYXQuXG4gICAgICAgIHNoYXJlKCkpO1xuICAgICAgICByZXN1bHQuc3Vic2NyaWJlKGNsb3NlKTtcbiAgICAgICAgZGlhbG9nUmVmLmNsb3NlID0gY2xvc2U7XG4gICAgICAgIGRpYWxvZ1JlZi5yZXN1bHQgPSByZXN1bHQ7XG4gICAgICAgIGlmIChjb21wb25lbnQgJiYgaXNEZXZNb2RlKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhc0NvbnRlbnRUaXRsZSA9IGNvbnRlbnQubm9kZXNbMF0gJiYgY29udGVudC5ub2Rlc1swXS5sZW5ndGggPiAwO1xuICAgICAgICAgICAgY29uc3QgaGFzQ29udGVudEFjdGlvbnMgPSBjb250ZW50Lm5vZGVzWzJdICYmIGNvbnRlbnQubm9kZXNbMl0ubGVuZ3RoID4gMDtcbiAgICAgICAgICAgIGNvbnN0IG11bHRpcGxlVGl0bGVzID0gb3B0aW9ucy50aXRsZSAmJiBoYXNDb250ZW50VGl0bGU7XG4gICAgICAgICAgICBjb25zdCBtdWx0aXBsZUFjdGlvbnMgPSBvcHRpb25zLmFjdGlvbnMgJiYgaGFzQ29udGVudEFjdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50LnByb3RvdHlwZSBpbnN0YW5jZW9mIERpYWxvZ0NvbnRlbnRCYXNlKSB7XG4gICAgICAgICAgICAgICAgLy8gY29udGVudCBjb21wb25lbnQgZXh0ZW5kcyBEaWFsb2dDb250ZW50QmFzZVxuICAgICAgICAgICAgICAgIGlmIChtdWx0aXBsZVRpdGxlcyB8fCBtdWx0aXBsZUFjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBcbiAgICAgICAgICAgICAgICAgICAgTXVsdGlwbGUgVGl0bGUgYW5kL29yIEFjdGlvbnMgY29uZmlndXJhdGlvbnMgZGV0ZWN0ZWQuXG4gICAgICAgICAgICAgICAgICAgIFdoZW4gdXNpbmcgYSBjb21wb25lbnQgYXMgY29udGVudCwgcHJvdmlkZSB0aGUgdGl0bGUgYW5kIGFjdGlvbnMgZWl0aGVyIGluIHRoZSBjb21wb25lbnQncyBtYXJrdXBcbiAgICAgICAgICAgICAgICAgICAgb3IgdmlhIHRoZSB0aXRsZSBhbmQgYWN0aW9ucyBwcm9wZXJ0aWVzIG9mIHRoZSBEaWFsb2dTZXR0aW5ncyBvYmplY3QsIGJ1dCBub3QgYm90aC5cbiAgICAgICAgICAgICAgICAgICAgU2VlIGh0dHBzOi8vd3d3LnRlbGVyaWsuY29tL2tlbmRvLWFuZ3VsYXItdWkvY29tcG9uZW50cy9kaWFsb2dzL2RpYWxvZy9zZXJ2aWNlLyN0b2MtcGFzc2luZy10aXRsZS1jb250ZW50LWFuZC1hY3Rpb25zLWFzLWEtc2luZ2xlLWNvbXBvbmVudCdgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzQ29udGVudFRpdGxlIHx8IGhhc0NvbnRlbnRBY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgXG4gICAgICAgICAgICAgICAgICAgIFdoZW4gVGl0bGUgYW5kL29yIEFjdGlvbnMgbWFya3VwIGlzIHByb3ZpZGVkIGluIGNvbnRlbnQgY29tcG9uZW50J3MgdGVtcGxhdGUsXG4gICAgICAgICAgICAgICAgICAgIHRoZSBjb21wb25lbnQgbmVlZHMgdG8gaW5oZXJpdCB0aGUgRGlhbG9nQ29udGVudEJhc2UgY2xhc3MgdG8gZW5zdXJlIHRoYXQgY2xvc2UgYW5kIHJlc3VsdCBldmVudHMgYXJlIHByb3Blcmx5IGhvb2tlZC5cbiAgICAgICAgICAgICAgICAgICAgU2VlIGh0dHBzOi8vd3d3LnRlbGVyaWsuY29tL2tlbmRvLWFuZ3VsYXItdWkvY29tcG9uZW50cy9kaWFsb2dzL2RpYWxvZy9zZXJ2aWNlLyN0b2MtcGFzc2luZy10aXRsZS1jb250ZW50LWFuZC1hY3Rpb25zLWFzLWEtc2luZ2xlLWNvbXBvbmVudCdgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRpYWxvZ1JlZjtcbiAgICB9XG4gICAgYXBwbHlPcHRpb25zKGluc3RhbmNlLCBvcHRpb25zKSB7XG4gICAgICAgIGluc3RhbmNlLnRpdGxlID0gb3B0aW9ucy50aXRsZTtcbiAgICAgICAgaW5zdGFuY2UuYWN0aW9ucyA9IG9wdGlvbnMuYWN0aW9ucztcbiAgICAgICAgaW5zdGFuY2UuYWN0aW9uc0xheW91dCA9IG9wdGlvbnMuYWN0aW9uc0xheW91dCB8fCAnc3RyZXRjaGVkJztcbiAgICAgICAgaW5zdGFuY2Uud2lkdGggPSBvcHRpb25zLndpZHRoO1xuICAgICAgICBpbnN0YW5jZS5taW5XaWR0aCA9IG9wdGlvbnMubWluV2lkdGg7XG4gICAgICAgIGluc3RhbmNlLm1heFdpZHRoID0gb3B0aW9ucy5tYXhXaWR0aDtcbiAgICAgICAgaW5zdGFuY2UuaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQ7XG4gICAgICAgIGluc3RhbmNlLm1pbkhlaWdodCA9IG9wdGlvbnMubWluSGVpZ2h0O1xuICAgICAgICBpbnN0YW5jZS5tYXhIZWlnaHQgPSBvcHRpb25zLm1heEhlaWdodDtcbiAgICAgICAgaW5zdGFuY2UuYXV0b0ZvY3VzZWRFbGVtZW50ID0gb3B0aW9ucy5hdXRvRm9jdXNlZEVsZW1lbnQ7XG4gICAgICAgIGluc3RhbmNlLmNsb3NlVGl0bGUgPSBvcHRpb25zLmNsb3NlVGl0bGU7XG4gICAgICAgIGluc3RhbmNlLmNzc0NsYXNzID0gb3B0aW9ucy5jc3NDbGFzcztcbiAgICAgICAgaW5zdGFuY2UuaHRtbEF0dHJpYnV0ZXMgPSBvcHRpb25zLmh0bWxBdHRyaWJ1dGVzO1xuICAgICAgICBpZiAob3B0aW9ucy5jb250ZW50IGluc3RhbmNlb2YgVGVtcGxhdGVSZWYpIHtcbiAgICAgICAgICAgIGluc3RhbmNlLmNvbnRlbnRUZW1wbGF0ZSA9IG9wdGlvbnMuY29udGVudDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb250ZW50RnJvbShjb250ZW50LCBjb250YWluZXIsIGRpYWxvZ1JlZikge1xuICAgICAgICBjb25zdCByZW5kZXJlciA9IGNvbnRhaW5lci5pbmplY3Rvci5nZXQoUmVuZGVyZXIyKTtcbiAgICAgICAgbGV0IG5vZGVzID0gW107XG4gICAgICAgIGxldCB0aXRsZU5vZGVzID0gW107XG4gICAgICAgIGxldCBhY3Rpb25Ob2RlcyA9IFtdO1xuICAgICAgICBsZXQgY29tcG9uZW50UmVmID0gbnVsbDtcbiAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgbm9kZXMgPSBbcmVuZGVyZXIuY3JlYXRlVGV4dChjb250ZW50KV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29udGVudCAmJiAhKGNvbnRlbnQgaW5zdGFuY2VvZiBUZW1wbGF0ZVJlZikpIHtcbiAgICAgICAgICAgIC8vIENvbXBvbmVudFxuICAgICAgICAgICAgY29uc3QgaW5qZWN0b3IgPSBuZXcgRGlhbG9nSW5qZWN0b3IoKCkgPT4gZGlhbG9nUmVmLCBjb250YWluZXIuaW5qZWN0b3IpO1xuICAgICAgICAgICAgY29uc3QgZmFjdG9yeSA9IHRoaXMucmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoY29udGVudCk7XG4gICAgICAgICAgICBjb21wb25lbnRSZWYgPSBjb250YWluZXIuY3JlYXRlQ29tcG9uZW50KGZhY3RvcnksIHVuZGVmaW5lZCwgaW5qZWN0b3IpO1xuICAgICAgICAgICAgdGl0bGVOb2RlcyA9IEFycmF5LmZyb20oY29tcG9uZW50UmVmLmxvY2F0aW9uLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgna2VuZG8tZGlhbG9nLXRpdGxlYmFyJykpO1xuICAgICAgICAgICAgbm9kZXMgPSBbY29tcG9uZW50UmVmLmxvY2F0aW9uLm5hdGl2ZUVsZW1lbnRdO1xuICAgICAgICAgICAgYWN0aW9uTm9kZXMgPSBBcnJheS5mcm9tKGNvbXBvbmVudFJlZi5sb2NhdGlvbi5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2tlbmRvLWRpYWxvZy1hY3Rpb25zJykpO1xuICAgICAgICAgICAgZGlhbG9nUmVmLmNvbnRlbnQgPSBjb21wb25lbnRSZWY7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbXBvbmVudFJlZixcbiAgICAgICAgICAgIG5vZGVzOiBbXG4gICAgICAgICAgICAgICAgdGl0bGVOb2RlcyxcbiAgICAgICAgICAgICAgICBub2RlcyxcbiAgICAgICAgICAgICAgICBhY3Rpb25Ob2RlcyAvLyA8bmctY29udGVudCBzZWxlY3Q9XCJrZW5kby1kaWFsb2ctYWN0aW9uc1wiPlxuICAgICAgICAgICAgXVxuICAgICAgICB9O1xuICAgIH1cbn07XG5EaWFsb2dTZXJ2aWNlID0gX19kZWNvcmF0ZShbXG4gICAgSW5qZWN0YWJsZSgpLFxuICAgIF9fcGFyYW0oMSwgSW5qZWN0KERpYWxvZ0NvbnRhaW5lclNlcnZpY2UpKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0NvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcbiAgICAgICAgRGlhbG9nQ29udGFpbmVyU2VydmljZV0pXG5dLCBEaWFsb2dTZXJ2aWNlKTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmxldCBuZXdaSW5kZXggPSAxMDAwMjtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBERUZBVUxUX09QVElPTlMgPSB7XG4gICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgIGhlaWdodDogbnVsbCxcbiAgICBsZWZ0OiBudWxsLFxuICAgIG1pbkhlaWdodDogMTAwLFxuICAgIG1pbldpZHRoOiAxMjAsXG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgcmVzaXphYmxlOiB0cnVlLFxuICAgIHN0YXRlOiAnZGVmYXVsdCcsXG4gICAgdG9wOiBudWxsLFxuICAgIHdpZHRoOiBudWxsXG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGNyZWF0ZU1vdmVTdHJlYW0gPSAoZWwsIGV2KSA9PiBtb3VzZURvd24gPT4ge1xuICAgIHJldHVybiBlbC5rZW5kb0RyYWdcbiAgICAgICAgLnBpcGUodGFrZVVudGlsKGVsLmtlbmRvUmVsZWFzZS5waXBlKHRhcCgoKSA9PiB7IGV2LmVtaXQoKTsgfSkpKSwgbWFwKCh7IHBhZ2VYLCBwYWdlWSB9KSA9PiAoe1xuICAgICAgICBvcmlnaW5hbFg6IG1vdXNlRG93bi5wYWdlWCxcbiAgICAgICAgb3JpZ2luYWxZOiBtb3VzZURvd24ucGFnZVksXG4gICAgICAgIHBhZ2VYLFxuICAgICAgICBwYWdlWVxuICAgIH0pKSk7XG59O1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmxldCBEcmFnUmVzaXplU2VydmljZSA9IGNsYXNzIERyYWdSZXNpemVTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcihuZ1pvbmUpIHtcbiAgICAgICAgdGhpcy5uZ1pvbmUgPSBuZ1pvbmU7XG4gICAgICAgIHRoaXMuY2xvc2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuZm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuY2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmRyYWdTdGFydCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5kcmFnRW5kID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnJlc2l6ZVN0YXJ0ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnJlc2l6ZUVuZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9PUFRJT05TKTtcbiAgICAgICAgdGhpcy5sYXN0QWN0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICAgICAgICB0aGlzLmRyYWdTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kcmFnU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmRyYWdTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbml0KGVsKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlJCQxID0gdGhpcy5vcHRpb25zLnN0YXRlO1xuICAgICAgICBsZXQgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgdGhpcy53aW5kb3cgPSBlbDtcbiAgICAgICAgaWYgKHN0YXRlJCQxICE9PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgICAgIHRoaXMucmVzdG9yZU9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUkJDEgPT09ICdtaW5pbWl6ZWQnKSB7XG4gICAgICAgICAgICBvcHRpb25zLmhlaWdodCA9IDA7XG4gICAgICAgICAgICBvcHRpb25zLm1pbkhlaWdodCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRlJCQxID09PSAnbWF4aW1pemVkJykge1xuICAgICAgICAgICAgb3B0aW9ucy5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25EcmFnKGVsKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQodGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgICAgbGV0IHN0YXJ0UG9zaXRpb247XG4gICAgICAgICAgICBsZXQgZHJhZ1N0YXJ0ZWQ7XG4gICAgICAgICAgICB0aGlzLmRyYWdTdWJzY3JpcHRpb24gPSBlbC5rZW5kb1ByZXNzXG4gICAgICAgICAgICAgICAgLnBpcGUodGFwKChldikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghZXYuaXNUb3VjaCkge1xuICAgICAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdChldik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXMuZW1pdCgpO1xuICAgICAgICAgICAgICAgIHN0YXJ0UG9zaXRpb24gPSB0aGlzLmN1cnJlbnRQb3NpdGlvbigpO1xuICAgICAgICAgICAgICAgIGRyYWdTdGFydGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9KSwgc3dpdGNoTWFwKGNyZWF0ZU1vdmVTdHJlYW0oZWwsIHRoaXMuZHJhZ0VuZCkpKVxuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUoKHsgcGFnZVgsIHBhZ2VZLCBvcmlnaW5hbFgsIG9yaWdpbmFsWSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFkcmFnU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuc3VyZVdpZHRoKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhZ1N0YXJ0LmVtaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgZHJhZ1N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZURyYWcoe1xuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFgsIG9yaWdpbmFsWSxcbiAgICAgICAgICAgICAgICAgICAgcGFnZVgsIHBhZ2VZLCBzdGFydFBvc2l0aW9uXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBoYW5kbGVEcmFnKHsgb3JpZ2luYWxYLCBvcmlnaW5hbFksIHBhZ2VYLCBwYWdlWSwgc3RhcnRQb3NpdGlvbiB9KSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5sZWZ0ID0gc3RhcnRQb3NpdGlvbi54ICsgcGFnZVggLSBvcmlnaW5hbFg7XG4gICAgICAgIHRoaXMub3B0aW9ucy50b3AgPSBzdGFydFBvc2l0aW9uLnkgKyBwYWdlWSAtIG9yaWdpbmFsWTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zdGF0ZSA9PT0gJ21pbmltaXplZCcgJiYgaXNQcmVzZW50KHRoaXMucmVzdG9yZU9wdGlvbnMpKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3RvcmVPcHRpb25zLmxlZnQgPSB0aGlzLm9wdGlvbnMubGVmdDtcbiAgICAgICAgICAgIHRoaXMucmVzdG9yZU9wdGlvbnMudG9wID0gdGhpcy5vcHRpb25zLnRvcDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5nZS5lbWl0KHtcbiAgICAgICAgICAgIGxlZnQ6IHN0YXJ0UG9zaXRpb24ueCArIHBhZ2VYIC0gb3JpZ2luYWxYLFxuICAgICAgICAgICAgdG9wOiBzdGFydFBvc2l0aW9uLnkgKyBwYWdlWSAtIG9yaWdpbmFsWVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb25SZXNpemUoaGFuZGxlLCBkaXJlY3Rpb24pIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZCh0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICAgICBsZXQgc3RhcnRPZmZzZXRBbmRQb3NpdGlvbjtcbiAgICAgICAgICAgIGxldCByZXNpemVTdGFydGVkID0gZmFsc2U7XG4gICAgICAgICAgICBoYW5kbGUua2VuZG9QcmVzcy5waXBlKHRhcCgoZXYpID0+IHtcbiAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdChldik7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1cy5lbWl0KCk7XG4gICAgICAgICAgICAgICAgc3RhcnRPZmZzZXRBbmRQb3NpdGlvbiA9IHRoaXMuY3VycmVudE9mZnNldEFuZFBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgcmVzaXplU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSksIHN3aXRjaE1hcChjcmVhdGVNb3ZlU3RyZWFtKGhhbmRsZSwgdGhpcy5yZXNpemVFbmQpKSlcbiAgICAgICAgICAgICAgICAuc3Vic2NyaWJlKCh7IHBhZ2VYLCBwYWdlWSwgb3JpZ2luYWxYLCBvcmlnaW5hbFkgfSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghcmVzaXplU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZVN0YXJ0LmVtaXQoZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplU3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBkZWx0YVggPSBwYWdlWCAtIG9yaWdpbmFsWDtcbiAgICAgICAgICAgICAgICBsZXQgZGVsdGFZID0gcGFnZVkgLSBvcmlnaW5hbFk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVSZXNpemUoc3RhcnRPZmZzZXRBbmRQb3NpdGlvbiwgZGlyZWN0aW9uLCBkZWx0YVgsIGRlbHRhWSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBoYW5kbGVSZXNpemUoaW5pdGlhbCwgZGlyLCBkZWx0YVgsIGRlbHRhWSkge1xuICAgICAgICBjb25zdCBvbGQgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGxldCBldiA9IHt9O1xuICAgICAgICBpZiAoZGlyLmluZGV4T2YoJ2UnKSA+PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdXaWR0aCA9IGluaXRpYWwud2lkdGggKyBkZWx0YVg7XG4gICAgICAgICAgICBpZiAobmV3V2lkdGggIT09IG9sZC53aWR0aCAmJiBuZXdXaWR0aCA+PSBvbGQubWluV2lkdGgpIHtcbiAgICAgICAgICAgICAgICBldi53aWR0aCA9IG5ld1dpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkaXIuaW5kZXhPZignbicpID49IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0hlaWdodCA9IGluaXRpYWwuaGVpZ2h0IC0gZGVsdGFZO1xuICAgICAgICAgICAgY29uc3QgbmV3VG9wID0gaW5pdGlhbC55ICsgZGVsdGFZO1xuICAgICAgICAgICAgaWYgKG5ld0hlaWdodCAhPT0gb2xkLmhlaWdodCAmJiBuZXdIZWlnaHQgPj0gb2xkLm1pbkhlaWdodCAmJiBuZXdUb3AgIT09IG9sZC50b3ApIHtcbiAgICAgICAgICAgICAgICBldi5oZWlnaHQgPSBuZXdIZWlnaHQ7XG4gICAgICAgICAgICAgICAgZXYudG9wID0gbmV3VG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkaXIuaW5kZXhPZigncycpID49IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0hlaWdodCA9IGluaXRpYWwuaGVpZ2h0ICsgZGVsdGFZO1xuICAgICAgICAgICAgaWYgKG5ld0hlaWdodCAhPT0gb2xkLmhlaWdodCAmJiBuZXdIZWlnaHQgPj0gb2xkLm1pbkhlaWdodCkge1xuICAgICAgICAgICAgICAgIGV2LmhlaWdodCA9IG5ld0hlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlyLmluZGV4T2YoJ3cnKSA+PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdMZWZ0ID0gaW5pdGlhbC54ICsgZGVsdGFYO1xuICAgICAgICAgICAgY29uc3QgbmV3V2lkdGggPSBpbml0aWFsLndpZHRoIC0gZGVsdGFYO1xuICAgICAgICAgICAgaWYgKG5ld1dpZHRoICE9PSBvbGQud2lkdGggJiYgbmV3V2lkdGggPj0gb2xkLm1pbldpZHRoICYmIG5ld0xlZnQgIT09IG9sZC5sZWZ0KSB7XG4gICAgICAgICAgICAgICAgZXYud2lkdGggPSBuZXdXaWR0aDtcbiAgICAgICAgICAgICAgICBldi5sZWZ0ID0gbmV3TGVmdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcmVzZW50KGV2LndpZHRoKSB8fCBpc1ByZXNlbnQoZXYuaGVpZ2h0KSkge1xuICAgICAgICAgICAgT0ZGU0VUX1NUWUxFUy5mb3JFYWNoKChzdHlsZSQkMSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpc1ByZXNlbnQoZXZbc3R5bGUkJDFdKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnNbc3R5bGUkJDFdID0gZXZbc3R5bGUkJDFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2UuZW1pdChldik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzdG9yZUFjdGlvbigpIHtcbiAgICAgICAgdGhpcy5sYXN0QWN0aW9uID0gJ3Jlc3RvcmUnO1xuICAgICAgICB0aGlzLmRlZmF1bHRTdGF0ZSgpO1xuICAgIH1cbiAgICBkZWZhdWx0U3RhdGUoKSB7XG4gICAgICAgIGlmIChpc1ByZXNlbnQodGhpcy5yZXN0b3JlT3B0aW9ucykpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMucmVzdG9yZU9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3B0aW9ucy5zdGF0ZSA9ICdkZWZhdWx0JztcbiAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZS5lbWl0KCdkZWZhdWx0Jyk7XG4gICAgfVxuICAgIHN0b3JlT3B0aW9ucygpIHtcbiAgICAgICAgdGhpcy5yZXN0b3JlT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMub3B0aW9ucyk7XG4gICAgfVxuICAgIG1heGltaXplQWN0aW9uKCkge1xuICAgICAgICB0aGlzLmxhc3RBY3Rpb24gPSAnbWF4aW1pemUnO1xuICAgICAgICB0aGlzLm1heGltaXplU3RhdGUoKTtcbiAgICB9XG4gICAgbWF4aW1pemVTdGF0ZSgpIHtcbiAgICAgICAgdGhpcy5zdG9yZU9wdGlvbnMoKTtcbiAgICAgICAgY29uc3Qgd25kID0gdGhpcy53aW5kb3dWaWV3UG9ydDtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRpb25zLCB7XG4gICAgICAgICAgICBoZWlnaHQ6IHduZC5oZWlnaHQsXG4gICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgICAgICAgICBzdGF0ZTogJ21heGltaXplZCcsXG4gICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICB3aWR0aDogd25kLndpZHRoXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlLmVtaXQoJ21heGltaXplZCcpO1xuICAgIH1cbiAgICBtaW5pbWl6ZUFjdGlvbigpIHtcbiAgICAgICAgdGhpcy5sYXN0QWN0aW9uID0gJ21pbmltaXplJztcbiAgICAgICAgdGhpcy5taW5pbWl6ZVN0YXRlKCk7XG4gICAgfVxuICAgIG1pbmltaXplU3RhdGUoKSB7XG4gICAgICAgIHRoaXMuc3RvcmVPcHRpb25zKCk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMub3B0aW9ucywge1xuICAgICAgICAgICAgaGVpZ2h0OiBudWxsLFxuICAgICAgICAgICAgbWluSGVpZ2h0OiAwLFxuICAgICAgICAgICAgc3RhdGU6ICdtaW5pbWl6ZWQnXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlLmVtaXQoJ21pbmltaXplZCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIG1hbnVhbCBjaGFuZ2VzIG9mIHRoZSAnc3RhdGUnIHByb3BlcnR5LlxuICAgICAqIFJlcXVpcmVkIHRvIGRpc3Rpbmd1aXNoIHRoZW0gZnJvbSBhY3Rpb24gY2xpY2tzLlxuICAgICAqL1xuICAgIGFwcGx5TWFudWFsU3RhdGUoKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlJCQxID0gdGhpcy5vcHRpb25zLnN0YXRlO1xuICAgICAgICBzd2l0Y2ggKHN0YXRlJCQxKSB7XG4gICAgICAgICAgICBjYXNlICdkZWZhdWx0JzpcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFySGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0U3RhdGUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21heGltaXplZCc6XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckhlaWdodCgpO1xuICAgICAgICAgICAgICAgIHRoaXMubWF4aW1pemVTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWluaW1pemVkJzpcbiAgICAgICAgICAgICAgICB0aGlzLm1pbmltaXplU3RhdGUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvc2VBY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuY2xvc2UuZW1pdCgpO1xuICAgIH1cbiAgICBlbnN1cmVXaWR0aCgpIHtcbiAgICAgICAgY29uc3Qgd2luZG93T2Zmc2V0ID0gb2Zmc2V0KHRoaXMud2luZG93Lm5hdGl2ZUVsZW1lbnQpO1xuICAgICAgICBpZiAoIWlzUHJlc2VudCh0aGlzLm9wdGlvbnMud2lkdGgpKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMud2lkdGggPSB3aW5kb3dPZmZzZXQud2lkdGg7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZS5lbWl0KHsgd2lkdGg6IHdpbmRvd09mZnNldC53aWR0aCB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbGVhckhlaWdodCgpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5oZWlnaHQgPT09IDApIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm9wdGlvbnMuaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMubWluSGVpZ2h0ID09PSAwKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5vcHRpb25zLm1pbkhlaWdodDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjZW50ZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc3RhdGUgPT09ICdtYXhpbWl6ZWQnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNjcm9sbCA9IHNjcm9sbFBvc2l0aW9uKHRoaXMud2luZG93Lm5hdGl2ZUVsZW1lbnQpO1xuICAgICAgICBsZXQgd25kID0gdGhpcy53aW5kb3dWaWV3UG9ydDtcbiAgICAgICAgbGV0IHdyYXBwZXIgPSBvZmZzZXQodGhpcy53aW5kb3cubmF0aXZlRWxlbWVudCk7XG4gICAgICAgIGxldCBldiA9IHt9O1xuICAgICAgICBpZiAoIWlzUHJlc2VudCh0aGlzLm9wdGlvbnMubGVmdCkpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5sZWZ0ID0gc2Nyb2xsLnggKyBNYXRoLm1heCgwLCAod25kLndpZHRoIC0gd3JhcHBlci53aWR0aCkgLyAyKTtcbiAgICAgICAgICAgIGV2LmxlZnQgPSB0aGlzLm9wdGlvbnMubGVmdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzUHJlc2VudCh0aGlzLm9wdGlvbnMudG9wKSkge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnRvcCA9IHNjcm9sbC55ICsgTWF0aC5tYXgoMCwgKHduZC5oZWlnaHQgLSB3cmFwcGVyLmhlaWdodCkgLyAyKTtcbiAgICAgICAgICAgIGV2LnRvcCA9IHRoaXMub3B0aW9ucy50b3A7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jaGFuZ2UuZW1pdChldik7XG4gICAgfVxuICAgIGN1cnJlbnRPZmZzZXRBbmRQb3NpdGlvbigpIHtcbiAgICAgICAgY29uc3QgbyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgY29uc3Qgb2ZmID0gb2Zmc2V0KHRoaXMud2luZG93Lm5hdGl2ZUVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5jdXJyZW50UG9zaXRpb24oKSwge1xuICAgICAgICAgICAgaGVpZ2h0OiBvLmhlaWdodCA/IG8uaGVpZ2h0IDogb2ZmLmhlaWdodCxcbiAgICAgICAgICAgIHdpZHRoOiBvLndpZHRoID8gby53aWR0aCA6IG9mZi53aWR0aFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY3VycmVudFBvc2l0aW9uKCkge1xuICAgICAgICBjb25zdCBvID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBpZiAoIW8udG9wIHx8ICFvLmxlZnQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UG9zaXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogdGhpcy5vcHRpb25zLmxlZnQsXG4gICAgICAgICAgICB5OiB0aGlzLm9wdGlvbnMudG9wXG4gICAgICAgIH07XG4gICAgfVxuICAgIHNldFBvc2l0aW9uKCkge1xuICAgICAgICBjb25zdCB3cmFwcGVyID0gcG9zaXRpb25XaXRoU2Nyb2xsKHRoaXMud2luZG93Lm5hdGl2ZUVsZW1lbnQsIGdldERvY3VtZW50RWxlbWVudCh0aGlzLndpbmRvdy5uYXRpdmVFbGVtZW50KSk7XG4gICAgICAgIHRoaXMub3B0aW9ucy5sZWZ0ID0gd3JhcHBlci5sZWZ0O1xuICAgICAgICB0aGlzLm9wdGlvbnMudG9wID0gd3JhcHBlci50b3A7XG4gICAgfVxuICAgIHNldFJlc3RvcmVPcHRpb24oc3R5bGUkJDEsIHZhbHVlKSB7XG4gICAgICAgIGlmIChpc1ByZXNlbnQodGhpcy5yZXN0b3JlT3B0aW9ucykpIHtcbiAgICAgICAgICAgIHRoaXMucmVzdG9yZU9wdGlvbnNbc3R5bGUkJDFdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG5leHRQb3NzaWJsZVpJbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIG5ld1pJbmRleDtcbiAgICB9XG4gICAgZ2V0IG5leHRaSW5kZXgoKSB7XG4gICAgICAgIHJldHVybiBuZXdaSW5kZXgrKztcbiAgICB9XG4gICAgZ2V0IHdpbmRvd1ZpZXdQb3J0KCkge1xuICAgICAgICByZXR1cm4gZ2V0V2luZG93Vmlld1BvcnQodGhpcy53aW5kb3cubmF0aXZlRWxlbWVudCk7XG4gICAgfVxufTtcbkRyYWdSZXNpemVTZXJ2aWNlID0gX19kZWNvcmF0ZShbXG4gICAgSW5qZWN0YWJsZSgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTmdab25lXSlcbl0sIERyYWdSZXNpemVTZXJ2aWNlKTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmxldCBSZXNpemVIYW5kbGVEaXJlY3RpdmUgPSBjbGFzcyBSZXNpemVIYW5kbGVEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKGRyYWdnYWJsZSwgZWwsIHJlbmRlcmVyLCBzZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZHJhZ2dhYmxlID0gZHJhZ2dhYmxlO1xuICAgICAgICB0aGlzLmVsID0gZWw7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICAgIH1cbiAgICBnZXQgaG9zdENsYXNzKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuc2V0RGlzcGxheSgpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgJ2stcmVzaXplLScgKyB0aGlzLmRpcmVjdGlvbik7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQob2YodGhpcy5kcmFnZ2FibGUpLnN1YnNjcmliZShoYW5kbGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlLm9uUmVzaXplKGhhbmRsZSwgdGhpcy5kaXJlY3Rpb24pO1xuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQodGhpcy5zZXJ2aWNlLnJlc2l6ZVN0YXJ0LnN1YnNjcmliZSgoZGlyKSA9PiB7XG4gICAgICAgICAgICBpZiAoZGlyICE9PSB0aGlzLmRpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RGlzcGxheSgnbm9uZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQodGhpcy5zZXJ2aWNlLmRyYWdTdGFydC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXREaXNwbGF5KCdub25lJyk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZChtZXJnZSh0aGlzLnNlcnZpY2UucmVzaXplRW5kLCB0aGlzLnNlcnZpY2UuZHJhZ0VuZCkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0RGlzcGxheSgnYmxvY2snKTtcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKHRoaXMuc2VydmljZS5zdGF0ZUNoYW5nZS5zdWJzY3JpYmUoKHN0YXRlJCQxKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldERpc3BsYXkoc3RhdGUkJDEgPT09ICdkZWZhdWx0JyA/ICdibG9jaycgOiAnbm9uZScpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMudW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gICAgc2V0RGlzcGxheSh2YWx1ZSA9ICdibG9jaycpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsICdkaXNwbGF5JywgdGhpcy5zZXJ2aWNlLm9wdGlvbnMuc3RhdGUgPT09ICdkZWZhdWx0JyA/IHZhbHVlIDogJ25vbmUnKTtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgUmVzaXplSGFuZGxlRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJkaXJlY3Rpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXJlc2l6ZS1oYW5kbGUnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgUmVzaXplSGFuZGxlRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJob3N0Q2xhc3NcIiwgbnVsbCk7XG5SZXNpemVIYW5kbGVEaXJlY3RpdmUgPSBfX2RlY29yYXRlKFtcbiAgICBEaXJlY3RpdmUoe1xuICAgICAgICBzZWxlY3RvcjogJ1trZW5kb1dpbmRvd1Jlc2l6ZUhhbmRsZV0nXG4gICAgfSksXG4gICAgX19wYXJhbSgwLCBIb3N0KCkpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRHJhZ2dhYmxlRGlyZWN0aXZlLFxuICAgICAgICBFbGVtZW50UmVmLFxuICAgICAgICBSZW5kZXJlcjIsXG4gICAgICAgIERyYWdSZXNpemVTZXJ2aWNlXSlcbl0sIFJlc2l6ZUhhbmRsZURpcmVjdGl2ZSk7XG5cbmxldCBXaW5kb3dUaXRsZUJhckNvbXBvbmVudCA9IGNsYXNzIFdpbmRvd1RpdGxlQmFyQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlbCwgc2VydmljZSwgbmdab25lKSB7XG4gICAgICAgIHRoaXMuZWwgPSBlbDtcbiAgICAgICAgdGhpcy5uZ1pvbmUgPSBuZ1pvbmU7XG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLmRyYWdEaXJlY3RpdmUgPSBuZXcgRHJhZ2dhYmxlRGlyZWN0aXZlKHRoaXMuZWwsIHRoaXMubmdab25lKTtcbiAgICAgICAgdGhpcy5kcmFnRGlyZWN0aXZlLm5nT25Jbml0KCk7XG4gICAgICAgIGlmICh0aGlzLmlzRHJhZ2dhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmliZURyYWcoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN1YnNjcmliZVN0YXRlQ2hhbmdlKCk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLmRyYWdEaXJlY3RpdmUubmdPbkRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZURyYWcoKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZVN0YXRlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzdWJzY3JpYmVEcmFnKCkge1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlRHJhZygpO1xuICAgICAgICB0aGlzLmRyYWdTdWJzY3JpcHRpb24gPSBvZih0aGlzLmRyYWdEaXJlY3RpdmUpLnN1YnNjcmliZSh0aXRsZUJhciA9PiB7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2Uub25EcmFnKHRpdGxlQmFyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzdWJzY3JpYmVTdGF0ZUNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZVN1YnNjcmlwdGlvbiA9IHRoaXMuc2VydmljZS5zdGF0ZUNoYW5nZS5zdWJzY3JpYmUoKHN0YXRlJCQxKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZXJ2aWNlLm9wdGlvbnMuZHJhZ2dhYmxlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlJCQxID09PSAnbWF4aW1pemVkJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlRHJhZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVEcmFnKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHVuc3Vic2NyaWJlRHJhZygpIHtcbiAgICAgICAgaWYgKHRoaXMuZHJhZ1N1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlLmRyYWdTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgdGhpcy5kcmFnU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgdW5zdWJzY3JpYmVTdGF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGVTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBjbGFzc05hbWUoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXQgdG91Y2hBY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRHJhZ2dhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gJ25vbmUnO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBoYW5kbGUoZXYpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXYudGFyZ2V0O1xuICAgICAgICBjb25zdCBzdGF0ZSQkMSA9IHRoaXMuc2VydmljZS5vcHRpb25zLnN0YXRlO1xuICAgICAgICBpZiAoIWhhc0NsYXNzZXModGFyZ2V0LCAnay1pY29uJykgJiYgIWlzRm9jdXNhYmxlKHRhcmdldCwgZmFsc2UpICYmIHRoaXMuc2VydmljZS5vcHRpb25zLnJlc2l6YWJsZSkge1xuICAgICAgICAgICAgaWYgKHN0YXRlJCQxID09PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlcnZpY2UubWF4aW1pemVBY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHN0YXRlJCQxID09PSAnbWF4aW1pemVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VydmljZS5yZXN0b3JlQWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGlzRHJhZ2dhYmxlKCkge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5zZXJ2aWNlLm9wdGlvbnM7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmRyYWdnYWJsZSAmJiBvcHRpb25zLnN0YXRlICE9PSAnbWF4aW1pemVkJztcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgVGVtcGxhdGVSZWYpXG5dLCBXaW5kb3dUaXRsZUJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwidGVtcGxhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXdpbmRvdy10aXRsZWJhcicpLFxuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLWRpYWxvZy10aXRsZWJhcicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBXaW5kb3dUaXRsZUJhckNvbXBvbmVudC5wcm90b3R5cGUsIFwiY2xhc3NOYW1lXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ3N0eWxlLnRvdWNoLWFjdGlvbicpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIFdpbmRvd1RpdGxlQmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJ0b3VjaEFjdGlvblwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RMaXN0ZW5lcignZGJsY2xpY2snLCBbJyRldmVudCddKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbl0sIFdpbmRvd1RpdGxlQmFyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJoYW5kbGVcIiwgbnVsbCk7XG5XaW5kb3dUaXRsZUJhckNvbXBvbmVudCA9IF9fZGVjb3JhdGUoW1xuICAgIENvbXBvbmVudCh7XG4gICAgICAgIHNlbGVjdG9yOiAna2VuZG8td2luZG93LXRpdGxlYmFyJyxcbiAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8bmctY29udGVudCAqbmdJZj1cIiF0ZW1wbGF0ZVwiPjwvbmctY29udGVudD5cbiAgICA8bmctdGVtcGxhdGVcbiAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cInRlbXBsYXRlXCJcbiAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7JyRpbXBsaWNpdCc6IHNlcnZpY2V9XCIgKm5nSWY9XCJ0ZW1wbGF0ZVwiPlxuICAgIDwvbmctdGVtcGxhdGU+XG4gIGBcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0VsZW1lbnRSZWYsIERyYWdSZXNpemVTZXJ2aWNlLCBOZ1pvbmVdKVxuXSwgV2luZG93VGl0bGVCYXJDb21wb25lbnQpO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IE5hdmlnYXRpb25TZXJ2aWNlID0gY2xhc3MgTmF2aWdhdGlvblNlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKHdpbmRvdywgbmdab25lKSB7XG4gICAgICAgIHRoaXMud2luZG93ID0gd2luZG93O1xuICAgICAgICB0aGlzLm5nWm9uZSA9IG5nWm9uZTtcbiAgICB9XG4gICAgcHJvY2Vzcyhldikge1xuICAgICAgICBjb25zdCBrZXkgPSBldi5rZXlDb2RlO1xuICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgICAgY2FzZSBLZXlzLnVwOlxuICAgICAgICAgICAgY2FzZSBLZXlzLmRvd246XG4gICAgICAgICAgICBjYXNlIEtleXMubGVmdDpcbiAgICAgICAgICAgIGNhc2UgS2V5cy5yaWdodDoge1xuICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVBcnJvdyhrZXksIGV2KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgS2V5cy5lc2M6XG4gICAgICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFc2NhcGUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlQXJyb3coa2V5LCBldikge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy53aW5kb3cub3B0aW9ucztcbiAgICAgICAgaWYgKGV2LmFsdEtleSkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVTdGF0ZUNoYW5nZShrZXksIG9wdGlvbnMuc3RhdGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoZXYuY3RybEtleSB8fCBldi5tZXRhS2V5KSAmJiBvcHRpb25zLnN0YXRlID09PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlUmVzaXplKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZURyYWcoa2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVFc2NhcGUoKSB7XG4gICAgICAgIHRoaXMud2luZG93LmNsb3NlQWN0aW9uKCk7XG4gICAgfVxuICAgIGhhbmRsZURyYWcoa2V5KSB7XG4gICAgICAgIGxldCBvcHRpb25zID0gdGhpcy53aW5kb3cub3B0aW9ucztcbiAgICAgICAgaWYgKCFvcHRpb25zLmRyYWdnYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9mZnNldCQkMSA9IHRoaXMud2luZG93LmN1cnJlbnRPZmZzZXRBbmRQb3NpdGlvbigpO1xuICAgICAgICBsZXQgcmVzdG9yZU9wdGlvbnMgPSB0aGlzLndpbmRvdy5yZXN0b3JlT3B0aW9ucztcbiAgICAgICAgbGV0IGV2ID0ge307XG4gICAgICAgIGxldCBkZWx0YSA9IDEwO1xuICAgICAgICBpZiAoa2V5ID09PSBLZXlzLmxlZnQgfHwga2V5ID09PSBLZXlzLnVwKSB7XG4gICAgICAgICAgICBkZWx0YSAqPSAtMTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgICAgY2FzZSBLZXlzLmxlZnQ6XG4gICAgICAgICAgICBjYXNlIEtleXMucmlnaHQ6IHtcbiAgICAgICAgICAgICAgICBldi5sZWZ0ID0gb2Zmc2V0JCQxLnggKyBkZWx0YTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmxlZnQgPSBldi5sZWZ0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBLZXlzLnVwOlxuICAgICAgICAgICAgY2FzZSBLZXlzLmRvd246IHtcbiAgICAgICAgICAgICAgICBldi50b3AgPSBvZmZzZXQkJDEueSArIGRlbHRhO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMudG9wID0gZXYudG9wO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5zdGF0ZSA9PT0gJ21pbmltaXplZCcgJiYgaXNQcmVzZW50KHJlc3RvcmVPcHRpb25zKSkge1xuICAgICAgICAgICAgcmVzdG9yZU9wdGlvbnMubGVmdCA9IG9wdGlvbnMubGVmdDtcbiAgICAgICAgICAgIHJlc3RvcmVPcHRpb25zLnRvcCA9IG9wdGlvbnMudG9wO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud2luZG93LmNoYW5nZS5lbWl0KGV2KTtcbiAgICB9XG4gICAgaGFuZGxlUmVzaXplKGtleSkge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy53aW5kb3cub3B0aW9ucztcbiAgICAgICAgaWYgKCFvcHRpb25zLnJlc2l6YWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9mZnNldCQkMSA9IHRoaXMud2luZG93LmN1cnJlbnRPZmZzZXRBbmRQb3NpdGlvbigpO1xuICAgICAgICBsZXQgbmV3V2lkdGg7XG4gICAgICAgIGxldCBuZXdIZWlnaHQ7XG4gICAgICAgIGxldCBldiA9IHt9O1xuICAgICAgICBsZXQgZGVsdGEgPSAxMDtcbiAgICAgICAgaWYgKGtleSA9PT0gS2V5cy5sZWZ0IHx8IGtleSA9PT0gS2V5cy51cCkge1xuICAgICAgICAgICAgZGVsdGEgKj0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIGNhc2UgS2V5cy5sZWZ0OlxuICAgICAgICAgICAgY2FzZSBLZXlzLnJpZ2h0OiB7XG4gICAgICAgICAgICAgICAgbmV3V2lkdGggPSBvZmZzZXQkJDEud2lkdGggKyBkZWx0YTtcbiAgICAgICAgICAgICAgICBpZiAobmV3V2lkdGggIT09IG9wdGlvbnMud2lkdGggJiYgbmV3V2lkdGggPj0gb3B0aW9ucy5taW5XaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICBldi53aWR0aCA9IG5ld1dpZHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgS2V5cy51cDpcbiAgICAgICAgICAgIGNhc2UgS2V5cy5kb3duOiB7XG4gICAgICAgICAgICAgICAgbmV3SGVpZ2h0ID0gb2Zmc2V0JCQxLmhlaWdodCArIGRlbHRhO1xuICAgICAgICAgICAgICAgIGlmIChuZXdIZWlnaHQgIT09IG9wdGlvbnMuaGVpZ2h0ICYmIG5ld0hlaWdodCA+PSBvcHRpb25zLm1pbkhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICBldi5oZWlnaHQgPSBuZXdIZWlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcmVzZW50KGV2LndpZHRoKSB8fCBpc1ByZXNlbnQoZXYuaGVpZ2h0KSkge1xuICAgICAgICAgICAgT0ZGU0VUX1NUWUxFUy5mb3JFYWNoKChzdHlsZSQkMSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpc1ByZXNlbnQoZXZbc3R5bGUkJDFdKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndpbmRvdy5vcHRpb25zW3N0eWxlJCQxXSA9IGV2W3N0eWxlJCQxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMud2luZG93LmNoYW5nZS5lbWl0KGV2KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVTdGF0ZUNoYW5nZShrZXksIHN0YXRlJCQxKSB7XG4gICAgICAgIGlmICgoc3RhdGUkJDEgPT09ICdtaW5pbWl6ZWQnICYmIGtleSA9PT0gS2V5cy51cCkgfHxcbiAgICAgICAgICAgIChzdGF0ZSQkMSA9PT0gJ21heGltaXplZCcgJiYga2V5ID09PSBLZXlzLmRvd24pKSB7XG4gICAgICAgICAgICB0aGlzLndpbmRvdy5yZXN0b3JlQWN0aW9uKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRlJCQxID09PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IEtleXMudXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLndpbmRvdy5tYXhpbWl6ZUFjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBLZXlzLmRvd24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLndpbmRvdy5taW5pbWl6ZUFjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcbk5hdmlnYXRpb25TZXJ2aWNlID0gX19kZWNvcmF0ZShbXG4gICAgSW5qZWN0YWJsZSgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRHJhZ1Jlc2l6ZVNlcnZpY2UsXG4gICAgICAgIE5nWm9uZV0pXG5dLCBOYXZpZ2F0aW9uU2VydmljZSk7XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgW0tlbmRvIFVJIFdpbmRvdyBjb21wb25lbnQgZm9yIEFuZ3VsYXJdKHslIHNsdWcgb3ZlcnZpZXdfd2luZG93X2RpYWxvZ3MgJX0pLlxuICovXG5sZXQgV2luZG93Q29tcG9uZW50ID0gY2xhc3MgV2luZG93Q29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlbCwgcmVuZGVyZXIsIHNlcnZpY2UsIG5hdmlnYXRpb24sIG5nWm9uZSwgbG9jYWxpemF0aW9uKSB7XG4gICAgICAgIHRoaXMuZWwgPSBlbDtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xuICAgICAgICB0aGlzLm5hdmlnYXRpb24gPSBuYXZpZ2F0aW9uO1xuICAgICAgICB0aGlzLm5nWm9uZSA9IG5nWm9uZTtcbiAgICAgICAgdGhpcy5sb2NhbGl6YXRpb24gPSBsb2NhbGl6YXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgaWYgdGhlIGNvbnRlbnQgb2YgdGhlIGNvbXBvbmVudCBpcyBwZXJzaXN0ZWQgaW4gdGhlIERPTSB3aGVuIG1pbmltaXplZC5cbiAgICAgICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMua2VlcENvbnRlbnQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIHdoZW4gdGhlIHVzZXIgc3RhcnRzIHRvIG1vdmUgdGhlIFdpbmRvdy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZHJhZ1N0YXJ0ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgd2hlbiB0aGUgV2luZG93IHdhcyBtb3ZlZCBieSB0aGUgdXNlci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZHJhZ0VuZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIHdoZW4gdGhlIHVzZXIgc3RhcnRzIHRvIHJlc2l6ZSB0aGUgV2luZG93LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXNpemVTdGFydCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIHdoZW4gdGhlIFdpbmRvdyB3YXMgcmVzaXplZCBieSB0aGUgdXNlci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVzaXplRW5kID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgd2hlbiB0aGUgdXNlciBjbG9zZXMgdGhlIFdpbmRvdy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xvc2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyB3aGVuIHRoZSBgd2lkdGhgIHByb3BlcnR5IG9mIHRoZSBjb21wb25lbnQgd2FzIHVwZGF0ZWQuIFRoZSBldmVudCBpcyB0cmlnZ2VyZWQgb25seSBhZnRlciB0aGUgcmVzaXppbmdcbiAgICAgICAgICogaGFzIGVuZGVkLiBUaGUgZXZlbnQgZGF0YSBjb250YWlucyB0aGUgbmV3IHdpZHRoLiBBbGxvd3MgYSB0d28td2F5IGJpbmRpbmcgb2YgdGhlIGB3aWR0aGAgcHJvcGVydHkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLndpZHRoQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgd2hlbiB0aGUgYGhlaWdodGAgcHJvcGVydHkgb2YgdGhlIGNvbXBvbmVudCB3YXMgdXBkYXRlZC4gVGhlIGV2ZW50IGlzIHRyaWdnZXJlZCBvbmx5IGFmdGVyIHRoZSByZXNpemluZ1xuICAgICAgICAgKiBoYXMgZW5kZWQuIFRoZSBldmVudCBkYXRhIGNvbnRhaW5zIHRoZSBuZXcgaGVpZ2h0LiBBbGxvd3MgYSB0d28td2F5IGJpbmRpbmcgb2YgdGhlIGBoZWlnaHRgIHByb3BlcnR5LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oZWlnaHRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyB3aGVuIHRoZSBgdG9wYCBwcm9wZXJ0eSBvZiB0aGUgY29tcG9uZW50IHdhcyB1cGRhdGVkLiBUaGUgZXZlbnQgaXMgdHJpZ2dlcmVkIG9ubHkgYWZ0ZXIgdGhlIGRyYWdnaW5nXG4gICAgICAgICAqIGFuZCByZXNpemluZyBoYXZlIGVuZGVkLiBUaGUgZXZlbnQgZGF0YSBjb250YWlucyB0aGUgbmV3IHRvcCBvZmZzZXQuIEFsbG93cyBhIHR3by13YXkgYmluZGluZyBvZiB0aGUgYHRvcGAgcHJvcGVydHkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRvcENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIHdoZW4gdGhlIGBsZWZ0YCBwcm9wZXJ0eSBvZiB0aGUgY29tcG9uZW50IHdhcyB1cGRhdGVkLiBUaGUgZXZlbnQgaXMgdHJpZ2dlcmVkIG9ubHkgYWZ0ZXIgdGhlIGRyYWdnaW5nXG4gICAgICAgICAqIGFuZCByZXNpemluZyBoYXZlIGVuZGVkLiBUaGUgZXZlbnQgZGF0YSBjb250YWlucyB0aGUgbmV3IGxlZnQgb2Zmc2V0LiBBbGxvd3MgYSB0d28td2F5IGJpbmRpbmcgb2YgdGhlIGBsZWZ0YCBwcm9wZXJ0eS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGVmdENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIHdoZW4gdGhlIGBzdGF0ZWAgcHJvcGVydHkgb2YgdGhlIGNvbXBvbmVudCB3YXMgdXBkYXRlZC4gVGhlIGV2ZW50IGRhdGEgY29udGFpbnMgdGhlIG5ldyBzdGF0ZS4gQWxsb3dzIGFcbiAgICAgICAgICogdHdvLXdheSBiaW5kaW5nIG9mIHRoZSBgc3RhdGVgIHByb3BlcnR5LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBoaWRkZW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWVzc2FnZXMgPSB7fTtcbiAgICAgICAgdGhpcy50YWJJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuZHJhZ2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmVzaXplZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLndpbmRvd1N1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgICAgICAgdGhpcy5kb21TdWJzID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICAgICAgICB2YWxpZGF0ZVBhY2thZ2UocGFja2FnZU1ldGFkYXRhKTtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSB0aGlzLmxvY2FsaXphdGlvbi5ydGwgPyAncnRsJyA6ICdsdHInO1xuICAgICAgICB0aGlzLmxvY2FsaXphdGlvbkNoYW5nZVN1YnNjcmlwdGlvbiA9IHRoaXMubG9jYWxpemF0aW9uLmNoYW5nZXNcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKHsgcnRsIH0pID0+IHRoaXMuZGlyZWN0aW9uID0gcnRsID8gJ3J0bCcgOiAnbHRyJyk7XG4gICAgICAgIHRoaXMucmVzaXplRGlyZWN0aW9ucyA9IFJFU0laRV9ESVJFQ1RJT05TO1xuICAgICAgICB0aGlzLnN1YnNjcmliZUV2ZW50cygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgd2hldGhlciB0aGUgdXNlciB3aWxsIGJlIGFibGUgdG8gZHJhZyB0aGUgY29tcG9uZW50LlxuICAgICAqIEBkZWZhdWx0IHRydWVcbiAgICAgKi9cbiAgICBzZXQgZHJhZ2dhYmxlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5kcmFnZ2FibGUgPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IGRyYWdnYWJsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5kcmFnZ2FibGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHRoZSB1c2VyIHdpbGwgYmUgYWJsZSB0byByZXNpemUgdGhlIGNvbXBvbmVudC5cbiAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICovXG4gICAgc2V0IHJlc2l6YWJsZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLm9wdGlvbnMucmVzaXphYmxlID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCByZXNpemFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMucmVzaXphYmxlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgc2V0IGNzc0NsYXNzKGNsYXNzZXMpIHtcbiAgICAgICAgdGhpcy5zZXRTZXJ2aWNlQ2xhc3Nlcyh0aGlzLl9jc3NDbGFzcywgY2xhc3Nlcyk7XG4gICAgICAgIHRoaXMuX2Nzc0NsYXNzID0gY2xhc3NlcztcbiAgICB9XG4gICAgZ2V0IGNzc0NsYXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY3NzQ2xhc3M7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZXQgaHRtbEF0dHJpYnV0ZXMoYXR0cmlidXRlcykge1xuICAgICAgICBzZXRIVE1MQXR0cmlidXRlcyhhdHRyaWJ1dGVzLCB0aGlzLnJlbmRlcmVyLCB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpO1xuICAgICAgICBjb25zdCBlbCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudDtcbiAgICAgICAgY29uc3QgZGlyID0gZWwuZ2V0QXR0cmlidXRlKCdkaXInKTtcbiAgICAgICAgY29uc3QgdEluZGV4ID0gZWwuZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpO1xuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gIT09IGRpcikge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBkaXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudGFiSW5kZXggIT09IHRJbmRleCkge1xuICAgICAgICAgICAgdGhpcy50YWJJbmRleCA9IHRJbmRleDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9odG1sQXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG4gICAgfVxuICAgIGdldCBodG1sQXR0cmlidXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2h0bWxBdHRyaWJ1dGVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgKiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdmFsdWUgaXMgc2V0IHRvIGBkZWZhdWx0YC5cbiAgICAgKlxuICAgICAqIFRoZSBwb3NzaWJsZSB2YWx1ZXMgYXJlOlxuICAgICAqICogYG1pbmltaXplZGBcbiAgICAgKiAqIGBtYXhpbWl6ZWRgXG4gICAgICogKiBgZGVmYXVsdGBcbiAgICAgKi9cbiAgICBzZXQgc3RhdGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLnN0YXRlID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBzdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5zdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSBtaW5pbXVtIHdpZHRoIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICogVGhlIGBtaW5XaWR0aGAgcHJvcGVydHkgaGFzIHRvIGJlIHNldCBpbiBwaXhlbHMuXG4gICAgICogQGRlZmF1bHQgMTIwXG4gICAgICovXG4gICAgc2V0IG1pbldpZHRoKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0T3B0aW9uKCdtaW5XaWR0aCcsIHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0IG1pbldpZHRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLm1pbldpZHRoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIG1pbmltdW0gaGVpZ2h0IG9mIHRoZSBXaW5kb3cuXG4gICAgICogVGhlIGBtaW5IZWlnaHRgIHByb3BlcnR5IGhhcyB0byBiZSBzZXQgaW4gcGl4ZWxzLlxuICAgICAqIEBkZWZhdWx0IDEwMFxuICAgICAqL1xuICAgIHNldCBtaW5IZWlnaHQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5zZXRPcHRpb24oJ21pbkhlaWdodCcsIHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0IG1pbkhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5taW5IZWlnaHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgd2lkdGggb2YgdGhlIFdpbmRvdy5cbiAgICAgKiBUaGUgYHdpZHRoYCBwcm9wZXJ0eSBoYXMgdG8gYmUgc2V0IGluIHBpeGVscy5cbiAgICAgKi9cbiAgICBzZXQgd2lkdGgodmFsdWUpIHtcbiAgICAgICAgdGhpcy5zZXRPcHRpb24oJ3dpZHRoJywgdmFsdWUpO1xuICAgIH1cbiAgICBnZXQgd2lkdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud2lkdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgaGVpZ2h0IG9mIHRoZSBXaW5kb3cuXG4gICAgICogVGhlIGBoZWlnaHRgIHByb3BlcnR5IGhhcyB0byBiZSBzZXQgaW4gcGl4ZWxzLlxuICAgICAqL1xuICAgIHNldCBoZWlnaHQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5zZXRPcHRpb24oJ2hlaWdodCcsIHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0IGhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5oZWlnaHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgaW5pdGlhbCB0b3Agb2Zmc2V0IG9mIHRoZSBXaW5kb3cuXG4gICAgICogVGhlIGB0b3BgIHByb3BlcnR5IGhhcyB0byBiZSBzZXQgaW4gcGl4ZWxzLlxuICAgICAqL1xuICAgIHNldCB0b3AodmFsdWUpIHtcbiAgICAgICAgdGhpcy5zZXRPcHRpb24oJ3RvcCcsIHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0IHRvcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy50b3A7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgaW5pdGlhbCBsZWZ0IG9mZnNldCBvZiB0aGUgV2luZG93LlxuICAgICAqIE51bWVyaWMgdmFsdWVzIGFyZSB0cmVhdGVkIGFzIHBpeGVscy5cbiAgICAgKi9cbiAgICBzZXQgbGVmdCh2YWx1ZSkge1xuICAgICAgICB0aGlzLnNldE9wdGlvbignbGVmdCcsIHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0IGxlZnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMubGVmdDtcbiAgICB9XG4gICAgZ2V0IGNsb3NlQnV0dG9uVGl0bGUoKSB7XG4gICAgICAgIGlmICh0aGlzLm1lc3NhZ2VzICYmIHRoaXMubWVzc2FnZXMuY2xvc2VUaXRsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZXMuY2xvc2VUaXRsZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGl6YXRpb24uZ2V0KCdjbG9zZVRpdGxlJyk7XG4gICAgfVxuICAgIGdldCByZXN0b3JlQnV0dG9uVGl0bGUoKSB7XG4gICAgICAgIGlmICh0aGlzLm1lc3NhZ2VzICYmIHRoaXMubWVzc2FnZXMucmVzdG9yZVRpdGxlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlcy5yZXN0b3JlVGl0bGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxpemF0aW9uLmdldCgncmVzdG9yZVRpdGxlJyk7XG4gICAgfVxuICAgIGdldCBtYXhpbWl6ZUJ1dHRvblRpdGxlKCkge1xuICAgICAgICBpZiAodGhpcy5tZXNzYWdlcyAmJiB0aGlzLm1lc3NhZ2VzLm1heGltaXplVGl0bGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2VzLm1heGltaXplVGl0bGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxpemF0aW9uLmdldCgnbWF4aW1pemVUaXRsZScpO1xuICAgIH1cbiAgICBnZXQgbWluaW1pemVCdXR0b25UaXRsZSgpIHtcbiAgICAgICAgaWYgKHRoaXMubWVzc2FnZXMgJiYgdGhpcy5tZXNzYWdlcy5taW5pbWl6ZVRpdGxlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlcy5taW5pbWl6ZVRpdGxlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsaXphdGlvbi5nZXQoJ21pbmltaXplVGl0bGUnKTtcbiAgICB9XG4gICAgZ2V0IGhvc3RDbGFzc2VzKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0IGRpcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uO1xuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIHRoaXMuc2V0TmV4dFpJbmRleCgpO1xuICAgICAgICB0aGlzLmhhbmRsZUluaXRpYWxGb2N1cygpO1xuICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCkudGhlbigoKSA9PiB0aGlzLnNldEluaXRpYWxPZmZzZXQoKSkpO1xuICAgICAgICB0aGlzLmluaXREb21FdmVudHMoKTtcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQXR0cmlidXRlKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgJ3RpdGxlJyk7XG4gICAgICAgIHRoaXMuc2VydmljZS5pbml0KHRoaXMuZWwpO1xuICAgIH1cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIE9GRlNFVF9TVFlMRVMuZm9yRWFjaCgoc3R5bGUkJDEpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0NoYW5nZWQoc3R5bGUkJDEsIGNoYW5nZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdHlsZShzdHlsZSQkMSwgdGhpcy5vcHRpb25zW3N0eWxlJCQxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaXNDaGFuZ2VkKCdkcmFnZ2FibGUnLCBjaGFuZ2VzKSkge1xuICAgICAgICAgICAgY29uc3QgdGl0bGVCYXIgPSBpc1ByZXNlbnQodGhpcy50aXRsZUJhckNvbnRlbnQpID8gdGhpcy50aXRsZUJhckNvbnRlbnQgOiB0aGlzLnRpdGxlQmFyVmlldztcbiAgICAgICAgICAgIGlmIChpc1RydXRoeShjaGFuZ2VzLmRyYWdnYWJsZS5jdXJyZW50VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGl0bGVCYXIuc3Vic2NyaWJlRHJhZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGl0bGVCYXIudW5zdWJzY3JpYmVEcmFnKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQ2hhbmdlZCgnc3RhdGUnLCBjaGFuZ2VzKSkge1xuICAgICAgICAgICAgaWYgKGlzUHJlc2VudCh0aGlzLnNlcnZpY2UubGFzdEFjdGlvbikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlcnZpY2UubGFzdEFjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlcnZpY2UuYXBwbHlNYW51YWxTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQWxsT2Zmc2V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLndpbmRvd1N1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy53aW5kb3dTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kb21TdWJzKSB7XG4gICAgICAgICAgICB0aGlzLmRvbVN1YnMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvY2FsaXphdGlvbkNoYW5nZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb2N1c2VzIHRoZSB3cmFwcGVyIG9mIHRoZSBXaW5kb3cgY29tcG9uZW50LlxuICAgICAqL1xuICAgIGZvY3VzKCkge1xuICAgICAgICBjb25zdCB3cmFwcGVyID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50O1xuICAgICAgICBpZiAoaXNQcmVzZW50KHdyYXBwZXIpKSB7XG4gICAgICAgICAgICB3cmFwcGVyLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQnJpbmdzIHRoZSBjdXJyZW50IFdpbmRvdyBjb21wb25lbnQgb24gdG9wIG9mIG90aGVyIFdpbmRvdyBjb21wb25lbnRzIG9uIHRoZSBwYWdlLlxuICAgICAqL1xuICAgIGJyaW5nVG9Gcm9udCgpIHtcbiAgICAgICAgdGhpcy5zZXROZXh0WkluZGV4KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hbnVhbGx5IHVwZGF0ZXMgdGhlIGB3aWR0aGAgb3IgYGhlaWdodGAgb3B0aW9uIG9mIHRoZSBXaW5kb3cuXG4gICAgICogVGhlIHJlcXVpcmVkIHN0eWxlIHdpbGwgYmUgYXBwbGllZCB0byB0aGUgV2luZG93IHdyYXBwZXIgZWxlbWVudCBhbmQgdGhlXG4gICAgICogY29ycmVzcG9uZGluZyBwcm9wZXJ0eSBvZiB0aGUgY29tcG9uZW50IGluc3RhbmNlIHdpbGwgYmUgdXBkYXRlZC5cbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCB0byBiZSB1c2VkIGZvciBzaXppbmcgZHluYW1pY2FsbHkgY3JlYXRlZCBjb21wb25lbnRzIHVzaW5nIHRoZVxuICAgICAqIFtgV2luZG93U2VydmljZWBdKHslIHNsdWcgYXBpX2RpYWxvZ193aW5kb3dzZXJ2aWNlICV9KVxuICAgICAqIEBwYXJhbSB7V2luZG93RGltZW5zaW9uU2V0dGluZ30gZGltZW5zaW9uIC0gVGhlIG9wdGlvbiB0aGF0IHdpbGwgYmUgdXBkYXRlZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIFRoZSB2YWx1ZSBzZXQgaW4gcGl4ZWxzXG4gICAgICovXG4gICAgc2V0RGltZW5zaW9uKGRpbWVuc2lvbiwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5zZXRPcHRpb24oZGltZW5zaW9uLCB2YWx1ZSk7XG4gICAgICAgIHRoaXMuc2V0U3R5bGUoZGltZW5zaW9uLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hbnVhbGx5IHVwZGF0ZXMgdGhlIGB0b3BgIG9yIGBsZWZ0YCBvZmZzZXQgb2YgdGhlIFdpbmRvdy5cbiAgICAgKiBUaGUgcmVxdWlyZWQgc3R5bGUgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBXaW5kb3cgd3JhcHBlciBlbGVtZW50IGFuZCB0aGVcbiAgICAgKiBjb3JyZXNwb25kaW5nIHByb3BlcnR5IG9mIHRoZSBjb21wb25lbnQgaW5zdGFuY2Ugd2lsbCBiZSB1cGRhdGVkLlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGludGVuZGVkIHRvIGJlIHVzZWQgZm9yIHBvc2l0aW9uaW5nIGR5bmFtaWNhbGx5IGNyZWF0ZWQgY29tcG9uZW50cyB1c2luZyB0aGVcbiAgICAgKiBbYFdpbmRvd1NlcnZpY2VgXSh7JSBzbHVnIGFwaV9kaWFsb2dfd2luZG93c2VydmljZSAlfSlcbiAgICAgKiBAcGFyYW0ge1dpbmRvd09mZnNldFNldHRpbmd9IG9mZnNldCAtIFRoZSBvcHRpb24gdGhhdCB3aWxsIGJlIHVwZGF0ZWRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgLSBUaGUgdmFsdWUgc2V0IGluIHBpeGVsc1xuICAgICAqL1xuICAgIHNldE9mZnNldChvZmZzZXQkJDEsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0T3B0aW9uKG9mZnNldCQkMSwgdmFsdWUpO1xuICAgICAgICB0aGlzLnNldFN0eWxlKG9mZnNldCQkMSwgdmFsdWUpO1xuICAgIH1cbiAgICBnZXQgc2hvd0RlZmF1bHRUaXRsZUJhcigpIHtcbiAgICAgICAgcmV0dXJuICFpc1ByZXNlbnQodGhpcy50aXRsZUJhckNvbnRlbnQpO1xuICAgIH1cbiAgICBnZXQgc3R5bGVNaW5XaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluV2lkdGggKyAncHgnO1xuICAgIH1cbiAgICBnZXQgc3R5bGVNaW5IZWlnaHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbkhlaWdodCArICdweCc7XG4gICAgfVxuICAgIGdldCBzdHlsZVBvc2l0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnBvc2l0aW9uO1xuICAgIH1cbiAgICBnZXQgd3JhcHBlck1heGltaXplZENsYXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gJ21heGltaXplZCc7XG4gICAgfVxuICAgIGdldCB3cmFwcGVyTWluaW1pemVkQ2xhc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlID09PSAnbWluaW1pemVkJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uQ29tcG9uZW50Rm9jdXMoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbC5uYXRpdmVFbGVtZW50LCAnay1zdGF0ZS1mb2N1c2VkJyk7XG4gICAgICAgIHRoaXMuc2V0TmV4dFpJbmRleCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgb25Db21wb25lbnRCbHVyKCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgJ2stc3RhdGUtZm9jdXNlZCcpO1xuICAgIH1cbiAgICBzdWJzY3JpYmVFdmVudHMoKSB7XG4gICAgICAgIGlmICghaXNEb2N1bWVudEF2YWlsYWJsZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53aW5kb3dTdWJzY3JpcHRpb24uYWRkKHRoaXMuc2VydmljZS5mb2N1cy5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbC5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy53aW5kb3dTdWJzY3JpcHRpb24uYWRkKHRoaXMuc2VydmljZS5kcmFnU3RhcnQuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZHJhZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmFnU3RhcnQuZW1pdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy53aW5kb3dTdWJzY3JpcHRpb24uYWRkKHRoaXMuc2VydmljZS5kcmFnRW5kLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5kcmFnZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0VuZC5lbWl0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy53aW5kb3dTdWJzY3JpcHRpb24uYWRkKHRoaXMuc2VydmljZS5jbG9zZS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZS5lbWl0KCk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy53aW5kb3dTdWJzY3JpcHRpb24uYWRkKHRoaXMuc2VydmljZS5yZXNpemVTdGFydC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNpemVTdGFydC5lbWl0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLndpbmRvd1N1YnNjcmlwdGlvbi5hZGQodGhpcy5zZXJ2aWNlLnJlc2l6ZUVuZC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVzaXplZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzaXplZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzaXplRW5kLmVtaXQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLndpbmRvd1N1YnNjcmlwdGlvbi5hZGQodGhpcy5zZXJ2aWNlLmNoYW5nZS5zdWJzY3JpYmUoKGV2KSA9PiB7XG4gICAgICAgICAgICBPRkZTRVRfU1RZTEVTLmZvckVhY2goKHN0eWxlJCQxKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlzUHJlc2VudChldltzdHlsZSQkMV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3R5bGUoc3R5bGUkJDEsIGV2W3N0eWxlJCQxXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSAnbWF4aW1pemVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW1pdHRlciA9IHRoaXNbc3R5bGUkJDEgKyAnQ2hhbmdlJ107XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW1pdHRlci5vYnNlcnZlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1pdHRlci5lbWl0KGV2W3N0eWxlJCQxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLndpbmRvd1N1YnNjcmlwdGlvbi5hZGQodGhpcy5zZXJ2aWNlLnN0YXRlQ2hhbmdlLnN1YnNjcmliZSgoc3RhdGUkJDEpID0+IHtcbiAgICAgICAgICAgIGlmIChpc1ByZXNlbnQodGhpcy5zZXJ2aWNlLmxhc3RBY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBbGxPZmZzZXQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlLmVtaXQoc3RhdGUkJDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGluaXREb21FdmVudHMoKSB7XG4gICAgICAgIGlmICghdGhpcy5lbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZG9tU3Vicy5hZGQodGhpcy5yZW5kZXJlci5saXN0ZW4odGhpcy5lbC5uYXRpdmVFbGVtZW50LCAna2V5ZG93bicsIChldikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub25LZXlEb3duKGV2KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9uS2V5RG93bihldmVudCkge1xuICAgICAgICBpZiAoaGFzQ2xhc3NlcyhldmVudC50YXJnZXQsIFdJTkRPV19DTEFTU0VTKSkge1xuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uLnByb2Nlc3MoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldFNlcnZpY2VDbGFzc2VzKHByZXZWYWx1ZSwgdmFsdWUpIHtcbiAgICAgICAgY29uc3QgZWwgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIGlmIChwcmV2VmFsdWUpIHtcbiAgICAgICAgICAgIHBhcnNlQ1NTQ2xhc3NOYW1lcyhwcmV2VmFsdWUpLmZvckVhY2goY2xhc3NOYW1lID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKGVsLCBjbGFzc05hbWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICBwYXJzZUNTU0NsYXNzTmFtZXModmFsdWUpLmZvckVhY2goY2xhc3NOYW1lID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGVsLCBjbGFzc05hbWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0TmV4dFpJbmRleCgpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFpJbmRleCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5zdHlsZVsnei1pbmRleCddO1xuICAgICAgICBjb25zdCBuZXh0UG9zc2libGVaSW5kZXggPSB0aGlzLnNlcnZpY2UubmV4dFBvc3NpYmxlWkluZGV4O1xuICAgICAgICBpZiAoIWN1cnJlbnRaSW5kZXggfHwgKG5leHRQb3NzaWJsZVpJbmRleCAtIGN1cnJlbnRaSW5kZXggPiAxKSkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIFwiei1pbmRleFwiLCB0aGlzLnNlcnZpY2UubmV4dFpJbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0SW5pdGlhbE9mZnNldCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09ICdtYXhpbWl6ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFsbE9mZnNldCgpO1xuICAgICAgICAgICAgaWYgKCFpc1ByZXNlbnQodGhpcy5sZWZ0KSB8fCAhaXNQcmVzZW50KHRoaXMudG9wKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VydmljZS5jZW50ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHZpZXdQb3J0ID0gdGhpcy5zZXJ2aWNlLndpbmRvd1ZpZXdQb3J0O1xuICAgICAgICAgICAgdGhpcy5zZXRTdHlsZSgnd2lkdGgnLCB2aWV3UG9ydC53aWR0aCk7XG4gICAgICAgICAgICB0aGlzLnNldFN0eWxlKCdoZWlnaHQnLCB2aWV3UG9ydC5oZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdHlsZSgndG9wJywgMCk7XG4gICAgICAgICAgICB0aGlzLnNldFN0eWxlKCdsZWZ0JywgMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlQWxsT2Zmc2V0KCkge1xuICAgICAgICBPRkZTRVRfU1RZTEVTLmZvckVhY2goKHN0eWxlJCQxKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNQcmVzZW50KHRoaXNbc3R5bGUkJDFdKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3R5bGUoc3R5bGUkJDEsIHRoaXNbc3R5bGUkJDFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU3R5bGUoc3R5bGUkJDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0U3R5bGUoc3R5bGUkJDEsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5lbC5uYXRpdmVFbGVtZW50LCBzdHlsZSQkMSwgdmFsdWUgKyAncHgnKTtcbiAgICB9XG4gICAgcmVtb3ZlU3R5bGUoc3R5bGUkJDEpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVTdHlsZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHN0eWxlJCQxKTtcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlcnZpY2Uub3B0aW9ucztcbiAgICB9XG4gICAgc2V0T3B0aW9uKHN0eWxlJCQxLCB2YWx1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJyAmJiB0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVmFsdWUgPSAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykgPyB2YWx1ZSA6IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgIHRoaXMub3B0aW9uc1tzdHlsZSQkMV0gPSBwYXJzZWRWYWx1ZTtcbiAgICAgICAgdGhpcy5zZXJ2aWNlLnNldFJlc3RvcmVPcHRpb24oc3R5bGUkJDEsIHBhcnNlZFZhbHVlKTtcbiAgICB9XG4gICAgaGFuZGxlSW5pdGlhbEZvY3VzKCkge1xuICAgICAgICBjb25zdCB3cmFwcGVyID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50O1xuICAgICAgICBpZiAodGhpcy5hdXRvRm9jdXNlZEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxseUZvY3VzZWRFbGVtZW50ID0gd3JhcHBlci5xdWVyeVNlbGVjdG9yKHRoaXMuYXV0b0ZvY3VzZWRFbGVtZW50KTtcbiAgICAgICAgICAgIGlmIChpbml0aWFsbHlGb2N1c2VkRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGluaXRpYWxseUZvY3VzZWRFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgV2luZG93Q29tcG9uZW50LnByb3RvdHlwZSwgXCJhdXRvRm9jdXNlZEVsZW1lbnRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFdpbmRvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwidGl0bGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG5dLCBXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLCBcImRyYWdnYWJsZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQm9vbGVhbl0pXG5dLCBXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLCBcInJlc2l6YWJsZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLCBcImtlZXBDb250ZW50XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbU3RyaW5nXSlcbl0sIFdpbmRvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhdGVcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTnVtYmVyXSlcbl0sIFdpbmRvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwibWluV2lkdGhcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTnVtYmVyXSlcbl0sIFdpbmRvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwibWluSGVpZ2h0XCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW051bWJlcl0pXG5dLCBXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLCBcIndpZHRoXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgTnVtYmVyKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW051bWJlcl0pXG5dLCBXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLCBcImhlaWdodFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlciksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOdW1iZXJdKVxuXSwgV2luZG93Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ0b3BcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBOdW1iZXIpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTnVtYmVyXSlcbl0sIFdpbmRvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwibGVmdFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLCBcImRyYWdTdGFydFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIFdpbmRvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwiZHJhZ0VuZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIFdpbmRvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwicmVzaXplU3RhcnRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLCBcInJlc2l6ZUVuZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIFdpbmRvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwiY2xvc2VcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLCBcIndpZHRoQ2hhbmdlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBPdXRwdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRXZlbnRFbWl0dGVyKVxuXSwgV2luZG93Q29tcG9uZW50LnByb3RvdHlwZSwgXCJoZWlnaHRDaGFuZ2VcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIE91dHB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBFdmVudEVtaXR0ZXIpXG5dLCBXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLCBcInRvcENoYW5nZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIFdpbmRvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwibGVmdENoYW5nZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEV2ZW50RW1pdHRlcilcbl0sIFdpbmRvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwic3RhdGVDaGFuZ2VcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLnRhYkluZGV4JyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIFdpbmRvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwidGFiSW5kZXhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXdpbmRvdycpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLCBcImhvc3RDbGFzc2VzXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIuZGlyJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgV2luZG93Q29tcG9uZW50LnByb3RvdHlwZSwgXCJkaXJcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBWaWV3Q2hpbGQoV2luZG93VGl0bGVCYXJDb21wb25lbnQsIHsgc3RhdGljOiBmYWxzZSB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgV2luZG93VGl0bGVCYXJDb21wb25lbnQpXG5dLCBXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLCBcInRpdGxlQmFyVmlld1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkKFdpbmRvd1RpdGxlQmFyQ29tcG9uZW50LCB7IHN0YXRpYzogZmFsc2UgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFdpbmRvd1RpdGxlQmFyQ29tcG9uZW50KVxuXSwgV2luZG93Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ0aXRsZUJhckNvbnRlbnRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIFZpZXdDaGlsZHJlbihSZXNpemVIYW5kbGVEaXJlY3RpdmUpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBRdWVyeUxpc3QpXG5dLCBXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLCBcInJlc2l6ZUhhbmRsZXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdzdHlsZS5taW5XaWR0aCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIFdpbmRvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwic3R5bGVNaW5XaWR0aFwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdzdHlsZS5taW5IZWlnaHQnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLCBcInN0eWxlTWluSGVpZ2h0XCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ3N0eWxlLnBvc2l0aW9uJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgV2luZG93Q29tcG9uZW50LnByb3RvdHlwZSwgXCJzdHlsZVBvc2l0aW9uXCIsIG51bGwpO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2NsYXNzLmstd2luZG93LW1heGltaXplZCcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLCBcIndyYXBwZXJNYXhpbWl6ZWRDbGFzc1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdjbGFzcy5rLXdpbmRvdy1taW5pbWl6ZWQnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgV2luZG93Q29tcG9uZW50LnByb3RvdHlwZSwgXCJ3cmFwcGVyTWluaW1pemVkQ2xhc3NcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0TGlzdGVuZXIoJ2ZvY3VzJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cmV0dXJudHlwZVwiLCB2b2lkIDApXG5dLCBXaW5kb3dDb21wb25lbnQucHJvdG90eXBlLCBcIm9uQ29tcG9uZW50Rm9jdXNcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0TGlzdGVuZXIoJ2JsdXInKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbl0sIFdpbmRvd0NvbXBvbmVudC5wcm90b3R5cGUsIFwib25Db21wb25lbnRCbHVyXCIsIG51bGwpO1xuV2luZG93Q29tcG9uZW50ID0gX19kZWNvcmF0ZShbXG4gICAgQ29tcG9uZW50KHtcbiAgICAgICAgZXhwb3J0QXM6ICdrZW5kb1dpbmRvdycsXG4gICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgRHJhZ1Jlc2l6ZVNlcnZpY2UsXG4gICAgICAgICAgICBOYXZpZ2F0aW9uU2VydmljZSxcbiAgICAgICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogTDEwTl9QUkVGSVgsXG4gICAgICAgICAgICAgICAgdXNlVmFsdWU6ICdrZW5kby53aW5kb3cnXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHNlbGVjdG9yOiAna2VuZG8td2luZG93JyxcbiAgICAgICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPG5nLWNvbnRhaW5lciBrZW5kb1dpbmRvd0xvY2FsaXplZE1lc3NhZ2VzXG4gICAgICAgICAgICBpMThuLWNsb3NlVGl0bGU9XCJrZW5kby53aW5kb3cuY2xvc2VUaXRsZXxUaGUgdGl0bGUgb2YgdGhlIGNsb3NlIGJ1dHRvblwiXG4gICAgICAgICAgICBjbG9zZVRpdGxlPVwiQ2xvc2VcIlxuXG4gICAgICAgICAgICBpMThuLXJlc3RvcmVUaXRsZT1cImtlbmRvLndpbmRvdy5yZXN0b3JlVGl0bGV8VGhlIHRpdGxlIG9mIHRoZSByZXN0b3JlIGJ1dHRvblwiXG4gICAgICAgICAgICByZXN0b3JlVGl0bGU9XCJSZXN0b3JlXCJcblxuICAgICAgICAgICAgaTE4bi1tYXhpbWl6ZVRpdGxlPVwia2VuZG8ud2luZG93Lm1heGltaXplVGl0bGV8VGhlIHRpdGxlIG9mIHRoZSBtYXhpbWl6ZSBidXR0b25cIlxuICAgICAgICAgICAgbWF4aW1pemVUaXRsZT1cIk1heGltaXplXCJcblxuICAgICAgICAgICAgaTE4bi1taW5pbWl6ZVRpdGxlPVwia2VuZG8ud2luZG93Lm1pbmltaXplVGl0bGV8VGhlIHRpdGxlIG9mIHRoZSBtaW5pbWl6ZSBidXR0b25cIlxuICAgICAgICAgICAgbWluaW1pemVUaXRsZT1cIk1pbmltaXplXCJcbiAgICAgICAgPlxuICAgICAgICA8bmctY29udGFpbmVyPlxuXG4gICAgICAgIDxrZW5kby13aW5kb3ctdGl0bGViYXIgKm5nSWY9XCJzaG93RGVmYXVsdFRpdGxlQmFyXCIgW3RlbXBsYXRlXT1cInRpdGxlQmFyVGVtcGxhdGVcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJrLXdpbmRvdy10aXRsZVwiPnt7IHRpdGxlIH19PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiay13aW5kb3ctYWN0aW9uc1wiPlxuICAgICAgICAgICAgICAgIDxidXR0b24ga2VuZG9XaW5kb3dNaW5pbWl6ZUFjdGlvbiAgW2F0dHIudGl0bGVdPVwibWluaW1pemVCdXR0b25UaXRsZVwiIFthdHRyLmFyaWEtbGFiZWxdPVwibWluaW1pemVCdXR0b25UaXRsZVwiPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24ga2VuZG9XaW5kb3dNYXhpbWl6ZUFjdGlvbiBbYXR0ci50aXRsZV09XCJtYXhpbWl6ZUJ1dHRvblRpdGxlXCIgW2F0dHIuYXJpYS1sYWJlbF09XCJtYXhpbWl6ZUJ1dHRvblRpdGxlXCI+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBrZW5kb1dpbmRvd1Jlc3RvcmVBY3Rpb24gW2F0dHIudGl0bGVdPVwicmVzdG9yZUJ1dHRvblRpdGxlXCIgW2F0dHIuYXJpYS1sYWJlbF09XCJyZXN0b3JlQnV0dG9uVGl0bGVcIj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGtlbmRvV2luZG93Q2xvc2VBY3Rpb24gW2F0dHIudGl0bGVdPVwiY2xvc2VCdXR0b25UaXRsZVwiIFthdHRyLmFyaWEtbGFiZWxdPVwiY2xvc2VCdXR0b25UaXRsZVwiPjwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwva2VuZG8td2luZG93LXRpdGxlYmFyPlxuICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XCJrZW5kby13aW5kb3ctdGl0bGViYXJcIiAqbmdJZj1cIiFzaG93RGVmYXVsdFRpdGxlQmFyXCI+PC9uZy1jb250ZW50PlxuXG4gICAgICAgIDxkaXYgKm5nSWY9XCJzdGF0ZSAhPT0gJ21pbmltaXplZCcgfHwga2VlcENvbnRlbnRcIlxuICAgICAgICAgICAgW2hpZGRlbl09XCJzdGF0ZSA9PT0gJ21pbmltaXplZCcgJiYga2VlcENvbnRlbnRcIlxuICAgICAgICAgICAgY2xhc3M9XCJrLWNvbnRlbnQgay13aW5kb3ctY29udGVudFwiXG4gICAgICAgID5cbiAgICAgICAgICAgIDxuZy1jb250ZW50ICpuZ0lmPVwiIWNvbnRlbnRUZW1wbGF0ZVwiPjwvbmctY29udGVudD5cbiAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdUZW1wbGF0ZU91dGxldF09XCJjb250ZW50VGVtcGxhdGVcIiAqbmdJZj1cImNvbnRlbnRUZW1wbGF0ZVwiPjwvbmctdGVtcGxhdGU+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09J3Jlc2l6YWJsZSc+XG4gICAgICAgICAgICA8ZGl2ICpuZ0Zvcj0nbGV0IGRpciBvZiByZXNpemVEaXJlY3Rpb25zJ1xuICAgICAgICAgICAgICAgIFtkaXJlY3Rpb25dPVwiZGlyXCJcbiAgICAgICAgICAgICAgICBrZW5kb1dpbmRvd1Jlc2l6ZUhhbmRsZVxuICAgICAgICAgICAgICAgIGtlbmRvRHJhZ2dhYmxlPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgYFxuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRWxlbWVudFJlZixcbiAgICAgICAgUmVuZGVyZXIyLFxuICAgICAgICBEcmFnUmVzaXplU2VydmljZSxcbiAgICAgICAgTmF2aWdhdGlvblNlcnZpY2UsXG4gICAgICAgIE5nWm9uZSxcbiAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZV0pXG5dLCBXaW5kb3dDb21wb25lbnQpO1xuXG5sZXQgV2luZG93TWF4aW1pemVBY3Rpb25EaXJlY3RpdmUgPSBjbGFzcyBXaW5kb3dNYXhpbWl6ZUFjdGlvbkRpcmVjdGl2ZSBleHRlbmRzIEJ1dHRvbiB7XG4gICAgY29uc3RydWN0b3IoZWwsIHJlbmRlcmVyLCBfc2VydmljZSwgbG9jYWxpemF0aW9uLCBuZ1pvbmUpIHtcbiAgICAgICAgc3VwZXIoZWwsIHJlbmRlcmVyLCBudWxsLCBsb2NhbGl6YXRpb24sIG5nWm9uZSk7XG4gICAgICAgIHRoaXMuYnV0dG9uVHlwZSA9ICdidXR0b24nO1xuICAgICAgICB0aGlzLndpbmRvdyA9IF9zZXJ2aWNlO1xuICAgICAgICB0aGlzLmxvb2sgPSAnYmFyZSc7XG4gICAgICAgIHRoaXMuaWNvbiA9ICd3aW5kb3ctbWF4aW1pemUnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgb25DbGljaygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzRGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMud2luZG93Lm1heGltaXplQWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHZpc2libGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5vcHRpb25zLnN0YXRlID09PSAnZGVmYXVsdCcgPyAnaW5saW5lLWZsZXgnIDogJ25vbmUnO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBXaW5kb3dNYXhpbWl6ZUFjdGlvbkRpcmVjdGl2ZS5wcm90b3R5cGUsIFwid2luZG93XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnYXR0ci50eXBlJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFdpbmRvd01heGltaXplQWN0aW9uRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJidXR0b25UeXBlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0TGlzdGVuZXIoJ2NsaWNrJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cmV0dXJudHlwZVwiLCB2b2lkIDApXG5dLCBXaW5kb3dNYXhpbWl6ZUFjdGlvbkRpcmVjdGl2ZS5wcm90b3R5cGUsIFwib25DbGlja1wiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdzdHlsZS5kaXNwbGF5JyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgV2luZG93TWF4aW1pemVBY3Rpb25EaXJlY3RpdmUucHJvdG90eXBlLCBcInZpc2libGVcIiwgbnVsbCk7XG5XaW5kb3dNYXhpbWl6ZUFjdGlvbkRpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgIERpcmVjdGl2ZSh7XG4gICAgICAgIGV4cG9ydEFzOiAna2VuZG9XaW5kb3dNYXhpbWl6ZUFjdGlvbicsXG4gICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBMMTBOX1BSRUZJWCxcbiAgICAgICAgICAgICAgICB1c2VWYWx1ZTogJ2tlbmRvLmJ1dHRvbidcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgc2VsZWN0b3I6ICdidXR0b25ba2VuZG9XaW5kb3dNYXhpbWl6ZUFjdGlvbl0nIC8vIHRzbGludDpkaXNhYmxlLWxpbmVcbiAgICB9KSxcbiAgICBfX3BhcmFtKDIsIE9wdGlvbmFsKCkpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRWxlbWVudFJlZixcbiAgICAgICAgUmVuZGVyZXIyLFxuICAgICAgICBEcmFnUmVzaXplU2VydmljZSxcbiAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgTmdab25lXSlcbl0sIFdpbmRvd01heGltaXplQWN0aW9uRGlyZWN0aXZlKTtcblxubGV0IFdpbmRvd01pbmltaXplQWN0aW9uRGlyZWN0aXZlID0gY2xhc3MgV2luZG93TWluaW1pemVBY3Rpb25EaXJlY3RpdmUgZXh0ZW5kcyBCdXR0b24ge1xuICAgIGNvbnN0cnVjdG9yKGVsLCByZW5kZXJlciwgX3NlcnZpY2UsIGxvY2FsaXphdGlvbiwgbmdab25lKSB7XG4gICAgICAgIHN1cGVyKGVsLCByZW5kZXJlciwgbnVsbCwgbG9jYWxpemF0aW9uLCBuZ1pvbmUpO1xuICAgICAgICB0aGlzLmJ1dHRvblR5cGUgPSAnYnV0dG9uJztcbiAgICAgICAgdGhpcy53aW5kb3cgPSBfc2VydmljZTtcbiAgICAgICAgdGhpcy5sb29rID0gJ2JhcmUnO1xuICAgICAgICB0aGlzLmljb24gPSAnd2luZG93LW1pbmltaXplJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uQ2xpY2soKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0Rpc2FibGVkKSB7XG4gICAgICAgICAgICB0aGlzLndpbmRvdy5taW5pbWl6ZUFjdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCB2aXNpYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cub3B0aW9ucy5zdGF0ZSA9PT0gJ2RlZmF1bHQnID8gJ2lubGluZS1mbGV4JyA6ICdub25lJztcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgV2luZG93TWluaW1pemVBY3Rpb25EaXJlY3RpdmUucHJvdG90eXBlLCBcIndpbmRvd1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdEJpbmRpbmcoJ2F0dHIudHlwZScpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBXaW5kb3dNaW5pbWl6ZUFjdGlvbkRpcmVjdGl2ZS5wcm90b3R5cGUsIFwiYnV0dG9uVHlwZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSG9zdExpc3RlbmVyKCdjbGljaycpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuXSwgV2luZG93TWluaW1pemVBY3Rpb25EaXJlY3RpdmUucHJvdG90eXBlLCBcIm9uQ2xpY2tcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnc3R5bGUuZGlzcGxheScpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIFdpbmRvd01pbmltaXplQWN0aW9uRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJ2aXNpYmxlXCIsIG51bGwpO1xuV2luZG93TWluaW1pemVBY3Rpb25EaXJlY3RpdmUgPSBfX2RlY29yYXRlKFtcbiAgICBEaXJlY3RpdmUoe1xuICAgICAgICBleHBvcnRBczogJ2tlbmRvV2luZG93TWluaW1pemVBY3Rpb24nLFxuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogTDEwTl9QUkVGSVgsXG4gICAgICAgICAgICAgICAgdXNlVmFsdWU6ICdrZW5kby5idXR0b24nXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHNlbGVjdG9yOiAnYnV0dG9uW2tlbmRvV2luZG93TWluaW1pemVBY3Rpb25dJyAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lXG4gICAgfSksXG4gICAgX19wYXJhbSgyLCBPcHRpb25hbCgpKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0VsZW1lbnRSZWYsXG4gICAgICAgIFJlbmRlcmVyMixcbiAgICAgICAgRHJhZ1Jlc2l6ZVNlcnZpY2UsXG4gICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgIE5nWm9uZV0pXG5dLCBXaW5kb3dNaW5pbWl6ZUFjdGlvbkRpcmVjdGl2ZSk7XG5cbmxldCBXaW5kb3dDbG9zZUFjdGlvbkRpcmVjdGl2ZSA9IGNsYXNzIFdpbmRvd0Nsb3NlQWN0aW9uRGlyZWN0aXZlIGV4dGVuZHMgQnV0dG9uIHtcbiAgICBjb25zdHJ1Y3RvcihlbCwgcmVuZGVyZXIsIF9zZXJ2aWNlLCBsb2NhbGl6YXRpb24sIG5nWm9uZSkge1xuICAgICAgICBzdXBlcihlbCwgcmVuZGVyZXIsIG51bGwsIGxvY2FsaXphdGlvbiwgbmdab25lKTtcbiAgICAgICAgdGhpcy5idXR0b25UeXBlID0gJ2J1dHRvbic7XG4gICAgICAgIHRoaXMud2luZG93ID0gX3NlcnZpY2U7XG4gICAgICAgIHRoaXMubG9vayA9ICdiYXJlJztcbiAgICAgICAgdGhpcy5pY29uID0gJ2Nsb3NlJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uQ2xpY2soKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0Rpc2FibGVkKSB7XG4gICAgICAgICAgICB0aGlzLndpbmRvdy5jbG9zZUFjdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIFdpbmRvd0Nsb3NlQWN0aW9uRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJ3aW5kb3dcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RCaW5kaW5nKCdhdHRyLnR5cGUnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgV2luZG93Q2xvc2VBY3Rpb25EaXJlY3RpdmUucHJvdG90eXBlLCBcImJ1dHRvblR5cGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RMaXN0ZW5lcignY2xpY2snKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbl0sIFdpbmRvd0Nsb3NlQWN0aW9uRGlyZWN0aXZlLnByb3RvdHlwZSwgXCJvbkNsaWNrXCIsIG51bGwpO1xuV2luZG93Q2xvc2VBY3Rpb25EaXJlY3RpdmUgPSBfX2RlY29yYXRlKFtcbiAgICBEaXJlY3RpdmUoe1xuICAgICAgICBleHBvcnRBczogJ2tlbmRvV2luZG93Q2xvc2VBY3Rpb24nLFxuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogTDEwTl9QUkVGSVgsXG4gICAgICAgICAgICAgICAgdXNlVmFsdWU6ICdrZW5kby5idXR0b24nXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHNlbGVjdG9yOiAnYnV0dG9uW2tlbmRvV2luZG93Q2xvc2VBY3Rpb25dJyAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lXG4gICAgfSksXG4gICAgX19wYXJhbSgyLCBPcHRpb25hbCgpKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0VsZW1lbnRSZWYsXG4gICAgICAgIFJlbmRlcmVyMixcbiAgICAgICAgRHJhZ1Jlc2l6ZVNlcnZpY2UsXG4gICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgIE5nWm9uZV0pXG5dLCBXaW5kb3dDbG9zZUFjdGlvbkRpcmVjdGl2ZSk7XG5cbmxldCBXaW5kb3dSZXN0b3JlQWN0aW9uRGlyZWN0aXZlID0gY2xhc3MgV2luZG93UmVzdG9yZUFjdGlvbkRpcmVjdGl2ZSBleHRlbmRzIEJ1dHRvbiB7XG4gICAgY29uc3RydWN0b3IoZWwsIHJlbmRlcmVyLCBfc2VydmljZSwgbG9jYWxpemF0aW9uLCBuZ1pvbmUpIHtcbiAgICAgICAgc3VwZXIoZWwsIHJlbmRlcmVyLCBudWxsLCBsb2NhbGl6YXRpb24sIG5nWm9uZSk7XG4gICAgICAgIHRoaXMuYnV0dG9uVHlwZSA9ICdidXR0b24nO1xuICAgICAgICB0aGlzLndpbmRvdyA9IF9zZXJ2aWNlO1xuICAgICAgICB0aGlzLmxvb2sgPSAnYmFyZSc7XG4gICAgICAgIHRoaXMuaWNvbiA9ICd3aW5kb3ctcmVzdG9yZSc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBvbkNsaWNrKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNEaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy53aW5kb3cucmVzdG9yZUFjdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCB2aXNpYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cub3B0aW9ucy5zdGF0ZSA9PT0gJ2RlZmF1bHQnID8gJ25vbmUnIDogJ2lubGluZS1mbGV4JztcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgV2luZG93UmVzdG9yZUFjdGlvbkRpcmVjdGl2ZS5wcm90b3R5cGUsIFwid2luZG93XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnYXR0ci50eXBlJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFdpbmRvd1Jlc3RvcmVBY3Rpb25EaXJlY3RpdmUucHJvdG90eXBlLCBcImJ1dHRvblR5cGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIEhvc3RMaXN0ZW5lcignY2xpY2snKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsIHZvaWQgMClcbl0sIFdpbmRvd1Jlc3RvcmVBY3Rpb25EaXJlY3RpdmUucHJvdG90eXBlLCBcIm9uQ2xpY2tcIiwgbnVsbCk7XG5fX2RlY29yYXRlKFtcbiAgICBIb3N0QmluZGluZygnc3R5bGUuZGlzcGxheScpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIFdpbmRvd1Jlc3RvcmVBY3Rpb25EaXJlY3RpdmUucHJvdG90eXBlLCBcInZpc2libGVcIiwgbnVsbCk7XG5XaW5kb3dSZXN0b3JlQWN0aW9uRGlyZWN0aXZlID0gX19kZWNvcmF0ZShbXG4gICAgRGlyZWN0aXZlKHtcbiAgICAgICAgZXhwb3J0QXM6ICdrZW5kb1dpbmRvd1Jlc3RvcmVBY3Rpb24nLFxuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIExvY2FsaXphdGlvblNlcnZpY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZTogTDEwTl9QUkVGSVgsXG4gICAgICAgICAgICAgICAgdXNlVmFsdWU6ICdrZW5kby5idXR0b24nXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHNlbGVjdG9yOiAnYnV0dG9uW2tlbmRvV2luZG93UmVzdG9yZUFjdGlvbl0nIC8vIHRzbGludDpkaXNhYmxlLWxpbmVcbiAgICB9KSxcbiAgICBfX3BhcmFtKDIsIE9wdGlvbmFsKCkpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRWxlbWVudFJlZixcbiAgICAgICAgUmVuZGVyZXIyLFxuICAgICAgICBEcmFnUmVzaXplU2VydmljZSxcbiAgICAgICAgTG9jYWxpemF0aW9uU2VydmljZSxcbiAgICAgICAgTmdab25lXSlcbl0sIFdpbmRvd1Jlc3RvcmVBY3Rpb25EaXJlY3RpdmUpO1xuXG4vKipcbiAqIFRoZSBzZXR0aW5ncyBmb3IgdGhlIFdpbmRvdyBhY3Rpb25zIHdoZW4gdGhlIFdpbmRvdyBpcyBvcGVuZWQgdGhyb3VnaCBgV2luZG93U2VydmljZWBcbiAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgYXBpX2RpYWxvZ193aW5kb3dzZXJ2aWNlICV9I3RvYy1vcGVuKSkuXG4gKi9cbmNsYXNzIFdpbmRvd1NldHRpbmdzIHtcbn1cbi8qKlxuICogSW5kaWNhdGVzIHRoYXQgdGhlICoqQ2xvc2UqKiBidXR0b24gb2YgYSBXaW5kb3cgdGhhdCBpcyBvcGVuZWQgdGhyb3VnaCBgV2luZG93U2VydmljZWAgaXMgY2xpY2tlZC5cbiAqL1xuY2xhc3MgV2luZG93Q2xvc2VSZXN1bHQge1xufVxuLyoqXG4gKiBIb2xkcyByZWZlcmVuY2VzIHRvIHRoZSBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIFdpbmRvdy5cbiAqIENvbnRyb2xzIHRoZSBXaW5kb3dzIHRoYXQgd2VyZSBvcGVuZWQgdGhyb3VnaCBgV2luZG93U2VydmljZWBcbiAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgYXBpX2RpYWxvZ193aW5kb3dzZXJ2aWNlICV9I3RvYy1vcGVuKSkuXG4gKi9cbmNsYXNzIFdpbmRvd1JlZiB7XG59XG5cbnZhciBXaW5kb3dDb250YWluZXJTZXJ2aWNlXzE7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IFdpbmRvd0NvbnRhaW5lclNlcnZpY2UgPSBXaW5kb3dDb250YWluZXJTZXJ2aWNlXzEgPSBjbGFzcyBXaW5kb3dDb250YWluZXJTZXJ2aWNlIHtcbiAgICBzZXQgY29udGFpbmVyKGNvbnRhaW5lcikge1xuICAgICAgICBXaW5kb3dDb250YWluZXJTZXJ2aWNlXzEuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIH1cbiAgICBnZXQgY29udGFpbmVyKCkge1xuICAgICAgICByZXR1cm4gV2luZG93Q29udGFpbmVyU2VydmljZV8xLmNvbnRhaW5lcjtcbiAgICB9XG59O1xuV2luZG93Q29udGFpbmVyU2VydmljZS5jb250YWluZXIgPSBudWxsO1xuV2luZG93Q29udGFpbmVyU2VydmljZSA9IFdpbmRvd0NvbnRhaW5lclNlcnZpY2VfMSA9IF9fZGVjb3JhdGUoW1xuICAgIEluamVjdGFibGUoKVxuXSwgV2luZG93Q29udGFpbmVyU2VydmljZSk7XG5cbmNvbnN0IGlzTm90Q29tcG9uZW50JDEgPSAoY29tcG9uZW50KSA9PiBpc1N0cmluZyhjb21wb25lbnQpIHx8IGNvbXBvbmVudCBpbnN0YW5jZW9mIFRlbXBsYXRlUmVmO1xuY2xhc3MgV2luZG93SW5qZWN0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGdldFdpbmRvd1JlZiwgcGFyZW50SW5qZWN0b3IpIHtcbiAgICAgICAgdGhpcy5nZXRXaW5kb3dSZWYgPSBnZXRXaW5kb3dSZWY7XG4gICAgICAgIHRoaXMucGFyZW50SW5qZWN0b3IgPSBwYXJlbnRJbmplY3RvcjtcbiAgICB9XG4gICAgZ2V0KHRva2VuLCBub3RGb3VuZFZhbHVlKSB7XG4gICAgICAgIGlmICh0b2tlbiA9PT0gV2luZG93UmVmKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRXaW5kb3dSZWYoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnRJbmplY3Rvci5nZXQodG9rZW4sIG5vdEZvdW5kVmFsdWUpO1xuICAgIH1cbn1cbi8qKlxuICogQSBzZXJ2aWNlIGZvciBvcGVuaW5nIFdpbmRvd3MgZHluYW1pY2FsbHlcbiAqIChbc2VlIGV4YW1wbGVdKHslIHNsdWcgc2VydmljZV93aW5kb3cgJX0pKS5cbiAqL1xubGV0IFdpbmRvd1NlcnZpY2UgPSBjbGFzcyBXaW5kb3dTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcmVzb2x2ZXIsIGNvbnRhaW5lclNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5yZXNvbHZlciA9IHJlc29sdmVyO1xuICAgICAgICB0aGlzLmNvbnRhaW5lclNlcnZpY2UgPSBjb250YWluZXJTZXJ2aWNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPcGVucyBhIFdpbmRvdyBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1dpbmRvd1NldHRpbmdzfSBzZXR0aW5ncyAtIFRoZSBzZXR0aW5ncyB0aGF0IGRlZmluZSB0aGUgV2luZG93LlxuICAgICAqIEByZXR1cm5zIHtXaW5kb3dSZWZ9IC0gQSByZWZlcmVuY2UgdG8gdGhlIFdpbmRvdyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogYGBgdHMtbm8tcnVuXG4gICAgICogX0BDb21wb25lbnQoe1xuICAgICAqICAgc2VsZWN0b3I6ICdteS1hcHAnLFxuICAgICAqICAgdGVtcGxhdGU6IGBcbiAgICAgKiAgICAgPGJ1dHRvbiBrZW5kb0J1dHRvbiAoY2xpY2spPVwib3BlbigpXCI+T3BlbiB3aW5kb3c8L2J1dHRvbj5cbiAgICAgKiAgICAgPGRpdiBrZW5kb1dpbmRvd0NvbnRhaW5lcj48L2Rpdj5cbiAgICAgKiAgIGBcbiAgICAgKiB9KVxuICAgICAqIGV4cG9ydCBjbGFzcyBBcHBDb21wb25lbnQge1xuICAgICAqICAgICBjb25zdHJ1Y3RvciggcHJpdmF0ZSB3aW5kb3dTZXJ2aWNlOiBXaW5kb3dTZXJ2aWNlICkge31cbiAgICAgKlxuICAgICAqICAgICBwdWJsaWMgb3BlbigpIHtcbiAgICAgKiAgICAgICAgIHZhciB3aW5kb3cgPSB0aGlzLndpbmRvd1NlcnZpY2Uub3Blbih7XG4gICAgICogICAgICAgICAgIHRpdGxlOiBcIk15IHdpbmRvd1wiLFxuICAgICAqICAgICAgICAgICBjb250ZW50OiBcIk15IGNvbnRlbnQhXCJcbiAgICAgKiAgICAgICAgIH0pO1xuICAgICAqXG4gICAgICogICAgICAgICB3aW5kb3cucmVzdWx0LnN1YnNjcmliZSgocmVzdWx0KSA9PiB7XG4gICAgICogICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBXaW5kb3dDbG9zZVJlc3VsdCkge1xuICAgICAqICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiV2luZG93IHdhcyBjbG9zZWRcIik7XG4gICAgICogICAgICAgICAgIH1cbiAgICAgKiAgICAgICAgIH0pO1xuICAgICAqICAgICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICovXG4gICAgb3BlbihzZXR0aW5ncykge1xuICAgICAgICBjb25zdCBmYWN0b3J5ID0gdGhpcy5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShXaW5kb3dDb21wb25lbnQpO1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBzZXR0aW5ncy5hcHBlbmRUbyB8fCB0aGlzLmNvbnRhaW5lclNlcnZpY2UuY29udGFpbmVyO1xuICAgICAgICBpZiAoIWNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgYXR0YWNoIHdpbmRvdyB0byB0aGUgcGFnZS5cbiAgICAgICAgICAgICAgICBBZGQgYW4gZWxlbWVudCB0aGF0IHVzZXMgdGhlIGtlbmRvV2luZG93Q29udGFpbmVyIGRpcmVjdGl2ZSwgb3Igc2V0IHRoZSAnYXBwZW5kVG8nIHByb3BlcnR5LlxuICAgICAgICAgICAgICAgIFNlZSBodHRwczovL3d3dy50ZWxlcmlrLmNvbS9rZW5kby1hbmd1bGFyLXVpL2NvbXBvbmVudHMvZGlhbG9ncy93aW5kb3cvc2VydmljZS9cbiAgICAgICAgICAgIGApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdpbmRvd1JlZiA9IHtcbiAgICAgICAgICAgIGNsb3NlOiAoKSA9PiB7IH0sXG4gICAgICAgICAgICBjb250ZW50OiBudWxsLFxuICAgICAgICAgICAgcmVzdWx0OiBudWxsLFxuICAgICAgICAgICAgd2luZG93OiBudWxsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLmNvbnRlbnRGcm9tKHNldHRpbmdzLmNvbnRlbnQsIGNvbnRhaW5lciwgd2luZG93UmVmKTtcbiAgICAgICAgY29uc3Qgd2luZG93ID0gY29udGFpbmVyLmNyZWF0ZUNvbXBvbmVudChmYWN0b3J5LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29udGVudC5ub2Rlcyk7XG4gICAgICAgIHdpbmRvd1JlZi53aW5kb3cgPSB3aW5kb3c7XG4gICAgICAgIHRoaXMuYXBwbHlPcHRpb25zKHdpbmRvdy5pbnN0YW5jZSwgc2V0dGluZ3MpO1xuICAgICAgICBjb25zdCBhcGlDbG9zZSA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIGNvbnN0IGNsb3NlID0gKGUpID0+IHtcbiAgICAgICAgICAgIGFwaUNsb3NlLm5leHQoZSB8fCBuZXcgV2luZG93Q2xvc2VSZXN1bHQoKSk7XG4gICAgICAgICAgICBpZiAoY29udGVudC5jb21wb25lbnRSZWYpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50LmNvbXBvbmVudFJlZi5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aW5kb3cuZGVzdHJveSgpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSBtZXJnZShhcGlDbG9zZSwgd2luZG93Lmluc3RhbmNlLmNsb3NlLnBpcGUobWFwKGUgPT4gKGUgPyBlIDogbmV3IFdpbmRvd0Nsb3NlUmVzdWx0KCkpKSwgZmlsdGVyKChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MucHJldmVudENsb3NlKSB7XG4gICAgICAgICAgICAgICAgLy8gYWRkIHdpbmRvd1JlZiBvbmx5IHdoZW4gdXNpbmcgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgY29uc3Qgd2luZG93UmVmUGFyYW1ldGVyID0gaXNOb3RDb21wb25lbnQkMShzZXR0aW5ncy5jb250ZW50KSA/IHVuZGVmaW5lZCA6IHdpbmRvd1JlZjtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXNldHRpbmdzLnByZXZlbnRDbG9zZShlLCB3aW5kb3dSZWZQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pKSkucGlwZSh0YWtlKDEpLCBcbiAgICAgICAgLy8gVGFrZXMgY2FyZSBmb3IgbXVsdGlwbGUgc3Vic2NyaXB0aW9uczpcbiAgICAgICAgLy8gV2Ugc3Vic2NyaWJlIGludGVybmFsbHkgYW5kIHRoZSB1c2VyIG1heSBzdWJzY3JpYmUgdG8gZ2V0IGEgY2xvc2UgcmVzdWx0IC0gd2luZG93LnJlc3VsdC5zdWJzY3JpYmUoKS5cbiAgICAgICAgLy8gVGhpcyBjYXVzZXMgbXVsdGlwbGUgc3Vic2NyaXB0aW9ucyB0byB0aGUgc2FtZSBzb3VyY2UgYW5kIHRodXMgbXVsdGlwbGUgZW1pc3Npb25zLiBzaGFyZSgpIHNvbHZlcyB0aGF0LlxuICAgICAgICBzaGFyZSgpKTtcbiAgICAgICAgcmVzdWx0LnN1YnNjcmliZShjbG9zZSk7XG4gICAgICAgIHdpbmRvd1JlZi5jbG9zZSA9IGNsb3NlO1xuICAgICAgICB3aW5kb3dSZWYucmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICB3aW5kb3cuY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIHJldHVybiB3aW5kb3dSZWY7XG4gICAgfVxuICAgIGFwcGx5T3B0aW9ucyhpbnN0YW5jZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAoaXNQcmVzZW50KG9wdGlvbnMuaHRtbEF0dHJpYnV0ZXMpKSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5odG1sQXR0cmlidXRlcyA9IG9wdGlvbnMuaHRtbEF0dHJpYnV0ZXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUHJlc2VudChvcHRpb25zLmNzc0NsYXNzKSkge1xuICAgICAgICAgICAgaW5zdGFuY2UuY3NzQ2xhc3MgPSBvcHRpb25zLmNzc0NsYXNzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1ByZXNlbnQob3B0aW9ucy50aXRsZSkpIHtcbiAgICAgICAgICAgIGluc3RhbmNlLnRpdGxlID0gb3B0aW9ucy50aXRsZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcmVzZW50KG9wdGlvbnMua2VlcENvbnRlbnQpKSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5rZWVwQ29udGVudCA9IG9wdGlvbnMua2VlcENvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUHJlc2VudChvcHRpb25zLndpZHRoKSkge1xuICAgICAgICAgICAgaW5zdGFuY2Uud2lkdGggPSBvcHRpb25zLndpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1ByZXNlbnQob3B0aW9ucy5taW5XaWR0aCkpIHtcbiAgICAgICAgICAgIGluc3RhbmNlLm1pbldpZHRoID0gb3B0aW9ucy5taW5XaWR0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcmVzZW50KG9wdGlvbnMuaGVpZ2h0KSkge1xuICAgICAgICAgICAgaW5zdGFuY2UuaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUHJlc2VudChvcHRpb25zLm1pbkhlaWdodCkpIHtcbiAgICAgICAgICAgIGluc3RhbmNlLm1pbkhlaWdodCA9IG9wdGlvbnMubWluSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1ByZXNlbnQob3B0aW9ucy5sZWZ0KSkge1xuICAgICAgICAgICAgaW5zdGFuY2UubGVmdCA9IG9wdGlvbnMubGVmdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcmVzZW50KG9wdGlvbnMudG9wKSkge1xuICAgICAgICAgICAgaW5zdGFuY2UudG9wID0gb3B0aW9ucy50b3A7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUHJlc2VudChvcHRpb25zLmRyYWdnYWJsZSkpIHtcbiAgICAgICAgICAgIGluc3RhbmNlLmRyYWdnYWJsZSA9IG9wdGlvbnMuZHJhZ2dhYmxlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1ByZXNlbnQob3B0aW9ucy5yZXNpemFibGUpKSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5yZXNpemFibGUgPSBvcHRpb25zLnJlc2l6YWJsZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcmVzZW50KG9wdGlvbnMubWVzc2FnZXMgJiYgb3B0aW9ucy5tZXNzYWdlcy5jbG9zZVRpdGxlKSkge1xuICAgICAgICAgICAgaW5zdGFuY2UubWVzc2FnZXMuY2xvc2VUaXRsZSA9IG9wdGlvbnMubWVzc2FnZXMuY2xvc2VUaXRsZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcmVzZW50KG9wdGlvbnMubWVzc2FnZXMgJiYgb3B0aW9ucy5tZXNzYWdlcy5yZXN0b3JlVGl0bGUpKSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5tZXNzYWdlcy5yZXN0b3JlVGl0bGUgPSBvcHRpb25zLm1lc3NhZ2VzLnJlc3RvcmVUaXRsZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcmVzZW50KG9wdGlvbnMubWVzc2FnZXMgJiYgb3B0aW9ucy5tZXNzYWdlcy5tYXhpbWl6ZVRpdGxlKSkge1xuICAgICAgICAgICAgaW5zdGFuY2UubWVzc2FnZXMubWF4aW1pemVUaXRsZSA9IG9wdGlvbnMubWVzc2FnZXMubWF4aW1pemVUaXRsZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcmVzZW50KG9wdGlvbnMubWVzc2FnZXMgJiYgb3B0aW9ucy5tZXNzYWdlcy5taW5pbWl6ZVRpdGxlKSkge1xuICAgICAgICAgICAgaW5zdGFuY2UubWVzc2FnZXMubWluaW1pemVUaXRsZSA9IG9wdGlvbnMubWVzc2FnZXMubWluaW1pemVUaXRsZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcmVzZW50KG9wdGlvbnMuYXV0b0ZvY3VzZWRFbGVtZW50KSkge1xuICAgICAgICAgICAgaW5zdGFuY2UuYXV0b0ZvY3VzZWRFbGVtZW50ID0gb3B0aW9ucy5hdXRvRm9jdXNlZEVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUHJlc2VudChvcHRpb25zLnN0YXRlKSkge1xuICAgICAgICAgICAgaW5zdGFuY2Uuc3RhdGUgPSBvcHRpb25zLnN0YXRlO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3RhdGUgPT09ICdtaW5pbWl6ZWQnKSB7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2Uua2VlcENvbnRlbnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmNvbnRlbnQgaW5zdGFuY2VvZiBUZW1wbGF0ZVJlZikge1xuICAgICAgICAgICAgaW5zdGFuY2UuY29udGVudFRlbXBsYXRlID0gb3B0aW9ucy5jb250ZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnRpdGxlQmFyQ29udGVudCBpbnN0YW5jZW9mIFRlbXBsYXRlUmVmKSB7XG4gICAgICAgICAgICBpbnN0YW5jZS50aXRsZUJhclRlbXBsYXRlID0gb3B0aW9ucy50aXRsZUJhckNvbnRlbnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29udGVudEZyb20oY29udGVudCwgY29udGFpbmVyLCB3aW5kb3dSZWYpIHtcbiAgICAgICAgY29uc3QgcmVuZGVyZXIgPSBjb250YWluZXIuaW5qZWN0b3IuZ2V0KFJlbmRlcmVyMik7XG4gICAgICAgIGxldCBub2RlcyA9IFtdO1xuICAgICAgICBsZXQgY29tcG9uZW50UmVmID0gbnVsbDtcbiAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgbm9kZXMgPSBbcmVuZGVyZXIuY3JlYXRlVGV4dChjb250ZW50KV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29udGVudCAmJiAhKGNvbnRlbnQgaW5zdGFuY2VvZiBUZW1wbGF0ZVJlZikpIHtcbiAgICAgICAgICAgIGNvbnN0IGluamVjdG9yID0gbmV3IFdpbmRvd0luamVjdG9yKCgpID0+IHdpbmRvd1JlZiwgY29udGFpbmVyLmluamVjdG9yKTtcbiAgICAgICAgICAgIGNvbnN0IGZhY3RvcnkgPSB0aGlzLnJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KGNvbnRlbnQpO1xuICAgICAgICAgICAgY29tcG9uZW50UmVmID0gY29udGFpbmVyLmNyZWF0ZUNvbXBvbmVudChmYWN0b3J5LCB1bmRlZmluZWQsIGluamVjdG9yKTtcbiAgICAgICAgICAgIG5vZGVzID0gW2NvbXBvbmVudFJlZi5sb2NhdGlvbi5uYXRpdmVFbGVtZW50XTtcbiAgICAgICAgICAgIHdpbmRvd1JlZi5jb250ZW50ID0gY29tcG9uZW50UmVmO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb21wb25lbnRSZWYsXG4gICAgICAgICAgICBub2RlczogW1xuICAgICAgICAgICAgICAgIFtdLFxuICAgICAgICAgICAgICAgIG5vZGVzIC8vIENvbnRlbnRcbiAgICAgICAgICAgIF1cbiAgICAgICAgfTtcbiAgICB9XG59O1xuV2luZG93U2VydmljZSA9IF9fZGVjb3JhdGUoW1xuICAgIEluamVjdGFibGUoKSxcbiAgICBfX3BhcmFtKDEsIEluamVjdChXaW5kb3dDb250YWluZXJTZXJ2aWNlKSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXG4gICAgICAgIFdpbmRvd0NvbnRhaW5lclNlcnZpY2VdKVxuXSwgV2luZG93U2VydmljZSk7XG5cbi8qKlxuICogUHJvdmlkZXMgYW4gaW5zZXJ0aW9uIHBvaW50IGZvciB0aGUgRGlhbG9ncyB3aGljaCBhcmUgY3JlYXRlZCB0aHJvdWdoIHRoZVxuICogRGlhbG9nIHNlcnZpY2UgKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBhcGlfZGlhbG9nX2RpYWxvZ3NlcnZpY2UgJX0jdG9jLW9wZW4pKS5cbiAqIENyZWF0ZWQgRGlhbG9ncyB3aWxsIGJlIG1vdW50ZWQgYWZ0ZXIgdGhhdCBlbGVtZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBodG1sLW5vLXJ1blxuICogPGRpdiBrZW5kb0RpYWxvZ0NvbnRhaW5lcj48L2Rpdj5cbiAqIGBgYFxuICovXG5sZXQgRGlhbG9nQ29udGFpbmVyRGlyZWN0aXZlID0gY2xhc3MgRGlhbG9nQ29udGFpbmVyRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIHNlcnZpY2UpIHtcbiAgICAgICAgc2VydmljZS5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgfVxufTtcbkRpYWxvZ0NvbnRhaW5lckRpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgIERpcmVjdGl2ZSh7XG4gICAgICAgIHNlbGVjdG9yOiAnW2tlbmRvRGlhbG9nQ29udGFpbmVyXSdcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1ZpZXdDb250YWluZXJSZWYsXG4gICAgICAgIERpYWxvZ0NvbnRhaW5lclNlcnZpY2VdKVxuXSwgRGlhbG9nQ29udGFpbmVyRGlyZWN0aXZlKTtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIE1lc3NhZ2VzIGV4dGVuZHMgQ29tcG9uZW50TWVzc2FnZXMge1xufVxuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgTWVzc2FnZXMucHJvdG90eXBlLCBcImNsb3NlVGl0bGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIE1lc3NhZ2VzLnByb3RvdHlwZSwgXCJyZXN0b3JlVGl0bGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIE1lc3NhZ2VzLnByb3RvdHlwZSwgXCJtYXhpbWl6ZVRpdGxlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBNZXNzYWdlcy5wcm90b3R5cGUsIFwibWluaW1pemVUaXRsZVwiLCB2b2lkIDApO1xuXG52YXIgTG9jYWxpemVkTWVzc2FnZXNEaXJlY3RpdmVfMTtcbi8qKlxuICogQGhpZGRlblxuICovXG5sZXQgTG9jYWxpemVkTWVzc2FnZXNEaXJlY3RpdmUgPSBMb2NhbGl6ZWRNZXNzYWdlc0RpcmVjdGl2ZV8xID0gY2xhc3MgTG9jYWxpemVkTWVzc2FnZXNEaXJlY3RpdmUgZXh0ZW5kcyBNZXNzYWdlcyB7XG4gICAgY29uc3RydWN0b3Ioc2VydmljZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xuICAgIH1cbn07XG5Mb2NhbGl6ZWRNZXNzYWdlc0RpcmVjdGl2ZSA9IExvY2FsaXplZE1lc3NhZ2VzRGlyZWN0aXZlXzEgPSBfX2RlY29yYXRlKFtcbiAgICBEaXJlY3RpdmUoe1xuICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwcm92aWRlOiBNZXNzYWdlcyxcbiAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBMb2NhbGl6ZWRNZXNzYWdlc0RpcmVjdGl2ZV8xKVxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBzZWxlY3RvcjogYFxuICAgIFtrZW5kb0RpYWxvZ0xvY2FsaXplZE1lc3NhZ2VzXSxcbiAgICBba2VuZG9XaW5kb3dMb2NhbGl6ZWRNZXNzYWdlc10sXG4gICAgW2tlbmRvRGlhbG9nVGl0bGVCYXJMb2NhbGl6ZWRNZXNzYWdlc11cbiAgYFxuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTG9jYWxpemF0aW9uU2VydmljZV0pXG5dLCBMb2NhbGl6ZWRNZXNzYWdlc0RpcmVjdGl2ZSk7XG5cbnZhciBDdXN0b21NZXNzYWdlc0NvbXBvbmVudF8xO1xuLyoqXG4gKiBDdXN0b20gY29tcG9uZW50IG1lc3NhZ2VzIG92ZXJyaWRlIGRlZmF1bHQgY29tcG9uZW50IG1lc3NhZ2VzXG4gKiAoW3NlZSBleGFtcGxlXSh7JSBzbHVnIGdsb2JhbGl6YXRpb25fZGlhbG9ncyAlfSN0b2MtbG9jYWxpemF0aW9uKSkuXG4gKi9cbmxldCBDdXN0b21NZXNzYWdlc0NvbXBvbmVudCA9IEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50XzEgPSBjbGFzcyBDdXN0b21NZXNzYWdlc0NvbXBvbmVudCBleHRlbmRzIE1lc3NhZ2VzIHtcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XG4gICAgfVxuICAgIGdldCBvdmVycmlkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufTtcbkN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50ID0gQ3VzdG9tTWVzc2FnZXNDb21wb25lbnRfMSA9IF9fZGVjb3JhdGUoW1xuICAgIENvbXBvbmVudCh7XG4gICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IE1lc3NhZ2VzLFxuICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50XzEpIC8vIHRzbGludDpkaXNhYmxlLWxpbmU6bm8tZm9yd2FyZC1yZWZcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgc2VsZWN0b3I6ICdrZW5kby1kaWFsb2ctbWVzc2FnZXMsIGtlbmRvLXdpbmRvdy1tZXNzYWdlcycsXG4gICAgICAgIHRlbXBsYXRlOiBgYFxuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTG9jYWxpemF0aW9uU2VydmljZV0pXG5dLCBDdXN0b21NZXNzYWdlc0NvbXBvbmVudCk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBTSEFSRURfRElSRUNUSVZFUyA9IFtcbiAgICBEaWFsb2dBY3Rpb25zQ29tcG9uZW50LFxuICAgIEN1c3RvbU1lc3NhZ2VzQ29tcG9uZW50LFxuICAgIExvY2FsaXplZE1lc3NhZ2VzRGlyZWN0aXZlXG5dO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmxldCBTaGFyZWRNb2R1bGUgPSBjbGFzcyBTaGFyZWRNb2R1bGUge1xufTtcblNoYXJlZE1vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgIE5nTW9kdWxlKHtcbiAgICAgICAgZGVjbGFyYXRpb25zOiBbU0hBUkVEX0RJUkVDVElWRVNdLFxuICAgICAgICBleHBvcnRzOiBbU0hBUkVEX0RJUkVDVElWRVMsIENvbW1vbk1vZHVsZV0sXG4gICAgICAgIGltcG9ydHM6IFtDb21tb25Nb2R1bGVdXG4gICAgfSlcbl0sIFNoYXJlZE1vZHVsZSk7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBESUFMT0dfRElSRUNUSVZFUyA9IFtcbiAgICBEaWFsb2dDb21wb25lbnQsXG4gICAgRGlhbG9nVGl0bGVCYXJDb21wb25lbnRcbl07XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFtOZ01vZHVsZV0oe3sgc2l0ZS5kYXRhLnVybHMuYW5ndWxhclsnbmdtb2R1bGVhcGknXSB9fSlcbiAqIGRlZmluaXRpb24gZm9yIHRoZSBEaWFsb2cgY29tcG9uZW50IHRoYXQgaW5jbHVkZXMgYWxsIERpYWxvZyBjb21wb25lbnRzIGFuZCBkaXJlY3RpdmVzLlxuICogSW1wb3J0cyBgRGlhbG9nTW9kdWxlYCBpbnRvIHRoZSBbcm9vdCBtb2R1bGVdKHt7IHNpdGUuZGF0YS51cmxzLmFuZ3VsYXJbJ25nbW9kdWxlcyddIH19I2FuZ3VsYXItbW9kdWxhcml0eSlcbiAqIG9mIHlvdXIgYXBwbGljYXRpb24gb3IgaW50byBhbnkgb3RoZXIgc3ViLW1vZHVsZSB0aGF0IHdpbGwgdXNlIHRoZSBEaWFsb2cgY29tcG9uZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0cy1uby1ydW5cbiAqIGltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG4gKiBpbXBvcnQgeyBCcm93c2VyTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlcic7XG4gKiBpbXBvcnQgeyBEaWFsb2dNb2R1bGUgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci1kaWFsb2cnO1xuICogaW1wb3J0IHsgQXBwQ29tcG9uZW50IH0gZnJvbSAnLi9hcHAuY29tcG9uZW50JztcbiAqXG4gKiBfQE5nTW9kdWxlKHtcbiAqICAgICBib290c3RyYXA6ICAgIFtBcHBDb21wb25lbnRdLFxuICogICAgIGRlY2xhcmF0aW9uczogW0FwcENvbXBvbmVudF0sXG4gKiAgICAgaW1wb3J0czogICAgICBbQnJvd3Nlck1vZHVsZSwgRGlhbG9nTW9kdWxlXVxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBBcHBNb2R1bGUge1xuICogfVxuICogYGBgXG4gKi9cbmxldCBEaWFsb2dNb2R1bGUgPSBjbGFzcyBEaWFsb2dNb2R1bGUge1xufTtcbkRpYWxvZ01vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgIE5nTW9kdWxlKHtcbiAgICAgICAgZGVjbGFyYXRpb25zOiBbRElBTE9HX0RJUkVDVElWRVMsIERpYWxvZ0NvbnRhaW5lckRpcmVjdGl2ZV0sXG4gICAgICAgIGVudHJ5Q29tcG9uZW50czogW0RJQUxPR19ESVJFQ1RJVkVTXSxcbiAgICAgICAgZXhwb3J0czogW0RJQUxPR19ESVJFQ1RJVkVTLCBTSEFSRURfRElSRUNUSVZFUywgRGlhbG9nQ29udGFpbmVyRGlyZWN0aXZlXSxcbiAgICAgICAgaW1wb3J0czogW1NoYXJlZE1vZHVsZV0sXG4gICAgICAgIHByb3ZpZGVyczogW0RpYWxvZ0NvbnRhaW5lclNlcnZpY2UsIERpYWxvZ1NlcnZpY2VdXG4gICAgfSlcbl0sIERpYWxvZ01vZHVsZSk7XG5cbi8qKlxuICogUHJvdmlkZXMgYW4gaW5zZXJ0aW9uIHBvaW50IGZvciB0aGUgV2luZG93cyB3aGljaCBhcmUgY3JlYXRlZCB0aHJvdWdoIHRoZVxuICogV2luZG93IHNlcnZpY2UgKFtzZWUgZXhhbXBsZV0oeyUgc2x1ZyBhcGlfZGlhbG9nX3dpbmRvd3NlcnZpY2UgJX0jdG9jLW9wZW4pKS5cbiAqIENyZWF0ZWQgV2luZG93cyB3aWxsIGJlIG1vdW50ZWQgYWZ0ZXIgdGhhdCBlbGVtZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBodG1sLW5vLXJ1blxuICogPGRpdiBrZW5kb1dpbmRvd0NvbnRhaW5lcj48L2Rpdj5cbiAqIGBgYFxuICovXG5sZXQgV2luZG93Q29udGFpbmVyRGlyZWN0aXZlID0gY2xhc3MgV2luZG93Q29udGFpbmVyRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIHNlcnZpY2UpIHtcbiAgICAgICAgc2VydmljZS5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgfVxufTtcbldpbmRvd0NvbnRhaW5lckRpcmVjdGl2ZSA9IF9fZGVjb3JhdGUoW1xuICAgIERpcmVjdGl2ZSh7XG4gICAgICAgIHNlbGVjdG9yOiAnW2tlbmRvV2luZG93Q29udGFpbmVyXSdcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW1ZpZXdDb250YWluZXJSZWYsXG4gICAgICAgIFdpbmRvd0NvbnRhaW5lclNlcnZpY2VdKVxuXSwgV2luZG93Q29udGFpbmVyRGlyZWN0aXZlKTtcblxuY29uc3QgV0lORE9XX0RJUkVDVElWRVMgPSBbXG4gICAgUmVzaXplSGFuZGxlRGlyZWN0aXZlLFxuICAgIFdpbmRvd0NvbXBvbmVudCxcbiAgICBXaW5kb3dUaXRsZUJhckNvbXBvbmVudCxcbiAgICBXaW5kb3dDbG9zZUFjdGlvbkRpcmVjdGl2ZSxcbiAgICBXaW5kb3dNaW5pbWl6ZUFjdGlvbkRpcmVjdGl2ZSxcbiAgICBXaW5kb3dNYXhpbWl6ZUFjdGlvbkRpcmVjdGl2ZSxcbiAgICBXaW5kb3dSZXN0b3JlQWN0aW9uRGlyZWN0aXZlXG5dO1xuY29uc3QgRU5UUllfQ09NUE9ORU5UUyA9IFtcbiAgICBXaW5kb3dDb21wb25lbnQsXG4gICAgV2luZG93VGl0bGVCYXJDb21wb25lbnRcbl07XG5jb25zdCBleHBvcnRlZE1vZHVsZXMgPSBbXG4gICAgV2luZG93Q29tcG9uZW50LFxuICAgIFdpbmRvd0Nsb3NlQWN0aW9uRGlyZWN0aXZlLFxuICAgIFdpbmRvd01pbmltaXplQWN0aW9uRGlyZWN0aXZlLFxuICAgIFdpbmRvd01heGltaXplQWN0aW9uRGlyZWN0aXZlLFxuICAgIFdpbmRvd1Jlc3RvcmVBY3Rpb25EaXJlY3RpdmUsXG4gICAgV2luZG93VGl0bGVCYXJDb21wb25lbnRcbl07XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFtOZ01vZHVsZV0oe3sgc2l0ZS5kYXRhLnVybHMuYW5ndWxhclsnbmdtb2R1bGVhcGknXSB9fSlcbiAqIGRlZmluaXRpb24gZm9yIHRoZSBXaW5kb3cgY29tcG9uZW50LiBJbXBvcnRzIGBXaW5kb3dNb2R1bGVgIGludG8gdGhlXG4gKiBbcm9vdCBtb2R1bGVdKHt7IHNpdGUuZGF0YS51cmxzLmFuZ3VsYXJbJ25nbW9kdWxlcyddIH19I2FuZ3VsYXItbW9kdWxhcml0eSlcbiAqIG9mIHlvdXIgYXBwbGljYXRpb24gb3IgaW50byBhbnkgb3RoZXIgc3ViLW1vZHVsZSB0aGF0IHdpbGwgdXNlIHRoZSBXaW5kb3cgY29tcG9uZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0cy1uby1ydW5cbiAqIGltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG4gKiBpbXBvcnQgeyBCcm93c2VyTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlcic7XG4gKiBpbXBvcnQgeyBXaW5kb3dNb2R1bGUgfSBmcm9tICdAcHJvZ3Jlc3Mva2VuZG8tYW5ndWxhci13aW5kb3cnO1xuICogaW1wb3J0IHsgQXBwQ29tcG9uZW50IH0gZnJvbSAnLi9hcHAuY29tcG9uZW50JztcbiAqXG4gKiBfQE5nTW9kdWxlKHtcbiAqICAgICBib290c3RyYXA6ICAgIFtBcHBDb21wb25lbnRdLFxuICogICAgIGRlY2xhcmF0aW9uczogW0FwcENvbXBvbmVudF0sXG4gKiAgICAgaW1wb3J0czogICAgICBbQnJvd3Nlck1vZHVsZSwgV2luZG93TW9kdWxlXVxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBBcHBNb2R1bGUge1xuICogfVxuICogYGBgXG4gKi9cbmxldCBXaW5kb3dNb2R1bGUgPSBjbGFzcyBXaW5kb3dNb2R1bGUge1xufTtcbldpbmRvd01vZHVsZSA9IF9fZGVjb3JhdGUoW1xuICAgIE5nTW9kdWxlKHtcbiAgICAgICAgZGVjbGFyYXRpb25zOiBbV0lORE9XX0RJUkVDVElWRVMsIFdpbmRvd0NvbnRhaW5lckRpcmVjdGl2ZV0sXG4gICAgICAgIGVudHJ5Q29tcG9uZW50czogW0VOVFJZX0NPTVBPTkVOVFNdLFxuICAgICAgICBleHBvcnRzOiBbZXhwb3J0ZWRNb2R1bGVzLCBTSEFSRURfRElSRUNUSVZFUywgV2luZG93Q29udGFpbmVyRGlyZWN0aXZlXSxcbiAgICAgICAgaW1wb3J0czogW1NoYXJlZE1vZHVsZSwgRHJhZ2dhYmxlTW9kdWxlXSxcbiAgICAgICAgcHJvdmlkZXJzOiBbV2luZG93Q29udGFpbmVyU2VydmljZSwgV2luZG93U2VydmljZV1cbiAgICB9KVxuXSwgV2luZG93TW9kdWxlKTtcblxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBbTmdNb2R1bGVdKHt7IHNpdGUuZGF0YS51cmxzLmFuZ3VsYXJbJ25nbW9kdWxlYXBpJ10gfX0pXG4gKiBkZWZpbml0aW9uIGZvciB0aGUgRGlhbG9ncyBjb21wb25lbnRzLlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogYGBgdHMtbm8tcnVuXG4gKiBpbXBvcnQgeyBEaWFsb2dzTW9kdWxlIH0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWFuZ3VsYXItZGlhbG9nJztcbiAqXG4gKiBpbXBvcnQgeyBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci1keW5hbWljJztcbiAqIGltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG4gKlxuICogaW1wb3J0IHsgQXBwQ29tcG9uZW50IH0gZnJvbSAnLi9hcHAuY29tcG9uZW50JztcbiAqXG4gKiBfQE5nTW9kdWxlKHtcbiAqICAgICBkZWNsYXJhdGlvbnM6IFtBcHBDb21wb25lbnRdLFxuICogICAgIGltcG9ydHM6ICAgICAgW0Jyb3dzZXJNb2R1bGUsIERpYWxvZ3NNb2R1bGVdLFxuICogICAgIGJvb3RzdHJhcDogICAgW0FwcENvbXBvbmVudF1cbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgQXBwTW9kdWxlIHt9XG4gKlxuICogcGxhdGZvcm1Ccm93c2VyRHluYW1pYygpLmJvb3RzdHJhcE1vZHVsZShBcHBNb2R1bGUpO1xuICpcbiAqIGBgYFxuICovXG5sZXQgRGlhbG9nc01vZHVsZSA9IGNsYXNzIERpYWxvZ3NNb2R1bGUge1xufTtcbkRpYWxvZ3NNb2R1bGUgPSBfX2RlY29yYXRlKFtcbiAgICBOZ01vZHVsZSh7XG4gICAgICAgIGV4cG9ydHM6IFtEaWFsb2dNb2R1bGUsIFdpbmRvd01vZHVsZV1cbiAgICB9KVxuXSwgRGlhbG9nc01vZHVsZSk7XG5cbi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0IHsgRElBTE9HX0RJUkVDVElWRVMsIERpYWxvZ0NvbnRhaW5lckRpcmVjdGl2ZSwgRGlhbG9nQ29udGFpbmVyU2VydmljZSwgQ3VzdG9tTWVzc2FnZXNDb21wb25lbnQsIERJQUxPR19MT0NBTElaQVRJT05fU0VSVklDRSwgTG9jYWxpemVkTWVzc2FnZXNEaXJlY3RpdmUsIE1lc3NhZ2VzLCBUaXRsZUJhckxvY2FsaXphdGlvblNlcnZpY2UsIFNIQVJFRF9ESVJFQ1RJVkVTLCBTaGFyZWRNb2R1bGUsIERyYWdSZXNpemVTZXJ2aWNlLCBOYXZpZ2F0aW9uU2VydmljZSwgV2luZG93Q29udGFpbmVyRGlyZWN0aXZlLCBXaW5kb3dDb250YWluZXJTZXJ2aWNlLCBSZXNpemVIYW5kbGVEaXJlY3RpdmUsIERpYWxvZ0NvbXBvbmVudCwgRGlhbG9nVGl0bGVCYXJDb21wb25lbnQsIERpYWxvZ0NvbnRlbnRCYXNlLCBEaWFsb2dBY3Rpb25zQ29tcG9uZW50LCBEaWFsb2dTZXJ2aWNlLCBEaWFsb2dDbG9zZVJlc3VsdCwgRGlhbG9nUmVmLCBEaWFsb2dTZXR0aW5ncywgRGlhbG9nQWN0aW9uLCBXaW5kb3dDb21wb25lbnQsIFdpbmRvd1RpdGxlQmFyQ29tcG9uZW50LCBXaW5kb3dNYXhpbWl6ZUFjdGlvbkRpcmVjdGl2ZSwgV2luZG93TWluaW1pemVBY3Rpb25EaXJlY3RpdmUsIFdpbmRvd0Nsb3NlQWN0aW9uRGlyZWN0aXZlLCBXaW5kb3dSZXN0b3JlQWN0aW9uRGlyZWN0aXZlLCBXaW5kb3dTZXR0aW5ncywgV2luZG93UmVmLCBXaW5kb3dDbG9zZVJlc3VsdCwgV2luZG93U2VydmljZSwgRGlhbG9nTW9kdWxlLCBXaW5kb3dNb2R1bGUsIERpYWxvZ3NNb2R1bGUgfTtcbiJdfQ==","map":null,"metadata":{},"sourceType":"module"}